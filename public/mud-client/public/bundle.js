var mudclient=function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var n={exports:{}};
/*!
	 * Materialize v1.0.0 (http://materializecss.com)
	 * Copyright 2014-2017 Materialize
	 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
	 */function r(){}function o(e,t){for(const i in t)e[i]=t[i];return e}function s(e){return e()}function a(){return Object.create(null)}function l(e){e.forEach(s)}function c(e){return"function"==typeof e}function u(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let h;function d(e,t){return h||(h=document.createElement("a")),h.href=t,e===h.href}function f(e,...t){if(null==e)return r;const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function p(e){let t;return f(e,e=>t=e)(),t}function v(e,t,i){e.$$.on_destroy.push(f(t,i))}function _(e,t,i,n){if(e){const r=m(e,t,i,n);return e[0](r)}}function m(e,t,i,n){return e[1]&&n?o(i.ctx.slice(),e[1](n(t))):i.ctx}function g(e,t,i,n){if(e[2]&&n){const r=e[2](n(i));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],i=Math.max(t.dirty.length,r.length);for(let n=0;n<i;n+=1)e[n]=t.dirty[n]|r[n];return e}return t.dirty|r}return t.dirty}function y(e,t,i,n,r,o){if(r){const s=m(t,i,n,o);e.p(s,r)}}function b(e){if(e.ctx.length>32){const t=[],i=e.ctx.length/32;for(let e=0;e<i;e++)t[e]=-1;return t}return-1}!function(t,i){var n=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
/*! cash-dom 1.3.5, https://github.com/kenwheeler/cash @license MIT */window.cash=function(){var e,t=document,i=window,n=Array.prototype,r=n.slice,o=n.filter,s=n.push,a=function(){},l=function(e){return typeof e==typeof a&&e.call},c=function(e){return"string"==typeof e},u=/^#[\w-]*$/,h=/^\.[\w-]*$/,d=/<.+>/,f=/^\w+$/;function p(e,i){return i=i||t,h.test(e)?i.getElementsByClassName(e.slice(1)):f.test(e)?i.getElementsByTagName(e):i.querySelectorAll(e)}function v(i){if(!e){var n=(e=t.implementation.createHTMLDocument(null)).createElement("base");n.href=t.location.href,e.head.appendChild(n)}return e.body.innerHTML=i,e.body.childNodes}function _(e){"loading"!==t.readyState?e():t.addEventListener("DOMContentLoaded",e)}function m(e,n){if(!e)return this;if(e.cash&&e!==i)return e;var r,o=e,s=0;if(c(e))o=u.test(e)?t.getElementById(e.slice(1)):d.test(e)?v(e):p(e,n);else if(l(e))return _(e),this;if(!o)return this;if(o.nodeType||o===i)this[0]=o,this.length=1;else for(r=this.length=o.length;s<r;s++)this[s]=o[s];return this}function g(e,t){return new m(e,t)}var y=g.fn=g.prototype=m.prototype={cash:!0,length:0,push:s,splice:n.splice,map:n.map,init:m};function b(e,t){for(var i=e.length,n=0;n<i&&!1!==t.call(e[n],e[n],n,e);n++);}function w(e,t){var i=e&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector);return!!i&&i.call(e,t)}function C(e){return c(e)?w:e.cash?function(t){return e.is(t)}:function(e,t){return e===t}}function S(e){return g(r.call(e).filter(function(e,t,i){return i.indexOf(e)===t}))}Object.defineProperty(y,"constructor",{value:g}),g.parseHTML=v,g.noop=a,g.isFunction=l,g.isString=c,g.extend=y.extend=function(e){e=e||{};var t=r.call(arguments),i=t.length,n=1;for(1===t.length&&(e=this,n=0);n<i;n++)if(t[n])for(var o in t[n])t[n].hasOwnProperty(o)&&(e[o]=t[n][o]);return e},g.extend({merge:function(e,t){for(var i=+t.length,n=e.length,r=0;r<i;n++,r++)e[n]=t[r];return e.length=n,e},each:b,matches:w,unique:S,isArray:Array.isArray,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}});var k=g.uid="_cash"+Date.now();function x(e){return e[k]=e[k]||{}}function E(e,t,i){return x(e)[t]=i}function L(e,t){var i=x(e);return void 0===i[t]&&(i[t]=e.dataset?e.dataset[t]:g(e).attr("data-"+t)),i[t]}function M(e,t){var i=x(e);i?delete i[t]:e.dataset?delete e.dataset[t]:g(e).removeAttr("data-"+name)}y.extend({data:function(e,t){if(c(e))return void 0===t?L(this[0],e):this.each(function(i){return E(i,e,t)});for(var i in e)this.data(i,e[i]);return this},removeData:function(e){return this.each(function(t){return M(t,e)})}});var O=/\S+/g;function T(e){return c(e)&&e.match(O)}function D(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function R(e,t,i){e.classList?e.classList.add(t):i.indexOf(" "+t+" ")&&(e.className+=" "+t)}function A(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}y.extend({addClass:function(e){var t=T(e);return t?this.each(function(e){var i=" "+e.className+" ";b(t,function(t){R(e,t,i)})}):this},attr:function(e,t){if(e){if(c(e))return void 0===t?this[0]?this[0].getAttribute?this[0].getAttribute(e):this[0][e]:void 0:this.each(function(i){i.setAttribute?i.setAttribute(e,t):i[e]=t});for(var i in e)this.attr(i,e[i]);return this}},hasClass:function(e){var t=!1,i=T(e);return i&&i.length&&this.each(function(e){return!(t=D(e,i[0]))}),t},prop:function(e,t){if(c(e))return void 0===t?this[0][e]:this.each(function(i){i[e]=t});for(var i in e)this.prop(i,e[i]);return this},removeAttr:function(e){return this.each(function(t){t.removeAttribute?t.removeAttribute(e):delete t[e]})},removeClass:function(e){if(!arguments.length)return this.attr("class","");var t=T(e);return t?this.each(function(e){b(t,function(t){A(e,t)})}):this},removeProp:function(e){return this.each(function(t){delete t[e]})},toggleClass:function(e,t){if(void 0!==t)return this[t?"addClass":"removeClass"](e);var i=T(e);return i?this.each(function(e){var t=" "+e.className+" ";b(i,function(i){D(e,i)?A(e,i):R(e,i,t)})}):this}}),y.extend({add:function(e,t){return S(g.merge(this,g(e,t)))},each:function(e){return b(this,e),this},eq:function(e){return g(this.get(e))},filter:function(e){if(!e)return this;var t=l(e)?e:C(e);return g(o.call(this,function(i){return t(i,e)}))},first:function(){return this.eq(0)},get:function(e){return void 0===e?r.call(this):e<0?this[e+this.length]:this[e]},index:function(e){var t=e?g(e)[0]:this[0],i=e?this:g(t).parent().children();return r.call(i).indexOf(t)},last:function(){return this.eq(-1)}});var P,B,I,H,j=(I=/(?:^\w|[A-Z]|\b\w)/g,H=/[\s-_]+/g,function(e){return e.replace(I,function(e,t){return e[0===t?"toLowerCase":"toUpperCase"]()}).replace(H,"")}),W=(P={},B=document.createElement("div").style,function(e){if(e=j(e),P[e])return P[e];var t=e.charAt(0).toUpperCase()+e.slice(1);return b((e+" "+["webkit","moz","ms","o"].join(t+" ")+t).split(" "),function(t){if(t in B)return P[t]=e=P[e]=t,!1}),P[e]});function F(e,t){return parseInt(i.getComputedStyle(e[0],null)[t],10)||0}function $(e,t,i){var n=L(e,"_cashEvents")||E(e,"_cashEvents",{});n[t]=n[t]||[],n[t].push(i),e.addEventListener(t,i)}function N(e,t,i){var n,r=L(e,"_cashEvents"),o=r&&r[t];o&&(i?(e.removeEventListener(t,i),(n=o.indexOf(i))>=0&&o.splice(n,1)):(b(o,function(i){e.removeEventListener(t,i)}),o=[]))}function z(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t).replace(/%20/g,"+")}function U(e){var t=[];return b(e.options,function(e){e.selected&&t.push(e.value)}),t.length?t:null}function q(e){var t=e.selectedIndex;return t>=0?e.options[t].value:null}function Y(e){var t=e.type;if(!t)return null;switch(t.toLowerCase()){case"select-one":return q(e);case"select-multiple":return U(e);case"radio":case"checkbox":return e.checked?e.value:null;default:return e.value?e.value:null}}function V(e,t,i){if(i){var n=e.childNodes[0];e.insertBefore(t,n)}else e.appendChild(t)}function K(e,t,i){var n=c(t);n||!t.length?b(e,n?function(e){return e.insertAdjacentHTML(i?"afterbegin":"beforeend",t)}:function(e,n){return V(e,0===n?t:t.cloneNode(!0),i)}):b(t,function(t){return K(e,t,i)})}g.prefixedProp=W,g.camelCase=j,y.extend({css:function(e,t){if(c(e))return e=W(e),arguments.length>1?this.each(function(i){return i.style[e]=t}):i.getComputedStyle(this[0])[e];for(var n in e)this.css(n,e[n]);return this}}),b(["Width","Height"],function(e){var t=e.toLowerCase();y[t]=function(){return this[0].getBoundingClientRect()[t]},y["inner"+e]=function(){return this[0]["client"+e]},y["outer"+e]=function(t){return this[0]["offset"+e]+(t?F(this,"margin"+("Width"===e?"Left":"Top"))+F(this,"margin"+("Width"===e?"Right":"Bottom")):0)}}),y.extend({off:function(e,t){return this.each(function(i){return N(i,e,t)})},on:function(e,t,i,n){var r;if(!c(e)){for(var o in e)this.on(o,t,e[o]);return this}return l(t)&&(i=t,t=null),"ready"===e?(_(i),this):(t&&(r=i,i=function(e){for(var i=e.target;!w(i,t);){if(i===this||null===i)return!1;i=i.parentNode}i&&r.call(i,e)}),this.each(function(t){var r=i;n&&(r=function(){i.apply(this,arguments),N(t,e,r)}),$(t,e,r)}))},one:function(e,t,i){return this.on(e,t,i,!0)},ready:_,trigger:function(e,t){if(document.createEvent){var i=document.createEvent("HTMLEvents");return i.initEvent(e,!0,!1),i=this.extend(i,t),this.each(function(e){return e.dispatchEvent(i)})}}}),y.extend({serialize:function(){var e="";return b(this[0].elements||this,function(t){if(!t.disabled&&"FIELDSET"!==t.tagName){var i=t.name;switch(t.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var n=Y(t);null!==n&&b(n,function(t){e+=z(i,t)});break;default:var r=Y(t);null!==r&&(e+=z(i,r))}}}),e.substr(1)},val:function(e){return void 0===e?Y(this[0]):this.each(function(t){return t.value=e})}}),y.extend({after:function(e){return g(e).insertAfter(this),this},append:function(e){return K(this,e),this},appendTo:function(e){return K(g(e),this),this},before:function(e){return g(e).insertBefore(this),this},clone:function(){return g(this.map(function(e){return e.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(e){if(void 0===e)return this[0].innerHTML;var t=e.nodeType?e[0].outerHTML:e;return this.each(function(e){return e.innerHTML=t})},insertAfter:function(e){var t=this;return g(e).each(function(e,i){var n=e.parentNode,r=e.nextSibling;t.each(function(e){n.insertBefore(0===i?e:e.cloneNode(!0),r)})}),this},insertBefore:function(e){var t=this;return g(e).each(function(e,i){var n=e.parentNode;t.each(function(t){n.insertBefore(0===i?t:t.cloneNode(!0),e)})}),this},prepend:function(e){return K(this,e,!0),this},prependTo:function(e){return K(g(e),this,!0),this},remove:function(){return this.each(function(e){if(e.parentNode)return e.parentNode.removeChild(e)})},text:function(e){return void 0===e?this[0].textContent:this.each(function(t){return t.textContent=e})}});var G=t.documentElement;return y.extend({position:function(){var e=this[0];return{left:e.offsetLeft,top:e.offsetTop}},offset:function(){var e=this[0].getBoundingClientRect();return{top:e.top+i.pageYOffset-G.clientTop,left:e.left+i.pageXOffset-G.clientLeft}},offsetParent:function(){return g(this[0].offsetParent)}}),y.extend({children:function(e){var t=[];return this.each(function(e){s.apply(t,e.children)}),t=S(t),e?t.filter(function(t){return w(t,e)}):t},closest:function(e){return!e||this.length<1?g():this.is(e)?this.filter(e):this.parent().closest(e)},is:function(e){if(!e)return!1;var t=!1,i=C(e);return this.each(function(n){return!(t=i(n,e))}),t},find:function(e){if(!e||e.nodeType)return g(e&&this.has(e).length?e:null);var t=[];return this.each(function(i){s.apply(t,p(e,i))}),S(t)},has:function(e){var t=c(e)?function(t){return 0!==p(e,t).length}:function(t){return t.contains(e)};return this.filter(t)},next:function(){return g(this[0].nextElementSibling)},not:function(e){if(!e)return this;var t=C(e);return this.filter(function(i){return!t(i,e)})},parent:function(){var e=[];return this.each(function(t){t&&t.parentNode&&e.push(t.parentNode)}),S(e)},parents:function(e){var i,n=[];return this.each(function(r){for(i=r;i&&i.parentNode&&i!==t.body.parentNode;)i=i.parentNode,(!e||e&&w(i,e))&&n.push(i)}),S(n)},prev:function(){return g(this[0].previousElementSibling)},siblings:function(e){var t=this.parent().children(e),i=this[0];return t.filter(function(e){return e!==i})}}),g}();var l=function(){function e(t,i,n){a(this,e),i instanceof Element||console.error(Error(i+" is not an HTML Element"));var r=t.getInstance(i);r&&r.destroy(),this.el=i,this.$el=cash(i)}return r(e,null,[{key:"init",value:function(e,t,i){var n=null;if(t instanceof Element)n=new e(t,i);else if(t&&(t.jquery||t.cash||t instanceof NodeList)){for(var r=[],o=0;o<t.length;o++)r.push(new e(t[o],i));n=r}return n}}]),e}();!function(e){e.Package?M={}:e.M={},M.jQueryLoaded=!!e.jQuery}(window),i.nodeType||(!t.nodeType&&t.exports&&(i=t.exports=M),i.default=M),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;document.addEventListener("keydown",function(e){M.keyDown=!0,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!0)},!0),document.addEventListener("keyup",function(e){M.keyDown=!1,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!1)},!0),document.addEventListener("focus",function(e){M.keyDown&&document.body.classList.add("keyboard-focused")},!0),document.addEventListener("blur",function(e){document.body.classList.remove("keyboard-focused")},!0),M.initializeJqueryWrapper=function(e,t,i){jQuery.fn[t]=function(n){if(e.prototype[n]){var r=Array.prototype.slice.call(arguments,1);if("get"===n.slice(0,3)){var o=this.first()[0][i];return o[n].apply(o,r)}return this.each(function(){var e=this[i];e[n].apply(e,r)})}if("object"==typeof n||!n)return e.init(this,arguments[0]),this;jQuery.error("Method "+n+" does not exist on jQuery."+t)}},M.AutoInit=function(e){var t=e||document.body,i={Autocomplete:t.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:t.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:t.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:t.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:t.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:t.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:t.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:t.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:t.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:t.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:t.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:t.querySelectorAll("select:not(.no-autoinit)"),Sidenav:t.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:t.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:t.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:t.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:t.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:t.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var n in i){M[n].init(i[n])}},M.objectSelectorString=function(e){return((e.prop("tagName")||"")+(e.attr("id")||"")+(e.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),M.escapeHash=function(e){return e.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(e){var t=$(e),i=t.add(t.parents()),n=!1;return i.each(function(){if("fixed"===$(this).css("position"))return n=!0,!1}),n},M.checkWithinContainer=function(e,t,i){var n={top:!1,right:!1,bottom:!1,left:!1},r=e.getBoundingClientRect(),o=e===document.body?Math.max(r.bottom,window.innerHeight):r.bottom,s=e.scrollLeft,a=e.scrollTop,l=t.left-s,c=t.top-a;return(l<r.left+i||l<i)&&(n.left=!0),(l+t.width>r.right-i||l+t.width>window.innerWidth-i)&&(n.right=!0),(c<r.top+i||c<i)&&(n.top=!0),(c+t.height>o-i||c+t.height>window.innerHeight-i)&&(n.bottom=!0),n},M.checkPossibleAlignments=function(e,t,i,n){var r={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},o="visible"===getComputedStyle(t).overflow,s=t.getBoundingClientRect(),a=Math.min(s.height,window.innerHeight),l=Math.min(s.width,window.innerWidth),c=e.getBoundingClientRect(),u=t.scrollLeft,h=t.scrollTop,d=i.left-u,f=i.top-h,p=i.top+c.height-h;return r.spaceOnRight=o?window.innerWidth-(c.left+i.width):l-(d+i.width),r.spaceOnRight<0&&(r.left=!1),r.spaceOnLeft=o?c.right-i.width:d-i.width+c.width,r.spaceOnLeft<0&&(r.right=!1),r.spaceOnBottom=o?window.innerHeight-(c.top+i.height+n):a-(f+i.height+n),r.spaceOnBottom<0&&(r.top=!1),r.spaceOnTop=o?c.bottom-(i.height+n):p-(i.height-n),r.spaceOnTop<0&&(r.bottom=!1),r},M.getOverflowParent=function(e){return null==e?null:e===document.body||"visible"!==getComputedStyle(e).overflow?e:M.getOverflowParent(e.parentElement)},M.getIdFromTrigger=function(e){var t=e.getAttribute("data-target");return t||(t=(t=e.getAttribute("href"))?t.slice(1):""),t},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};
/**
	 * Get time in ms
	 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
	 * @type {function}
	 * @return {number}
	 */
var c=Date.now||function(){return(new Date).getTime()};
/**
	 * Returns a function, that, when invoked, will only be triggered at most once
	 * during a given window of time. Normally, the throttled function will run
	 * as much as it can, without ever going more than once per `wait` duration;
	 * but if you'd like to disable the execution on the leading edge, pass
	 * `{leading: false}`. To disable execution on the trailing edge, ditto.
	 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
	 * @param {function} func
	 * @param {number} wait
	 * @param {Object=} options
	 * @returns {Function}
	 */M.throttle=function(e,t,i){var n=void 0,r=void 0,o=void 0,s=null,a=0;i||(i={});var l=function(){a=!1===i.leading?0:c(),s=null,o=e.apply(n,r),n=r=null};return function(){var u=c();a||!1!==i.leading||(a=u);var h=t-(u-a);return n=this,r=arguments,h<=0?(clearTimeout(s),s=null,a=u,o=e.apply(n,r),n=r=null):s||!1===i.trailing||(s=setTimeout(l,h)),o}};var u={scope:{}};u.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){if(i.get||i.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=i.value)},u.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==e&&null!=e?e:t},u.global=u.getGlobal(e),u.SYMBOL_PREFIX="jscomp_symbol_",u.initSymbol=function(){u.initSymbol=function(){},u.global.Symbol||(u.global.Symbol=u.Symbol)},u.symbolCounter_=0,u.Symbol=function(e){return u.SYMBOL_PREFIX+(e||"")+u.symbolCounter_++},u.initSymbolIterator=function(){u.initSymbol();var e=u.global.Symbol.iterator;e||(e=u.global.Symbol.iterator=u.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&u.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return u.arrayIterator(this)}}),u.initSymbolIterator=function(){}},u.arrayIterator=function(e){var t=0;return u.iteratorPrototype(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})},u.iteratorPrototype=function(e){return u.initSymbolIterator(),(e={next:e})[u.global.Symbol.iterator]=function(){return this},e},u.array=u.array||{},u.iteratorFromArray=function(e,t){u.initSymbolIterator(),e instanceof String&&(e+="");var i=0,n={next:function(){if(i<e.length){var r=i++;return{value:t(r,e[r]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n},u.polyfill=function(e,t,i,n){if(t){for(i=u.global,e=e.split("."),n=0;n<e.length-1;n++){var r=e[n];r in i||(i[r]={}),i=i[r]}(t=t(n=i[e=e[e.length-1]]))!=n&&null!=t&&u.defineProperty(i,e,{configurable:!0,writable:!0,value:t})}},u.polyfill("Array.prototype.keys",function(e){return e||function(){return u.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");var h=e;M.anime=function(){function e(e){if(!j.col(e))try{return document.querySelectorAll(e)}catch(e){}}function t(e,t){for(var i=e.length,n=2<=arguments.length?arguments[1]:void 0,r=[],o=0;o<i;o++)if(o in e){var s=e[o];t.call(n,s,o,e)&&r.push(s)}return r}function i(e){return e.reduce(function(e,t){return e.concat(j.arr(t)?i(t):t)},[])}function n(t){return j.arr(t)?t:(j.str(t)&&(t=e(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function r(e,t){return e.some(function(e){return e===t})}function o(e){var t,i={};for(t in e)i[t]=e[t];return i}function s(e,t){var i,n=o(e);for(i in e)n[i]=t.hasOwnProperty(i)?t[i]:e[i];return n}function a(e,t){var i,n=o(e);for(i in t)n[i]=j.und(e[i])?t[i]:e[i];return n}function l(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,n){return t+t+i+i+n+n});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+(e=parseInt(t[1],16))+","+parseInt(t[2],16)+","+(t=parseInt(t[3],16))+",1)"}function c(e){function t(e,t,i){return 0>i&&(i+=1),1<i&&--i,i<1/6?e+6*(t-e)*i:.5>i?t:i<2/3?e+(t-e)*(2/3-i)*6:e}var i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e);e=parseInt(i[1])/360;var n=parseInt(i[2])/100,r=parseInt(i[3])/100;if(i=i[4]||1,0==n)r=n=e=r;else{var o=.5>r?r*(1+n):r+n-r*n,s=2*r-o;r=t(s,o,e+1/3),n=t(s,o,e),e=t(s,o,e-1/3)}return"rgba("+255*r+","+255*n+","+255*e+","+i+")"}function u(e){if(e=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e))return e[2]}function d(e){return-1<e.indexOf("translate")||"perspective"===e?"px":-1<e.indexOf("rotate")||-1<e.indexOf("skew")?"deg":void 0}function f(e,t){return j.fnc(e)?e(t.target,t.id,t.total):e}function p(e,t){if(t in e.style)return getComputedStyle(e).getPropertyValue(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function v(e,t){return j.dom(e)&&r(H,t)?"transform":j.dom(e)&&(e.getAttribute(t)||j.svg(e)&&e[t])?"attribute":j.dom(e)&&"transform"!==t&&p(e,t)?"css":null!=e[t]?"object":void 0}function _(e,i){var n=d(i);if(n=-1<i.indexOf("scale")?1:0+n,!(e=e.style.transform))return n;for(var r=[],o=[],s=[],a=/(\w+)\((.+?)\)/g;r=a.exec(e);)o.push(r[1]),s.push(r[2]);return e=t(s,function(e,t){return o[t]===i}),e.length?e[0]:n}function m(e,t){switch(v(e,t)){case"transform":return _(e,t);case"css":return p(e,t);case"attribute":return e.getAttribute(t)}return e[t]||0}function g(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var n=u(e)||0;switch(t=parseFloat(t),e=parseFloat(e.replace(i[0],"")),i[0][0]){case"+":return t+e+n;case"-":return t-e+n;case"*":return t*e+n}}function y(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function b(e){e=e.points;for(var t,i=0,n=0;n<e.numberOfItems;n++){var r=e.getItem(n);0<n&&(i+=y(t,r)),t=r}return i}function w(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return 2*Math.PI*e.getAttribute("r");case"rect":return 2*e.getAttribute("width")+2*e.getAttribute("height");case"line":return y({x:e.getAttribute("x1"),y:e.getAttribute("y1")},{x:e.getAttribute("x2"),y:e.getAttribute("y2")});case"polyline":return b(e);case"polygon":var t=e.points;return b(e)+y(t.getItem(t.numberOfItems-1),t.getItem(0))}}function C(e,t){function i(i){return i=void 0===i?0:i,e.el.getPointAtLength(1<=t+i?t+i:0)}var n=i(),r=i(-1),o=i(1);switch(e.property){case"x":return n.x;case"y":return n.y;case"angle":return 180*Math.atan2(o.y-r.y,o.x-r.x)/Math.PI}}function S(e,t){var i,n=/-?\d*\.?\d+/g;if(i=j.pth(e)?e.totalLength:e,j.col(i))if(j.rgb(i)){var r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(i);i=r?"rgba("+r[1]+",1)":i}else i=j.hex(i)?l(i):j.hsl(i)?c(i):void 0;else r=(r=u(i))?i.substr(0,i.length-r.length):i,i=t&&!/\s/g.test(i)?r+t:r;return{original:i+="",numbers:i.match(n)?i.match(n).map(Number):[0],strings:j.str(e)||t?i.split(n):[]}}function k(e){return t(e=e?i(j.arr(e)?e.map(n):n(e)):[],function(e,t,i){return i.indexOf(e)===t})}function x(e){var t=k(e);return t.map(function(e,i){return{target:e,id:i,total:t.length}})}function E(e,t){var i=o(t);if(j.arr(e)){var r=e.length;2!==r||j.obj(e[0])?j.fnc(t.duration)||(i.duration=t.duration/r):e={value:e}}return n(e).map(function(e,i){return i=i?0:t.delay,e=j.obj(e)&&!j.pth(e)?e:{value:e},j.und(e.delay)&&(e.delay=i),e}).map(function(e){return a(e,i)})}function L(e,t){var i,n={};for(i in e){var r=f(e[i],t);j.arr(r)&&(r=r.map(function(e){return f(e,t)}),1===r.length&&(r=r[0])),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}function M(e){return j.arr(e)?W.apply(this,e):F[e]}function O(e,t){var i;return e.tweens.map(function(n){var r=(n=L(n,t)).value,o=m(t.target,e.name),s=i?i.to.original:o,a=(s=j.arr(r)?r[0]:s,g(j.arr(r)?r[1]:r,s));return o=u(a)||u(s)||u(o),n.from=S(s,o),n.to=S(a,o),n.start=i?i.end:e.offset,n.end=n.start+n.delay+n.duration,n.easing=M(n.easing),n.elasticity=(1e3-Math.min(Math.max(n.elasticity,1),999))/1e3,n.isPath=j.pth(r),n.isColor=j.col(n.from.original),n.isColor&&(n.round=1),i=n})}function T(e,n){return t(i(e.map(function(e){return n.map(function(t){var i=v(e.target,t.name);if(i){var n=O(t,e);t={type:i,property:t.name,animatable:e,tweens:n,duration:n[n.length-1].end,delay:n[0].delay}}else t=void 0;return t})})),function(e){return!j.und(e)})}function D(e,t,i,n){var r="delay"===e;return t.length?(r?Math.min:Math.max).apply(Math,t.map(function(t){return t[e]})):r?n.delay:i.offset+n.delay+n.duration}function R(e){var t,i=s(B,e),n=s(I,e),r=x(e.targets),o=[],l=a(i,n);for(t in e)l.hasOwnProperty(t)||"targets"===t||o.push({name:t,offset:l.offset,tweens:E(e[t],n)});return a(i,{children:[],animatables:r,animations:e=T(r,o),duration:D("duration",e,i,n),delay:D("delay",e,i,n)})}function A(e){function i(){return window.Promise&&new Promise(function(e){return h=e})}function n(e){return f.reversed?f.duration-e:e}function r(e){for(var i=0,n={},r=f.animations,o=r.length;i<o;){var s=r[i],a=s.animatable,l=(c=s.tweens)[d=c.length-1];d&&(l=t(c,function(t){return e<t.end})[0]||l);for(var c=Math.min(Math.max(e-l.start-l.delay,0),l.duration)/l.duration,u=isNaN(c)?1:l.easing(c,l.elasticity),h=(c=l.to.strings,l.round),d=[],v=void 0,_=(v=l.to.numbers.length,0);_<v;_++){var m=void 0,g=(m=l.to.numbers[_],l.from.numbers[_]);m=l.isPath?C(l.value,u*m):g+u*(m-g),h&&(l.isColor&&2<_||(m=Math.round(m*h)/h)),d.push(m)}if(l=c.length)for(v=c[0],u=0;u<l;u++)h=c[u+1],_=d[u],isNaN(_)||(v=h?v+(_+h):v+(_+" "));else v=d[0];$[s.type](a.target,s.property,v,n,a.id),s.currentValue=v,i++}if(i=Object.keys(n).length)for(r=0;r<i;r++)P||(P=p(document.body,"transform")?"transform":"-webkit-transform"),f.animatables[r].target.style[P]=n[r].join(" ");f.currentTime=e,f.progress=e/f.duration*100}function o(e){f[e]&&f[e](f)}function s(){f.remaining&&!0!==f.remaining&&f.remaining--}function a(e){var t=f.duration,a=f.offset,p=a+f.delay,v=f.currentTime,_=f.reversed,m=n(e);if(f.children.length){var g=f.children,y=g.length;if(m>=f.currentTime)for(var b=0;b<y;b++)g[b].seek(m);else for(;y--;)g[y].seek(m)}(m>=p||!t)&&(f.began||(f.began=!0,o("begin")),o("run")),m>a&&m<t?r(m):(m<=a&&0!==v&&(r(0),_&&s()),(m>=t&&v!==t||!t)&&(r(t),_||s())),o("update"),e>=t&&(f.remaining?(c=l,"alternate"===f.direction&&(f.reversed=!f.reversed)):(f.pause(),f.completed||(f.completed=!0,o("complete"),"Promise"in window&&(h(),d=i()))),u=0)}e=void 0===e?{}:e;var l,c,u=0,h=null,d=i(),f=R(e);return f.reset=function(){var e=f.direction,t=f.loop;for(f.currentTime=0,f.progress=0,f.paused=!0,f.began=!1,f.completed=!1,f.reversed="reverse"===e,f.remaining="alternate"===e&&1===t?2:t,r(0),e=f.children.length;e--;)f.children[e].reset()},f.tick=function(e){l=e,c||(c=l),a((u+l-c)*A.speed)},f.seek=function(e){a(n(e))},f.pause=function(){var e=N.indexOf(f);-1<e&&N.splice(e,1),f.paused=!0},f.play=function(){f.paused&&(f.paused=!1,c=0,u=n(f.currentTime),N.push(f),z||U())},f.reverse=function(){f.reversed=!f.reversed,c=0,u=n(f.currentTime)},f.restart=function(){f.pause(),f.reset(),f.play()},f.finished=d,f.reset(),f.autoplay&&f.play(),f}var P,B={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},I={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},H="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),j={arr:function(e){return Array.isArray(e)},obj:function(e){return-1<Object.prototype.toString.call(e).indexOf("Object")},pth:function(e){return j.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},dom:function(e){return e.nodeType||j.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return j.hex(e)||j.rgb(e)||j.hsl(e)}},W=function(){function e(e,t,i){return(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e}return function(t,i,n,r){if(0<=t&&1>=t&&0<=n&&1>=n){var o=new Float32Array(11);if(t!==i||n!==r)for(var s=0;11>s;++s)o[s]=e(.1*s,t,n);return function(s){if(t===i&&n===r)return s;if(0===s)return 0;if(1===s)return 1;for(var a=0,l=1;10!==l&&o[l]<=s;++l)a+=.1;--l,l=a+(s-o[l])/(o[l+1]-o[l])*.1;var c=3*(1-3*n+3*t)*l*l+2*(3*n-6*t)*l+3*t;if(.001<=c){for(a=0;4>a&&0!=(c=3*(1-3*n+3*t)*l*l+2*(3*n-6*t)*l+3*t);++a){var u=e(l,t,n)-s;l-=u/c}s=l}else if(0===c)s=l;else{l=a,a+=.1;var h=0;do{0<(c=e(u=l+(a-l)/2,t,n)-s)?a=u:l=u}while(1e-7<Math.abs(c)&&10>++h);s=u}return e(s,i,r)}}}}(),F=function(){function e(e,t){return 0===e||1===e?e:-Math.pow(2,10*(e-1))*Math.sin(2*(e-1-t/(2*Math.PI)*Math.asin(1))*Math.PI/t)}var t,i="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),n={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],e],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(t,i){return 1-e(1-t,i)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(t,i){return.5>t?e(2*t,i)/2:1-e(-2*t+2,i)/2}]},r={linear:W(.25,.25,.75,.75)},o={};for(t in n)o.type=t,n[o.type].forEach(function(e){return function(t,n){r["ease"+e.type+i[n]]=j.fnc(t)?t:W.apply(h,t)}}(o)),o={type:o.type};return r}(),$={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,n,r){n[r]||(n[r]=[]),n[r].push(t+"("+i+")")}},N=[],z=0,U=function(){function e(){z=requestAnimationFrame(t)}function t(t){var i=N.length;if(i){for(var n=0;n<i;)N[n]&&N[n].tick(t),n++;e()}else cancelAnimationFrame(z),z=0}return e}();return A.version="2.2.0",A.speed=1,A.running=N,A.remove=function(e){e=k(e);for(var t=N.length;t--;)for(var i=N[t],n=i.animations,o=n.length;o--;)r(e,n[o].animatable.target)&&(n.splice(o,1),n.length||i.pause())},A.getValue=m,A.path=function(t,i){var n=j.str(t)?e(t)[0]:t,r=i||100;return function(e){return{el:n,property:e,totalLength:w(n)*(r/100)}}},A.setDashoffset=function(e){var t=w(e);return e.setAttribute("stroke-dasharray",t),t},A.bezier=W,A.easings=F,A.timeline=function(e){var t=A(e);return t.pause(),t.duration=0,t.add=function(i){return t.children.forEach(function(e){e.began=!0,e.completed=!0}),n(i).forEach(function(i){var n=a(i,s(I,e||{}));n.targets=n.targets||e.targets,i=t.duration;var r=n.offset;n.autoplay=!1,n.direction=t.direction,n.offset=j.und(r)?i:g(r,i),t.began=!0,t.completed=!0,t.seek(n.offset),(n=A(n)).began=!0,n.completed=!0,n.duration>i&&(t.duration=n.duration),t.children.push(n)}),t.seek(0),t.reset(),t.autoplay&&t.restart(),t},t},A.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},A}(),function(e,t){var i={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},c=function(l){function c(t,i){a(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,i));n.el.M_Collapsible=n,n.options=e.extend({},c.defaults,i),n.$headers=n.$el.children("li").children(".collapsible-header"),n.$headers.attr("tabindex",0),n._setupEventHandlers();var r=n.$el.children("li.active").children(".collapsible-body");return n.options.accordion?r.first().css("display","block"):r.css("display","block"),n}return s(c,l),r(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(t){t.addEventListener("keydown",e._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var e=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(t){t.removeEventListener("keydown",e._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(t){var i=e(t.target).closest(".collapsible-header");if(t.target&&i.length){var n=i.closest(".collapsible");if(n[0]===this.el){var r=i.closest("li"),o=n.children("li"),s=r[0].classList.contains("active"),a=o.index(r);s?this.close(a):this.open(a)}}}},{key:"_handleCollapsibleKeydown",value:function(e){13===e.keyCode&&this._handleCollapsibleClickBound(e)}},{key:"_animateIn",value:function(e){var i=this,n=this.$el.children("li").eq(e);if(n.length){var r=n.children(".collapsible-body");t.remove(r[0]),r.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var o=r.css("padding-top"),s=r.css("padding-bottom"),a=r[0].scrollHeight;r.css({paddingTop:0,paddingBottom:0}),t({targets:r[0],height:a,paddingTop:o,paddingBottom:s,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(e){r.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),"function"==typeof i.options.onOpenEnd&&i.options.onOpenEnd.call(i,n[0])}})}}},{key:"_animateOut",value:function(e){var i=this,n=this.$el.children("li").eq(e);if(n.length){var r=n.children(".collapsible-body");t.remove(r[0]),r.css("overflow","hidden"),t({targets:r[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){r.css({height:"",overflow:"",padding:"",display:""}),"function"==typeof i.options.onCloseEnd&&i.options.onCloseEnd.call(i,n[0])}})}}},{key:"open",value:function(t){var i=this,n=this.$el.children("li").eq(t);if(n.length&&!n[0].classList.contains("active")){if("function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,n[0]),this.options.accordion){var r=this.$el.children("li");this.$el.children("li.active").each(function(t){var n=r.index(e(t));i.close(n)})}n[0].classList.add("active"),this._animateIn(t)}}},{key:"close",value:function(e){var t=this.$el.children("li").eq(e);t.length&&t[0].classList.contains("active")&&("function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,t[0]),t[0].classList.remove("active"),this._animateOut(e))}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Collapsible}},{key:"defaults",get:function(){return i}}]),c}(l);M.Collapsible=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"collapsible","M_Collapsible")}(cash,M.anime),function(e,t){var i={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},c=function(l){function c(t,i){a(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,i));return n.el.M_Dropdown=n,c._dropdowns.push(n),n.id=M.getIdFromTrigger(t),n.dropdownEl=document.getElementById(n.id),n.$dropdownEl=e(n.dropdownEl),n.options=e.extend({},c.defaults,i),n.isOpen=!1,n.isScrollable=!1,n.isTouchMoving=!1,n.focusedIndex=-1,n.filterQuery=[],n.options.container?e(n.options.container).append(n.dropdownEl):n.$el.after(n.dropdownEl),n._makeDropdownFocusable(),n._resetFilterQueryBound=n._resetFilterQuery.bind(n),n._handleDocumentClickBound=n._handleDocumentClick.bind(n),n._handleDocumentTouchmoveBound=n._handleDocumentTouchmove.bind(n),n._handleDropdownClickBound=n._handleDropdownClick.bind(n),n._handleDropdownKeydownBound=n._handleDropdownKeydown.bind(n),n._handleTriggerKeydownBound=n._handleTriggerKeydown.bind(n),n._setupEventHandlers(),n}return s(c,l),r(c,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),c._dropdowns.splice(c._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(e){e.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(t){var i=t.toElement||t.relatedTarget,n=!!e(i).closest(".dropdown-content").length,r=!1,o=e(i).closest(".dropdown-trigger");o.length&&o[0].M_Dropdown&&o[0].M_Dropdown.isOpen&&(r=!0),r||n||this.close()}},{key:"_handleDocumentClick",value:function(t){var i=this,n=e(t.target);this.options.closeOnClick&&n.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){i.close()},0):!n.closest(".dropdown-trigger").length&&n.closest(".dropdown-content").length||setTimeout(function(){i.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(e){e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ENTER||this.isOpen||(e.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(t){e(t.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(t){if("function"==typeof this.options.onItemClick){var i=e(t.target).closest("li")[0];this.options.onItemClick.call(this,i)}}},{key:"_handleDropdownKeydown",value:function(t){if(t.which===M.keys.TAB)t.preventDefault(),this.close();else if(t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||!this.isOpen)if(t.which===M.keys.ENTER&&this.isOpen){var i=this.dropdownEl.children[this.focusedIndex],n=e(i).find("a, button").first();n.length?n[0].click():i&&i.click()}else t.which===M.keys.ESC&&this.isOpen&&(t.preventDefault(),this.close());else{t.preventDefault();var r=t.which===M.keys.ARROW_DOWN?1:-1,o=this.focusedIndex,s=!1;do{if(o+=r,this.dropdownEl.children[o]&&-1!==this.dropdownEl.children[o].tabIndex){s=!0;break}}while(o<this.dropdownEl.children.length&&o>=0);s&&(this.focusedIndex=o,this._focusFocusedItem())}var a=String.fromCharCode(t.which).toLowerCase();if(a&&-1===[9,13,27,38,40].indexOf(t.which)){this.filterQuery.push(a);var l=this.filterQuery.join(""),c=e(this.dropdownEl).find("li").filter(function(t){return 0===e(t).text().toLowerCase().indexOf(l)})[0];c&&(this.focusedIndex=e(c).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,e(this.dropdownEl).children().each(function(e){e.getAttribute("tabindex")||e.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var e=this.el.getBoundingClientRect(),t=this.dropdownEl.getBoundingClientRect(),i=t.height,n=t.width,r=e.left-t.left,o=e.top-t.top,s={left:r,top:o,height:i,width:n},a=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,l=M.checkPossibleAlignments(this.el,a,s,this.options.coverTrigger?0:e.height),c="top",u=this.options.alignment;if(o+=this.options.coverTrigger?0:e.height,this.isScrollable=!1,l.top||(l.bottom?c="bottom":(this.isScrollable=!0,l.spaceOnTop>l.spaceOnBottom?(c="bottom",i+=l.spaceOnTop,o-=l.spaceOnTop):i+=l.spaceOnBottom)),!l[u]){var h="left"===u?"right":"left";l[h]?u=h:l.spaceOnLeft>l.spaceOnRight?(u="right",n+=l.spaceOnLeft,r-=l.spaceOnLeft):(u="left",n+=l.spaceOnRight)}return"bottom"===c&&(o=o-t.height+(this.options.coverTrigger?e.height:0)),"right"===u&&(r=r-t.width+e.width),{x:r,y:o,verticalAlignment:c,horizontalAlignment:u,height:i,width:n}}},{key:"_animateIn",value:function(){var e=this;t.remove(this.dropdownEl),t({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(t){e.options.autoFocus&&e.dropdownEl.focus(),"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}})}},{key:"_animateOut",value:function(){var e=this;t.remove(this.dropdownEl),t({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(t){e._resetDropdownStyles(),"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}})}},{key:"_placeDropdown",value:function(){var e=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=e+"px";var t=this._getDropdownPosition();this.dropdownEl.style.left=t.x+"px",this.dropdownEl.style.top=t.y+"px",this.dropdownEl.style.height=t.height+"px",this.dropdownEl.style.width=t.width+"px",this.dropdownEl.style.transformOrigin=("left"===t.horizontalAlignment?"0":"100%")+" "+("top"===t.verticalAlignment?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Dropdown}},{key:"defaults",get:function(){return i}}]),c}(l);c._dropdowns=[],M.Dropdown=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"dropdown","M_Dropdown")}(cash,M.anime),function(e,t){var i={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},c=function(l){function c(t,i){a(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,i));return n.el.M_Modal=n,n.options=e.extend({},c.defaults,i),n.isOpen=!1,n.id=n.$el.attr("id"),n._openingTrigger=void 0,n.$overlay=e('<div class="modal-overlay"></div>'),n.el.tabIndex=0,n._nthModalOpened=0,c._count++,n._setupEventHandlers(),n}return s(c,l),r(c,[{key:"destroy",value:function(){c._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),1===c._count&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){0===c._count&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(t){var i=e(t.target).closest(".modal-trigger");if(i.length){var n=M.getIdFromTrigger(i[0]),r=document.getElementById(n).M_Modal;r&&r.open(i),t.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(t){e(t.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(e){27===e.keyCode&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(e){this.el.contains(e.target)||this._nthModalOpened!==c._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var i=this;e.extend(this.el.style,{display:"block",opacity:0}),e.extend(this.$overlay[0].style,{display:"block",opacity:0}),t({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var n={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){"function"==typeof i.options.onOpenEnd&&i.options.onOpenEnd.call(i,i.el,i._openingTrigger)}};this.el.classList.contains("bottom-sheet")?(e.extend(n,{bottom:0,opacity:1}),t(n)):(e.extend(n,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),t(n))}},{key:"_animateOut",value:function(){var i=this;t({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var n={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){i.el.style.display="none",i.$overlay.remove(),"function"==typeof i.options.onCloseEnd&&i.options.onCloseEnd.call(i,i.el)}};this.el.classList.contains("bottom-sheet")?(e.extend(n,{bottom:"-100%",opacity:0}),t(n)):(e.extend(n,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),t(n))}},{key:"open",value:function(e){if(!this.isOpen)return this.isOpen=!0,c._modalsOpen++,this._nthModalOpened=c._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*c._modalsOpen,this.el.style.zIndex=1e3+2*c._modalsOpen+1,this._openingTrigger=e?e[0]:void 0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),t.remove(this.el),t.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,c._modalsOpen--,this._nthModalOpened=0,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),0===c._modalsOpen&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),t.remove(this.el),t.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Modal}},{key:"defaults",get:function(){return i}}]),c}(l);c._modalsOpen=0,c._count=0,M.Modal=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"modal","M_Modal")}(cash,M.anime),function(e,t){var i={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},c=function(l){function c(t,i){a(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,i));return n.el.M_Materialbox=n,n.options=e.extend({},c.defaults,i),n.overlayActive=!1,n.doneAnimating=!0,n.placeholder=e("<div></div>").addClass("material-placeholder"),n.originalWidth=0,n.originalHeight=0,n.originInlineStyles=n.$el.attr("style"),n.caption=n.el.getAttribute("data-caption")||"",n.$el.before(n.placeholder),n.placeholder.append(n.$el),n._setupEventHandlers(),n}return s(c,l),r(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,e(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(e){!1===this.doneAnimating||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(e){27===e.keyCode&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=e();for(var t=this.placeholder[0].parentNode;null!==t&&!e(t).is(document);){var i=e(t);"visible"!==i.css("overflow")&&(i.css("overflow","visible"),void 0===this.ancestorsChanged?this.ancestorsChanged=i:this.ancestorsChanged=this.ancestorsChanged.add(i)),t=t.parentNode}}},{key:"_animateImageIn",value:function(){var e=this,i={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){e.doneAnimating=!0,"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),"none"!==this.maxWidth&&(i.maxWidth=this.newWidth),"none"!==this.maxHeight&&(i.maxHeight=this.newHeight),t(i)}},{key:"_animateImageOut",value:function(){var e=this,i={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.placeholder.css({height:"",width:"",position:"",top:"",left:""}),e.attrWidth&&e.$el.attr("width",e.attrWidth),e.attrHeight&&e.$el.attr("height",e.attrHeight),e.$el.removeAttr("style"),e.originInlineStyles&&e.$el.attr("style",e.originInlineStyles),e.$el.removeClass("active"),e.doneAnimating=!0,e.ancestorsChanged.length&&e.ancestorsChanged.css("overflow",""),"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}};t(i)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var i=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=e('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){i.doneAnimating&&i.close()}),this.$el.before(this.$overlay);var n=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*n.left+"px",top:-1*n.top+"px"}),t.remove(this.el),t.remove(this.$overlay[0]),t({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),""!==this.caption&&(this.$photocaption&&t.remove(this.$photoCaption[0]),this.$photoCaption=e('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),e("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),t({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var r=0,o=this.originalWidth/this.windowWidth,s=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,o>s?(r=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*r):(r=this.originalWidth/this.originalHeight,this.newWidth=.9*this.windowHeight*r,this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var e=this;this._updateVars(),this.doneAnimating=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),t.remove(this.el),t.remove(this.$overlay[0]),""!==this.caption&&t.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),t({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.overlayActive=!1,e.$overlay.remove()}}),this._animateImageOut(),""!==this.caption&&t({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.$photoCaption.remove()}})}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Materialbox}},{key:"defaults",get:function(){return i}}]),c}(l);M.Materialbox=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"materialbox","M_Materialbox")}(cash,M.anime),function(e){var t={responsiveThreshold:0},i=function(i){function l(t,i){a(this,l);var n=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,i));return n.el.M_Parallax=n,n.options=e.extend({},l.defaults,i),n._enabled=window.innerWidth>n.options.responsiveThreshold,n.$img=n.$el.find("img").first(),n.$img.each(function(){this.complete&&e(this).trigger("load")}),n._updateParallax(),n._setupEventHandlers(),n._setupStyles(),l._parallaxes.push(n),n}return s(l,i),r(l,[{key:"destroy",value:function(){l._parallaxes.splice(l._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),0===l._parallaxes.length&&(l._handleScrollThrottled=M.throttle(l._handleScroll,5),window.addEventListener("scroll",l._handleScrollThrottled),l._handleWindowResizeThrottled=M.throttle(l._handleWindowResize,5),window.addEventListener("resize",l._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),0===l._parallaxes.length&&(window.removeEventListener("scroll",l._handleScrollThrottled),window.removeEventListener("resize",l._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var e=this.$el.height()>0?this.el.parentNode.offsetHeight:500,t=this.$img[0].offsetHeight-e,i=this.$el.offset().top+e,n=this.$el.offset().top,r=M.getDocumentScrollTop(),o=window.innerHeight,s=t*((r+o-n)/(e+o));this._enabled?i>r&&n<r+o&&(this.$img[0].style.transform="translate3D(-50%, "+s+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(e,t){return n(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Parallax}},{key:"_handleScroll",value:function(){for(var e=0;e<l._parallaxes.length;e++){var t=l._parallaxes[e];t._updateParallax.call(t)}}},{key:"_handleWindowResize",value:function(){for(var e=0;e<l._parallaxes.length;e++){var t=l._parallaxes[e];t._enabled=window.innerWidth>t.options.responsiveThreshold}}},{key:"defaults",get:function(){return t}}]),l}(l);i._parallaxes=[],M.Parallax=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"parallax","M_Parallax")}(cash),function(e,t){var i={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},c=function(l){function c(t,i){a(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,i));return n.el.M_Tabs=n,n.options=e.extend({},c.defaults,i),n.$tabLinks=n.$el.children("li.tab").children("a"),n.index=0,n._setupActiveTabLink(),n.options.swipeable?n._setupSwipeableTabs():n._setupNormalTabs(),n._setTabsAndTabWidth(),n._createIndicator(),n._setupEventHandlers(),n}return s(c,l),r(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),0!==this.tabWidth&&0!==this.tabsWidth&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(t){var i=this,n=e(t.target).closest("li.tab"),r=e(t.target).closest("a");if(r.length&&r.parent().hasClass("tab"))if(n.hasClass("disabled"))t.preventDefault();else if(!r.attr("target")){this.$activeTabLink.removeClass("active");var o=this.$content;this.$activeTabLink=r,this.$content=e(M.escapeHash(r[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var s=this.index;this.index=Math.max(this.$tabLinks.index(r),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){"function"==typeof i.options.onShow&&i.options.onShow.call(i,i.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),"function"==typeof this.options.onShow&&this.options.onShow.call(this,this.$content[0]),o.length&&!o.is(this.$content)&&(o[0].style.display="none",o.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(s),t.preventDefault()}}},{key:"_createIndicator",value:function(){var e=this,t=document.createElement("li");t.classList.add("indicator"),this.el.appendChild(t),this._indicator=t,setTimeout(function(){e._indicator.style.left=e._calcLeftPos(e.$activeTabLink)+"px",e._indicator.style.right=e._calcRightPos(e.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=e(this.$tabLinks.filter('[href="'+location.hash+'"]')),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=e(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var t=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var i=e();this.$tabLinks.each(function(t){var n=e(M.escapeHash(t.hash));n.addClass("carousel-item"),i=i.add(n)});var n=e('<div class="tabs-content carousel carousel-slider"></div>');i.first().before(n),n.append(i),i[0].style.display="";var r=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(n[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(i){var n=t.index;t.index=e(i).index(),t.$activeTabLink.removeClass("active"),t.$activeTabLink=t.$tabLinks.eq(t.index),t.$activeTabLink.addClass("active"),t._animateIndicator(n),"function"==typeof t.options.onShow&&t.options.onShow.call(t,t.$content[0])}}),this._tabsCarousel.set(r)}},{key:"_teardownSwipeableTabs",value:function(){var e=this._tabsCarousel.$el;this._tabsCarousel.destroy(),e.after(e.children()),e.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(t){if(t.hash){var i=e(M.escapeHash(t.hash));i.length&&(i[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(t){if(t.hash){var i=e(M.escapeHash(t.hash));i.length&&(i[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(e){return Math.ceil(this.tabsWidth-e.position().left-e[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(e){return Math.floor(e.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(e){var i=0,n=0;this.index-e>=0?i=90:n=90;var r={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:i},right:{value:this._calcRightPos(this.$activeTabLink),delay:n},duration:this.options.duration,easing:"easeOutQuad"};t.remove(this._indicator),t(r)}},{key:"select",value:function(e){var t=this.$tabLinks.filter('[href="#'+e+'"]');t.length&&t.trigger("click")}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tabs}},{key:"defaults",get:function(){return i}}]),c}(l);M.Tabs=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"tabs","M_Tabs")}(cash,M.anime),function(e,t){var i={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},c=function(l){function c(t,i){a(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,i));return n.el.M_Tooltip=n,n.options=e.extend({},c.defaults,i),n.isOpen=!1,n.isHovered=!1,n.isFocused=!1,n._appendTooltipEl(),n._setupEventHandlers(),n}return s(c,l),r(c,[{key:"destroy",value:function(){e(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var e=document.createElement("div");e.classList.add("material-tooltip"),this.tooltipEl=e;var t=document.createElement("div");t.classList.add("tooltip-content"),t.innerHTML=this.options.html,e.appendChild(t),document.body.appendChild(e)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(t){this.isOpen||(t=void 0===t||void 0,this.isOpen=!0,this.options=e.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(t))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var e=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){e.isHovered||e.isFocused||e._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(e){var t=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){(t.isHovered||t.isFocused||e)&&t._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var t,i=this.el,n=this.tooltipEl,r=i.offsetHeight,o=i.offsetWidth,s=n.offsetHeight,a=n.offsetWidth,l=this.options.margin,c=void 0,u=void 0;this.xMovement=0,this.yMovement=0,c=i.getBoundingClientRect().top+M.getDocumentScrollTop(),u=i.getBoundingClientRect().left+M.getDocumentScrollLeft(),"top"===this.options.position?(c+=-s-l,u+=o/2-a/2,this.yMovement=-this.options.transitionMovement):"right"===this.options.position?(c+=r/2-s/2,u+=o+l,this.xMovement=this.options.transitionMovement):"left"===this.options.position?(c+=r/2-s/2,u+=-a-l,this.xMovement=-this.options.transitionMovement):(c+=r+l,u+=o/2-a/2,this.yMovement=this.options.transitionMovement),t=this._repositionWithinScreen(u,c,a,s),e(n).css({top:t.y+"px",left:t.x+"px"})}},{key:"_repositionWithinScreen",value:function(e,t,i,n){var r=M.getDocumentScrollLeft(),o=M.getDocumentScrollTop(),s=e-r,a=t-o,l={left:s,top:a,width:i,height:n},c=this.options.margin+this.options.transitionMovement,u=M.checkWithinContainer(document.body,l,c);return u.left?s=c:u.right&&(s-=s+i-window.innerWidth),u.top?a=c:u.bottom&&(a-=a+n-window.innerHeight),{x:s+r,y:a+o}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var e={},t=this.el.getAttribute("data-tooltip"),i=this.el.getAttribute("data-position");return t&&(e.html=t),i&&(e.position=i),e}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tooltip}},{key:"defaults",get:function(){return i}}]),c}(l);M.Tooltip=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"tooltip","M_Tooltip")}(cash,M.anime),function(e){var t=t||{},i=document.querySelectorAll.bind(document);function n(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t+=i+":"+e[i]+";");return t}var r={duration:750,show:function(e,t){if(2===e.button)return!1;var i=t||this,o=document.createElement("div");o.className="waves-ripple",i.appendChild(o);var s,a,l,c,u,h=(c={top:0,left:0},u=(s=i)&&s.ownerDocument,a=u.documentElement,void 0!==s.getBoundingClientRect&&(c=s.getBoundingClientRect()),l=function(e){return null!==(t=e)&&t===t.window?e:9===e.nodeType&&e.defaultView;var t}(u),{top:c.top+l.pageYOffset-a.clientTop,left:c.left+l.pageXOffset-a.clientLeft}),d=e.pageY-h.top,f=e.pageX-h.left,p="scale("+i.clientWidth/100*10+")";"touches"in e&&(d=e.touches[0].pageY-h.top,f=e.touches[0].pageX-h.left),o.setAttribute("data-hold",Date.now()),o.setAttribute("data-scale",p),o.setAttribute("data-x",f),o.setAttribute("data-y",d);var v={top:d+"px",left:f+"px"};o.className=o.className+" waves-notransition",o.setAttribute("style",n(v)),o.className=o.className.replace("waves-notransition",""),v["-webkit-transform"]=p,v["-moz-transform"]=p,v["-ms-transform"]=p,v["-o-transform"]=p,v.transform=p,v.opacity="1",v["-webkit-transition-duration"]=r.duration+"ms",v["-moz-transition-duration"]=r.duration+"ms",v["-o-transition-duration"]=r.duration+"ms",v["transition-duration"]=r.duration+"ms",v["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",v["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",v["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",v["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",o.setAttribute("style",n(v))},hide:function(e){o.touchup(e);var t=this;t.clientWidth;var i=null,s=t.getElementsByClassName("waves-ripple");if(!(s.length>0))return!1;var a=(i=s[s.length-1]).getAttribute("data-x"),l=i.getAttribute("data-y"),c=i.getAttribute("data-scale"),u=350-(Date.now()-Number(i.getAttribute("data-hold")));u<0&&(u=0),setTimeout(function(){var e={top:l+"px",left:a+"px",opacity:"0","-webkit-transition-duration":r.duration+"ms","-moz-transition-duration":r.duration+"ms","-o-transition-duration":r.duration+"ms","transition-duration":r.duration+"ms","-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,transform:c};i.setAttribute("style",n(e)),setTimeout(function(){try{t.removeChild(i)}catch(e){return!1}},r.duration)},u)},wrapInput:function(e){for(var t=0;t<e.length;t++){var i=e[t];if("input"===i.tagName.toLowerCase()){var n=i.parentNode;if("i"===n.tagName.toLowerCase()&&-1!==n.className.indexOf("waves-effect"))continue;var r=document.createElement("i");r.className=i.className+" waves-input-wrapper";var o=i.getAttribute("style");o||(o=""),r.setAttribute("style",o),i.className="waves-button-input",i.removeAttribute("style"),n.replaceChild(r,i),r.appendChild(i)}}}},o={touches:0,allowEvent:function(e){var t=!0;return"touchstart"===e.type?o.touches+=1:"touchend"===e.type||"touchcancel"===e.type?setTimeout(function(){o.touches>0&&(o.touches-=1)},500):"mousedown"===e.type&&o.touches>0&&(t=!1),t},touchup:function(e){o.allowEvent(e)}};function s(t){var i=function(e){if(!1===o.allowEvent(e))return null;for(var t=null,i=e.target||e.srcElement;null!==i.parentNode;){if(!(i instanceof SVGElement)&&-1!==i.className.indexOf("waves-effect")){t=i;break}i=i.parentNode}return t}(t);null!==i&&(r.show(t,i),"ontouchstart"in e&&(i.addEventListener("touchend",r.hide,!1),i.addEventListener("touchcancel",r.hide,!1)),i.addEventListener("mouseup",r.hide,!1),i.addEventListener("mouseleave",r.hide,!1),i.addEventListener("dragend",r.hide,!1))}t.displayEffect=function(t){"duration"in(t=t||{})&&(r.duration=t.duration),r.wrapInput(i(".waves-effect")),"ontouchstart"in e&&document.body.addEventListener("touchstart",s,!1),document.body.addEventListener("mousedown",s,!1)},t.attach=function(t){"input"===t.tagName.toLowerCase()&&(r.wrapInput([t]),t=t.parentNode),"ontouchstart"in e&&t.addEventListener("touchstart",s,!1),t.addEventListener("mousedown",s,!1)},e.Waves=t,document.addEventListener("DOMContentLoaded",function(){t.displayEffect()},!1)}(window),function(e,t){var i={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},n=function(){function n(t){a(this,n),this.options=e.extend({},n.defaults,t),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,0===n._toasts.length&&n._createContainer(),n._toasts.push(this);var i=this._createToast();i.M_Toast=this,this.el=i,this.$el=e(i),this._animateIn(),this._setTimer()}return r(n,[{key:"_createToast",value:function(){var t=document.createElement("div");return t.classList.add("toast"),this.options.classes.length&&e(t).addClass(this.options.classes),("object"==typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"==typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"==typeof this.message.nodeName)?t.appendChild(this.message):this.message.jquery?e(t).append(this.message[0]):t.innerHTML=this.message,n._container.appendChild(t),t}},{key:"_animateIn",value:function(){t({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var e=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){e.panning||(e.timeRemaining-=20),e.timeRemaining<=0&&e.dismiss()},20))}},{key:"dismiss",value:function(){var e=this;window.clearInterval(this.counterInterval);var i=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+i+"px)",this.el.style.opacity=0),t({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){"function"==typeof e.options.completeCallback&&e.options.completeCallback(),e.$el.remove(),n._toasts.splice(n._toasts.indexOf(e),1),0===n._toasts.length&&n._removeContainer()}})}}],[{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Toast}},{key:"_createContainer",value:function(){var e=document.createElement("div");e.setAttribute("id","toast-container"),e.addEventListener("touchstart",n._onDragStart),e.addEventListener("touchmove",n._onDragMove),e.addEventListener("touchend",n._onDragEnd),e.addEventListener("mousedown",n._onDragStart),document.addEventListener("mousemove",n._onDragMove),document.addEventListener("mouseup",n._onDragEnd),document.body.appendChild(e),n._container=e}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",n._onDragMove),document.removeEventListener("mouseup",n._onDragEnd),e(n._container).remove(),n._container=null}},{key:"_onDragStart",value:function(t){if(t.target&&e(t.target).closest(".toast").length){var i=e(t.target).closest(".toast")[0].M_Toast;i.panning=!0,n._draggedToast=i,i.el.classList.add("panning"),i.el.style.transition="",i.startingXPos=n._xPos(t),i.time=Date.now(),i.xPos=n._xPos(t)}}},{key:"_onDragMove",value:function(e){if(n._draggedToast){e.preventDefault();var t=n._draggedToast;t.deltaX=Math.abs(t.xPos-n._xPos(e)),t.xPos=n._xPos(e),t.velocityX=t.deltaX/(Date.now()-t.time),t.time=Date.now();var i=t.xPos-t.startingXPos,r=t.el.offsetWidth*t.options.activationPercent;t.el.style.transform="translateX("+i+"px)",t.el.style.opacity=1-Math.abs(i/r)}}},{key:"_onDragEnd",value:function(){if(n._draggedToast){var e=n._draggedToast;e.panning=!1,e.el.classList.remove("panning");var t=e.xPos-e.startingXPos,i=e.el.offsetWidth*e.options.activationPercent;Math.abs(t)>i||e.velocityX>1?(e.wasSwiped=!0,e.dismiss()):(e.el.style.transition="transform .2s, opacity .2s",e.el.style.transform="",e.el.style.opacity=""),n._draggedToast=null}}},{key:"_xPos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}},{key:"dismissAll",value:function(){for(var e in n._toasts)n._toasts[e].dismiss()}},{key:"defaults",get:function(){return i}}]),n}();n._toasts=[],n._container=null,n._draggedToast=null,M.Toast=n,M.toast=function(e){return new n(e)}}(cash,M.anime),function(e,t){var i={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},c=function(l){function c(t,i){a(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,i));return n.el.M_Sidenav=n,n.id=n.$el.attr("id"),n.options=e.extend({},c.defaults,i),n.isOpen=!1,n.isFixed=n.el.classList.contains("sidenav-fixed"),n.isDragged=!1,n.lastWindowWidth=window.innerWidth,n.lastWindowHeight=window.innerHeight,n._createOverlay(),n._createDragTarget(),n._setupEventHandlers(),n._setupClasses(),n._setupFixed(),c._sidenavs.push(n),n}return s(c,l),r(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var e=c._sidenavs.indexOf(this);e>=0&&c._sidenavs.splice(e,1)}},{key:"_createOverlay",value:function(){var e=document.createElement("div");this._closeBound=this.close.bind(this),e.classList.add("sidenav-overlay"),e.addEventListener("click",this._closeBound),document.body.appendChild(e),this._overlay=e}},{key:"_setupEventHandlers",value:function(){0===c._sidenavs.length&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){1===c._sidenavs.length&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(t){var i=e(t.target).closest(".sidenav-trigger");if(t.target&&i.length){var n=M.getIdFromTrigger(i[0]),r=document.getElementById(n).M_Sidenav;r&&r.open(i),t.preventDefault()}}},{key:"_startDrag",value:function(e){var i=e.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=i,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,t.remove(this.el),t.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(e){var t=e.targetTouches[0].clientX,i=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-t),this._xPos=t,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==i&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(e){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(e),this._dragMoveUpdate(e);var t=this._xPos-this._startingXpos,i=t>0?"right":"left";t=Math.min(this._width,Math.abs(t)),this.options.edge===i&&(t=0);var n=t,r="translateX(-100%)";"right"===this.options.edge&&(r="translateX(100%)",n=-n),this.percentOpen=Math.min(1,t/this._width),this.el.style.transform=r+" translateX("+n+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(this.percentOpen>.2?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(e){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(e),this._dragMoveUpdate(e);var t=this._xPos-this._startingXpos,i=t>0?"right":"left";t=Math.min(this._width,Math.abs(t)),this.options.edge!==i&&(t=0);var n=-t;"right"===this.options.edge&&(n=-n),this.percentOpen=Math.min(1,1-t/this._width),this.el.style.transform="translateX("+n+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(this.percentOpen>.8?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(t){e(t.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(window.innerWidth>992?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){"right"===this.options.edge&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&window.innerWidth>992}},{key:"_createDragTarget",value:function(){var e=document.createElement("div");e.classList.add("drag-target"),document.body.appendChild(e),this.dragTarget=e}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){!0!==this.isOpen&&(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(t.remove(this.el),t({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&1==this.percentOpen||this._animateIn()))}},{key:"close",value:function(){if(!1!==this.isOpen)if(this.isOpen=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var e="left"===this.options.edge?"-105%":"105%";this.el.style.transform="translateX("+e+")"}else this._enableBodyScrolling(),this.isDragged&&0==this.percentOpen?this._overlay.style.display="none":this._animateOut()}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var e=this,i="left"===this.options.edge?-1:1;this.isDragged&&(i="left"===this.options.edge?i+this.percentOpen:i-this.percentOpen),t.remove(this.el),t({targets:this.el,translateX:[100*i+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}})}},{key:"_animateOverlayIn",value:function(){var i=0;this.isDragged?i=this.percentOpen:e(this._overlay).css({display:"block"}),t.remove(this._overlay),t({targets:this._overlay,opacity:[i,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var e=this,i="left"===this.options.edge?-1:1,n=0;this.isDragged&&(n="left"===this.options.edge?i+this.percentOpen:i-this.percentOpen),t.remove(this.el),t({targets:this.el,translateX:[100*n+"%",105*i+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}})}},{key:"_animateOverlayOut",value:function(){var i=this;t.remove(this._overlay),t({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e(i._overlay).css("display","none")}})}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Sidenav}},{key:"defaults",get:function(){return i}}]),c}(l);c._sidenavs=[],M.Sidenav=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"sidenav","M_Sidenav")}(cash,M.anime),function(e,t){var i={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(e){return'a[href="#'+e+'"]'}},c=function(l){function c(t,i){a(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,i));return n.el.M_ScrollSpy=n,n.options=e.extend({},c.defaults,i),c._elements.push(n),c._count++,c._increment++,n.tickId=-1,n.id=c._increment,n._setupEventHandlers(),n._handleWindowScroll(),n}return s(c,l),r(c,[{key:"destroy",value:function(){c._elements.splice(c._elements.indexOf(this),1),c._elementsInView.splice(c._elementsInView.indexOf(this),1),c._visibleElements.splice(c._visibleElements.indexOf(this.$el),1),c._count--,this._removeEventHandlers(),e(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var e=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=e.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),1===c._count&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){0===c._count&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(i){for(var n=e(i.target),r=c._elements.length-1;r>=0;r--){var o=c._elements[r];if(n.is('a[href="#'+o.$el.attr("id")+'"]')){i.preventDefault();var s=o.$el.offset().top+1;t({targets:[document.documentElement,document.body],scrollTop:s-o.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){c._ticks++;for(var e=M.getDocumentScrollTop(),t=M.getDocumentScrollLeft(),i=t+window.innerWidth,n=e+window.innerHeight,r=c._findElements(e,i,n,t),o=0;o<r.length;o++){var s=r[o];s.tickId<0&&s._enter(),s.tickId=c._ticks}for(var a=0;a<c._elementsInView.length;a++){var l=c._elementsInView[a],u=l.tickId;u>=0&&u!==c._ticks&&(l._exit(),l.tickId=-1)}c._elementsInView=r}},{key:"_enter",value:function(){c._visibleElements=c._visibleElements.filter(function(e){return 0!=e.height()}),c._visibleElements[0]?(e(this.options.getActiveElement(c._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),c._visibleElements[0][0].M_ScrollSpy&&this.id<c._visibleElements[0][0].M_ScrollSpy.id?c._visibleElements.unshift(this.$el):c._visibleElements.push(this.$el)):c._visibleElements.push(this.$el),e(this.options.getActiveElement(c._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var t=this;c._visibleElements=c._visibleElements.filter(function(e){return 0!=e.height()}),c._visibleElements[0]&&(e(this.options.getActiveElement(c._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),c._visibleElements=c._visibleElements.filter(function(e){return e.attr("id")!=t.$el.attr("id")}),c._visibleElements[0]&&e(this.options.getActiveElement(c._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_ScrollSpy}},{key:"_findElements",value:function(e,t,i,n){for(var r=[],o=0;o<c._elements.length;o++){var s=c._elements[o],a=e+s.options.scrollOffset||200;if(s.$el.height()>0){var l=s.$el.offset().top,u=s.$el.offset().left,h=u+s.$el.width(),d=l+s.$el.height();!(u>t||h<n||l>i||d<a)&&r.push(s)}}return r}},{key:"defaults",get:function(){return i}}]),c}(l);c._elements=[],c._elementsInView=[],c._visibleElements=[],c._count=0,c._increment=0,c._ticks=0,M.ScrollSpy=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(e){var t={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(e,t,i){return e.indexOf(i)-t.indexOf(i)}},i=function(i){function l(t,i){a(this,l);var n=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,i));return n.el.M_Autocomplete=n,n.options=e.extend({},l.defaults,i),n.isOpen=!1,n.count=0,n.activeIndex=-1,n.oldVal,n.$inputField=n.$el.closest(".input-field"),n.$active=e(),n._mousedown=!1,n._setupDropdown(),n._setupEventHandlers(),n}return s(l,i),r(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var t=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),e(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(i){t.selectOption(e(i))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(e){"keyup"===e.type&&(l._keydown=!1),this.count=0;var t=this.el.value.toLowerCase();13!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode&&(this.oldVal===t||!M.tabPressed&&"focus"===e.type||this.open(),this.oldVal=t)}},{key:"_handleInputKeydown",value:function(t){l._keydown=!0;var i=t.keyCode,n=void 0,r=e(this.container).children("li").length;i===M.keys.ENTER&&this.activeIndex>=0?(n=e(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(n),t.preventDefault()):i!==M.keys.ARROW_UP&&i!==M.keys.ARROW_DOWN||(t.preventDefault(),i===M.keys.ARROW_UP&&this.activeIndex>0&&this.activeIndex--,i===M.keys.ARROW_DOWN&&this.activeIndex<r-1&&this.activeIndex++,this.$active.removeClass("active"),this.activeIndex>=0&&(this.$active=e(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(e){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(e){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(e){this._mousedown=!1}},{key:"_highlight",value:function(e,t){var i=t.find("img"),n=t.text().toLowerCase().indexOf(""+e.toLowerCase()),r=n+e.length-1,o=t.text().slice(0,n),s=t.text().slice(n,r+1),a=t.text().slice(r+1);t.html("<span>"+o+"<span class='highlight'>"+s+"</span>"+a+"</span>"),i.length&&t.prepend(i)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){e(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(e){var t=e.text().trim();this.el.value=t,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),"function"==typeof this.options.onAutocomplete&&this.options.onAutocomplete.call(this,t)}},{key:"_renderDropdown",value:function(t,i){var n=this;this._resetAutocomplete();var r=[];for(var o in t)if(t.hasOwnProperty(o)&&-1!==o.toLowerCase().indexOf(i)){if(this.count>=this.options.limit)break;var s={data:t[o],key:o};r.push(s),this.count++}if(this.options.sortFunction){r.sort(function(e,t){return n.options.sortFunction(e.key.toLowerCase(),t.key.toLowerCase(),i.toLowerCase())})}for(var a=0;a<r.length;a++){var l=r[a],c=e("<li></li>");l.data?c.append('<img src="'+l.data+'" class="right circle"><span>'+l.key+"</span>"):c.append("<span>"+l.key+"</span>"),e(this.container).append(c),this._highlight(i,c)}}},{key:"open",value:function(){var e=this.el.value.toLowerCase();this._resetAutocomplete(),e.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,e)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(e){var t=this.el.value.toLowerCase();this.options.data=e,this.isOpen&&this._renderDropdown(e,t)}}],[{key:"init",value:function(e,t){return n(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Autocomplete}},{key:"defaults",get:function(){return t}}]),l}(l);i._keydown=!1,M.Autocomplete=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"autocomplete","M_Autocomplete")}(cash),function(e){M.updateTextFields=function(){e("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each(function(t,i){var n=e(this);t.value.length>0||e(t).is(":focus")||t.autofocus||null!==n.attr("placeholder")?n.siblings("label").addClass("active"):t.validity?n.siblings("label").toggleClass("active",!0===t.validity.badInput):n.siblings("label").removeClass("active")})},M.validate_field=function(e){var t=null!==e.attr("data-length"),i=parseInt(e.attr("data-length")),n=e[0].value.length;0!==n||!1!==e[0].validity.badInput||e.is(":required")?e.hasClass("validate")&&(e.is(":valid")&&t&&n<=i||e.is(":valid")&&!t?(e.removeClass("invalid"),e.addClass("valid")):(e.removeClass("valid"),e.addClass("invalid"))):e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid"))},M.textareaAutoResize=function(t){if(t instanceof Element&&(t=e(t)),t.length){var i=e(".hiddendiv").first();i.length||(i=e('<div class="hiddendiv common"></div>'),e("body").append(i));var n=t.css("font-family"),r=t.css("font-size"),o=t.css("line-height"),s=t.css("padding-top"),a=t.css("padding-right"),l=t.css("padding-bottom"),c=t.css("padding-left");r&&i.css("font-size",r),n&&i.css("font-family",n),o&&i.css("line-height",o),s&&i.css("padding-top",s),a&&i.css("padding-right",a),l&&i.css("padding-bottom",l),c&&i.css("padding-left",c),t.data("original-height")||t.data("original-height",t.height()),"off"===t.attr("wrap")&&i.css("overflow-wrap","normal").css("white-space","pre"),i.text(t[0].value+"\n");var u=i.html().replace(/\n/g,"<br>");i.html(u),t[0].offsetWidth>0&&t[0].offsetHeight>0?i.css("width",t.width()+"px"):i.css("width",window.innerWidth/2+"px"),t.data("original-height")<=i.innerHeight()?t.css("height",i.innerHeight()+"px"):t[0].value.length<t.data("previous-length")&&t.css("height",t.data("original-height")+"px"),t.data("previous-length",t[0].value.length)}else console.error("No textarea element found")},e(document).ready(function(){var t="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";e(document).on("change",t,function(){0===this.value.length&&null===e(this).attr("placeholder")||e(this).siblings("label").addClass("active"),M.validate_field(e(this))}),e(document).ready(function(){M.updateTextFields()}),e(document).on("reset",function(i){var n=e(i.target);n.is("form")&&(n.find(t).removeClass("valid").removeClass("invalid"),n.find(t).each(function(t){this.value.length&&e(this).siblings("label").removeClass("active")}),setTimeout(function(){n.find("select").each(function(){this.M_FormSelect&&e(this).trigger("change")})},0))}),document.addEventListener("focus",function(i){e(i.target).is(t)&&e(i.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(i){var n=e(i.target);if(n.is(t)){var r=".prefix";0===n[0].value.length&&!0!==n[0].validity.badInput&&null===n.attr("placeholder")&&(r+=", label"),n.siblings(r).removeClass("active"),M.validate_field(n)}},!0);e(document).on("keyup","input[type=radio], input[type=checkbox]",function(t){if(t.which===M.keys.TAB)return e(this).addClass("tabbed"),void e(this).one("blur",function(t){e(this).removeClass("tabbed")})});var i=".materialize-textarea";e(i).each(function(){var t=e(this);t.data("original-height",t.height()),t.data("previous-length",this.value.length),M.textareaAutoResize(t)}),e(document).on("keyup",i,function(){M.textareaAutoResize(e(this))}),e(document).on("keydown",i,function(){M.textareaAutoResize(e(this))}),e(document).on("change",'.file-field input[type="file"]',function(){for(var t=e(this).closest(".file-field").find("input.file-path"),i=e(this)[0].files,n=[],r=0;r<i.length;r++)n.push(i[r].name);t[0].value=n.join(", "),t.trigger("change")})})}(cash),function(e,t){var i={indicators:!0,height:400,duration:500,interval:6e3},c=function(l){function c(i,n){a(this,c);var r=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,i,n));return r.el.M_Slider=r,r.options=e.extend({},c.defaults,n),r.$slider=r.$el.find(".slides"),r.$slides=r.$slider.children("li"),r.activeIndex=r.$slides.filter(function(t){return e(t).hasClass("active")}).first().index(),-1!=r.activeIndex&&(r.$active=r.$slides.eq(r.activeIndex)),r._setSliderHeight(),r.$slides.find(".caption").each(function(e){r._animateCaptionIn(e,0)}),r.$slides.find("img").each(function(t){var i="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";e(t).attr("src")!==i&&(e(t).css("background-image",'url("'+e(t).attr("src")+'")'),e(t).attr("src",i))}),r._setupIndicators(),r.$active?r.$active.css("display","block"):(r.$slides.first().addClass("active"),t({targets:r.$slides.first()[0],opacity:1,duration:r.options.duration,easing:"easeOutQuad"}),r.activeIndex=0,r.$active=r.$slides.eq(r.activeIndex),r.options.indicators&&r.$indicators.eq(r.activeIndex).addClass("active")),r.$active.find("img").each(function(e){t({targets:r.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:r.options.duration,easing:"easeOutQuad"})}),r._setupEventHandlers(),r.start(),r}return s(c,l),r(c,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(t){t.addEventListener("click",e._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var e=this;this.options.indicators&&this.$indicators.each(function(t){t.removeEventListener("click",e._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(t){var i=e(t.target).index();this.set(i)}},{key:"_handleInterval",value:function(){var e=this.$slider.find(".active").index();this.$slides.length===e+1?e=0:e+=1,this.set(e)}},{key:"_animateCaptionIn",value:function(i,n){var r={targets:i,opacity:0,duration:n,easing:"easeOutQuad"};e(i).hasClass("center-align")?r.translateY=-100:e(i).hasClass("right-align")?r.translateX=100:e(i).hasClass("left-align")&&(r.translateX=-100),t(r)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var t=this;this.options.indicators&&(this.$indicators=e('<ul class="indicators"></ul>'),this.$slides.each(function(i,n){var r=e('<li class="indicator-item"></li>');t.$indicators.append(r[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(e){var i=this;if(e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.activeIndex!=e){this.$active=this.$slides.eq(this.activeIndex);var n=this.$active.find(".caption");this.$active.removeClass("active"),t({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){i.$slides.not(".active").each(function(e){t({targets:e,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(n[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(e).addClass("active")),t({targets:this.$slides.eq(e)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),t({targets:this.$slides.eq(e).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(e).addClass("active"),this.activeIndex=e,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var e=this.activeIndex+1;e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.set(e)}},{key:"prev",value:function(){var e=this.activeIndex-1;e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.set(e)}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Slider}},{key:"defaults",get:function(){return i}}]),c}(l);M.Slider=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"slider","M_Slider")}(cash,M.anime),function(e,t){e(document).on("click",".card",function(i){if(e(this).children(".card-reveal").length){var n=e(i.target).closest(".card");void 0===n.data("initialOverflow")&&n.data("initialOverflow",void 0===n.css("overflow")?"":n.css("overflow"));var r=e(this).find(".card-reveal");e(i.target).is(e(".card-reveal .card-title"))||e(i.target).is(e(".card-reveal .card-title i"))?t({targets:r[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(t){var i=t.animatables[0].target;e(i).css({display:"none"}),n.css("overflow",n.data("initialOverflow"))}}):(e(i.target).is(e(".card .activator"))||e(i.target).is(e(".card .activator i")))&&(n.css("overflow","hidden"),r.css({display:"block"}),t({targets:r[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(e){var t={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},i=function(i){function l(t,i){a(this,l);var n=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,i));return n.el.M_Chips=n,n.options=e.extend({},l.defaults,i),n.$el.addClass("chips input-field"),n.chipsData=[],n.$chips=e(),n._setupInput(),n.hasAutocomplete=Object.keys(n.options.autocompleteOptions).length>0,n.$input.attr("id")||n.$input.attr("id",M.guid()),n.options.data.length&&(n.chipsData=n.options.data,n._renderChips(n.chipsData)),n.hasAutocomplete&&n._setupAutocomplete(),n._setPlaceholder(),n._setupLabel(),n._setupEventHandlers(),n}return s(l,i),r(l,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",l._handleChipsKeydown),document.addEventListener("keyup",l._handleChipsKeyup),this.el.addEventListener("blur",l._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",l._handleChipsKeydown),document.removeEventListener("keyup",l._handleChipsKeyup),this.el.removeEventListener("blur",l._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(t){var i=e(t.target).closest(".chip"),n=e(t.target).is(".close");if(i.length){var r=i.index();n?(this.deleteChip(r),this.$input[0].focus()):this.selectChip(r)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(e){if(l._keydown=!0,13===e.keyCode){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;e.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else 8!==e.keyCode&&37!==e.keyCode||""!==this.$input[0].value||!this.chipsData.length||(e.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(t){if(t.tag){var i=document.createElement("div"),n=document.createElement("i");if(i.classList.add("chip"),i.textContent=t.tag,i.setAttribute("tabindex",0),e(n).addClass("material-icons close"),n.textContent="close",t.image){var r=document.createElement("img");r.setAttribute("src",t.image),i.insertBefore(r,i.firstChild)}return i.appendChild(n),i}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var e=0;e<this.chipsData.length;e++){var t=this._renderChip(this.chipsData[e]);this.$el.append(t),this.$chips.add(t)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var e=this;this.options.autocompleteOptions.onAutocomplete=function(t){e.addChip({tag:t}),e.$input[0].value="",e.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=e("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){void 0!==this.chipsData&&!this.chipsData.length&&this.options.placeholder?e(this.$input).prop("placeholder",this.options.placeholder):(void 0===this.chipsData||this.chipsData.length)&&this.options.secondaryPlaceholder&&e(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(e){if(e.hasOwnProperty("tag")&&""!==e.tag){for(var t=!1,i=0;i<this.chipsData.length;i++)if(this.chipsData[i].tag===e.tag){t=!0;break}return!t}return!1}},{key:"addChip",value:function(t){if(this._isValid(t)&&!(this.chipsData.length>=this.options.limit)){var i=this._renderChip(t);this.$chips.add(i),this.chipsData.push(t),e(this.$input).before(i),this._setPlaceholder(),"function"==typeof this.options.onChipAdd&&this.options.onChipAdd.call(this,this.$el,i)}}},{key:"deleteChip",value:function(t){var i=this.$chips.eq(t);this.$chips.eq(t).remove(),this.$chips=this.$chips.filter(function(t){return e(t).index()>=0}),this.chipsData.splice(t,1),this._setPlaceholder(),"function"==typeof this.options.onChipDelete&&this.options.onChipDelete.call(this,this.$el,i[0])}},{key:"selectChip",value:function(e){var t=this.$chips.eq(e);this._selectedChip=t,t[0].focus(),"function"==typeof this.options.onChipSelect&&this.options.onChipSelect.call(this,this.$el,t[0])}}],[{key:"init",value:function(e,t){return n(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Chips}},{key:"_handleChipsKeydown",value:function(t){l._keydown=!0;var i=e(t.target).closest(".chips"),n=t.target&&i.length;if(!e(t.target).is("input, textarea")&&n){var r=i[0].M_Chips;if(8===t.keyCode||46===t.keyCode){t.preventDefault();var o=r.chipsData.length;if(r._selectedChip){var s=r._selectedChip.index();r.deleteChip(s),r._selectedChip=null,o=Math.max(s-1,0)}r.chipsData.length&&r.selectChip(o)}else if(37===t.keyCode){if(r._selectedChip){var a=r._selectedChip.index()-1;if(a<0)return;r.selectChip(a)}}else if(39===t.keyCode&&r._selectedChip){var c=r._selectedChip.index()+1;c>=r.chipsData.length?r.$input[0].focus():r.selectChip(c)}}}},{key:"_handleChipsKeyup",value:function(e){l._keydown=!1}},{key:"_handleChipsBlur",value:function(t){l._keydown||(e(t.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return t}}]),l}(l);i._keydown=!1,M.Chips=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"chips","M_Chips"),e(document).ready(function(){e(document.body).on("click",".chip .close",function(){var t=e(this).closest(".chips");t.length&&t[0].M_Chips||e(this).closest(".chip").remove()})})}(cash),function(e){var t={top:0,bottom:1/0,offset:0,onPositionChange:null},i=function(i){function l(t,i){a(this,l);var n=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,i));return n.el.M_Pushpin=n,n.options=e.extend({},l.defaults,i),n.originalOffset=n.el.offsetTop,l._pushpins.push(n),n._setupEventHandlers(),n._updatePosition(),n}return s(l,i),r(l,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var e=l._pushpins.indexOf(this);l._pushpins.splice(e,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",l._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",l._updateElements)}},{key:"_updatePosition",value:function(){var e=M.getDocumentScrollTop()+this.options.offset;this.options.top<=e&&this.options.bottom>=e&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pinned")),e<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-top")),e>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px","function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(e,t){return n(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Pushpin}},{key:"_updateElements",value:function(){for(var e in l._pushpins){l._pushpins[e]._updatePosition()}}},{key:"defaults",get:function(){return t}}]),l}(l);i._pushpins=[],M.Pushpin=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"pushpin","M_Pushpin")}(cash),function(e,t){var i={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};e.fn.reverse=[].reverse;var c=function(l){function c(t,i){a(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,i));return n.el.M_FloatingActionButton=n,n.options=e.extend({},c.defaults,i),n.isOpen=!1,n.$anchor=n.$el.children("a").first(),n.$menu=n.$el.children("ul").first(),n.$floatingBtns=n.$el.find("ul .btn-floating"),n.$floatingBtnsReverse=n.$el.find("ul .btn-floating").reverse(),n.offsetY=0,n.offsetX=0,n.$el.addClass("direction-"+n.options.direction),"top"===n.options.direction?n.offsetY=40:"right"===n.options.direction?n.offsetX=-40:"bottom"===n.options.direction?n.offsetY=-40:n.offsetX=40,n._setupEventHandlers(),n}return s(c,l),r(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(t){e(t.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var e=this;this.$el.addClass("active");var i=0;this.$floatingBtnsReverse.each(function(n){t({targets:n,opacity:1,scale:[.4,1],translateY:[e.offsetY,0],translateX:[e.offsetX,0],duration:275,delay:i,easing:"easeInOutQuad"}),i+=40})}},{key:"_animateOutFAB",value:function(){var e=this;this.$floatingBtnsReverse.each(function(i){t.remove(i),t({targets:i,opacity:0,scale:.4,translateY:e.offsetY,translateX:e.offsetX,duration:175,easing:"easeOutQuad",complete:function(){e.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var t,i=this,n=window.innerWidth,r=window.innerHeight,o=this.el.getBoundingClientRect(),s=e('<div class="fab-backdrop"></div>'),a=this.$anchor.css("background-color");this.$anchor.append(s),this.offsetX=o.left-n/2+o.width/2,this.offsetY=r-o.bottom,t=n/s[0].clientWidth,this.btnBottom=o.bottom,this.btnLeft=o.left,this.btnWidth=o.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),s.css({"background-color":a}),setTimeout(function(){i.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),i.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){i.$el.css({overflow:"hidden","background-color":a}),s.css({transform:"scale("+t+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),i.$menu.children("li").children("a").css({opacity:1}),i._handleDocumentClickBound=i._handleDocumentClick.bind(i),window.addEventListener("scroll",i._handleCloseBound,!0),document.body.addEventListener("click",i._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var e=this,t=window.innerWidth,i=window.innerHeight,n=this.$el.find(".fab-backdrop"),r=this.$anchor.css("background-color");this.offsetX=this.btnLeft-t/2+this.btnWidth/2,this.offsetY=i-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),n.css({transform:"scale(0)","background-color":r}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){n.remove(),e.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-e.offsetX+"px,0,0)"}),e.$anchor.css({overflow:"",transform:"translate3d(0,"+e.offsetY+"px,0)"}),setTimeout(function(){e.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),e.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FloatingActionButton}},{key:"defaults",get:function(){return i}}]),c}(l);M.FloatingActionButton=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(e){var t={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"",nextMonth:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},i=function(i){function l(t,i){a(this,l);var n=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,i));n.el.M_Datepicker=n,n.options=e.extend({},l.defaults,i),i&&i.hasOwnProperty("i18n")&&"object"==typeof i.i18n&&(n.options.i18n=e.extend({},l.defaults.i18n,i.i18n)),n.options.minDate&&n.options.minDate.setHours(0,0,0,0),n.options.maxDate&&n.options.maxDate.setHours(0,0,0,0),n.id=M.guid(),n._setupVariables(),n._insertHTMLIntoDOM(),n._setupModal(),n._setupEventHandlers(),n.options.defaultDate||(n.options.defaultDate=new Date(Date.parse(n.el.value)));var r=n.options.defaultDate;return l._isDate(r)?n.options.setDefaultDate?(n.setDate(r,!0),n.setInputValue()):n.gotoDate(r):n.gotoDate(new Date),n.isOpen=!1,n}return s(l,i),r(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),e(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var e=this.calendarEl.querySelector(".orig-select-year");e&&M.FormSelect.getInstance(e).destroy();var t=this.calendarEl.querySelector(".orig-select-month");t&&M.FormSelect.getInstance(t).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(e(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){e.isOpen=!1}})}},{key:"toString",value:function(e){var t=this;return e=e||this.options.format,l._isDate(this.date)?e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map(function(e){return t.formats[e]?t.formats[e]():e}).join(""):""}},{key:"setDate",value:function(e,t){if(!e)return this.date=null,this._renderDateDisplay(),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),l._isDate(e)){var i=this.options.minDate,n=this.options.maxDate;l._isDate(i)&&e<i?e=i:l._isDate(n)&&e>n&&(e=n),this.date=new Date(e.getTime()),this._renderDateDisplay(),l._setToStartOfDay(this.date),this.gotoDate(this.date),t||"function"!=typeof this.options.onSelect||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var e=l._isDate(this.date)?this.date:new Date,t=this.options.i18n,i=t.weekdaysShort[e.getDay()],n=t.monthsShort[e.getMonth()],r=e.getDate();this.yearTextEl.innerHTML=e.getFullYear(),this.dateTextEl.innerHTML=i+", "+n+" "+r}},{key:"gotoDate",value:function(e){var t=!0;if(l._isDate(e)){if(this.calendars){var i=new Date(this.calendars[0].year,this.calendars[0].month,1),n=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=e.getTime();n.setMonth(n.getMonth()+1),n.setDate(n.getDate()-1),t=r<i.getTime()||n.getTime()<r}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(e,t,i){var n=this.options,r=new Date,o=l._getDaysInMonth(e,t),s=new Date(e,t,1).getDay(),a=[],c=[];l._setToStartOfDay(r),n.firstDay>0&&(s-=n.firstDay)<0&&(s+=7);for(var u=0===t?11:t-1,h=11===t?0:t+1,d=0===t?e-1:e,f=11===t?e+1:e,p=l._getDaysInMonth(d,u),v=o+s,_=v;_>7;)_-=7;v+=7-_;for(var m=!1,g=0,y=0;g<v;g++){var b=new Date(e,t,g-s+1),w=!!l._isDate(this.date)&&l._compareDates(b,this.date),C=l._compareDates(b,r),S=-1!==n.events.indexOf(b.toDateString()),k=g<s||g>=o+s,x=g-s+1,E=t,L=e,M=n.startRange&&l._compareDates(n.startRange,b),O=n.endRange&&l._compareDates(n.endRange,b),T=n.startRange&&n.endRange&&n.startRange<b&&b<n.endRange;k&&(g<s?(x=p+x,E=u,L=d):(x-=o,E=h,L=f));var D={day:x,month:E,year:L,hasEvent:S,isSelected:w,isToday:C,isDisabled:n.minDate&&b<n.minDate||n.maxDate&&b>n.maxDate||n.disableWeekends&&l._isWeekend(b)||n.disableDayFn&&n.disableDayFn(b),isEmpty:k,isStartRange:M,isEndRange:O,isInRange:T,showDaysInNextAndPreviousMonths:n.showDaysInNextAndPreviousMonths};c.push(this.renderDay(D)),7===++y&&(a.push(this.renderRow(c,n.isRTL,m)),c=[],y=0,m=!1)}return this.renderTable(n,a,i)}},{key:"renderDay",value:function(e){var t=[],i="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),i="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+i+'"><button class="datepicker-day-button" type="button" data-year="'+e.year+'" data-month="'+e.month+'" data-day="'+e.day+'">'+e.day+"</button></td>"}},{key:"renderRow",value:function(e,t,i){return'<tr class="datepicker-row'+(i?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"}},{key:"renderTable",value:function(e,t,i){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+i+'">'+this.renderHead(e)+this.renderBody(t)+"</table></div>"}},{key:"renderHead",value:function(e){var t=void 0,i=[];for(t=0;t<7;t++)i.push('<th scope="col"><abbr title="'+this.renderDayName(e,t)+'">'+this.renderDayName(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?i.reverse():i).join("")+"</tr></thead>"}},{key:"renderBody",value:function(e){return"<tbody>"+e.join("")+"</tbody>"}},{key:"renderTitle",value:function(t,i,n,r,o,s){var a,l,c=void 0,u=void 0,h=void 0,d=this.options,f=n===d.minYear,p=n===d.maxYear,v='<div id="'+s+'" class="datepicker-controls" role="heading" aria-live="assertive">',_=!0,m=!0;for(h=[],c=0;c<12;c++)h.push('<option value="'+(n===o?c-i:12+c-i)+'"'+(c===r?' selected="selected"':"")+(f&&c<d.minMonth||p&&c>d.maxMonth?'disabled="disabled"':"")+">"+d.i18n.months[c]+"</option>");for(a='<select class="datepicker-select orig-select-month" tabindex="-1">'+h.join("")+"</select>",e.isArray(d.yearRange)?(c=d.yearRange[0],u=d.yearRange[1]+1):(c=n-d.yearRange,u=1+n+d.yearRange),h=[];c<u&&c<=d.maxYear;c++)c>=d.minYear&&h.push('<option value="'+c+'" '+(c===n?'selected="selected"':"")+">"+c+"</option>");l='<select class="datepicker-select orig-select-year" tabindex="-1">'+h.join("")+"</select>";v+='<button class="month-prev'+(_?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',v+='<div class="selects-container">',d.showMonthAfterYear?v+=l+a:v+=a+l,v+="</div>",f&&(0===r||d.minMonth>=r)&&(_=!1),p&&(11===r||d.maxMonth<=r)&&(m=!1);return(v+='<button class="month-next'+(m?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(e){if(this.isOpen||e){var t,i=this.options,n=i.minYear,r=i.maxYear,o=i.minMonth,s=i.maxMonth,a="";this._y<=n&&(this._y=n,!isNaN(o)&&this._m<o&&(this._m=o)),this._y>=r&&(this._y=r,!isNaN(s)&&this._m>s&&(this._m=s)),t="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var l=0;l<1;l++)this._renderDateDisplay(),a+=this.renderTitle(this,l,this.calendars[l].year,this.calendars[l].month,this.calendars[0].year,t)+this.render(this.calendars[l].year,this.calendars[l].month,t);this.destroySelects(),this.calendarEl.innerHTML=a;var c=this.calendarEl.querySelector(".orig-select-year"),u=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(c,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(u,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),c.addEventListener("change",this._handleYearChange.bind(this)),u.addEventListener("change",this._handleMonthChange.bind(this)),"function"==typeof this.options.onDraw&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var t=this;this.$modalEl=e(l._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return t.date.getDate()},dd:function(){var e=t.date.getDate();return(e<10?"0":"")+e},ddd:function(){return t.options.i18n.weekdaysShort[t.date.getDay()]},dddd:function(){return t.options.i18n.weekdays[t.date.getDay()]},m:function(){return t.date.getMonth()+1},mm:function(){var e=t.date.getMonth()+1;return(e<10?"0":"")+e},mmm:function(){return t.options.i18n.monthsShort[t.date.getMonth()]},mmmm:function(){return t.options.i18n.months[t.date.getMonth()]},yy:function(){return(""+t.date.getFullYear()).slice(2)},yyyy:function(){return t.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(t){if(this.isOpen){var i=e(t.target);i.hasClass("is-disabled")||(!i.hasClass("datepicker-day-button")||i.hasClass("is-empty")||i.parent().hasClass("is-disabled")?i.closest(".month-prev").length?this.prevMonth():i.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(t.target.getAttribute("data-year"),t.target.getAttribute("data-month"),t.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(e){this.gotoMonth(e.target.value)}},{key:"_handleYearChange",value:function(e){this.gotoYear(e.target.value)}},{key:"gotoMonth",value:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())}},{key:"gotoYear",value:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(e){var t=void 0;e.firedBy!==this&&(t=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),l._isDate(t)&&this.setDate(t))}},{key:"renderDayName",value:function(e,t,i){for(t+=e.firstDay;t>=7;)t-=7;return i?e.i18n.weekdaysAbbrev[t]:e.i18n.weekdays[t]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(e,t){return n(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"_isDate",value:function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())}},{key:"_isWeekend",value:function(e){var t=e.getDay();return 0===t||6===t}},{key:"_setToStartOfDay",value:function(e){l._isDate(e)&&e.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(e,t){return[31,l._isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}},{key:"_isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"_compareDates",value:function(e,t){return e.getTime()===t.getTime()}},{key:"_setToStartOfDay",value:function(e){l._isDate(e)&&e.setHours(0,0,0,0)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Datepicker}},{key:"defaults",get:function(){return t}}]),l}(l);i._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"datepicker","M_Datepicker")}(cash),function(e){var t={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},i=function(i){function l(t,i){a(this,l);var n=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,i));return n.el.M_Timepicker=n,n.options=e.extend({},l.defaults,i),n.id=M.guid(),n._insertHTMLIntoDOM(),n._setupModal(),n._setupVariables(),n._setupEventHandlers(),n._clockSetup(),n._pickerSetup(),n}return s(l,i),r(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),e(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),e(this.spanHours).on("click",this.showView.bind(this,"hours")),e(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(e){e.preventDefault();var t=this.plate.getBoundingClientRect(),i=t.left,n=t.top;this.x0=i+this.options.dialRadius,this.y0=n+this.options.dialRadius,this.moved=!1;var r=l._Pos(e);this.dx=r.x-this.x0,this.dy=r.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(e){e.preventDefault();var t=l._Pos(e),i=t.x-this.x0,n=t.y-this.y0;this.moved=!0,this.setHand(i,n,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(t){var i=this;t.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var n=l._Pos(t),r=n.x-this.x0,o=n.y-this.y0;this.moved&&r===this.dx&&o===this.dy&&this.setHand(r,o),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(e(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){i.done()},this.options.duration/2)),"function"==typeof this.options.onSelect&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=e(l._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var t=document.querySelector(this.options.container);this.options.container&&t?this.$modalEl.appendTo(t):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e),e.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var t=e('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&t.css({visibility:""});var i=e('<div class="confirmation-btns"></div>');e('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(i).on("click",this.close.bind(this)),e('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(i).on("click",this.done.bind(this)),i.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=e('<div class="am-btn">AM</div>'),this.$pmBtn=e('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var e=this.options.dialRadius,t=this.options.tickRadius,i=2*e,n=l._createSVGEl("svg");n.setAttribute("class","timepicker-svg"),n.setAttribute("width",i),n.setAttribute("height",i);var r=l._createSVGEl("g");r.setAttribute("transform","translate("+e+","+e+")");var o=l._createSVGEl("circle");o.setAttribute("class","timepicker-canvas-bearing"),o.setAttribute("cx",0),o.setAttribute("cy",0),o.setAttribute("r",4);var s=l._createSVGEl("line");s.setAttribute("x1",0),s.setAttribute("y1",0);var a=l._createSVGEl("circle");a.setAttribute("class","timepicker-canvas-bg"),a.setAttribute("r",t),r.appendChild(s),r.appendChild(a),r.appendChild(o),n.appendChild(r),this._canvas.appendChild(n),this.hand=s,this.bg=a,this.bearing=o,this.g=r}},{key:"_buildHoursView",value:function(){var t=e('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var i=1;i<13;i+=1){var n=t.clone(),r=i/6*Math.PI,o=this.options.outerRadius;n.css({left:this.options.dialRadius+Math.sin(r)*o-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(r)*o-this.options.tickRadius+"px"}),n.html(0===i?"00":i),this.hoursView.appendChild(n[0])}else for(var s=0;s<24;s+=1){var a=t.clone(),l=s/6*Math.PI,c=s>0&&s<13?this.options.innerRadius:this.options.outerRadius;a.css({left:this.options.dialRadius+Math.sin(l)*c-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(l)*c-this.options.tickRadius+"px"}),a.html(0===s?"00":s),this.hoursView.appendChild(a[0])}}},{key:"_buildMinutesView",value:function(){for(var t=e('<div class="timepicker-tick"></div>'),i=0;i<60;i+=5){var n=t.clone(),r=i/30*Math.PI;n.css({left:this.options.dialRadius+Math.sin(r)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(r)*this.options.outerRadius-this.options.tickRadius+"px"}),n.html(l._addLeadingZero(i)),this.minutesView.appendChild(n[0])}}},{key:"_handleAmPmClick",value:function(t){var i=e(t.target);this.amOrPm=i.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary","AM"===this.amOrPm),this.$pmBtn.toggleClass("text-primary","PM"===this.amOrPm))}},{key:"_updateTimeFromInput",value:function(){var e=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&void 0!==e[1]&&(e[1].toUpperCase().indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",e[1]=e[1].replace("AM","").replace("PM","")),"now"===e[0]){var t=new Date(+new Date+this.options.fromNow);e=[t.getHours(),t.getMinutes()],this.options.twelveHour&&(this.amOrPm=e[0]>=12&&e[0]<24?"PM":"AM")}this.hours=+e[0]||0,this.minutes=+e[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=l._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(t,i){"minutes"===t&&e(this.hoursView).css("visibility");var n="hours"===t,r=n?this.hoursView:this.minutesView,o=n?this.minutesView:this.hoursView;this.currentView=t,e(this.spanHours).toggleClass("text-primary",n),e(this.spanMinutes).toggleClass("text-primary",!n),o.classList.add("timepicker-dial-out"),e(r).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(i),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){e(o).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(t){var i=this.currentView,n=this[i],r="hours"===i,o=n*(Math.PI/(r?6:30)),s=r&&n>0&&n<13?this.options.innerRadius:this.options.outerRadius,a=Math.sin(o)*s,l=-Math.cos(o)*s,c=this;t?(e(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){e(c.canvas).removeClass("timepicker-canvas-out"),c.setHand(a,l)},t)):this.setHand(a,l)}},{key:"setHand",value:function(e,t,i){var n=this,r=Math.atan2(e,-t),o="hours"===this.currentView,s=Math.PI/(o||i?6:30),a=Math.sqrt(e*e+t*t),c=o&&a<(this.options.outerRadius+this.options.innerRadius)/2,u=c?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(u=this.options.outerRadius),r<0&&(r=2*Math.PI+r);var h=Math.round(r/s);r=h*s,this.options.twelveHour?o?0===h&&(h=12):(i&&(h*=5),60===h&&(h=0)):o?(12===h&&(h=0),h=c?0===h?12:h:0===h?0:h+12):(i&&(h*=5),60===h&&(h=0)),this[this.currentView]!==h&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){n.vibrateTimer=null},100))),this[this.currentView]=h,o?this.spanHours.innerHTML=h:this.spanMinutes.innerHTML=l._addLeadingZero(h);var d=Math.sin(r)*(u-this.options.tickRadius),f=-Math.cos(r)*(u-this.options.tickRadius),p=Math.sin(r)*u,v=-Math.cos(r)*u;this.hand.setAttribute("x2",d),this.hand.setAttribute("y2",f),this.bg.setAttribute("cx",p),this.bg.setAttribute("cy",v)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(e,t){var i=this.el.value,n=t?"":l._addLeadingZero(this.hours)+":"+l._addLeadingZero(this.minutes);this.time=n,!t&&this.options.twelveHour&&(n=n+" "+this.amOrPm),this.el.value=n,n!==i&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(e,t){return n(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"_addLeadingZero",value:function(e){return(e<10?"0":"")+e}},{key:"_createSVGEl",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},{key:"_Pos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}:{x:e.clientX,y:e.clientY}}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Timepicker}},{key:"defaults",get:function(){return t}}]),l}(l);i._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"timepicker","M_Timepicker")}(cash),function(e){var t={},i=function(i){function l(t,i){a(this,l);var n=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,i));return n.el.M_CharacterCounter=n,n.options=e.extend({},l.defaults,i),n.isInvalid=!1,n.isValidLength=!1,n._setupCounter(),n._setupEventHandlers(),n}return s(l,i),r(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),e(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){e(this.counterEl).remove()}},{key:"updateCounter",value:function(){var t=+this.$el.attr("data-length"),i=this.el.value.length;this.isValidLength=i<=t;var n=i;t&&(n+="/"+t,this._validateInput()),e(this.counterEl).html(n)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(e,t){return n(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_CharacterCounter}},{key:"defaults",get:function(){return t}}]),l}(l);M.CharacterCounter=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"characterCounter","M_CharacterCounter")}(cash),function(e){var t={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},i=function(i){function l(t,i){a(this,l);var n=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,i));return n.el.M_Carousel=n,n.options=e.extend({},l.defaults,i),n.hasMultipleSlides=n.$el.find(".carousel-item").length>1,n.showIndicators=n.options.indicators&&n.hasMultipleSlides,n.noWrap=n.options.noWrap||!n.hasMultipleSlides,n.pressed=!1,n.dragged=!1,n.offset=n.target=0,n.images=[],n.itemWidth=n.$el.find(".carousel-item").first().innerWidth(),n.itemHeight=n.$el.find(".carousel-item").first().innerHeight(),n.dim=2*n.itemWidth+n.options.padding||1,n._autoScrollBound=n._autoScroll.bind(n),n._trackBound=n._track.bind(n),n.options.fullWidth&&(n.options.dist=0,n._setCarouselHeight(),n.showIndicators&&n.$el.find(".carousel-fixed-item").addClass("with-indicators")),n.$indicators=e('<ul class="indicators"></ul>'),n.$el.find(".carousel-item").each(function(t,i){if(n.images.push(t),n.showIndicators){var r=e('<li class="indicator-item"></li>');0===i&&r[0].classList.add("active"),n.$indicators.append(r)}}),n.showIndicators&&n.$el.append(n.$indicators),n.count=n.images.length,n.options.numVisible=Math.min(n.count,n.options.numVisible),n.xform="transform",["webkit","Moz","O","ms"].every(function(e){var t=e+"Transform";return void 0===document.body.style[t]||(n.xform=t,!1)}),n._setupEventHandlers(),n._scroll(n.offset),n}return s(l,i),r(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),void 0!==window.ontouchstart&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(t,i){t.addEventListener("click",e._handleIndicatorClickBound)}));var t=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=t.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var e=this;void 0!==window.ontouchstart&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(t,i){t.removeEventListener("click",e._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(t){"mousedown"===t.type&&e(t.target).is("img")&&t.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(t),this.referenceY=this._ypos(t),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(e){var t=void 0,i=void 0,n=void 0;if(this.pressed)if(t=this._xpos(e),i=this._ypos(e),n=this.reference-t,Math.abs(this.referenceY-i)<30&&!this.verticalDragged)(n>2||n<-2)&&(this.dragged=!0,this.reference=t,this._scroll(this.offset+n));else{if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(e){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(t){if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1;if(!this.options.fullWidth){var i=e(t.target).closest(".carousel-item").index();0!==this._wrap(this.center)-i&&(t.preventDefault(),t.stopPropagation()),this._cycleTo(i)}}},{key:"_handleIndicatorClick",value:function(t){t.stopPropagation();var i=e(t.target).closest(".indicator-item");i.length&&this._cycleTo(i.index())}},{key:"_handleResize",value:function(e){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(e){var t=this,i=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),n=i.find("img").first();if(n.length)if(n[0].complete){var r=n.height();if(r>0)this.$el.css("height",r+"px");else{var o=n[0].naturalWidth,s=n[0].naturalHeight,a=this.$el.width()/o*s;this.$el.css("height",a+"px")}}else n.one("load",function(e,i){t.$el.css("height",e.offsetHeight+"px")});else if(!e){var l=i.height();this.$el.css("height",l+"px")}}},{key:"_xpos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}},{key:"_ypos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}},{key:"_wrap",value:function(e){return e>=this.count?e%this.count:e<0?this._wrap(this.count+e%this.count):e}},{key:"_track",value:function(){var e,t,i,n;t=(e=Date.now())-this.timestamp,this.timestamp=e,i=this.offset-this.frame,this.frame=this.offset,n=1e3*i/(1+t),this.velocity=.8*n+.2*this.velocity}},{key:"_autoScroll",value:function(){var e=void 0,t=void 0;this.amplitude&&(e=Date.now()-this.timestamp,(t=this.amplitude*Math.exp(-e/this.options.duration))>2||t<-2?(this._scroll(this.target-t),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(t){var i=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),null!=this.scrollingTimeout&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){i.$el.removeClass("scrolling")},this.options.duration);var n,r,o,s,a=void 0,l=void 0,c=void 0,u=void 0,h=void 0,d=void 0,f=this.center,p=1/this.options.numVisible;if(this.offset="number"==typeof t?t:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),s=-(o=(r=this.offset-this.center*this.dim)<0?1:-1)*r*2/this.dim,n=this.count>>1,this.options.fullWidth?(c="translateX(0)",d=1):(c="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",c+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",d=1-p*s),this.showIndicators){var v=this.center%this.count,_=this.$indicators.find(".indicator-item.active");_.index()!==v&&(_.removeClass("active"),this.$indicators.find(".indicator-item").eq(v)[0].classList.add("active"))}if(!this.noWrap||this.center>=0&&this.center<this.count){l=this.images[this._wrap(this.center)],e(l).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),l.classList.add("active"));var m=c+" translateX("+-r/2+"px) translateX("+o*this.options.shift*s*a+"px) translateZ("+this.options.dist*s+"px)";this._updateItemStyle(l,d,0,m)}for(a=1;a<=n;++a){if(this.options.fullWidth?(u=this.options.dist,h=a===n&&r<0?1-s:1):(u=this.options.dist*(2*a+s*o),h=1-p*(2*a+s*o)),!this.noWrap||this.center+a<this.count){l=this.images[this._wrap(this.center+a)];var g=c+" translateX("+(this.options.shift+(this.dim*a-r)/2)+"px) translateZ("+u+"px)";this._updateItemStyle(l,h,-a,g)}if(this.options.fullWidth?(u=this.options.dist,h=a===n&&r>0?1-s:1):(u=this.options.dist*(2*a-s*o),h=1-p*(2*a-s*o)),!this.noWrap||this.center-a>=0){l=this.images[this._wrap(this.center-a)];var y=c+" translateX("+(-this.options.shift+(-this.dim*a-r)/2)+"px) translateZ("+u+"px)";this._updateItemStyle(l,h,-a,y)}}if(!this.noWrap||this.center>=0&&this.center<this.count){l=this.images[this._wrap(this.center)];var b=c+" translateX("+-r/2+"px) translateX("+o*this.options.shift*s+"px) translateZ("+this.options.dist*s+"px)";this._updateItemStyle(l,d,0,b)}var w=this.$el.find(".carousel-item").eq(this._wrap(this.center));f!==this.center&&"function"==typeof this.options.onCycleTo&&this.options.onCycleTo.call(this,w[0],this.dragged),"function"==typeof this.oneTimeCallback&&(this.oneTimeCallback.call(this,w[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(e,t,i,n){e.style[this.xform]=n,e.style.zIndex=i,e.style.opacity=t,e.style.visibility="visible"}},{key:"_cycleTo",value:function(e,t){var i=this.center%this.count-e;this.noWrap||(i<0?Math.abs(i+this.count)<Math.abs(i)&&(i+=this.count):i>0&&Math.abs(i-this.count)<i&&(i-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),i<0?this.target+=this.dim*Math.abs(i):i>0&&(this.target-=this.dim*i),"function"==typeof t&&(this.oneTimeCallback=t),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(e){(void 0===e||isNaN(e))&&(e=1);var t=this.center+e;if(t>=this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t)}},{key:"prev",value:function(e){(void 0===e||isNaN(e))&&(e=1);var t=this.center-e;if(t>=this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t)}},{key:"set",value:function(e,t){if((void 0===e||isNaN(e))&&(e=0),e>this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e,t)}}],[{key:"init",value:function(e,t){return n(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Carousel}},{key:"defaults",get:function(){return t}}]),l}(l);M.Carousel=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"carousel","M_Carousel")}(cash),function(e){var t={onOpen:void 0,onClose:void 0},i=function(i){function l(t,i){a(this,l);var n=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,i));return n.el.M_TapTarget=n,n.options=e.extend({},l.defaults,i),n.isOpen=!1,n.$origin=e("#"+n.$el.attr("data-target")),n._setup(),n._calculatePositioning(),n._setupEventHandlers(),n}return s(l,i),r(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var e=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=e.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(e){this.open()}},{key:"_handleOriginClick",value:function(e){this.close()}},{key:"_handleResize",value:function(e){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(t){e(t.target).closest(".tap-target-wrapper").length||(this.close(),t.preventDefault(),t.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=e(this.wrapper).find(".tap-target-wave")[0],this.originEl=e(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],e(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(e(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var t="fixed"===this.$origin.css("position");if(!t)for(var i=this.$origin.parents(),n=0;n<i.length&&!(t="fixed"==e(i[n]).css("position"));n++);var r=this.$origin.outerWidth(),o=this.$origin.outerHeight(),s=t?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,a=t?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,l=window.innerWidth,c=window.innerHeight,u=l/2,h=c/2,d=a<=u,f=a>u,p=s<=h,v=s>h,_=a>=.25*l&&a<=.75*l,m=this.$el.outerWidth(),g=this.$el.outerHeight(),y=s+o/2-g/2,b=a+r/2-m/2,w=t?"fixed":"absolute",C=_?m:m/2+r,S=g/2,k=p?g/2:0,x=d&&!_?m/2-r:0,E=r,L=v?"bottom":"top",O=2*r,T=O,D=g/2-T/2,R=m/2-O/2,A={};A.top=p?y+"px":"",A.right=f?l-b-m+"px":"",A.bottom=v?c-y-g+"px":"",A.left=d?b+"px":"",A.position=w,e(this.wrapper).css(A),e(this.contentEl).css({width:C+"px",height:S+"px",top:k+"px",right:"0px",bottom:"0px",left:x+"px",padding:E+"px",verticalAlign:L}),e(this.waveEl).css({top:D+"px",left:R+"px",width:O+"px",height:T+"px"})}},{key:"open",value:function(){this.isOpen||("function"==typeof this.options.onOpen&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&("function"==typeof this.options.onClose&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(e,t){return n(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_TapTarget}},{key:"defaults",get:function(){return t}}]),l}(l);M.TapTarget=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tapTarget","M_TapTarget")}(cash),function(e){var t={classes:"",dropdownOptions:{}},i=function(i){function l(t,i){a(this,l);var n=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,i));return n.$el.hasClass("browser-default")?o(n):(n.el.M_FormSelect=n,n.options=e.extend({},l.defaults,i),n.isMultiple=n.$el.prop("multiple"),n.el.tabIndex=-1,n._keysSelected={},n._valueDict={},n._setupDropdown(),n._setupEventHandlers(),n)}return s(l,i),r(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),e(this.dropdownOptions).find("li:not(.optgroup)").each(function(e){e.addEventListener("click",t._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var t=this;e(this.dropdownOptions).find("li:not(.optgroup)").each(function(e){e.removeEventListener("click",t._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(e){this._setValueToInput()}},{key:"_handleOptionClick",value:function(t){t.preventDefault();var i=e(t.target).closest("li")[0],n=i.id;if(!e(i).hasClass("disabled")&&!e(i).hasClass("optgroup")&&n.length){var r=!0;if(this.isMultiple){var o=e(this.dropdownOptions).find("li.disabled.selected");o.length&&(o.removeClass("selected"),o.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(o[0].id)),r=this._toggleEntryFromArray(n)}else e(this.dropdownOptions).find("li").removeClass("selected"),e(i).toggleClass("selected",r);e(this._valueDict[n].el).prop("selected")!==r&&(e(this._valueDict[n].el).prop("selected",r),this.$el.trigger("change"))}t.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var t=this;this.wrapper=document.createElement("div"),e(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(e(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),e(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(i){if(e(i).is("option")){var n=void 0;n=t.isMultiple?t._appendOptionWithIcon(t.$el,i,"multiple"):t._appendOptionWithIcon(t.$el,i),t._addOptionToValueDict(i,n)}else if(e(i).is("optgroup")){var r=e(i).children("option");e(t.dropdownOptions).append(e('<li class="optgroup"><span>'+i.getAttribute("label")+"</span></li>")[0]),r.each(function(e){var i=t._appendOptionWithIcon(t.$el,e,"optgroup-option");t._addOptionToValueDict(e,i)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),e(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&e(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var i=e('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(i[0]),!this.el.disabled){var n=e.extend({},this.options.dropdownOptions);n.onOpenEnd=function(i){var n=e(t.dropdownOptions).find(".selected").first();if(n.length&&(M.keyDown=!0,t.dropdown.focusedIndex=n.index(),t.dropdown._focusFocusedItem(),M.keyDown=!1,t.dropdown.isScrollable)){var r=n[0].getBoundingClientRect().top-t.dropdownOptions.getBoundingClientRect().top;r-=t.dropdownOptions.clientHeight/2,t.dropdownOptions.scrollTop=r}},this.isMultiple&&(n.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,n)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(e,t){var i=Object.keys(this._valueDict).length,n=this.dropdownOptions.id+i,r={};t.id=n,r.el=e,r.optionEl=t,this._valueDict[n]=r}},{key:"_removeDropdown",value:function(){e(this.wrapper).find(".caret").remove(),e(this.input).remove(),e(this.dropdownOptions).remove(),e(this.wrapper).before(this.$el),e(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(t,i,n){var r=i.disabled?"disabled ":"",o="optgroup-option"===n?"optgroup-option ":"",s=this.isMultiple?'<label><input type="checkbox"'+r+'"/><span>'+i.innerHTML+"</span></label>":i.innerHTML,a=e("<li></li>"),l=e("<span></span>");l.html(s),a.addClass(r+" "+o),a.append(l);var c=i.getAttribute("data-icon");if(c){var u=e('<img alt="" src="'+c+'">');a.prepend(u)}return e(this.dropdownOptions).append(a[0]),a[0]}},{key:"_toggleEntryFromArray",value:function(t){var i=!this._keysSelected.hasOwnProperty(t),n=e(this._valueDict[t].optionEl);return i?this._keysSelected[t]=!0:delete this._keysSelected[t],n.toggleClass("selected",i),n.find('input[type="checkbox"]').prop("checked",i),n.prop("selected",i),i}},{key:"_setValueToInput",value:function(){var t=[];if(this.$el.find("option").each(function(i){if(e(i).prop("selected")){var n=e(i).text();t.push(n)}}),!t.length){var i=this.$el.find("option:disabled").eq(0);i.length&&""===i[0].value&&t.push(i.text())}this.input.value=t.join(", ")}},{key:"_setSelectedStates",value:function(){for(var t in this._keysSelected={},this._valueDict){var i=this._valueDict[t],n=e(i.el).prop("selected");e(i.optionEl).find('input[type="checkbox"]').prop("checked",n),n?(this._activateOption(e(this.dropdownOptions),e(i.optionEl)),this._keysSelected[t]=!0):e(i.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(t,i){i&&(this.isMultiple||t.find("li.selected").removeClass("selected"),e(i).addClass("selected"))}},{key:"getSelectedValues",value:function(){var e=[];for(var t in this._keysSelected)e.push(this._valueDict[t].el.value);return e}}],[{key:"init",value:function(e,t){return n(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FormSelect}},{key:"defaults",get:function(){return t}}]),l}(l);M.FormSelect=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"formSelect","M_FormSelect")}(cash),function(e,t){var i={},c=function(l){function c(t,i){a(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,c,t,i));return n.el.M_Range=n,n.options=e.extend({},c.defaults,i),n._mousedown=!1,n._setupThumb(),n._setupEventHandlers(),n}return s(c,l),r(c,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){e(this.value).html(this.$el.val()),e(this.thumb).hasClass("active")||this._showRangeBubble();var t=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",t+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(t){if(e(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),e(this.thumb).hasClass("active")||this._showRangeBubble(),"input"!==t.type){var i=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",i+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){e(this.thumb).hasClass("active")||this._showRangeBubble();var t=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",t+"px"),e(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var i=7+parseInt(this.$el.css("padding-left"))+"px";e(this.thumb).hasClass("active")&&(t.remove(this.thumb),t({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:i,duration:100})),e(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),e(this.thumb).addClass("thumb"),e(this.value).addClass("value"),e(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){e(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var i=-7+parseInt(e(this.thumb).parent().css("padding-left"))+"px";t.remove(this.thumb),t({targets:this.thumb,height:30,width:30,top:-30,marginLeft:i,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var e=this.$el.width()-15,t=parseFloat(this.$el.attr("max"))||100,i=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-i)/(t-i)*e}}],[{key:"init",value:function(e,t){return n(c.__proto__||Object.getPrototypeOf(c),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Range}},{key:"defaults",get:function(){return i}}]),c}(l);M.Range=c,M.jQueryLoaded&&M.initializeJqueryWrapper(c,"range","M_Range"),c.init(e("input[type=range]"))}(cash,M.anime)}(n,n.exports);const w="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function C(e,t){e.appendChild(t)}function S(e,t,i){e.insertBefore(t,i||null)}function k(e){e.parentNode&&e.parentNode.removeChild(e)}function x(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function E(e){return document.createElement(e)}function L(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function O(e){return document.createTextNode(e)}function T(){return O(" ")}function D(){return O("")}function R(e,t,i,n){return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)}function A(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function P(e,t,i){null==i?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function B(e,t){t=""+t,e.data!==t&&(e.data=t)}function I(e,t){e.value=null==t?"":t}function H(e,t,i,n){null==i?e.style.removeProperty(t):e.style.setProperty(t,i,n?"important":"")}function j(e,t,i){e.classList[i?"add":"remove"](t)}function W(e,t){return new e(t)}let F;function N(e){F=e}function z(){if(!F)throw new Error("Function called outside component initialization");return F}function U(e){z().$$.on_mount.push(e)}function q(e){z().$$.on_destroy.push(e)}function Y(){const e=z();return(t,i,{cancelable:n=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t,{bubbles:i=!1,cancelable:n=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,i,n,t),r}(t,i,{cancelable:n});return r.slice().forEach(t=>{t.call(e,o)}),!o.defaultPrevented}return!0}}const V=[],K=[];let G=[];const X=[],Z=Promise.resolve();let J=!1;function Q(){J||(J=!0,Z.then(ne))}function ee(e){G.push(e)}const te=new Set;let ie=0;function ne(){if(0!==ie)return;const e=F;do{try{for(;ie<V.length;){const e=V[ie];ie++,N(e),re(e.$$)}}catch(e){throw V.length=0,ie=0,e}for(N(null),V.length=0,ie=0;K.length;)K.pop()();for(let e=0;e<G.length;e+=1){const t=G[e];te.has(t)||(te.add(t),t())}G.length=0}while(V.length);for(;X.length;)X.pop()();J=!1,te.clear(),N(e)}function re(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ee)}}const oe=new Set;let se;function ae(){se={r:0,c:[],p:se}}function le(){se.r||l(se.c),se=se.p}function ce(e,t){e&&e.i&&(oe.delete(e),e.i(t))}function ue(e,t,i,n){if(e&&e.o){if(oe.has(e))return;oe.add(e),se.c.push(()=>{oe.delete(e),n&&(i&&e.d(1),n())}),e.o(t)}else n&&n()}function he(e,t){e.d(1),t.delete(e.key)}function de(e,t){ue(e,1,1,()=>{t.delete(e.key)})}function fe(e,t,i,n,r,o,s,a,c,u,h,d){let f=e.length,p=o.length,v=f;const _={};for(;v--;)_[e[v].key]=v;const m=[],g=new Map,y=new Map,b=[];for(v=p;v--;){const e=d(r,o,v),a=i(e);let l=s.get(a);l?n&&b.push(()=>l.p(e,t)):(l=u(a,e),l.c()),g.set(a,m[v]=l),a in _&&y.set(a,Math.abs(v-_[a]))}const w=new Set,C=new Set;function S(e){ce(e,1),e.m(a,h),s.set(e.key,e),h=e.first,p--}for(;f&&p;){const t=m[p-1],i=e[f-1],n=t.key,r=i.key;t===i?(h=t.first,f--,p--):g.has(r)?!s.has(n)||w.has(n)?S(t):C.has(r)?f--:y.get(n)>y.get(r)?(C.add(n),S(t)):(w.add(r),f--):(c(i,s),f--)}for(;f--;){const t=e[f];g.has(t.key)||c(t,s)}for(;p;)S(m[p-1]);return l(b),m}function pe(e){e&&e.c()}function ve(e,t,i,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,i),n||ee(()=>{const t=e.$$.on_mount.map(s).filter(c);e.$$.on_destroy?e.$$.on_destroy.push(...t):l(t),e.$$.on_mount=[]}),o.forEach(ee)}function _e(e,t){const i=e.$$;null!==i.fragment&&(!function(e){const t=[],i=[];G.forEach(n=>-1===e.indexOf(n)?t.push(n):i.push(n)),i.forEach(e=>e()),G=t}(i.after_update),l(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function me(e,t,i,n,o,s,c,u=[-1]){const h=F;N(e);const d=e.$$={fragment:null,ctx:[],props:s,update:r,not_equal:o,bound:a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:a(),dirty:u,skip_bound:!1,root:t.target||h.$$.root};c&&c(d.root);let f=!1;if(d.ctx=i?i(e,t.props||{},(t,i,...n)=>{const r=n.length?n[0]:i;return d.ctx&&o(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),f&&function(e,t){-1===e.$$.dirty[0]&&(V.push(e),Q(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),i}):[],d.update(),f=!0,l(d.before_update),d.fragment=!!n&&n(d.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);d.fragment&&d.fragment.l(e),e.forEach(k)}else d.fragment&&d.fragment.c();t.intro&&ce(e.$$.fragment),ve(e,t.target,t.anchor,t.customElement),ne()}N(h)}class ge{$destroy(){_e(this,1),this.$destroy=r}$on(e,t){if(!c(t))return r;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ye(e){let t,i,n,o;return{c(){t=L("svg"),i=L("path"),n=L("path"),P(i,"d","M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"),P(n,"d","M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"),P(t,"xmlns","http://www.w3.org/2000/svg"),P(t,"width",e[0]),P(t,"height",e[0]),P(t,"fill","none"),P(t,"viewBox","0 0 24 24"),P(t,"stroke","currentColor"),P(t,"stroke-width",e[1]),P(t,"stroke-linecap","round"),P(t,"stroke-linejoin","round"),P(t,"class",o="feather feather-book-open "+e[2])},m(e,r){S(e,t,r),C(t,i),C(t,n)},p(e,[i]){1&i&&P(t,"width",e[0]),1&i&&P(t,"height",e[0]),2&i&&P(t,"stroke-width",e[1]),4&i&&o!==(o="feather feather-book-open "+e[2])&&P(t,"class",o)},i:r,o:r,d(e){e&&k(t)}}}function be(e,t,i){let{size:n="100%"}=t,{strokeWidth:r=2}=t,{class:o=""}=t;return"100%"!==n&&(n="x"===n.slice(-1)?n.slice(0,n.length-1)+"em":parseInt(n)+"px"),e.$$set=e=>{"size"in e&&i(0,n=e.size),"strokeWidth"in e&&i(1,r=e.strokeWidth),"class"in e&&i(2,o=e.class)},[n,r,o]}class we extends ge{constructor(e){super(),me(this,e,be,ye,u,{size:0,strokeWidth:1,class:2})}}const Ce=[];function Se(e,t=r){let i;const n=new Set;function o(t){if(u(e,t)&&(e=t,i)){const t=!Ce.length;for(const t of n)t[1](),Ce.push(t,e);if(t){for(let e=0;e<Ce.length;e+=2)Ce[e][0](Ce[e+1]);Ce.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=r){const l=[s,a];return n.add(l),1===n.size&&(i=t(o)||r),s(e),()=>{n.delete(l),0===n.size&&i&&(i(),i=null)}}}}const ke=["north","south","east","west"],xe=["up","down"];const Ee="talesmud_layout_v1",Le=[{id:"room-1",widgetType:"room",x:0,y:0,w:12,h:14,visible:!0},{id:"terminal-1",widgetType:"terminal",x:12,y:0,w:12,h:14,visible:!0},{id:"actionbar-1",widgetType:"actionbar",x:0,y:14,w:24,h:3,visible:!0}];function Me(e,t=!1){return e.map(e=>({...e,24:{x:e.x,y:e.y,w:e.w,h:e.h,min:{w:4,h:3},max:{w:24,h:20},draggable:t,resizable:t,customResizer:t}}))}function Oe(e,t){return e.map(e=>({...e,24:{...e[24],draggable:t,resizable:t}}))}const Te=function(){const{subscribe:e,set:t,update:i}=Se({widgets:Me(Le,!1),editMode:!1,pendingWidgets:null});return{subscribe:e,loadFromStorage(){try{const e=localStorage.getItem(Ee);if(e){const t=JSON.parse(e);if(1===t.version&&Array.isArray(t.widgets))return i(e=>({...e,widgets:Me(t.widgets,e.editMode)})),!0}}catch(e){console.warn("Failed to load layout from storage:",e)}return!1},saveToStorage(){const t=p({subscribe:e}),i={version:1,savedAt:(new Date).toISOString(),widgets:(n=t.widgets,n.map(e=>({id:e.id,widgetType:e.widgetType,x:e[24]?.x??e.x,y:e[24]?.y??e.y,w:e[24]?.w??e.w,h:e[24]?.h??e.h,visible:e.visible??!0})))};var n;try{return localStorage.setItem(Ee,JSON.stringify(i)),!0}catch(e){return console.error("Failed to save layout:",e),!1}},enterEditMode(){i(e=>({...e,editMode:!0,widgets:Oe(e.widgets,!0),pendingWidgets:JSON.parse(JSON.stringify(e.widgets))}))},exitEditMode(e=!0){i(t=>{if(e)return{...t,editMode:!1,widgets:Oe(t.widgets,!1),pendingWidgets:null};{const e=t.pendingWidgets||t.widgets;return{...t,editMode:!1,widgets:Oe(e,!1),pendingWidgets:null}}}),e&&this.saveToStorage()},updateWidgets(e){i(t=>({...t,widgets:e}))},updateWidget(e,t){i(i=>({...i,widgets:i.widgets.map(i=>i.id===e?{...i,...t}:i)}))},addWidget(e,t={}){const n=`${e}-${Date.now()}`,r={id:n,widgetType:e,x:0,y:0,w:t.defaultSize?.w||6,h:t.defaultSize?.h||6,visible:!0,24:{x:0,y:0,w:t.defaultSize?.w||6,h:t.defaultSize?.h||6,min:{w:t.minSize?.w||4,h:t.minSize?.h||3},max:{w:24,h:20},draggable:!0,resizable:!0,customResizer:!0}};return i(e=>{const t=Math.max(...e.widgets.map(e=>(e[24]?.y||e.y)+(e[24]?.h||e.h)),0);return r.y=t,r[24].y=t,{...e,widgets:[...e.widgets,r]}}),n},removeWidget(e){i(t=>({...t,widgets:t.widgets.filter(t=>t.id!==e)}))},resetToDefault(){i(e=>({...e,widgets:Me(Le,e.editMode)}))},getWidget:t=>p({subscribe:e}).widgets.find(e=>e.id===t),canAddWidget(t,i){const n=p({subscribe:e}),r=i[t];if(!r)return!1;const o=n.widgets.filter(e=>e.widgetType===t).length;return o<(r.maxInstances||1/0)}}}();function De(e,t){let i=0;return function(...n){let r=new Date;r-i>=t&&(e(...n),i=r)}}function Re(e,t){const i=e.map(e=>{const i=e[t];return(i&&i.y)+(i&&i.h)||0});return Math.max(...i,1)}"undefined"!=typeof window&&Te.loadFromStorage();const Ae=(e,t)=>Array.from(Array(e),()=>new Array(t));function Pe(e,t,i){let n=Ae(t,i);for(var r=0;r<e.length;r++){const t=e[r][i];if(t){const{x:a,y:l,h:c}=t,u=e[r].id,h=Math.min(i,t.w);for(var o=l;o<l+c;o++){const e=n[o];for(var s=a;s<a+h;s++)e[s]={...t,id:u}}}}return n}function Be(e,t,i,n){let r=Ae(i,n);for(var o=0;o<e.length;o++){const i=e[o][n],l=e[o].id,{x:c,y:u,h:h}=i,d=Math.min(n,i.w);if(-1===t.indexOf(l))for(var s=u;s<u+h;s++){const e=r[s];if(e)for(var a=c;a<c+d;a++)e[a]={...i,id:l}}}return r}function Ie(e,t){return t.find(t=>t.id===e)}function He(e,t){const i=e[0].length,n=Math.min(i,t.w);let r=i-n,o=e.length;for(var s=0;s<o;s++){const i=e[s];for(var a=0;a<r+1;a++){if(i.slice(a,a+n).every(e=>void 0===e)){const i=e.slice(s,s+t.h).every(e=>e.slice(a,a+n).every(e=>void 0===e));if(i)return{y:s,x:a}}}}return{y:o,x:0}}const je=(e,t)=>({...e[t],id:e.id}),We=(e,t,i,n)=>e.map(e=>e.id===t.id?{...e,[n]:{...e[n],...i}}:e);function Fe(e,t,i,n){const r=je(e,i);let o=Be(t,[r.id],Re(t,i),i);const s=function(e,t,i){const{h:n,x:r,y:o}=i,s=Math.min(t[0].length,i.w),a=t.slice(o,o+n);let l=[];for(var c=0;c<a.length;c++){let e=a[c].slice(r,r+s);l=[...l,...e.map(e=>e.id&&e.id!==i.id&&e.id).filter(Boolean)]}return[...new Set(l)]}(0,o,r);let a=function(e,t){return t.filter(t=>-1!==e.indexOf(t.id))}(s,t);if(a.find(e=>e[i].fixed))return t;t=We(t,e,r,i),o=Be(t,s,Re(t,i),i);let l=t,c=s,u=[];return a.forEach(e=>{let t=He(o,e[i]);u.push(e.id),l=We(l,e,t,i);let n=c.filter(e=>-1===u.indexOf(e));o=Be(l,n,Re(l,i),i)}),l}function $e(e,t,i){let n=Pe(e,Re(e,t),t);const r=function(e,t){return e.map(e=>{if(!e[t])return e.id}).filter(Boolean)}(e,t);let o=[...e];return r.forEach(r=>{const s=e.find(e=>e.id===r),a=function(e,t,i,n){return n.map(([e,i])=>t[i]&&i).filter(Boolean).reduce(function(e,t){return Math.abs(t-i)<Math.abs(e-i)?t:e})}(0,s,t,i),l=He(n,s[a]),c={...s,[t]:{...s[a],...l}};o=o.map(e=>e.id===r?c:e),n=Pe(o,Re(o,t),t)}),o}const Ne=e=>({}),ze=e=>({movePointerDown:e[18],resizePointerDown:e[19]});function Ue(e){let t,i,n;return{c(){t=E("div"),P(t,"class","svlt-grid-resizer svelte-x23om8")},m(r,o){S(r,t,o),i||(n=R(t,"pointerdown",e[19]),i=!0)},p:r,d(e){e&&k(t),i=!1,n()}}}function qe(e){let t;return{c(){t=E("div"),P(t,"class","svlt-grid-shadow shadow-active svelte-x23om8"),H(t,"width",e[12].w*e[6]-2*e[8]+"px"),H(t,"height",e[12].h*e[7]-2*e[9]+"px"),H(t,"transform","translate("+(e[12].x*e[6]+e[8])+"px, "+(e[12].y*e[7]+e[9])+"px)")},m(i,n){S(i,t,n),e[29](t)},p(e,i){4416&i[0]&&H(t,"width",e[12].w*e[6]-2*e[8]+"px"),4736&i[0]&&H(t,"height",e[12].h*e[7]-2*e[9]+"px"),5056&i[0]&&H(t,"transform","translate("+(e[12].x*e[6]+e[8])+"px, "+(e[12].y*e[7]+e[9])+"px)")},d(i){i&&k(t),e[29](null)}}}function Ye(e){let t,i,n,r,o,s,a,l;const u=e[28].default,h=_(u,e,e[27],ze);let d=e[4]&&!e[10].customResizer&&Ue(e),f=(e[13]||e[16])&&qe(e);return{c(){t=E("div"),h&&h.c(),i=T(),d&&d.c(),r=T(),f&&f.c(),o=D(),P(t,"draggable",!1),P(t,"class","svlt-grid-item svelte-x23om8"),P(t,"style",n="width: "+(e[13]?e[15].width:e[0])+"px; height:"+(e[13]?e[15].height:e[1])+"px; "+(e[13]?`transform: translate(${e[14].x}px, ${e[14].y}px);top:${e[17].top}px;left:${e[17].left}px;`:e[16]?`transform: translate(${e[14].x}px, ${e[14].y}px); position:absolute; transition: width 0.2s, height 0.2s;`:`transition: transform 0.2s, opacity 0.2s; transform: translate(${e[2]}px, ${e[3]}px); `)),j(t,"svlt-grid-active",e[13]||e[16]&&e[17])},m(n,u){S(n,t,u),h&&h.m(t,null),C(t,i),d&&d.m(t,null),S(n,r,u),f&&f.m(n,u),S(n,o,u),s=!0,a||(l=R(t,"pointerdown",function(){c(e[10]&&e[10].customDragger?null:e[5]&&e[18])&&(e[10]&&e[10].customDragger?null:e[5]&&e[18]).apply(this,arguments)}),a=!0)},p(i,r){e=i,h&&h.p&&(!s||134217728&r[0])&&y(h,u,e,e[27],s?g(u,e[27],r,Ne):b(e[27]),ze),e[4]&&!e[10].customResizer?d?d.p(e,r):(d=Ue(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null),(!s||253967&r[0]&&n!==(n="width: "+(e[13]?e[15].width:e[0])+"px; height:"+(e[13]?e[15].height:e[1])+"px; "+(e[13]?`transform: translate(${e[14].x}px, ${e[14].y}px);top:${e[17].top}px;left:${e[17].left}px;`:e[16]?`transform: translate(${e[14].x}px, ${e[14].y}px); position:absolute; transition: width 0.2s, height 0.2s;`:`transition: transform 0.2s, opacity 0.2s; transform: translate(${e[2]}px, ${e[3]}px); `)))&&P(t,"style",n),(!s||204800&r[0])&&j(t,"svlt-grid-active",e[13]||e[16]&&e[17]),e[13]||e[16]?f?f.p(e,r):(f=qe(e),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i(e){s||(ce(h,e),s=!0)},o(e){ue(h,e),s=!1},d(e){e&&k(t),h&&h.d(e),d&&d.d(),e&&k(r),f&&f.d(e),e&&k(o),a=!1,l()}}}function Ve(e,t,i){let{$$slots:n={},$$scope:r}=t;const o=Y();let s,a,l,c,{sensor:u}=t,{width:h}=t,{height:d}=t,{left:f}=t,{top:p}=t,{resizable:v}=t,{draggable:_}=t,{id:m}=t,{container:g}=t,{xPerPx:y}=t,{yPerPx:b}=t,{gapX:w}=t,{gapY:C}=t,{item:S}=t,{max:k}=t,{min:x}=t,{cols:E}=t,{nativeContainer:L}=t,M={},O=!1,T={x:0,y:0},D={x:0,y:0},R={width:h,height:d},A=!1;const P=()=>{const e=s.getBoundingClientRect(),t=I.left+D.x,n=I.top+D.y;i(14,D.x=M.x*y+w-(e.x-t),D),i(14,D.y=M.y*b+C-(e.y-n),D),i(13,O=!1),i(16,A=!0),clearTimeout(c),c=setTimeout(()=>{i(16,A=!1)},100),o("pointerup",{id:m})};let B,I,H,j=(e,t)=>{o("repaint",{id:m,shadow:M,isPointerUp:t,onUpdate:e})},W=0;const F=e=>{if(e===document.documentElement||!e){const{height:e,top:t,right:i,bottom:n,left:r}=L.getBoundingClientRect();return{top:Math.max(0,t),bottom:Math.min(window.innerHeight,n)}}return e.getBoundingClientRect()},$=e=>e||document.documentElement,N=({clientX:e,clientY:t,target:n})=>{a=e,l=t,T={x:f,y:p},i(12,M={x:S.x,y:S.y,w:S.w,h:S.h}),i(15,R={width:h,height:d}),B=F(g),H=$(g),i(14,D={x:0,y:0}),i(17,I=n.closest(".svlt-grid-item").getBoundingClientRect()),i(13,O=!0),i(16,A=!1),W=H.scrollTop,window.addEventListener("pointermove",X),window.addEventListener("pointerup",Z)};let z={x:0,y:0},U={x:0,y:0},q=0;const V=()=>{clearInterval(q),q=!1,z={x:0,y:0},U={x:0,y:0}},G=()=>{const e=H.scrollTop-W,t=T.x+D.x,n=T.y+(D.y+e);let r=Math.round(t/y),o=Math.round(n/b);i(12,M.x=Math.max(Math.min(r,E-M.w),0),M),i(12,M.y=Math.max(o,0),M),k.y&&i(12,M.y=Math.min(M.y,k.y),M),j()},X=e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const{clientX:t,clientY:n}=e;i(14,D={x:t-a,y:n-l});const r=u;let o=Math.max(0,(B.top+r-n)/r),s=Math.max(0,(n-(B.bottom-r))/r);const c=o>0&&0===s,h=s>0&&0===o;z.y=c?-1:h?1:0,U.y=-1===z.y?o:s,U.y>0?q||(q=setInterval(()=>{H.scrollTop+=2*(U.y+Math.sign(U.y))*z.y,G()},10)):q?V():G()},Z=e=>{V(),window.removeEventListener("pointerdown",N),window.removeEventListener("pointermove",X),window.removeEventListener("pointerup",Z),j(P,!0)};let J={x:0,y:0},Q={width:0,height:0};const ee=({pageX:e,pageY:t})=>{i(15,R.width=Q.width+e-J.x,R),i(15,R.height=Q.height+t-J.y,R);let n=E-M.x;n=Math.min(k.w,n)||n,i(15,R.width=Math.max(Math.min(R.width,n*y-2*w),x.w*y-2*w),R),i(15,R.height=Math.max(R.height,x.h*b-2*C),R),k.h&&i(15,R.height=Math.min(R.height,k.h*b-2*C),R),i(12,M.w=Math.round((R.width+2*w)/y),M),i(12,M.h=Math.round((R.height+2*C)/b),M),j()},te=e=>{e.stopPropagation(),j(P,!0),window.removeEventListener("pointermove",ee),window.removeEventListener("pointerup",te)};return e.$$set=e=>{"sensor"in e&&i(20,u=e.sensor),"width"in e&&i(0,h=e.width),"height"in e&&i(1,d=e.height),"left"in e&&i(2,f=e.left),"top"in e&&i(3,p=e.top),"resizable"in e&&i(4,v=e.resizable),"draggable"in e&&i(5,_=e.draggable),"id"in e&&i(21,m=e.id),"container"in e&&i(22,g=e.container),"xPerPx"in e&&i(6,y=e.xPerPx),"yPerPx"in e&&i(7,b=e.yPerPx),"gapX"in e&&i(8,w=e.gapX),"gapY"in e&&i(9,C=e.gapY),"item"in e&&i(10,S=e.item),"max"in e&&i(23,k=e.max),"min"in e&&i(24,x=e.min),"cols"in e&&i(25,E=e.cols),"nativeContainer"in e&&i(26,L=e.nativeContainer),"$$scope"in e&&i(27,r=e.$$scope)},[h,d,f,p,v,_,y,b,w,C,S,s,M,O,D,R,A,I,N,e=>{e.stopPropagation();const{pageX:t,pageY:n}=e;J={x:t,y:n},Q={width:h,height:d},i(14,D={x:0,y:0}),i(17,I=e.target.closest(".svlt-grid-item").getBoundingClientRect()),i(15,R={width:h,height:d}),i(13,O=!0),i(16,A=!1),i(12,M={x:S.x,y:S.y,w:S.w,h:S.h}),B=F(g),H=$(g),window.addEventListener("pointermove",ee),window.addEventListener("pointerup",te)},u,m,g,k,x,E,L,r,n,function(e){K[e?"unshift":"push"](()=>{s=e,i(11,s)})}]}class Ke extends ge{constructor(e){super(),me(this,e,Ve,Ye,u,{sensor:20,width:0,height:1,left:2,top:3,resizable:4,draggable:5,id:21,container:22,xPerPx:6,yPerPx:7,gapX:8,gapY:9,item:10,max:23,min:24,cols:25,nativeContainer:26},null,[-1,-1])}}function Ge(e,t,i){const n=e.slice();return n[28]=t[i],n[30]=i,n}const Xe=e=>({movePointerDown:2&e[1],resizePointerDown:1&e[1],dataItem:1&e[0],item:17&e[0],index:1&e[0]}),Ze=e=>({movePointerDown:e[32],resizePointerDown:e[31],dataItem:e[28],item:e[28][e[4]],index:e[30]});function Je(e){let t,i,n=[],r=new Map,o=e[0];const s=e=>e[28].id;for(let t=0;t<o.length;t+=1){let i=Ge(e,o,t),a=s(i);r.set(a,n[t]=tt(a,i))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=D()},m(e,r){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,r);S(e,t,r),i=!0},p(e,i){2105213&i[0]|3&i[1]&&(o=e[0],ae(),n=fe(n,i,s,1,e,o,r,t.parentNode,de,tt,t,Ge),le())},i(e){if(!i){for(let e=0;e<o.length;e+=1)ce(n[e]);i=!0}},o(e){for(let e=0;e<n.length;e+=1)ue(n[e]);i=!1},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&k(t)}}}function Qe(e){let t;const i=e[19].default,n=_(i,e,e[21],Ze);return{c(){n&&n.c()},m(e,i){n&&n.m(e,i),t=!0},p(e,r){n&&n.p&&(!t||2097169&r[0]|3&r[1])&&y(n,i,e,e[21],t?g(i,e[21],r,Xe):b(e[21]),Ze)},i(e){t||(ce(n,e),t=!0)},o(e){ue(n,e),t=!1},d(e){n&&n.d(e)}}}function et(e){let t,i,n=e[28][e[4]]&&Qe(e);return{c(){n&&n.c(),t=T()},m(e,r){n&&n.m(e,r),S(e,t,r),i=!0},p(e,i){e[28][e[4]]?n?(n.p(e,i),17&i[0]&&ce(n,1)):(n=Qe(e),n.c(),ce(n,1),n.m(t.parentNode,t)):n&&(ae(),ue(n,1,1,()=>{n=null}),le())},i(e){i||(ce(n),i=!0)},o(e){ue(n),i=!1},d(e){n&&n.d(e),e&&k(t)}}}function tt(e,t){let i,n,r;return n=new Ke({props:{id:t[28].id,resizable:t[28][t[4]]&&t[28][t[4]].resizable,draggable:t[28][t[4]]&&t[28][t[4]].draggable,xPerPx:t[6],yPerPx:t[10],width:Math.min(t[4],t[28][t[4]]&&t[28][t[4]].w)*t[6]-2*t[9],height:(t[28][t[4]]&&t[28][t[4]].h)*t[10]-2*t[8],top:(t[28][t[4]]&&t[28][t[4]].y)*t[10]+t[8],left:(t[28][t[4]]&&t[28][t[4]].x)*t[6]+t[9],item:t[28][t[4]],min:t[28][t[4]]&&t[28][t[4]].min,max:t[28][t[4]]&&t[28][t[4]].max,cols:t[4],gapX:t[9],gapY:t[8],sensor:t[3],container:t[2],nativeContainer:t[5],$$slots:{default:[et,({resizePointerDown:e,movePointerDown:t})=>({31:e,32:t}),({resizePointerDown:e,movePointerDown:t})=>[0,(e?1:0)|(t?2:0)]]},$$scope:{ctx:t}}}),n.$on("repaint",t[12]),n.$on("pointerup",t[11]),{key:e,first:null,c(){i=D(),pe(n.$$.fragment),this.first=i},m(e,t){S(e,i,t),ve(n,e,t),r=!0},p(e,i){t=e;const r={};1&i[0]&&(r.id=t[28].id),17&i[0]&&(r.resizable=t[28][t[4]]&&t[28][t[4]].resizable),17&i[0]&&(r.draggable=t[28][t[4]]&&t[28][t[4]].draggable),64&i[0]&&(r.xPerPx=t[6]),593&i[0]&&(r.width=Math.min(t[4],t[28][t[4]]&&t[28][t[4]].w)*t[6]-2*t[9]),273&i[0]&&(r.height=(t[28][t[4]]&&t[28][t[4]].h)*t[10]-2*t[8]),273&i[0]&&(r.top=(t[28][t[4]]&&t[28][t[4]].y)*t[10]+t[8]),593&i[0]&&(r.left=(t[28][t[4]]&&t[28][t[4]].x)*t[6]+t[9]),17&i[0]&&(r.item=t[28][t[4]]),17&i[0]&&(r.min=t[28][t[4]]&&t[28][t[4]].min),17&i[0]&&(r.max=t[28][t[4]]&&t[28][t[4]].max),16&i[0]&&(r.cols=t[4]),512&i[0]&&(r.gapX=t[9]),256&i[0]&&(r.gapY=t[8]),8&i[0]&&(r.sensor=t[3]),4&i[0]&&(r.container=t[2]),32&i[0]&&(r.nativeContainer=t[5]),2097169&i[0]|3&i[1]&&(r.$$scope={dirty:i,ctx:t}),n.$set(r)},i(e){r||(ce(n.$$.fragment,e),r=!0)},o(e){ue(n.$$.fragment,e),r=!1},d(e){e&&k(i),_e(n,e)}}}function it(e){let t,i,n=(e[6]||!e[1])&&Je(e);return{c(){t=E("div"),n&&n.c(),P(t,"class","svlt-grid-container svelte-1k5vgfu"),H(t,"height",e[7]+"px")},m(r,o){S(r,t,o),n&&n.m(t,null),e[20](t),i=!0},p(e,r){e[6]||!e[1]?n?(n.p(e,r),66&r[0]&&ce(n,1)):(n=Je(e),n.c(),ce(n,1),n.m(t,null)):n&&(ae(),ue(n,1,1,()=>{n=null}),le()),(!i||128&r[0])&&H(t,"height",e[7]+"px")},i(e){i||(ce(n),i=!0)},o(e){ue(n),i=!1},d(i){i&&k(t),n&&n.d(),e[20](null)}}}function nt(e,t,i){let n,r,o,{$$slots:s={},$$scope:a}=t;const l=Y();let c,u,h,{fillSpace:d=!1}=t,{items:f}=t,{rowHeight:p}=t,{cols:v}=t,{gap:_=[10,10]}=t,{fastStart:m=!1}=t,{throttleUpdate:g=100}=t,{throttleResize:y=100}=t,{scroller:b}=t,{sensor:w=20}=t,C=0,S=p;const k=De(()=>{i(0,f=$e(f,c,v)),l("resize",{cols:c,xPerPx:C,yPerPx:S,width:h})},g);U(()=>{const e=new ResizeObserver(e=>{requestAnimationFrame(()=>{let t=e[0].contentRect.width;t!==h&&(i(4,c=((e,t)=>{const i=t.slice().sort((e,t)=>e[0]-t[0]),n=i.find(t=>{const[i]=t;return e<=i});return n?n[1]:i[i.length-1][1]})(t,v)),i(6,C=t/c),h?k():(i(0,f=$e(f,c,v)),l("mount",{cols:c,xPerPx:C,yPerPx:S})),h=t)})});return e.observe(u),()=>e.disconnect()});const x=({detail:e})=>{let t=Ie(e.id,f);t&&(t={...t,[c]:{...t[c],...e.shadow}},i(0,f=d?function(e,t,i){const n=je(e,i),r=t.map(e=>e.id).filter(e=>e!==n.id),o=t.filter(e=>e.id!==n.id);let s=We(t,e,n,i),a=Be(s,r,Re(s,i),i),l=s,c=[];return o.forEach(e=>{let t=He(a,e[i]);c.push(e.id),l=We(l,e,t,i);let n=r.filter(e=>-1===c.indexOf(e));a=Be(l,n,Re(l,i),i)}),l}(t,f,c,Ie(e.id,f)):Fe(t,f,c,Ie(e.id,f))),e.onUpdate&&e.onUpdate(),l("change",{unsafeItem:t,id:t.id,cols:c}))},E=De(x,y);return e.$$set=e=>{"fillSpace"in e&&i(13,d=e.fillSpace),"items"in e&&i(0,f=e.items),"rowHeight"in e&&i(14,p=e.rowHeight),"cols"in e&&i(15,v=e.cols),"gap"in e&&i(16,_=e.gap),"fastStart"in e&&i(1,m=e.fastStart),"throttleUpdate"in e&&i(17,g=e.throttleUpdate),"throttleResize"in e&&i(18,y=e.throttleResize),"scroller"in e&&i(2,b=e.scroller),"sensor"in e&&i(3,w=e.sensor),"$$scope"in e&&i(21,a=e.$$scope)},e.$$.update=()=>{65536&e.$$.dirty[0]&&i(9,[n,r]=_,n,(i(8,r),i(16,_))),17&e.$$.dirty[0]&&i(7,o=function(e,t,i){return Re(e,i)*t}(f,S,c))},[f,m,b,w,c,u,C,o,r,n,S,e=>{l("pointerup",{id:e.detail.id,cols:c})},({detail:e})=>{e.isPointerUp?x({detail:e}):E({detail:e})},d,p,v,_,g,y,s,function(e){K[e?"unshift":"push"](()=>{u=e,i(5,u)})},a]}class rt extends ge{constructor(e){super(),me(this,e,nt,it,u,{fillSpace:13,items:0,rowHeight:14,cols:15,gap:16,fastStart:1,throttleUpdate:17,throttleResize:18,scroller:2,sensor:3},null,[-1,-1])}}const ot={room:{name:"Room",description:"Room image, name, description, and entities",defaultSize:{w:12,h:14},minSize:{w:6,h:8},maxInstances:1,icon:"landscape",category:"core"},terminal:{name:"Terminal",description:"Classic MUD text terminal",defaultSize:{w:12,h:14},minSize:{w:6,h:6},maxInstances:1,icon:"terminal",category:"core"},terminalx:{name:"Terminal X",description:"Veilspan-style MUD terminal with CRT effects",defaultSize:{w:12,h:14},minSize:{w:6,h:6},maxInstances:1,icon:"computer",category:"core"},actionbar:{name:"Action Bar",description:"Commands, compass, and quick actions",defaultSize:{w:24,h:3},minSize:{w:12,h:2},maxInstances:1,icon:"gamepad",category:"core"},character:{name:"Character",description:"Player stats and character sheet",defaultSize:{w:6,h:8},minSize:{w:4,h:4},maxInstances:1,icon:"person",category:"player"},inventory:{name:"Inventory",description:"Player inventory items",defaultSize:{w:6,h:8},minSize:{w:4,h:4},maxInstances:1,icon:"inventory_2",category:"player"},equipment:{name:"Equipment",description:"Worn and equipped items",defaultSize:{w:6,h:8},minSize:{w:4,h:4},maxInstances:1,icon:"shield",category:"player"}};const st={core:{name:"Core",description:"Essential game interface widgets"},player:{name:"Player",description:"Character and inventory widgets"}};function at(e){let t,i,n,r,o,s,a,u,h,d,f,p,v,_,m,g,y,b,w,x,L,M,D,A,I,H,j=(e[3]?.name||e[0].widgetType)+"",W=e[3]?.icon&&lt(e);return{c(){t=E("div"),i=E("span"),W&&W.c(),n=T(),r=O(j),o=T(),s=E("span"),s.textContent="Drag to move, edges to resize",a=T(),u=E("button"),u.innerHTML='<i class="material-icons svelte-lamazc">close</i>',h=T(),d=E("div"),f=T(),p=E("div"),v=T(),_=E("div"),m=T(),g=E("div"),y=T(),b=E("div"),w=T(),x=E("div"),L=T(),M=E("div"),D=T(),A=E("div"),P(i,"class","widget-label svelte-lamazc"),P(s,"class","resize-hint svelte-lamazc"),P(t,"class","edit-overlay svelte-lamazc"),P(u,"class","remove-btn svelte-lamazc"),P(u,"title","Remove widget"),P(d,"class","resize-handle corner se svelte-lamazc"),P(p,"class","resize-handle corner sw svelte-lamazc"),P(_,"class","resize-handle corner ne svelte-lamazc"),P(g,"class","resize-handle corner nw svelte-lamazc"),P(b,"class","resize-handle side n svelte-lamazc"),P(x,"class","resize-handle side s svelte-lamazc"),P(M,"class","resize-handle side e svelte-lamazc"),P(A,"class","resize-handle side w svelte-lamazc")},m(l,k){S(l,t,k),C(t,i),W&&W.m(i,null),C(i,n),C(i,r),C(t,o),C(t,s),S(l,a,k),S(l,u,k),S(l,h,k),S(l,d,k),S(l,f,k),S(l,p,k),S(l,v,k),S(l,_,k),S(l,m,k),S(l,g,k),S(l,y,k),S(l,b,k),S(l,w,k),S(l,x,k),S(l,L,k),S(l,M,k),S(l,D,k),S(l,A,k),I||(H=[R(u,"click",e[4]),R(d,"pointerdown",function(){c(e[2])&&e[2].apply(this,arguments)}),R(p,"pointerdown",function(){c(e[2])&&e[2].apply(this,arguments)}),R(_,"pointerdown",function(){c(e[2])&&e[2].apply(this,arguments)}),R(g,"pointerdown",function(){c(e[2])&&e[2].apply(this,arguments)}),R(b,"pointerdown",function(){c(e[2])&&e[2].apply(this,arguments)}),R(x,"pointerdown",function(){c(e[2])&&e[2].apply(this,arguments)}),R(M,"pointerdown",function(){c(e[2])&&e[2].apply(this,arguments)}),R(A,"pointerdown",function(){c(e[2])&&e[2].apply(this,arguments)})],I=!0)},p(t,o){e=t,e[3]?.icon?W?W.p(e,o):(W=lt(e),W.c(),W.m(i,n)):W&&(W.d(1),W=null),9&o&&j!==(j=(e[3]?.name||e[0].widgetType)+"")&&B(r,j)},d(e){e&&k(t),W&&W.d(),e&&k(a),e&&k(u),e&&k(h),e&&k(d),e&&k(f),e&&k(p),e&&k(v),e&&k(_),e&&k(m),e&&k(g),e&&k(y),e&&k(b),e&&k(w),e&&k(x),e&&k(L),e&&k(M),e&&k(D),e&&k(A),I=!1,l(H)}}}function lt(e){let t,i,n=e[3].icon+"";return{c(){t=E("i"),i=O(n),P(t,"class","material-icons svelte-lamazc")},m(e,n){S(e,t,n),C(t,i)},p(e,t){8&t&&n!==(n=e[3].icon+"")&&B(i,n)},d(e){e&&k(t)}}}function ct(e){let t,i,n,r,o=e[1]&&at(e);const s=e[6].default,a=_(s,e,e[5],null);return{c(){t=E("div"),o&&o.c(),i=T(),n=E("div"),a&&a.c(),P(n,"class","widget-content svelte-lamazc"),j(n,"disabled",e[1]),P(t,"class","widget-wrapper svelte-lamazc")},m(e,s){S(e,t,s),o&&o.m(t,null),C(t,i),C(t,n),a&&a.m(n,null),r=!0},p(e,[l]){e[1]?o?o.p(e,l):(o=at(e),o.c(),o.m(t,i)):o&&(o.d(1),o=null),a&&a.p&&(!r||32&l)&&y(a,s,e,e[5],r?g(s,e[5],l,null):b(e[5]),null),(!r||2&l)&&j(n,"disabled",e[1])},i(e){r||(ce(a,e),r=!0)},o(e){ue(a,e),r=!1},d(e){e&&k(t),o&&o.d(),a&&a.d(e)}}}function ut(e,t,i){let n,{$$slots:r={},$$scope:o}=t,{widget:s}=t,{editMode:a=!1}=t,{resizePointerDown:l=null}=t;const c=Y();return e.$$set=e=>{"widget"in e&&i(0,s=e.widget),"editMode"in e&&i(1,a=e.editMode),"resizePointerDown"in e&&i(2,l=e.resizePointerDown),"$$scope"in e&&i(5,o=e.$$scope)},e.$$.update=()=>{var t;1&e.$$.dirty&&i(3,(t=s.widgetType,n=ot[t]||null))},[s,a,l,n,function(){c("remove",{id:s.id})},o,r]}class ht extends ge{constructor(e){super(),me(this,e,ut,ct,u,{widget:0,editMode:1,resizePointerDown:2})}}function dt(e,t,i){const n=e.slice();return n[9]=t[i],n}function ft(e){let t,i=[],n=new Map,r=e[1].npcs;const o=e=>e[9].id;for(let t=0;t<r.length;t+=1){let s=dt(e,r,t),a=o(s);n.set(a,i[t]=yt(a,s))}return{c(){t=E("div");for(let e=0;e<i.length;e+=1)i[e].c();P(t,"class","entity-panel svelte-oco4fs")},m(e,n){S(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,s){30&s&&(r=e[1].npcs,i=fe(i,s,o,1,e,r,n,t,he,yt,null,dt))},d(e){e&&k(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function pt(e){let t,i,n,r=e[9].level+"";return{c(){t=E("span"),i=O("Level "),n=O(r),P(t,"class","entity-level svelte-oco4fs")},m(e,r){S(e,t,r),C(t,i),C(t,n)},p(e,t){2&t&&r!==(r=e[9].level+"")&&B(n,r)},d(e){e&&k(t)}}}function vt(e){let t,i,n;return{c(){t=E("div"),i=E("div"),P(i,"class",n="health-fill "+wt(e[9].currentHp,e[9].maxHp)+" svelte-oco4fs"),H(i,"width",e[9].currentHp/e[9].maxHp*100+"%"),P(t,"class","health-bar svelte-oco4fs")},m(e,n){S(e,t,n),C(t,i)},p(e,t){2&t&&n!==(n="health-fill "+wt(e[9].currentHp,e[9].maxHp)+" svelte-oco4fs")&&P(i,"class",n),2&t&&H(i,"width",e[9].currentHp/e[9].maxHp*100+"%")},d(e){e&&k(t)}}}function _t(e){let t,i,n;function r(){return e[6](e[9])}return{c(){t=E("button"),t.textContent="Attack",P(t,"class","action-btn attack svelte-oco4fs")},m(e,o){S(e,t,o),i||(n=R(t,"click",r),i=!0)},p(t,i){e=t},d(e){e&&k(t),i=!1,n()}}}function mt(e){let t,i,n;function r(){return e[7](e[9])}return{c(){t=E("button"),t.textContent="Trade",P(t,"class","action-btn trade svelte-oco4fs")},m(e,o){S(e,t,o),i||(n=R(t,"click",r),i=!0)},p(t,i){e=t},d(e){e&&k(t),i=!1,n()}}}function gt(e){let t,i,n;function r(){return e[8](e[9])}return{c(){t=E("button"),t.textContent="Talk",P(t,"class","action-btn talk svelte-oco4fs")},m(e,o){S(e,t,o),i||(n=R(t,"click",r),i=!0)},p(t,i){e=t},d(e){e&&k(t),i=!1,n()}}}function yt(e,t){let i,n,r,o,s,a,l,c,u,h,d,f,p,v,_,m=t[9].displayName+"",g=St(t[9])+"",y=t[9].level>0&&pt(t),b=t[9].isEnemy&&t[9].maxHp>0&&vt(t),w=t[9].isEnemy&&_t(t),x=t[9].isMerchant&&mt(t),L=!t[9].isEnemy&&gt(t);return{key:e,first:null,c(){i=E("div"),n=E("span"),r=O(m),o=T(),s=E("span"),a=O(g),c=T(),y&&y.c(),u=T(),b&&b.c(),h=T(),d=E("div"),w&&w.c(),f=T(),x&&x.c(),p=T(),L&&L.c(),v=T(),P(n,"class","entity-name svelte-oco4fs"),P(s,"class",l="entity-type "+Ct(t[9])+" svelte-oco4fs"),P(d,"class","entity-actions svelte-oco4fs"),P(i,"class",_="entity-card "+Ct(t[9])+" svelte-oco4fs"),this.first=i},m(e,t){S(e,i,t),C(i,n),C(n,r),C(i,o),C(i,s),C(s,a),C(i,c),y&&y.m(i,null),C(i,u),b&&b.m(i,null),C(i,h),C(i,d),w&&w.m(d,null),C(d,f),x&&x.m(d,null),C(d,p),L&&L.m(d,null),C(i,v)},p(e,n){t=e,2&n&&m!==(m=t[9].displayName+"")&&B(r,m),2&n&&g!==(g=St(t[9])+"")&&B(a,g),2&n&&l!==(l="entity-type "+Ct(t[9])+" svelte-oco4fs")&&P(s,"class",l),t[9].level>0?y?y.p(t,n):(y=pt(t),y.c(),y.m(i,u)):y&&(y.d(1),y=null),t[9].isEnemy&&t[9].maxHp>0?b?b.p(t,n):(b=vt(t),b.c(),b.m(i,h)):b&&(b.d(1),b=null),t[9].isEnemy?w?w.p(t,n):(w=_t(t),w.c(),w.m(d,f)):w&&(w.d(1),w=null),t[9].isMerchant?x?x.p(t,n):(x=mt(t),x.c(),x.m(d,p)):x&&(x.d(1),x=null),t[9].isEnemy?L&&(L.d(1),L=null):L?L.p(t,n):(L=gt(t),L.c(),L.m(d,null)),2&n&&_!==(_="entity-card "+Ct(t[9])+" svelte-oco4fs")&&P(i,"class",_)},d(e){e&&k(i),y&&y.d(),b&&b.d(),w&&w.d(),x&&x.d(),L&&L.d()}}}function bt(e){let t,i=e[1].npcs&&e[1].npcs.length>0&&ft(e);return{c(){i&&i.c(),t=D()},m(e,n){i&&i.m(e,n),S(e,t,n)},p(e,[n]){e[1].npcs&&e[1].npcs.length>0?i?i.p(e,n):(i=ft(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:r,o:r,d(e){i&&i.d(e),e&&k(t)}}}function wt(e,t){if(0===t)return"healthy";const i=e/t;return i>.6?"healthy":i>.3?"wounded":""}function Ct(e){return e.isEnemy?"enemy":e.isMerchant?"merchant":"friendly"}function St(e){return e.isEnemy?"Enemy":e.isMerchant?"Merchant":"NPC"}function kt(e,t,i){let n,o=r,s=()=>(o(),o=f(a,e=>i(1,n=e)),a);e.$$.on_destroy.push(()=>o());let{store:a}=t;s();let{sendMessage:l}=t;function c(e){l(`attack ${e.displayName}`)}function u(e){l(`talk ${e.displayName}`)}function h(e){l(`trade ${e.displayName}`)}return e.$$set=e=>{"store"in e&&s(i(0,a=e.store)),"sendMessage"in e&&i(5,l=e.sendMessage)},[a,n,c,u,h,l,e=>c(e),e=>h(e),e=>u(e)]}class xt extends ge{constructor(e){super(),me(this,e,kt,bt,u,{store:0,sendMessage:5})}}function Et(e,t,i){const n=e.slice();return n[7]=t[i],n}function Lt(e){let t,i=e[2],n=[];for(let t=0;t<i.length;t+=1)n[t]=Mt(Et(e,i,t));return{c(){t=E("div");for(let e=0;e<n.length;e+=1)n[e].c();P(t,"class","dialog-options svelte-1hs1ic8")},m(e,i){S(e,t,i);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(t,null)},p(e,r){if(20&r){let o;for(i=e[2],o=0;o<i.length;o+=1){const s=Et(e,i,o);n[o]?n[o].p(s,r):(n[o]=Mt(s),n[o].c(),n[o].m(t,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=i.length}},d(e){e&&k(t),x(n,e)}}}function Mt(e){let t,i,n,r,o,s,a,l,c,u=e[7].index+"",h=e[7].text+"";function d(){return e[6](e[7])}return{c(){t=E("button"),i=E("span"),n=O(u),r=T(),o=E("span"),s=O(h),a=T(),P(i,"class","option-index svelte-1hs1ic8"),P(o,"class","option-text svelte-1hs1ic8"),P(t,"class","dialog-option-btn svelte-1hs1ic8")},m(e,u){S(e,t,u),C(t,i),C(i,n),C(t,r),C(t,o),C(o,s),C(t,a),l||(c=R(t,"click",d),l=!0)},p(t,i){e=t,4&i&&u!==(u=e[7].index+"")&&B(n,u),4&i&&h!==(h=e[7].text+"")&&B(s,h)},d(e){e&&k(t),l=!1,c()}}}function Ot(e){let t,i,n,o,s,a,l,c,u,h,d,f,p,v=Tt(e[3])+"",_=e[2]&&e[2].length>0&&Lt(e);return{c(){t=E("div"),i=E("div"),n=E("div"),o=E("i"),s=O(v),l=T(),c=E("span"),u=O(e[0]),h=T(),d=E("div"),f=O(e[1]),p=T(),_&&_.c(),P(o,"class","material-icons svelte-1hs1ic8"),P(n,"class",a="npc-icon "+Dt(e[3])+" svelte-1hs1ic8"),P(c,"class","npc-name svelte-1hs1ic8"),P(i,"class","dialog-header svelte-1hs1ic8"),P(d,"class","dialog-text svelte-1hs1ic8"),P(t,"class","dialog-overlay svelte-1hs1ic8")},m(e,r){S(e,t,r),C(t,i),C(i,n),C(n,o),C(o,s),C(i,l),C(i,c),C(c,u),C(t,h),C(t,d),C(d,f),C(t,p),_&&_.m(t,null)},p(e,[i]){8&i&&v!==(v=Tt(e[3])+"")&&B(s,v),8&i&&a!==(a="npc-icon "+Dt(e[3])+" svelte-1hs1ic8")&&P(n,"class",a),1&i&&B(u,e[0]),2&i&&B(f,e[1]),e[2]&&e[2].length>0?_?_.p(e,i):(_=Lt(e),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},i:r,o:r,d(e){e&&k(t),_&&_.d()}}}function Tt(e){switch(e){case"enemy":return"swords";case"merchant":return"store";default:return"person"}}function Dt(e){switch(e){case"enemy":return"icon-enemy";case"merchant":return"icon-merchant";default:return"icon-npc"}}function Rt(e,t,i){let{npcName:n=""}=t,{npcText:r=""}=t,{options:o=[]}=t,{npcType:s="npc"}=t,{sendMessage:a}=t;function l(e){a(String(e))}return e.$$set=e=>{"npcName"in e&&i(0,n=e.npcName),"npcText"in e&&i(1,r=e.npcText),"options"in e&&i(2,o=e.options),"npcType"in e&&i(3,s=e.npcType),"sendMessage"in e&&i(5,a=e.sendMessage)},[n,r,o,s,l,a,e=>l(e.index)]}class At extends ge{constructor(e){super(),me(this,e,Rt,Ot,u,{npcName:0,npcText:1,options:2,npcType:3,sendMessage:5})}}const Pt="talesmud_settings_v1",Bt={general:{soundEnabled:!0,musicVolume:50,sfxVolume:50},interface:{parchmentBackground:!1,compactMode:!1}};const It=function(){const{subscribe:e,set:t,update:i}=Se({...Bt,modalOpen:!1});return{subscribe:e,openModal(){i(e=>({...e,modalOpen:!0}))},closeModal(){i(e=>({...e,modalOpen:!1}))},loadFromStorage(){try{const e=localStorage.getItem(Pt);if(e){const t=JSON.parse(e);if(1===t.version)return i(e=>({...e,general:{...Bt.general,...t.general},interface:{...Bt.interface,...t.interface}})),!0}}catch(e){console.warn("Failed to load settings from storage:",e)}return!1},saveToStorage(){const t=p({subscribe:e}),i={version:1,savedAt:(new Date).toISOString(),general:t.general,interface:t.interface};try{return localStorage.setItem(Pt,JSON.stringify(i)),!0}catch(e){return console.error("Failed to save settings:",e),!1}},setSetting(e,t,n){i(i=>({...i,[e]:{...i[e],[t]:n}})),this.saveToStorage()},getSetting(t,i){const n=p({subscribe:e});return n[t]?.[i]},resetToDefaults(){i(e=>({...e,...Bt})),this.saveToStorage()}}}();"undefined"!=typeof window&&It.loadFromStorage();const{document:Ht}=w;function jt(e){let t,i,n,r,o,s,a,l=e[2].roomName+"";return{c(){t=E("div"),i=E("span"),i.textContent="",n=T(),r=E("span"),o=O(l),s=T(),a=E("span"),a.textContent="",P(i,"class","flourish flourish-left svelte-1a210wo"),P(r,"class","room-name-text svelte-1a210wo"),P(a,"class","flourish svelte-1a210wo"),P(t,"class","roomName svelte-1a210wo")},m(e,l){S(e,t,l),C(t,i),C(t,n),C(t,r),C(r,o),C(t,s),C(t,a)},p(e,t){4&t&&l!==(l=e[2].roomName+"")&&B(o,l)},d(e){e&&k(t)}}}function Wt(e){let t,i;return t=new At({props:{npcName:e[2].dialogNpcName,npcText:e[2].dialogNpcText,options:e[2].dialogOptions,npcType:e[3],sendMessage:e[1]}}),{c(){pe(t.$$.fragment)},m(e,n){ve(t,e,n),i=!0},p(e,i){const n={};4&i&&(n.npcName=e[2].dialogNpcName),4&i&&(n.npcText=e[2].dialogNpcText),4&i&&(n.options=e[2].dialogOptions),8&i&&(n.npcType=e[3]),2&i&&(n.sendMessage=e[1]),t.$set(n)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){_e(t,e)}}}function Ft(e){let t,i,n=e[2].roomDescription+"";return{c(){t=E("div"),i=O(n),P(t,"class","roomDescription svelte-1a210wo"),j(t,"parchment",e[4].interface?.parchmentBackground)},m(e,n){S(e,t,n),C(t,i)},p(e,r){4&r&&n!==(n=e[2].roomDescription+"")&&B(i,n),16&r&&j(t,"parchment",e[4].interface?.parchmentBackground)},d(e){e&&k(t)}}}function $t(e){let t,i,n,r,o,s,a,l,c,u,h,d,f,p,v,_,m,g,y,b=e[2].roomName&&jt(e),w=e[2].dialogActive&&Wt(e),x=e[2].roomDescription&&Ft(e);return g=new xt({props:{store:e[0],sendMessage:e[1]}}),{c(){t=E("link"),i=E("link"),n=E("link"),r=T(),o=E("div"),s=E("div"),a=E("div"),l=T(),c=E("div"),u=T(),h=E("div"),d=T(),b&&b.c(),f=T(),w&&w.c(),p=T(),v=E("div"),x&&x.c(),_=T(),m=E("div"),pe(g.$$.fragment),P(t,"rel","preconnect"),P(t,"href","https://fonts.googleapis.com"),P(i,"rel","preconnect"),P(i,"href","https://fonts.gstatic.com"),P(i,"crossorigin",""),P(n,"href","https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&display=swap"),P(n,"rel","stylesheet"),P(a,"id","roomImg1"),P(a,"class","roomImageInner svelte-1a210wo"),P(c,"id","roomImg2"),P(c,"class","roomImageInner hidden svelte-1a210wo"),P(h,"class","roomImageGradient svelte-1a210wo"),P(s,"class","roomImageSection svelte-1a210wo"),P(m,"class","entitySection svelte-1a210wo"),P(v,"class","roomContentSection svelte-1a210wo"),P(o,"class","room-widget svelte-1a210wo")},m(e,k){C(Ht.head,t),C(Ht.head,i),C(Ht.head,n),S(e,r,k),S(e,o,k),C(o,s),C(s,a),C(s,l),C(s,c),C(s,u),C(s,h),C(s,d),b&&b.m(s,null),C(s,f),w&&w.m(s,null),C(o,p),C(o,v),x&&x.m(v,null),C(v,_),C(v,m),ve(g,m,null),y=!0},p(e,[t]){e[2].roomName?b?b.p(e,t):(b=jt(e),b.c(),b.m(s,f)):b&&(b.d(1),b=null),e[2].dialogActive?w?(w.p(e,t),4&t&&ce(w,1)):(w=Wt(e),w.c(),ce(w,1),w.m(s,null)):w&&(ae(),ue(w,1,1,()=>{w=null}),le()),e[2].roomDescription?x?x.p(e,t):(x=Ft(e),x.c(),x.m(v,_)):x&&(x.d(1),x=null);const i={};1&t&&(i.store=e[0]),2&t&&(i.sendMessage=e[1]),g.$set(i)},i(e){y||(ce(w),ce(g.$$.fragment,e),y=!0)},o(e){ue(w),ue(g.$$.fragment,e),y=!1},d(e){k(t),k(i),k(n),e&&k(r),e&&k(o),b&&b.d(),w&&w.d(),x&&x.d(),_e(g)}}}function Nt(e,t,i){let n,o,s,a=r,l=()=>(a(),a=f(c,e=>i(2,o=e)),c);v(e,It,e=>i(4,s=e)),e.$$.on_destroy.push(()=>a());let{store:c}=t;l();let{sendMessage:u}=t,h=!0;return e.$$set=e=>{"store"in e&&l(i(0,c=e.store)),"sendMessage"in e&&i(1,u=e.sendMessage)},e.$$.update=()=>{4&e.$$.dirty&&i(3,n=(()=>{if(!o.dialogActive)return"npc";const e=(t=o.npcs,i=o.dialogNpcName,(t||[]).find(e=>e.name===i||e.displayName===i||e.name?.toLowerCase()===i?.toLowerCase()));var t,i;return e?.isEnemy?"enemy":e?.isMerchant?"merchant":"npc"})()),4&e.$$.dirty&&o.background&&function(e){const t=document.querySelector(h?"#roomImg1":"#roomImg2"),i=document.querySelector(h?"#roomImg2":"#roomImg1");if(h=!h,i&&t){const n=`/api/backgrounds/${e}.png`,r="/play/img/placeholder.png",o=new Image;o.onload=()=>{i.style.backgroundImage=`url('${n}')`,i.classList.remove("hidden"),t.classList.add("hidden")},o.onerror=()=>{i.style.backgroundImage=`url('${r}')`,i.classList.remove("hidden"),t.classList.add("hidden")},o.src=n}}(o.background)},[c,u,o,n,s]}class zt extends ge{constructor(e){super(),me(this,e,Nt,$t,u,{store:0,sendMessage:1})}}var Ut={exports:{}};self,Ut.exports=(()=>{var e={4567:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;var o=i(9042),s=i(6114),a=i(9924),l=i(3656),c=i(844),u=i(5596),h=i(9631),d=function(e){function t(t,i){var n=e.call(this)||this;n._terminal=t,n._renderService=i,n._liveRegionLineCount=0,n._charsToConsume=[],n._charsToAnnounce="",n._accessibilityTreeRoot=document.createElement("div"),n._accessibilityTreeRoot.classList.add("xterm-accessibility"),n._accessibilityTreeRoot.tabIndex=0,n._rowContainer=document.createElement("div"),n._rowContainer.setAttribute("role","list"),n._rowContainer.classList.add("xterm-accessibility-tree"),n._rowElements=[];for(var r=0;r<n._terminal.rows;r++)n._rowElements[r]=n._createAccessibilityTreeNode(),n._rowContainer.appendChild(n._rowElements[r]);if(n._topBoundaryFocusListener=function(e){return n._onBoundaryFocus(e,0)},n._bottomBoundaryFocusListener=function(e){return n._onBoundaryFocus(e,1)},n._rowElements[0].addEventListener("focus",n._topBoundaryFocusListener),n._rowElements[n._rowElements.length-1].addEventListener("focus",n._bottomBoundaryFocusListener),n._refreshRowsDimensions(),n._accessibilityTreeRoot.appendChild(n._rowContainer),n._renderRowsDebouncer=new a.TimeBasedDebouncer(n._renderRows.bind(n)),n._refreshRows(),n._liveRegion=document.createElement("div"),n._liveRegion.classList.add("live-region"),n._liveRegion.setAttribute("aria-live","assertive"),n._accessibilityTreeRoot.appendChild(n._liveRegion),!n._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return n._terminal.element.insertAdjacentElement("afterbegin",n._accessibilityTreeRoot),n.register(n._renderRowsDebouncer),n.register(n._terminal.onResize(function(e){return n._onResize(e.rows)})),n.register(n._terminal.onRender(function(e){return n._refreshRows(e.start,e.end)})),n.register(n._terminal.onScroll(function(){return n._refreshRows()})),n.register(n._terminal.onA11yChar(function(e){return n._onChar(e)})),n.register(n._terminal.onLineFeed(function(){return n._onChar("\n")})),n.register(n._terminal.onA11yTab(function(e){return n._onTab(e)})),n.register(n._terminal.onKey(function(e){return n._onKey(e.key)})),n.register(n._terminal.onBlur(function(){return n._clearLiveRegion()})),n.register(n._renderService.onDimensionsChange(function(){return n._refreshRowsDimensions()})),n._screenDprMonitor=new u.ScreenDprMonitor,n.register(n._screenDprMonitor),n._screenDprMonitor.setListener(function(){return n._refreshRowsDimensions()}),n.register((0,l.addDisposableDomListener)(window,"resize",function(){return n._refreshRowsDimensions()})),n}return r(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),(0,h.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(e,t){var i=e.target,n=this._rowElements[0===t?1:this._rowElements.length-2];if(i.getAttribute("aria-posinset")!==(0===t?"1":""+this._terminal.buffer.lines.length)&&e.relatedTarget===n){var r,o;if(0===t?(r=i,o=this._rowElements.pop(),this._rowContainer.removeChild(o)):(r=this._rowElements.shift(),o=i,this._rowContainer.removeChild(r)),r.removeEventListener("focus",this._topBoundaryFocusListener),o.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){var s=this._createAccessibilityTreeNode();this._rowElements.unshift(s),this._rowContainer.insertAdjacentElement("afterbegin",s)}else s=this._createAccessibilityTreeNode(),this._rowElements.push(s),this._rowContainer.appendChild(s);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}},t.prototype._onResize=function(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e},t.prototype._onTab=function(e){for(var t=0;t<e;t++)this._onChar(" ")},t.prototype._onChar=function(e){var t=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=o.tooMuchOutput)),s.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){t._accessibilityTreeRoot.appendChild(t._liveRegion)},0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,s.isMac&&(0,h.removeElementFromParent)(this._liveRegion)},t.prototype._onKey=function(e){this._clearLiveRegion(),this._charsToConsume.push(e)},t.prototype._refreshRows=function(e,t){this._renderRowsDebouncer.refresh(e,t,this._terminal.rows)},t.prototype._renderRows=function(e,t){for(var i=this._terminal.buffer,n=i.lines.length.toString(),r=e;r<=t;r++){var o=i.translateBufferLineToString(i.ydisp+r,!0),s=(i.ydisp+r+1).toString(),a=this._rowElements[r];a&&(0===o.length?a.innerText="":a.textContent=o,a.setAttribute("aria-posinset",s),a.setAttribute("aria-setsize",n))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}},t.prototype._refreshRowDimensions=function(e){e.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(c.Disposable);t.AccessibilityManager=d},3614:(e,t)=>{function i(e){return e.replace(/\r?\n/g,"\r")}function n(e,t){return t?"[200~"+e+"[201~":e}function r(e,t,r){e=n(e=i(e),r.decPrivateModes.bracketedPasteMode),r.triggerDataEvent(e,!0),t.value=""}function o(e,t,i){var n=i.getBoundingClientRect(),r=e.clientX-n.left-10,o=e.clientY-n.top-10;t.style.width="20px",t.style.height="20px",t.style.left=r+"px",t.style.top=o+"px",t.style.zIndex="1000",t.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=i,t.bracketTextForPaste=n,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,i){e.stopPropagation(),e.clipboardData&&r(e.clipboardData.getData("text/plain"),t,i)},t.paste=r,t.moveTextAreaUnderMouseCursor=o,t.rightClickHandler=function(e,t,i,n,r){o(e,t,i),r&&n.rightClickSelect(e),t.value=n.selectionText,t.select()}},7239:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;var i=function(){function e(){this._color={},this._rgba={}}return e.prototype.clear=function(){this._color={},this._rgba={}},e.prototype.setCss=function(e,t,i){this._rgba[e]||(this._rgba[e]={}),this._rgba[e][t]=i},e.prototype.getCss=function(e,t){return this._rgba[e]?this._rgba[e][t]:void 0},e.prototype.setColor=function(e,t,i){this._color[e]||(this._color[e]={}),this._color[e][t]=i},e.prototype.getColor=function(e,t){return this._color[e]?this._color[e][t]:void 0},e}();t.ColorContrastCache=i},5680:function(e,t,i){var n=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorManager=t.DEFAULT_ANSI_COLORS=void 0;var r=i(8055),o=i(7239),s=r.css.toColor("#ffffff"),a=r.css.toColor("#000000"),l=r.css.toColor("#ffffff"),c=r.css.toColor("#000000"),u={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var e=[r.css.toColor("#2e3436"),r.css.toColor("#cc0000"),r.css.toColor("#4e9a06"),r.css.toColor("#c4a000"),r.css.toColor("#3465a4"),r.css.toColor("#75507b"),r.css.toColor("#06989a"),r.css.toColor("#d3d7cf"),r.css.toColor("#555753"),r.css.toColor("#ef2929"),r.css.toColor("#8ae234"),r.css.toColor("#fce94f"),r.css.toColor("#729fcf"),r.css.toColor("#ad7fa8"),r.css.toColor("#34e2e2"),r.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],i=0;i<216;i++){var n=t[i/36%6|0],o=t[i/6%6|0],s=t[i%6];e.push({css:r.channels.toCss(n,o,s),rgba:r.channels.toRgba(n,o,s)})}for(i=0;i<24;i++){var a=8+10*i;e.push({css:r.channels.toCss(a,a,a),rgba:r.channels.toRgba(a,a,a)})}return e}());var h=function(){function e(e,i){this.allowTransparency=i;var n=e.createElement("canvas");n.width=1,n.height=1;var h=n.getContext("2d");if(!h)throw new Error("Could not get rendering context");this._ctx=h,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new o.ColorContrastCache,this.colors={foreground:s,background:a,cursor:l,cursorAccent:c,selectionTransparent:u,selectionOpaque:r.color.blend(a,u),selectionForeground:void 0,ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return e.prototype.onOptionsChange=function(e){"minimumContrastRatio"===e&&this._contrastCache.clear()},e.prototype.setTheme=function(e){void 0===e&&(e={}),this.colors.foreground=this._parseColor(e.foreground,s),this.colors.background=this._parseColor(e.background,a),this.colors.cursor=this._parseColor(e.cursor,l,!0),this.colors.cursorAccent=this._parseColor(e.cursorAccent,c,!0),this.colors.selectionTransparent=this._parseColor(e.selection,u,!0),this.colors.selectionOpaque=r.color.blend(this.colors.background,this.colors.selectionTransparent);var i={css:"",rgba:0};this.colors.selectionForeground=e.selectionForeground?this._parseColor(e.selectionForeground,i):void 0,this.colors.selectionForeground===i&&(this.colors.selectionForeground=void 0),r.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=r.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(e.black,t.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(e.red,t.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(e.green,t.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(e.yellow,t.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(e.blue,t.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(e.magenta,t.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(e.cyan,t.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(e.white,t.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},e.prototype.restoreColor=function(e){if(void 0!==e)switch(e){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[e]=this._restoreColors.ansi[e]}else for(var t=0;t<this._restoreColors.ansi.length;++t)this.colors.ansi[t]=this._restoreColors.ansi[t]},e.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:this.colors.ansi.slice()}},e.prototype._parseColor=function(e,t,i){if(void 0===i&&(i=this.allowTransparency),void 0===e)return t;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=e,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+e+" is invalid using fallback "+t.css),t;this._ctx.fillRect(0,0,1,1);var o=this._ctx.getImageData(0,0,1,1).data;if(255!==o[3]){if(!i)return console.warn("Color: "+e+" is using transparency, but allowTransparency is false. Using fallback "+t.css+"."),t;var s=n(this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(e){return Number(e)}),4),a=s[0],l=s[1],c=s[2],u=s[3],h=Math.round(255*u);return{rgba:r.channels.toRgba(a,l,c,h),css:e}}return{css:this._ctx.fillStyle,rgba:r.channels.toRgba(o[0],o[1],o[2],o[3])}},e}();t.ColorManager=h},9631:function(e,t){var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.removeElementFromParent=void 0,t.removeElementFromParent=function(){for(var e,t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{for(var s=i(r),a=s.next();!a.done;a=s.next()){var l=a.value;null===(n=null==l?void 0:l.parentElement)||void 0===n||n.removeChild(l)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}},3656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,i,n){e.addEventListener(t,i,n);var r=!1;return{dispose:function(){r||(r=!0,e.removeEventListener(t,i,n))}}}},3551:function(e,t,i){var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZone=t.Linkifier=void 0;var o=i(8460),s=i(2585),a=function(){function e(e,t,i){this._bufferService=e,this._logService=t,this._unicodeService=i,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new o.EventEmitter,this._onHideLinkUnderline=new o.EventEmitter,this._onLinkTooltip=new o.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(e.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),e.prototype.attachToDom=function(e,t){this._element=e,this._mouseZoneManager=t},e.prototype.linkifyRows=function(t,i){var n=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=t,this._rowsToLinkify.end=i):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,t),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,i)),this._mouseZoneManager.clearAll(t,i),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return n._linkifyRows()},e._timeBeforeLatency))},e.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var e=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var t=e.ydisp+this._rowsToLinkify.start;if(!(t>=e.lines.length)){for(var i=e.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,n=Math.ceil(2e3/this._bufferService.cols),r=this._bufferService.buffer.iterator(!1,t,i,n,n);r.hasNext();)for(var o=r.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(o.range.first,o.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},e.prototype.registerLinkMatcher=function(e,t,i){if(void 0===i&&(i={}),!t)throw new Error("handler must be defined");var n={id:this._nextLinkMatcherId++,regex:e,handler:t,matchIndex:i.matchIndex,validationCallback:i.validationCallback,hoverTooltipCallback:i.tooltipCallback,hoverLeaveCallback:i.leaveCallback,willLinkActivate:i.willLinkActivate,priority:i.priority||0};return this._addLinkMatcherToList(n),n.id},e.prototype._addLinkMatcherToList=function(e){if(0!==this._linkMatchers.length){for(var t=this._linkMatchers.length-1;t>=0;t--)if(e.priority<=this._linkMatchers[t].priority)return void this._linkMatchers.splice(t+1,0,e);this._linkMatchers.splice(0,0,e)}else this._linkMatchers.push(e)},e.prototype.deregisterLinkMatcher=function(e){for(var t=0;t<this._linkMatchers.length;t++)if(this._linkMatchers[t].id===e)return this._linkMatchers.splice(t,1),!0;return!1},e.prototype._doLinkifyRow=function(e,t,i){for(var n,r=this,o=new RegExp(i.regex.source,(i.regex.flags||"")+"g"),s=-1,a=function(){var a=n["number"!=typeof i.matchIndex?0:i.matchIndex];if(!a)return l._logService.debug("match found without corresponding matchIndex",n,i),"break";if(s=t.indexOf(a,s+1),o.lastIndex=s+a.length,s<0)return"break";var c=l._bufferService.buffer.stringIndexToBufferIndex(e,s);if(c[0]<0)return"break";var u=l._bufferService.buffer.lines.get(c[0]);if(!u)return"break";var h=u.getFg(c[1]),d=h?h>>9&511:void 0;i.validationCallback?i.validationCallback(a,function(e){r._rowsTimeoutId||e&&r._addLink(c[1],c[0]-r._bufferService.buffer.ydisp,a,i,d)}):l._addLink(c[1],c[0]-l._bufferService.buffer.ydisp,a,i,d)},l=this;null!==(n=o.exec(t))&&"break"!==a(););},e.prototype._addLink=function(e,t,i,n,r){var o=this;if(this._mouseZoneManager&&this._element){var s=this._unicodeService.getStringCellWidth(i),a=e%this._bufferService.cols,c=t+Math.floor(e/this._bufferService.cols),u=(a+s)%this._bufferService.cols,h=c+Math.floor((a+s)/this._bufferService.cols);0===u&&(u=this._bufferService.cols,h--),this._mouseZoneManager.add(new l(a+1,c+1,u+1,h+1,function(e){if(n.handler)return n.handler(e,i);var t=window.open();t?(t.opener=null,t.location.href=i):console.warn("Opening link blocked as opener could not be cleared")},function(){o._onShowLinkUnderline.fire(o._createLinkHoverEvent(a,c,u,h,r)),o._element.classList.add("xterm-cursor-pointer")},function(e){o._onLinkTooltip.fire(o._createLinkHoverEvent(a,c,u,h,r)),n.hoverTooltipCallback&&n.hoverTooltipCallback(e,i,{start:{x:a,y:c},end:{x:u,y:h}})},function(){o._onHideLinkUnderline.fire(o._createLinkHoverEvent(a,c,u,h,r)),o._element.classList.remove("xterm-cursor-pointer"),n.hoverLeaveCallback&&n.hoverLeaveCallback()},function(e){return!n.willLinkActivate||n.willLinkActivate(e,i)}))}},e.prototype._createLinkHoverEvent=function(e,t,i,n,r){return{x1:e,y1:t,x2:i,y2:n,cols:this._bufferService.cols,fg:r}},e._timeBeforeLatency=200,e=n([r(0,s.IBufferService),r(1,s.ILogService),r(2,s.IUnicodeService)],e)}();t.Linkifier=a;var l=function(e,t,i,n,r,o,s,a,l){this.x1=e,this.y1=t,this.x2=i,this.y2=n,this.clickCallback=r,this.hoverCallback=o,this.tooltipCallback=s,this.leaveCallback=a,this.willLinkActivate=l};t.MouseZone=l},6465:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier2=void 0;var c=i(2585),u=i(8460),h=i(844),d=i(3656),f=function(e){function t(t){var i=e.call(this)||this;return i._bufferService=t,i._linkProviders=[],i._linkCacheDisposables=[],i._isMouseOut=!0,i._activeLine=-1,i._onShowLinkUnderline=i.register(new u.EventEmitter),i._onHideLinkUnderline=i.register(new u.EventEmitter),i.register((0,h.getDisposeArrayDisposable)(i._linkCacheDisposables)),i}return r(t,e),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var t=this;return this._linkProviders.push(e),{dispose:function(){var i=t._linkProviders.indexOf(e);-1!==i&&t._linkProviders.splice(i,1)}}},t.prototype.attachToDom=function(e,t,i){var n=this;this._element=e,this._mouseService=t,this._renderService=i,this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",function(){n._isMouseOut=!0,n._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(t){this._isMouseOut=!1;for(var i=e.composedPath(),n=0;n<i.length;n++){var r=i[n];if(r.classList.contains("xterm"))break;if(r.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._onHover(t),this._lastBufferCell=t)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,t){var i,n,r,o,s=this;this._activeProviderReplies&&t||(null===(r=this._activeProviderReplies)||void 0===r||r.forEach(function(e){null==e||e.forEach(function(e){e.link.dispose&&e.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var c=!1,u=function(i,n){t?(null===(o=h._activeProviderReplies)||void 0===o?void 0:o.get(i))&&(c=h._checkLinkProviderResult(i,e,c)):n.provideLinks(e.y,function(t){var n,r;if(!s._isMouseOut){var o=null==t?void 0:t.map(function(e){return{link:e}});null===(n=s._activeProviderReplies)||void 0===n||n.set(i,o),c=s._checkLinkProviderResult(i,e,c),(null===(r=s._activeProviderReplies)||void 0===r?void 0:r.size)===s._linkProviders.length&&s._removeIntersectingLinks(e.y,s._activeProviderReplies)}})},h=this;try{for(var d=a(this._linkProviders.entries()),f=d.next();!f.done;f=d.next()){var p=l(f.value,2);u(p[0],p[1])}}catch(e){i={error:e}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(i)throw i.error}}},t.prototype._removeIntersectingLinks=function(e,t){for(var i=new Set,n=0;n<t.size;n++){var r=t.get(n);if(r)for(var o=0;o<r.length;o++)for(var s=r[o],a=s.link.range.start.y<e?0:s.link.range.start.x,l=s.link.range.end.y>e?this._bufferService.cols:s.link.range.end.x,c=a;c<=l;c++){if(i.has(c)){r.splice(o--,1);break}i.add(c)}}},t.prototype._checkLinkProviderResult=function(e,t,i){var n,r=this;if(!this._activeProviderReplies)return i;for(var o=this._activeProviderReplies.get(e),s=!1,a=0;a<e;a++)this._activeProviderReplies.has(a)&&!this._activeProviderReplies.get(a)||(s=!0);if(!s&&o){var l=o.find(function(e){return r._linkAtPosition(e.link,t)});l&&(i=!0,this._handleNewLink(l))}if(this._activeProviderReplies.size===this._linkProviders.length&&!i)for(a=0;a<this._activeProviderReplies.size;a++){var c=null===(n=this._activeProviderReplies.get(a))||void 0===n?void 0:n.find(function(e){return r._linkAtPosition(e.link,t)});if(c){i=!0,this._handleNewLink(c);break}}return i},t.prototype._handleMouseDown=function(){this._mouseDownLink=this._currentLink},t.prototype._handleMouseUp=function(e){if(this._element&&this._mouseService&&this._currentLink){var t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,t){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,h.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var t=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var i=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);i&&this._linkAtPosition(e.link,i)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var e,i;return null===(i=null===(e=t._currentLink)||void 0===e?void 0:e.state)||void 0===i?void 0:i.decorations.pointerCursor},set:function(e){var i,n;(null===(i=t._currentLink)||void 0===i?void 0:i.state)&&t._currentLink.state.decorations.pointerCursor!==e&&(t._currentLink.state.decorations.pointerCursor=e,t._currentLink.state.isHovered&&(null===(n=t._element)||void 0===n||n.classList.toggle("xterm-cursor-pointer",e)))}},underline:{get:function(){var e,i;return null===(i=null===(e=t._currentLink)||void 0===e?void 0:e.state)||void 0===i?void 0:i.decorations.underline},set:function(i){var n,r,o;(null===(n=t._currentLink)||void 0===n?void 0:n.state)&&(null===(o=null===(r=t._currentLink)||void 0===r?void 0:r.state)||void 0===o?void 0:o.decorations.underline)!==i&&(t._currentLink.state.decorations.underline=i,t._currentLink.state.isHovered&&t._fireUnderlineEvent(e.link,i))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(function(e){var i=0===e.start?0:e.start+1+t._bufferService.buffer.ydisp;t._clearCurrentLink(i,e.end+1+t._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(e,t,i){var n;(null===(n=this._currentLink)||void 0===n?void 0:n.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(i,t.text)},t.prototype._fireUnderlineEvent=function(e,t){var i=e.range,n=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-n-1,i.end.x,i.end.y-n-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)},t.prototype._linkLeave=function(e,t,i){var n;(null===(n=this._currentLink)||void 0===n?void 0:n.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(i,t.text)},t.prototype._linkAtPosition=function(e,t){var i=e.range.start.y===e.range.end.y,n=e.range.start.y<t.y,r=e.range.end.y>t.y;return(i&&e.range.start.x<=t.x&&e.range.end.x>=t.x||n&&e.range.end.x>=t.x||r&&e.range.start.x<=t.x||n&&r)&&e.range.start.y<=t.y&&e.range.end.y>=t.y},t.prototype._positionFromMouseEvent=function(e,t,i){var n=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(n)return{x:n[0],y:n[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,t,i,n,r){return{x1:e,y1:t,x2:i,y2:n,cols:this._bufferService.cols,fg:r}},o([s(0,c.IBufferService)],t)}(h.Disposable);t.Linkifier2=f},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseZoneManager=void 0;var a=i(844),l=i(3656),c=i(4725),u=i(2585),h=function(e){function t(t,i,n,r,o,s){var a=e.call(this)||this;return a._element=t,a._screenElement=i,a._bufferService=n,a._mouseService=r,a._selectionService=o,a._optionsService=s,a._zones=[],a._areZonesActive=!1,a._lastHoverCoords=[void 0,void 0],a._initialSelectionLength=0,a.register((0,l.addDisposableDomListener)(a._element,"mousedown",function(e){return a._onMouseDown(e)})),a._mouseMoveListener=function(e){return a._onMouseMove(e)},a._mouseLeaveListener=function(e){return a._onMouseLeave(e)},a._clickListener=function(e){return a._onClick(e)},a}return r(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(e,t){if(0!==this._zones.length){e&&t||(e=0,t=this._bufferService.rows-1);for(var i=0;i<this._zones.length;i++){var n=this._zones[i];(n.y1>e&&n.y1<=t+1||n.y2>e&&n.y2<=t+1||n.y1<e&&n.y2>t+1)&&(this._currentZone&&this._currentZone===n&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(i--,1))}0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var t=this,i=this._findZoneEventAt(e);i!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),i&&(this._currentZone=i,i.hoverCallback&&i.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return t._onTooltip(e)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var t=this._findZoneEventAt(e);null==t||t.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var t=this._findZoneEventAt(e);(null==t?void 0:t.willLinkActivate(e))&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var t=this._findZoneEventAt(e),i=this._getSelectionLength();t&&i===this._initialSelectionLength&&(t.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(t)for(var i=t[0],n=t[1],r=0;r<this._zones.length;r++){var o=this._zones[r];if(o.y1===o.y2){if(n===o.y1&&i>=o.x1&&i<o.x2)return o}else if(n===o.y1&&i>=o.x1||n===o.y2&&i<o.x2||n>o.y1&&n<o.y2)return o}},o([s(2,u.IBufferService),s(3,c.IMouseService),s(4,c.ISelectionService),s(5,u.IOptionsService)],t)}(a.Disposable);t.MouseZoneManager=h},6193:function(e,t){var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0;var n=function(){function e(e){this._renderCallback=e,this._refreshCallbacks=[]}return e.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.addRefreshCallback=function(e){var t=this;return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return t._innerRefresh()})),this._animationFrame},e.prototype.refresh=function(e,t,i){var n=this;this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return n._innerRefresh()}))},e.prototype._innerRefresh=function(){if(this._animationFrame=void 0,void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}else this._runRefreshCallbacks()},e.prototype._runRefreshCallbacks=function(){var e,t;try{for(var n=i(this._refreshCallbacks),r=n.next();!r.done;r=n.next())(0,r.value)(0)}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._refreshCallbacks=[]},e}();t.RenderDebouncer=n},5596:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenDprMonitor=void 0;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._currentDevicePixelRatio=window.devicePixelRatio,t}return r(t,e),t.prototype.setListener=function(e){var t=this;this._listener&&this.clearListener(),this._listener=e,this._outerListener=function(){t._listener&&(t._listener(window.devicePixelRatio,t._currentDevicePixelRatio),t._updateDpr())},this._updateDpr()},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.clearListener()},t.prototype._updateDpr=function(){var e;this._outerListener&&(null===(e=this._resolutionMediaMatchList)||void 0===e||e.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},t.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},t}(i(844).Disposable);t.ScreenDprMonitor=o},3236:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var l=i(2950),c=i(1680),u=i(3614),h=i(2584),d=i(5435),f=i(3525),p=i(3551),v=i(9312),_=i(6114),m=i(3656),g=i(9042),y=i(357),b=i(6954),w=i(4567),C=i(1296),S=i(7399),k=i(8460),x=i(8437),E=i(5680),L=i(3230),M=i(4725),O=i(428),T=i(8934),D=i(6465),R=i(5114),A=i(8969),P=i(8055),B=i(4269),I=i(5941),H=i(3107),j=i(5744),W=i(9074),F=i(2585),$="undefined"!=typeof window?window.document:null,N=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,t)||this;return i.browser=_,i._keyDownHandled=!1,i._keyDownSeen=!1,i._keyPressHandled=!1,i._unprocessedDeadKey=!1,i._onCursorMove=new k.EventEmitter,i._onKey=new k.EventEmitter,i._onRender=new k.EventEmitter,i._onSelectionChange=new k.EventEmitter,i._onTitleChange=new k.EventEmitter,i._onBell=new k.EventEmitter,i._onFocus=new k.EventEmitter,i._onBlur=new k.EventEmitter,i._onA11yCharEmitter=new k.EventEmitter,i._onA11yTabEmitter=new k.EventEmitter,i._setup(),i.linkifier=i._instantiationService.createInstance(p.Linkifier),i.linkifier2=i.register(i._instantiationService.createInstance(D.Linkifier2)),i._decorationService=i._instantiationService.createInstance(W.DecorationService),i._instantiationService.setService(F.IDecorationService,i._decorationService),i.register(i._inputHandler.onRequestBell(function(){return i.bell()})),i.register(i._inputHandler.onRequestRefreshRows(function(e,t){return i.refresh(e,t)})),i.register(i._inputHandler.onRequestSendFocus(function(){return i._reportFocus()})),i.register(i._inputHandler.onRequestReset(function(){return i.reset()})),i.register(i._inputHandler.onRequestWindowsOptionsReport(function(e){return i._reportWindowsOptions(e)})),i.register(i._inputHandler.onColor(function(e){return i._handleColorEvent(e)})),i.register((0,k.forwardEvent)(i._inputHandler.onCursorMove,i._onCursorMove)),i.register((0,k.forwardEvent)(i._inputHandler.onTitleChange,i._onTitleChange)),i.register((0,k.forwardEvent)(i._inputHandler.onA11yChar,i._onA11yCharEmitter)),i.register((0,k.forwardEvent)(i._inputHandler.onA11yTab,i._onA11yTabEmitter)),i.register(i._bufferService.onResize(function(e){return i._afterResize(e.cols,e.rows)})),i}return r(t,e),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),t.prototype._handleColorEvent=function(e){var t,i,n,r;if(this._colorManager){try{for(var l=o(e),c=l.next();!c.done;c=l.next()){var u=c.value,d=void 0,f="";switch(u.index){case 256:d="foreground",f="10";break;case 257:d="background",f="11";break;case 258:d="cursor",f="12";break;default:d="ansi",f="4;"+u.index}if(d)switch(u.type){case 0:var p=P.color.toColorRGB("ansi"===d?this._colorManager.colors.ansi[u.index]:this._colorManager.colors[d]);this.coreService.triggerDataEvent(h.C0.ESC+"]"+f+";"+(0,I.toRgbString)(p)+h.C1_ESCAPED.ST);break;case 1:"ansi"===d?this._colorManager.colors.ansi[u.index]=P.rgba.toColor.apply(P.rgba,a([],s(u.color),!1)):this._colorManager.colors[d]=P.rgba.toColor.apply(P.rgba,a([],s(u.color),!1));break;case 2:this._colorManager.restoreColor(u.index)}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(t)throw t.error}}null===(n=this._renderService)||void 0===n||n.setColors(this._colorManager.colors),null===(r=this.viewport)||void 0===r||r.onThemeChange(this._colorManager.colors)}},t.prototype.dispose=function(){var t,i,n;this._isDisposed||(e.prototype.dispose.call(this),null===(t=this._renderService)||void 0===t||t.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(n=null===(i=this.element)||void 0===i?void 0:i.parentNode)||void 0===n||n.removeChild(this.element))},t.prototype._setup=function(){e.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},t.prototype._updateOptions=function(t){var i,n,r,o;switch(e.prototype._updateOptions.call(this,t),t){case"fontFamily":case"fontSize":null===(i=this._renderService)||void 0===i||i.clear(),null===(n=this._charSizeService)||void 0===n||n.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(r=this.viewport)||void 0===r||r.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new w.AccessibilityManager(this,this._renderService)):(null===(o=this._accessibilityManager)||void 0===o||o.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},t.prototype._onTextAreaFocus=function(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(h.C0.ESC+"[I"),this.updateCursorStyle(e),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},t.prototype.blur=function(){var e;return null===(e=this.textarea)||void 0===e?void 0:e.blur()},t.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(h.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},t.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(t){var i=Math.min(this.buffer.x,this.cols-1),n=this._renderService.dimensions.actualCellHeight,r=t.getWidth(i),o=this._renderService.dimensions.actualCellWidth*r,s=this.buffer.y*this._renderService.dimensions.actualCellHeight,a=i*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=a+"px",this.textarea.style.top=s+"px",this.textarea.style.width=o+"px",this.textarea.style.height=n+"px",this.textarea.style.lineHeight=n+"px",this.textarea.style.zIndex="-5"}}},t.prototype._initGlobal=function(){var e=this;this._bindKeys(),this.register((0,m.addDisposableDomListener)(this.element,"copy",function(t){e.hasSelection()&&(0,u.copyHandler)(t,e._selectionService)}));var t=function(t){return(0,u.handlePasteEvent)(t,e.textarea,e.coreService)};this.register((0,m.addDisposableDomListener)(this.textarea,"paste",t)),this.register((0,m.addDisposableDomListener)(this.element,"paste",t)),_.isFirefox?this.register((0,m.addDisposableDomListener)(this.element,"mousedown",function(t){2===t.button&&(0,u.rightClickHandler)(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)})):this.register((0,m.addDisposableDomListener)(this.element,"contextmenu",function(t){(0,u.rightClickHandler)(t,e.textarea,e.screenElement,e._selectionService,e.options.rightClickSelectsWord)})),_.isLinux&&this.register((0,m.addDisposableDomListener)(this.element,"auxclick",function(t){1===t.button&&(0,u.moveTextAreaUnderMouseCursor)(t,e.textarea,e.screenElement)}))},t.prototype._bindKeys=function(){var e=this;this.register((0,m.addDisposableDomListener)(this.textarea,"keyup",function(t){return e._keyUp(t)},!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keydown",function(t){return e._keyDown(t)},!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keypress",function(t){return e._keyPress(t)},!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionstart",function(){return e._compositionHelper.compositionstart()})),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionupdate",function(t){return e._compositionHelper.compositionupdate(t)})),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionend",function(){return e._compositionHelper.compositionend()})),this.register((0,m.addDisposableDomListener)(this.textarea,"input",function(t){return e._inputEvent(t)},!0)),this.register(this.onRender(function(){return e._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(t){return e._queueLinkification(t.start,t.end)}))},t.prototype.open=function(e){var t=this;if(!e)throw new Error("Terminal requires a parent element.");e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=e.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),e.appendChild(this.element);var i=$.createDocumentFragment();this._viewportElement=$.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),i.appendChild(this._viewportElement),this._viewportScrollArea=$.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=$.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=$.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),i.appendChild(this.screenElement),this.textarea=$.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,m.addDisposableDomListener)(this.textarea,"focus",function(e){return t._onTextAreaFocus(e)})),this.register((0,m.addDisposableDomListener)(this.textarea,"blur",function(){return t._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var n=this._instantiationService.createInstance(R.CoreBrowserService,this.textarea);this._instantiationService.setService(M.ICoreBrowserService,n),this._charSizeService=this._instantiationService.createInstance(O.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(M.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new E.ColorManager($,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(e){return t._colorManager.onOptionsChange(e)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(B.CharacterJoinerService),this._instantiationService.setService(M.ICharacterJoinerService,this._characterJoinerService);var r=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,r,this.rows,this.screenElement)),this._instantiationService.setService(M.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(function(e){return t._onRender.fire(e)})),this.onResize(function(e){return t._renderService.resize(e.cols,e.rows)}),this._compositionView=$.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(i),this._soundService=this._instantiationService.createInstance(y.SoundService),this._instantiationService.setService(M.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(T.MouseService),this._instantiationService.setService(M.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(c.Viewport,function(e){return t.scrollLines(e,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return t.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){t._renderService.onCursorMove(),t._syncTextArea()})),this.register(this.onResize(function(){return t._renderService.onResize(t.cols,t.rows)})),this.register(this.onBlur(function(){return t._renderService.onBlur()})),this.register(this.onFocus(function(){return t._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return t.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(M.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(e){return t.scrollLines(e.amount,e.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return t._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(e){return t._renderService.onSelectionChanged(e.start,e.end,e.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(e){t.textarea.value=e,t.textarea.focus(),t.textarea.select()})),this.register(this._onScroll.event(function(e){t.viewport.syncScrollArea(),t._selectionService.refresh()})),this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",function(){return t._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(b.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return t._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(H.BufferDecorationRenderer,this.screenElement)),this.register((0,m.addDisposableDomListener)(this.element,"mousedown",function(e){return t._selectionService.onMouseDown(e)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new w.AccessibilityManager(this,this._renderService)),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this._instantiationService.createInstance(j.OverviewRulerRenderer,this._viewportElement,this.screenElement)),this.optionsService.onOptionChange(function(){!t._overviewRulerRenderer&&t.options.overviewRulerWidth&&t._viewportElement&&t.screenElement&&(t._overviewRulerRenderer=t._instantiationService.createInstance(j.OverviewRulerRenderer,t._viewportElement,t.screenElement))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},t.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(f.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(C.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},t.prototype._setTheme=function(e){var t,i,n;this._theme=e,null===(t=this._colorManager)||void 0===t||t.setTheme(e),null===(i=this._renderService)||void 0===i||i.setColors(this._colorManager.colors),null===(n=this.viewport)||void 0===n||n.onThemeChange(this._colorManager.colors)},t.prototype.bindMouse=function(){var e=this,t=this,i=this.element;function n(e){var i,n,r=t._mouseService.getRawByteCoords(e,t.screenElement,t.cols,t.rows);if(!r)return!1;switch(e.overrideType||e.type){case"mousemove":n=32,void 0===e.buttons?(i=3,void 0!==e.button&&(i=e.button<3?e.button:3)):i=1&e.buttons?0:4&e.buttons?1:2&e.buttons?2:3;break;case"mouseup":n=0,i=e.button<3?e.button:3;break;case"mousedown":n=1,i=e.button<3?e.button:3;break;case"wheel":if(0===t.viewport.getLinesScrolled(e))return!1;n=e.deltaY<0?0:1,i=4;break;default:return!1}return!(void 0===n||void 0===i||i>4)&&t.coreMouseService.triggerMouseEvent({col:r.x-33,row:r.y-33,button:i,action:n,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey})}var r={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o=function(t){return n(t),t.buttons||(e._document.removeEventListener("mouseup",r.mouseup),r.mousedrag&&e._document.removeEventListener("mousemove",r.mousedrag)),e.cancel(t)},s=function(t){return n(t),e.cancel(t,!0)},a=function(e){e.buttons&&n(e)},l=function(e){e.buttons||n(e)};this.register(this.coreMouseService.onProtocolChange(function(t){t?("debug"===e.optionsService.rawOptions.logLevel&&e._logService.debug("Binding to mouse events:",e.coreMouseService.explainEvents(t)),e.element.classList.add("enable-mouse-events"),e._selectionService.disable()):(e._logService.debug("Unbinding from mouse events."),e.element.classList.remove("enable-mouse-events"),e._selectionService.enable()),8&t?r.mousemove||(i.addEventListener("mousemove",l),r.mousemove=l):(i.removeEventListener("mousemove",r.mousemove),r.mousemove=null),16&t?r.wheel||(i.addEventListener("wheel",s,{passive:!1}),r.wheel=s):(i.removeEventListener("wheel",r.wheel),r.wheel=null),2&t?r.mouseup||(r.mouseup=o):(e._document.removeEventListener("mouseup",r.mouseup),r.mouseup=null),4&t?r.mousedrag||(r.mousedrag=a):(e._document.removeEventListener("mousemove",r.mousedrag),r.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,m.addDisposableDomListener)(i,"mousedown",function(t){if(t.preventDefault(),e.focus(),e.coreMouseService.areMouseEventsActive&&!e._selectionService.shouldForceSelection(t))return n(t),r.mouseup&&e._document.addEventListener("mouseup",r.mouseup),r.mousedrag&&e._document.addEventListener("mousemove",r.mousedrag),e.cancel(t)})),this.register((0,m.addDisposableDomListener)(i,"wheel",function(t){if(!r.wheel){if(!e.buffer.hasScrollback){var i=e.viewport.getLinesScrolled(t);if(0===i)return;for(var n=h.C0.ESC+(e.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(t.deltaY<0?"A":"B"),o="",s=0;s<Math.abs(i);s++)o+=n;return e.coreService.triggerDataEvent(o,!0),e.cancel(t,!0)}return e.viewport.onWheel(t)?e.cancel(t):void 0}},{passive:!1})),this.register((0,m.addDisposableDomListener)(i,"touchstart",function(t){if(!e.coreMouseService.areMouseEventsActive)return e.viewport.onTouchStart(t),e.cancel(t)},{passive:!0})),this.register((0,m.addDisposableDomListener)(i,"touchmove",function(t){if(!e.coreMouseService.areMouseEventsActive)return e.viewport.onTouchMove(t)?void 0:e.cancel(t)},{passive:!1}))},t.prototype.refresh=function(e,t){var i;null===(i=this._renderService)||void 0===i||i.refreshRows(e,t)},t.prototype._queueLinkification=function(e,t){var i;null===(i=this.linkifier)||void 0===i||i.linkifyRows(e,t)},t.prototype.updateCursorStyle=function(e){var t;(null===(t=this._selectionService)||void 0===t?void 0:t.shouldColumnSelect(e))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},t.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},t.prototype.scrollLines=function(t,i,n){void 0===n&&(n=0),e.prototype.scrollLines.call(this,t,i,n),this.refresh(0,this.rows-1)},t.prototype.paste=function(e){(0,u.paste)(e,this.textarea,this.coreService)},t.prototype.attachCustomKeyEventHandler=function(e){this._customKeyEventHandler=e},t.prototype.registerLinkMatcher=function(e,t,i){var n=this.linkifier.registerLinkMatcher(e,t,i);return this.refresh(0,this.rows-1),n},t.prototype.deregisterLinkMatcher=function(e){this.linkifier.deregisterLinkMatcher(e)&&this.refresh(0,this.rows-1)},t.prototype.registerLinkProvider=function(e){return this.linkifier2.registerLinkProvider(e)},t.prototype.registerCharacterJoiner=function(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t},t.prototype.deregisterCharacterJoiner=function(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)},Object.defineProperty(t.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),t.prototype.addMarker=function(e){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)},t.prototype.registerDecoration=function(e){return this._decorationService.registerDecoration(e)},t.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},t.prototype.select=function(e,t,i){this._selectionService.setSelection(e,t,i)},t.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},t.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},t.prototype.clearSelection=function(){var e;null===(e=this._selectionService)||void 0===e||e.clearSelection()},t.prototype.selectAll=function(){var e;null===(e=this._selectionService)||void 0===e||e.selectAll()},t.prototype.selectLines=function(e,t){var i;null===(i=this._selectionService)||void 0===i||i.selectLines(e,t)},t.prototype._keyDown=function(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;var t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;t||"Dead"!==e.key&&"AltGraph"!==e.key||(this._unprocessedDeadKey=!0);var i=(0,S.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===i.type||2===i.type){var n=this.rows-1;return this.scrollLines(2===i.type?-n:n),this.cancel(e,!0)}return 1===i.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(i.key!==h.C0.ETX&&i.key!==h.C0.CR||(this.textarea.value=""),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(e,!0))))},t.prototype._isThirdLevelShift=function(e,t){var i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return"keypress"===t.type?i:i&&(!t.keyCode||t.keyCode>47)},t.prototype._keyUp=function(e){this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)},t.prototype._keyPress=function(e){var t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},t.prototype._inputEvent=function(e){if(e.data&&"insertText"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1},t.prototype.bell=function(){var e;this._soundBell()&&(null===(e=this._soundService)||void 0===e||e.playBellSound()),this._onBell.fire()},t.prototype.resize=function(t,i){t!==this.cols||i!==this.rows?e.prototype.resize.call(this,t,i):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},t.prototype._afterResize=function(e,t){var i,n;null===(i=this._charSizeService)||void 0===i||i.measure(),null===(n=this.viewport)||void 0===n||n.syncScrollArea(!0)},t.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(x.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},t.prototype.reset=function(){var t,i;this.options.rows=this.rows,this.options.cols=this.cols;var n=this._customKeyEventHandler;this._setup(),e.prototype.reset.call(this),null===(t=this._selectionService)||void 0===t||t.reset(),this._decorationService.reset(),this._customKeyEventHandler=n,this.refresh(0,this.rows-1),null===(i=this.viewport)||void 0===i||i.syncScrollArea()},t.prototype.clearTextureAtlas=function(){var e;null===(e=this._renderService)||void 0===e||e.clearTextureAtlas()},t.prototype._reportFocus=function(){var e;(null===(e=this.element)||void 0===e?void 0:e.classList.contains("focus"))?this.coreService.triggerDataEvent(h.C0.ESC+"[I"):this.coreService.triggerDataEvent(h.C0.ESC+"[O")},t.prototype._reportWindowsOptions=function(e){if(this._renderService)switch(e){case d.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var t=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),i=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(h.C0.ESC+"[4;"+i+";"+t+"t");break;case d.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var n=this._renderService.dimensions.scaledCellWidth.toFixed(0),r=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(h.C0.ESC+"[6;"+r+";"+n+"t")}},t.prototype.cancel=function(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1},t.prototype._visualBell=function(){return!1},t.prototype._soundBell=function(){return"sound"===this.options.bellStyle},t}(A.CoreTerminal);t.Terminal=N},9924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0;var i=function(){function e(e,t){void 0===t&&(t=1e3),this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return e.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},e.prototype.refresh=function(e,t,i){var n=this;this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;var r=Date.now();if(r-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=r,this._innerRefresh();else if(!this._additionalRefreshRequested){var o=r-this._lastRefreshMs,s=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){n._lastRefreshMs=Date.now(),n._innerRefresh(),n._additionalRefreshRequested=!1,n._refreshTimeoutID=void 0},s)}},e.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},e}();t.TimeBasedDebouncer=i},1680:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var a=i(844),l=i(3656),c=i(4725),u=i(2585),h=function(e){function t(t,i,n,r,o,s,a,c){var u=e.call(this)||this;return u._scrollLines=t,u._viewportElement=i,u._scrollArea=n,u._element=r,u._bufferService=o,u._optionsService=s,u._charSizeService=a,u._renderService=c,u.scrollBarWidth=0,u._currentRowHeight=0,u._currentScaledCellHeight=0,u._lastRecordedBufferLength=0,u._lastRecordedViewportHeight=0,u._lastRecordedBufferHeight=0,u._lastTouchY=0,u._lastScrollTop=0,u._wheelPartialScroll=0,u._refreshAnimationFrame=null,u._ignoreNextScrollEvent=!1,u.scrollBarWidth=u._viewportElement.offsetWidth-u._scrollArea.offsetWidth||15,u.register((0,l.addDisposableDomListener)(u._viewportElement,"scroll",u._onScroll.bind(u))),u._activeBuffer=u._bufferService.buffer,u.register(u._bufferService.buffers.onBufferActivate(function(e){return u._activeBuffer=e.activeBuffer})),u._renderDimensions=u._renderService.dimensions,u.register(u._renderService.onDimensionsChange(function(e){return u._renderDimensions=e})),setTimeout(function(){return u.syncScrollArea()},0),u}return r(t,e),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var t=this;if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return t._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(void 0===e&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight||this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(t)}},t.prototype._bubbleScroll=function(e,t){var i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&i<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var t=this._getPixelsScrolled(e);return 0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},t.prototype._getPixelsScrolled=function(e){if(0===e.deltaY||e.shiftKey)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t},t.prototype.getLinesScrolled=function(e){if(0===e.deltaY||e.shiftKey)return 0;var t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t},t.prototype._applyScrollModifier=function(e,t){var i=this._optionsService.rawOptions.fastScrollModifier;return"alt"===i&&t.altKey||"ctrl"===i&&t.ctrlKey||"shift"===i&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))},o([s(4,u.IBufferService),s(5,u.IOptionsService),s(6,c.ICharSizeService),s(7,c.IRenderService)],t)}(a.Disposable);t.Viewport=h},3107:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecorationRenderer=void 0;var l=i(3656),c=i(4725),u=i(844),h=i(2585),d=function(e){function t(t,i,n,r){var o=e.call(this)||this;return o._screenElement=t,o._bufferService=i,o._decorationService=n,o._renderService=r,o._decorationElements=new Map,o._altBufferIsActive=!1,o._dimensionsChanged=!1,o._container=document.createElement("div"),o._container.classList.add("xterm-decoration-container"),o._screenElement.appendChild(o._container),o.register(o._renderService.onRenderedViewportChange(function(){return o._queueRefresh()})),o.register(o._renderService.onDimensionsChange(function(){o._dimensionsChanged=!0,o._queueRefresh()})),o.register((0,l.addDisposableDomListener)(window,"resize",function(){return o._queueRefresh()})),o.register(o._bufferService.buffers.onBufferActivate(function(){o._altBufferIsActive=o._bufferService.buffer===o._bufferService.buffers.alt})),o.register(o._decorationService.onDecorationRegistered(function(){return o._queueRefresh()})),o.register(o._decorationService.onDecorationRemoved(function(e){return o._removeDecoration(e)})),o}return r(t,e),t.prototype.dispose=function(){this._container.remove(),this._decorationElements.clear(),e.prototype.dispose.call(this)},t.prototype._queueRefresh=function(){var e=this;void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback(function(){e.refreshDecorations(),e._animationFrame=void 0}))},t.prototype.refreshDecorations=function(){var e,t;try{for(var i=a(this._decorationService.decorations),n=i.next();!n.done;n=i.next()){var r=n.value;this._renderDecoration(r)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this._dimensionsChanged=!1},t.prototype._renderDecoration=function(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)},t.prototype._createElement=function(e){var t,i=document.createElement("div");i.classList.add("xterm-decoration"),i.style.width=Math.round((e.options.width||1)*this._renderService.dimensions.actualCellWidth)+"px",i.style.height=(e.options.height||1)*this._renderService.dimensions.actualCellHeight+"px",i.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.actualCellHeight+"px",i.style.lineHeight=this._renderService.dimensions.actualCellHeight+"px";var n=null!==(t=e.options.x)&&void 0!==t?t:0;return n&&n>this._bufferService.cols&&(i.style.display="none"),this._refreshXPosition(e,i),i},t.prototype._refreshStyle=function(e){var t=this,i=e.marker.line-this._bufferService.buffers.active.ydisp;if(i<0||i>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{var n=this._decorationElements.get(e);n||(e.onDispose(function(){return t._removeDecoration(e)}),n=this._createElement(e),e.element=n,this._decorationElements.set(e,n),this._container.appendChild(n)),n.style.top=i*this._renderService.dimensions.actualCellHeight+"px",n.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(n)}},t.prototype._refreshXPosition=function(e,t){var i;if(void 0===t&&(t=e.element),t){var n=null!==(i=e.options.x)&&void 0!==i?i:0;"right"===(e.options.anchor||"left")?t.style.right=n?n*this._renderService.dimensions.actualCellWidth+"px":"":t.style.left=n?n*this._renderService.dimensions.actualCellWidth+"px":""}},t.prototype._removeDecoration=function(e){var t;null===(t=this._decorationElements.get(e))||void 0===t||t.remove(),this._decorationElements.delete(e)},o([s(1,h.IBufferService),s(2,h.IDecorationService),s(3,c.IRenderService)],t)}(u.Disposable);t.BufferDecorationRenderer=d},5871:function(e,t){var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorZoneStore=void 0;var n=function(){function e(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}return Object.defineProperty(e.prototype,"zones",{get:function(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._zones.length=0,this._zonePoolIndex=0},e.prototype.addDecoration=function(e){var t,n;if(e.options.overviewRulerOptions){try{for(var r=i(this._zones),o=r.next();!o.done;o=r.next()){var s=o.value;if(s.color===e.options.overviewRulerOptions.color&&s.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(s,e.marker.line))return;if(this._lineAdjacentToZone(s,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(s,e.marker.line)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}},e.prototype.setPadding=function(e){this._linePadding=e},e.prototype._lineIntersectsZone=function(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine},e.prototype._lineAdjacentToZone=function(e,t,i){return t>=e.startBufferLine-this._linePadding[i||"full"]&&t<=e.endBufferLine+this._linePadding[i||"full"]},e.prototype._addLineToZone=function(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)},e}();t.ColorZoneStore=n},5744:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewRulerRenderer=void 0;var l=i(5871),c=i(3656),u=i(4725),h=i(844),d=i(2585),f={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0},v={full:0,left:0,center:0,right:0},_=function(e){function t(t,i,n,r,o,s){var a,c=e.call(this)||this;c._viewportElement=t,c._screenElement=i,c._bufferService=n,c._decorationService=r,c._renderService=o,c._optionsService=s,c._colorZoneStore=new l.ColorZoneStore,c._shouldUpdateDimensions=!0,c._shouldUpdateAnchor=!0,c._lastKnownBufferLength=0,c._canvas=document.createElement("canvas"),c._canvas.classList.add("xterm-decoration-overview-ruler"),c._refreshCanvasDimensions(),null===(a=c._viewportElement.parentElement)||void 0===a||a.insertBefore(c._canvas,c._viewportElement);var u=c._canvas.getContext("2d");if(!u)throw new Error("Ctx cannot be null");return c._ctx=u,c._registerDecorationListeners(),c._registerBufferChangeListeners(),c._registerDimensionChangeListeners(),c}return r(t,e),Object.defineProperty(t.prototype,"_width",{get:function(){return this._optionsService.options.overviewRulerWidth||0},enumerable:!1,configurable:!0}),t.prototype._registerDecorationListeners=function(){var e=this;this.register(this._decorationService.onDecorationRegistered(function(){return e._queueRefresh(void 0,!0)})),this.register(this._decorationService.onDecorationRemoved(function(){return e._queueRefresh(void 0,!0)}))},t.prototype._registerBufferChangeListeners=function(){var e=this;this.register(this._renderService.onRenderedViewportChange(function(){return e._queueRefresh()})),this.register(this._bufferService.buffers.onBufferActivate(function(){e._canvas.style.display=e._bufferService.buffer===e._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(function(){e._lastKnownBufferLength!==e._bufferService.buffers.normal.lines.length&&(e._refreshDrawHeightConstants(),e._refreshColorZonePadding())}))},t.prototype._registerDimensionChangeListeners=function(){var e=this;this.register(this._renderService.onRender(function(){e._containerHeight&&e._containerHeight===e._screenElement.clientHeight||(e._queueRefresh(!0),e._containerHeight=e._screenElement.clientHeight)})),this.register(this._optionsService.onOptionChange(function(t){"overviewRulerWidth"===t&&e._queueRefresh(!0)})),this.register((0,c.addDisposableDomListener)(window,"resize",function(){e._queueRefresh(!0)})),this._queueRefresh(!0)},t.prototype.dispose=function(){var t;null===(t=this._canvas)||void 0===t||t.remove(),e.prototype.dispose.call(this)},t.prototype._refreshDrawConstants=function(){var e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);p.full=this._canvas.width,p.left=e,p.center=t,p.right=e,this._refreshDrawHeightConstants(),v.full=0,v.left=0,v.center=p.left,v.right=p.left+p.center},t.prototype._refreshDrawHeightConstants=function(){f.full=Math.round(2*window.devicePixelRatio);var e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*window.devicePixelRatio);f.left=t,f.center=t,f.right=t},t.prototype._refreshColorZonePadding=function(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*f.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length},t.prototype._refreshCanvasDimensions=function(){this._canvas.style.width=this._width+"px",this._canvas.width=Math.round(this._width*window.devicePixelRatio),this._canvas.style.height=this._screenElement.clientHeight+"px",this._canvas.height=Math.round(this._screenElement.clientHeight*window.devicePixelRatio),this._refreshDrawConstants(),this._refreshColorZonePadding()},t.prototype._refreshDecorations=function(){var e,t,i,n,r,o;this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();try{for(var s=a(this._decorationService.decorations),l=s.next();!l.done;l=s.next()){var c=l.value;this._colorZoneStore.addDecoration(c)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}this._ctx.lineWidth=1;var u=this._colorZoneStore.zones;try{for(var h=a(u),d=h.next();!d.done;d=h.next())"full"!==(v=d.value).position&&this._renderColorZone(v)}catch(e){i={error:e}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(i)throw i.error}}try{for(var f=a(u),p=f.next();!p.done;p=f.next()){var v;"full"===(v=p.value).position&&this._renderColorZone(v)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1},t.prototype._renderColorZone=function(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(v[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-f[e.position||"full"]/2),p[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+f[e.position||"full"]))},t.prototype._queueRefresh=function(e,t){var i=this;this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=window.requestAnimationFrame(function(){i._refreshDecorations(),i._animationFrame=void 0}))},o([s(2,d.IBufferService),s(3,d.IDecorationService),s(4,u.IRenderService),s(5,d.IOptionsService)],t)}(h.Disposable);t.OverviewRulerRenderer=_},2950:function(e,t,i){var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;var o=i(4725),s=i(2585),a=function(){function e(e,t,i,n,r,o){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=n,this._coreService=r,this._renderService=o,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(e.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),e.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},e.prototype.compositionupdate=function(e){var t=this;this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(function(){t._compositionPosition.end=t._textarea.value.length},0)},e.prototype.compositionend=function(){this._finalizeComposition(!0)},e.prototype.keydown=function(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)},e.prototype._finalizeComposition=function(e){var t=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){var i={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){var e;t._isSendingComposition&&(t._isSendingComposition=!1,i.start+=t._dataAlreadySent.length,(e=t._isComposing?t._textarea.value.substring(i.start,i.end):t._textarea.value.substring(i.start)).length>0&&t._coreService.triggerDataEvent(e,!0))},0)}else{this._isSendingComposition=!1;var n=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(n,!0)}},e.prototype._handleAnyTextareaChanges=function(){var e=this,t=this._textarea.value;setTimeout(function(){if(!e._isComposing){var i=e._textarea.value.replace(t,"");i.length>0&&(e._dataAlreadySent=i,e._coreService.triggerDataEvent(i,!0))}},0)},e.prototype.updateCompositionElements=function(e){var t=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var i=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),n=this._renderService.dimensions.actualCellHeight,r=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,o=i*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=o+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=n+"px",this._compositionView.style.lineHeight=n+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var s=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(s.width,1)+"px",this._textarea.style.height=Math.max(s.height,1)+"px",this._textarea.style.lineHeight=s.height+"px"}e||setTimeout(function(){return t.updateCompositionElements(!0)},0)}},n([r(2,s.IBufferService),r(3,s.IOptionsService),r(4,s.ICoreService),r(5,o.IRenderService)],e)}();t.CompositionHelper=a},9806:(e,t)=>{function i(e,t,i){var n=i.getBoundingClientRect(),r=e.getComputedStyle(i),o=parseInt(r.getPropertyValue("padding-left")),s=parseInt(r.getPropertyValue("padding-top"));return[t.clientX-n.left-o,t.clientY-n.top-s]}Object.defineProperty(t,"__esModule",{value:!0}),t.getRawByteCoords=t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=i,t.getCoords=function(e,t,n,r,o,s,a,l,c){if(s){var u=i(e,t,n);if(u)return u[0]=Math.ceil((u[0]+(c?a/2:0))/a),u[1]=Math.ceil(u[1]/l),u[0]=Math.min(Math.max(u[0],1),r+(c?1:0)),u[1]=Math.min(Math.max(u[1],1),o),u}},t.getRawByteCoords=function(e){if(e)return{x:e[0]+32,y:e[1]+32}}},9504:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;var n=i(2584);function r(e,t,i,n){var r=e-o(i,e),a=t-o(i,t),u=Math.abs(r-a)-function(e,t,i){for(var n=0,r=e-o(i,e),a=t-o(i,t),l=0;l<Math.abs(r-a);l++){var c="A"===s(e,t)?-1:1,u=i.buffer.lines.get(r+c*l);(null==u?void 0:u.isWrapped)&&n++}return n}(e,t,i);return c(u,l(s(e,t),n))}function o(e,t){for(var i=0,n=e.buffer.lines.get(t),r=null==n?void 0:n.isWrapped;r&&t>=0&&t<e.rows;)i++,r=null==(n=e.buffer.lines.get(--t))?void 0:n.isWrapped;return i}function s(e,t){return e>t?"A":"B"}function a(e,t,i,n,r,o){for(var s=e,a=t,l="";s!==i||a!==n;)s+=r?1:-1,r&&s>o.cols-1?(l+=o.buffer.translateBufferLineToString(a,!1,e,s),s=0,e=0,a++):!r&&s<0&&(l+=o.buffer.translateBufferLineToString(a,!1,0,e+1),e=s=o.cols-1,a--);return l+o.buffer.translateBufferLineToString(a,!1,e,s)}function l(e,t){var i=t?"O":"[";return n.C0.ESC+i+e}function c(e,t){e=Math.floor(e);for(var i="",n=0;n<e;n++)i+=t;return i}t.moveToCellSequence=function(e,t,i,n){var s,u=i.buffer.x,h=i.buffer.y;if(!i.buffer.hasScrollback)return function(e,t,i,n,s,u){return 0===r(t,n,s,u).length?"":c(a(e,t,e,t-o(s,t),!1,s).length,l("D",u))}(u,h,0,t,i,n)+r(h,t,i,n)+function(e,t,i,n,s,u){var h;h=r(t,n,s,u).length>0?n-o(s,n):t;var d=n,f=function(e,t,i,n,s,a){var l;return l=r(i,n,s,a).length>0?n-o(s,n):t,e<i&&l<=n||e>=i&&l<n?"C":"D"}(e,t,i,n,s,u);return c(a(e,h,i,d,"C"===f,s).length,l(f,u))}(u,h,e,t,i,n);if(h===t)return s=u>e?"D":"C",c(Math.abs(u-e),l(s,n));s=h>t?"D":"C";var d=Math.abs(h-t);return c(function(e,t){return t.cols-e}(h>t?e:u,i)+(d-1)*i.cols+1+((h>t?u:e)-1),l(s,n))}},4389:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;var o=i(3236),s=i(9042),a=i(7975),l=i(7090),c=i(5741),u=i(8285),h=["cols","rows"],d=function(){function e(e){var t=this;this._core=new o.Terminal(e),this._addonManager=new c.AddonManager,this._publicOptions=n({},this._core.options);var i=function(e){return t._core.options[e]},r=function(e,i){t._checkReadonlyOptions(e),t._core.options[e]=i};for(var s in this._core.options){var a={get:i.bind(this,s),set:r.bind(this,s)};Object.defineProperty(this._publicOptions,s,a)}}return e.prototype._checkReadonlyOptions=function(e){if(h.includes(e))throw new Error('Option "'+e+'" can only be set in the constructor')},e.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(e.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onWriteParsed",{get:function(){return this._core.onWriteParsed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new a.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unicode",{get:function(){return this._checkProposedApi(),new l.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new u.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modes",{get:function(){var e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._publicOptions},set:function(e){for(var t in e)this._publicOptions[t]=e[t]},enumerable:!1,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)},e.prototype.open=function(e){this._core.open(e)},e.prototype.attachCustomKeyEventHandler=function(e){this._core.attachCustomKeyEventHandler(e)},e.prototype.registerLinkMatcher=function(e,t,i){return this._checkProposedApi(),this._core.registerLinkMatcher(e,t,i)},e.prototype.deregisterLinkMatcher=function(e){this._checkProposedApi(),this._core.deregisterLinkMatcher(e)},e.prototype.registerLinkProvider=function(e){return this._checkProposedApi(),this._core.registerLinkProvider(e)},e.prototype.registerCharacterJoiner=function(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)},e.prototype.deregisterCharacterJoiner=function(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)},e.prototype.registerMarker=function(e){return void 0===e&&(e=0),this._checkProposedApi(),this._verifyIntegers(e),this._core.addMarker(e)},e.prototype.registerDecoration=function(e){var t,i,n;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(t=e.x)&&void 0!==t?t:0,null!==(i=e.width)&&void 0!==i?i:0,null!==(n=e.height)&&void 0!==n?n:0),this._core.registerDecoration(e)},e.prototype.addMarker=function(e){return this.registerMarker(e)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(e){this._verifyIntegers(e),this._core.scrollLines(e)},e.prototype.scrollPages=function(e){this._verifyIntegers(e),this._core.scrollPages(e)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(e){this._verifyIntegers(e),this._core.scrollToLine(e)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(e,t){this._core.write(e,t)},e.prototype.writeUtf8=function(e,t){this._core.write(e,t)},e.prototype.writeln=function(e,t){this._core.write(e),this._core.write("\r\n",t)},e.prototype.paste=function(e){this._core.paste(e)},e.prototype.getOption=function(e){return this._core.optionsService.getOption(e)},e.prototype.setOption=function(e,t){this._checkReadonlyOptions(e),this._core.optionsService.setOption(e,t)},e.prototype.refresh=function(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)},e.prototype.reset=function(){this._core.reset()},e.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},e.prototype.loadAddon=function(e){return this._addonManager.loadAddon(this,e)},Object.defineProperty(e,"strings",{get:function(){return s},enumerable:!1,configurable:!0}),e.prototype._verifyIntegers=function(){for(var e,t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];try{for(var o=r(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype._verifyPositiveIntegers=function(){for(var e,t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];try{for(var o=r(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e}();t.Terminal=d},1546:function(e,t,i){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;var r=i(643),o=i(8803),s=i(1420),a=i(3734),l=i(1752),c=i(8055),u=i(9631),h=i(8978),d=function(){function e(e,t,i,n,r,o,s,a,l){this._container=e,this._alpha=n,this._colors=r,this._rendererId=o,this._bufferService=s,this._optionsService=a,this._decorationService=l,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._columnSelectMode=!1,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+t+"-layer"),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return e.prototype.dispose=function(){var e;(0,u.removeElementFromParent)(this._canvas),null===(e=this._charAtlas)||void 0===e||e.dispose()},e.prototype._initCanvas=function(){this._ctx=(0,l.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},e.prototype.onOptionsChanged=function(){},e.prototype.onBlur=function(){},e.prototype.onFocus=function(){},e.prototype.onCursorMove=function(){},e.prototype.onGridChanged=function(e,t){},e.prototype.onSelectionChanged=function(e,t,i){void 0===i&&(i=!1),this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i},e.prototype.setColors=function(e){this._refreshCharAtlas(e)},e.prototype._setTransparency=function(e){if(e!==this._alpha){var t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},e.prototype._refreshCharAtlas=function(e){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,s.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,e,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},e.prototype.resize=function(e){this._scaledCellWidth=e.scaledCellWidth,this._scaledCellHeight=e.scaledCellHeight,this._scaledCharWidth=e.scaledCharWidth,this._scaledCharHeight=e.scaledCharHeight,this._scaledCharLeft=e.scaledCharLeft,this._scaledCharTop=e.scaledCharTop,this._canvas.width=e.scaledCanvasWidth,this._canvas.height=e.scaledCanvasHeight,this._canvas.style.width=e.canvasWidth+"px",this._canvas.style.height=e.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},e.prototype.clearTextureAtlas=function(){var e;null===(e=this._charAtlas)||void 0===e||e.clear()},e.prototype._fillCells=function(e,t,i,n){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,n*this._scaledCellHeight)},e.prototype._fillMiddleLineAtCells=function(e,t,i){void 0===i&&(i=1);var n=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-n-window.devicePixelRatio,i*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillBottomLineAtCells=function(e,t,i){void 0===i&&(i=1),this._ctx.fillRect(e*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillLeftLineAtCell=function(e,t,i){this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio*i,this._scaledCellHeight)},e.prototype._strokeRectAtCell=function(e,t,i,n){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(e*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,n*this._scaledCellHeight-window.devicePixelRatio)},e.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},e.prototype._clearCells=function(e,t,i,n){this._alpha?this._ctx.clearRect(e*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,n*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(e*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,n*this._scaledCellHeight))},e.prototype._fillCharTrueColor=function(e,t,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=o.TEXT_BASELINE,this._clipRow(i);var n=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(n=(0,h.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),n||this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},e.prototype._drawChars=function(e,t,i){var s,a,l,c=this._getContrastColor(e,t,i);if(c||e.isFgRGB()||e.isBgRGB())this._drawUncachedChars(e,t,i,c);else{var u,h;e.isInverse()?(u=e.isBgDefault()?o.INVERTED_DEFAULT_COLOR:e.getBgColor(),h=e.isFgDefault()?o.INVERTED_DEFAULT_COLOR:e.getFgColor()):(h=e.isBgDefault()?r.DEFAULT_COLOR:e.getBgColor(),u=e.isFgDefault()?r.DEFAULT_COLOR:e.getFgColor()),u+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&u<8?8:0,this._currentGlyphIdentifier.chars=e.getChars()||r.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=e.getCode()||r.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=h,this._currentGlyphIdentifier.fg=u,this._currentGlyphIdentifier.bold=!!e.isBold(),this._currentGlyphIdentifier.dim=!!e.isDim(),this._currentGlyphIdentifier.italic=!!e.isItalic();var d=!1;try{for(var f=n(this._decorationService.getDecorationsAtCell(t,i)),p=f.next();!p.done;p=f.next()){var v=p.value;if(v.backgroundColorRGB||v.foregroundColorRGB){d=!0;break}}}catch(e){s={error:e}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}!d&&(null===(l=this._charAtlas)||void 0===l?void 0:l.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(e,t,i)}},e.prototype._drawUncachedChars=function(e,t,i,n){if(this._ctx.save(),this._ctx.font=this._getFont(!!e.isBold(),!!e.isItalic()),this._ctx.textBaseline=o.TEXT_BASELINE,e.isInverse())if(n)this._ctx.fillStyle=n.css;else if(e.isBgDefault())this._ctx.fillStyle=c.color.opaque(this._colors.background).css;else if(e.isBgRGB())this._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var r=e.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&r<8&&(r+=8),this._ctx.fillStyle=this._colors.ansi[r].css}else if(n)this._ctx.fillStyle=n.css;else if(e.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(e.isFgRGB())this._ctx.fillStyle="rgb("+a.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var s=e.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&s<8&&(s+=8),this._ctx.fillStyle=this._colors.ansi[s].css}this._clipRow(i),e.isDim()&&(this._ctx.globalAlpha=o.DIM_OPACITY);var l=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(l=(0,h.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),l||this._ctx.fillText(e.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},e.prototype._clipRow=function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},e.prototype._getFont=function(e,t){return(t?"italic":"")+" "+(e?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},e.prototype._getContrastColor=function(e,t,i){var r,o,s,a,u=!1;try{for(var h=n(this._decorationService.getDecorationsAtCell(t,i)),d=h.next();!d.done;d=h.next()){var f=d.value;"top"!==f.options.layer&&u||(f.backgroundColorRGB&&(s=f.backgroundColorRGB.rgba),f.foregroundColorRGB&&(a=f.foregroundColorRGB.rgba),u="top"===f.options.layer)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}if(u||this._colors.selectionForeground&&this._isCellInSelection(t,i)&&(a=this._colors.selectionForeground.rgba),s||a||1!==this._optionsService.rawOptions.minimumContrastRatio&&!(0,l.excludeFromContrastRatioDemands)(e.getCode())){if(!s&&!a){var p=this._colors.contrastCache.getColor(e.bg,e.fg);if(void 0!==p)return p||void 0}var v=e.getFgColor(),_=e.getFgColorMode(),m=e.getBgColor(),g=e.getBgColorMode(),y=!!e.isInverse(),b=!!e.isInverse();if(y){var w=v;v=m,m=w;var C=_;_=g,g=C}var S=this._resolveBackgroundRgba(void 0!==s?50331648:g,null!=s?s:m,y),k=this._resolveForegroundRgba(_,v,y,b),x=c.rgba.ensureContrastRatio(null!=s?s:S,null!=a?a:k,this._optionsService.rawOptions.minimumContrastRatio);if(!x){if(!a)return void this._colors.contrastCache.setColor(e.bg,e.fg,null);x=a}var E={css:c.channels.toCss(x>>24&255,x>>16&255,x>>8&255),rgba:x};return s||a||this._colors.contrastCache.setColor(e.bg,e.fg,E),E}},e.prototype._resolveBackgroundRgba=function(e,t,i){switch(e){case 16777216:case 33554432:return this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return i?this._colors.foreground.rgba:this._colors.background.rgba}},e.prototype._resolveForegroundRgba=function(e,t,i,n){switch(e){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&n&&t<8&&(t+=8),this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return i?this._colors.background.rgba:this._colors.foreground.rgba}},e.prototype._isCellInSelection=function(e,t){var i=this._selectionStart,n=this._selectionEnd;return!(!i||!n)&&(this._columnSelectMode?e>=i[0]&&t>=i[1]&&e<n[0]&&t<n[1]:t>i[1]&&t<n[1]||i[1]===n[1]&&t===i[1]&&e>=i[0]&&e<n[0]||i[1]<n[1]&&t===n[1]&&e<n[0]||i[1]<n[1]&&t===i[1]&&e>=i[0])},e}();t.BaseRenderLayer=d},2512:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;var a=i(1546),l=i(511),c=i(2585),u=i(4725),h=600,d=function(e){function t(t,i,n,r,o,s,a,c,u,h){var d=e.call(this,t,"cursor",i,!0,n,r,s,a,h)||this;return d._onRequestRedraw=o,d._coreService=c,d._coreBrowserService=u,d._cell=new l.CellData,d._state={x:0,y:0,isFocused:!1,style:"",width:0},d._cursorRenderers={bar:d._renderBarCursor.bind(d),block:d._renderBlockCursor.bind(d),underline:d._renderUnderlineCursor.bind(d)},d}return r(t,e),t.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){var e;this._clearCursor(),null===(e=this._cursorBlinkStateManager)||void 0===e||e.restartBlinkAnimation(),this.onOptionsChanged()},t.prototype.onBlur=function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var e,t=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new f(this._coreBrowserService.isFocused,function(){t._render(!0)})):(null===(e=this._cursorBlinkStateManager)||void 0===e||e.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.restartBlinkAnimation()},t.prototype.onGridChanged=function(e,t){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(e){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,i=t-this._bufferService.buffer.ydisp;if(i<0||i>=this._bufferService.rows)this._clearCursor();else{var n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(t).loadCell(n,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var r=this._optionsService.rawOptions.cursorStyle;return r&&"block"!==r?this._cursorRenderers[r](n,i,this._cell):this._renderBlurCursor(n,i,this._cell),this._ctx.restore(),this._state.x=n,this._state.y=i,this._state.isFocused=!1,this._state.style=r,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===n&&this._state.y===i&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](n,i,this._cell),this._ctx.restore(),this._state.x=n,this._state.y=i,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(e,t,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(e,t,i.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(i,e,t),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(e,t),this._ctx.restore()},t.prototype._renderBlurCursor=function(e,t,i){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(e,t,i.getWidth(),1),this._ctx.restore()},o([s(5,c.IBufferService),s(6,c.IOptionsService),s(7,c.ICoreService),s(8,u.ICoreBrowserService),s(9,c.IDecorationService)],t)}(a.BaseRenderLayer);t.CursorRenderLayer=d;var f=function(){function e(e,t){this._renderCallback=t,this.isCursorVisible=!0,e&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){e._renderCallback(),e._animationFrame=void 0})))},e.prototype._restartInterval=function(e){var t=this;void 0===e&&(e=h),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(t._animationTimeRestarted){var e=h-(Date.now()-t._animationTimeRestarted);if(t._animationTimeRestarted=void 0,e>0)return void t._restartInterval(e)}t.isCursorVisible=!1,t._animationFrame=window.requestAnimationFrame(function(){t._renderCallback(),t._animationFrame=void 0}),t._blinkInterval=window.setInterval(function(){if(t._animationTimeRestarted){var e=h-(Date.now()-t._animationTimeRestarted);return t._animationTimeRestarted=void 0,void t._restartInterval(e)}t.isCursorVisible=!t.isCursorVisible,t._animationFrame=window.requestAnimationFrame(function(){t._renderCallback(),t._animationFrame=void 0})},h)},e)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:function(e,t,i){var n,r,o,s,a,l,c,u,h,d,f,p,v,_,m,g,y,b,w,C,S,k,x,E,L,M,O,T,D,R,A,P,B,I,H,j,W,F,$,N,z,U,q,Y,V,K,G,X,Z,J,Q,ee,te,ie,ne,re,oe,se,ae,le,ce,ue,he,de,fe,pe,ve,_e,me,ge,ye,be,we,Ce,Se,ke,xe,Ee,Le,Me,Oe,Te,De,Re,Ae,Pe,Be,Ie,He,je,We,Fe,$e,Ne,ze,Ue,qe,Ye,Ve,Ke,Ge,Xe,Ze,Je,Qe,et,tt,it,nt,rt,ot,st,at,lt,ct,ut,ht,dt,ft,pt,vt,_t,mt,gt,yt,bt,wt,Ct,St=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},kt=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.powerlineDefinitions=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;var xt=i(1752);t.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:9,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Et={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"":(n={},n[1]="M0,.5 L1,.5",n),"":(r={},r[3]="M0,.5 L1,.5",r),"":(o={},o[1]="M.5,0 L.5,1",o),"":(s={},s[3]="M.5,0 L.5,1",s),"":(a={},a[1]="M0.5,1 L.5,.5 L1,.5",a),"":(l={},l[3]="M0.5,1 L.5,.5 L1,.5",l),"":(c={},c[1]="M0,.5 L.5,.5 L.5,1",c),"":(u={},u[3]="M0,.5 L.5,.5 L.5,1",u),"":(h={},h[1]="M.5,0 L.5,.5 L1,.5",h),"":(d={},d[3]="M.5,0 L.5,.5 L1,.5",d),"":(f={},f[1]="M.5,0 L.5,.5 L0,.5",f),"":(p={},p[3]="M.5,0 L.5,.5 L0,.5",p),"":(v={},v[1]="M.5,0 L.5,1 M.5,.5 L1,.5",v),"":(_={},_[3]="M.5,0 L.5,1 M.5,.5 L1,.5",_),"":(m={},m[1]="M.5,0 L.5,1 M.5,.5 L0,.5",m),"":(g={},g[3]="M.5,0 L.5,1 M.5,.5 L0,.5",g),"":(y={},y[1]="M0,.5 L1,.5 M.5,.5 L.5,1",y),"":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,1",b),"":(w={},w[1]="M0,.5 L1,.5 M.5,.5 L.5,0",w),"":(C={},C[3]="M0,.5 L1,.5 M.5,.5 L.5,0",C),"":(S={},S[1]="M0,.5 L1,.5 M.5,0 L.5,1",S),"":(k={},k[3]="M0,.5 L1,.5 M.5,0 L.5,1",k),"":(x={},x[1]="M.5,.5 L0,.5",x),"":(E={},E[3]="M.5,.5 L0,.5",E),"":(L={},L[1]="M.5,.5 L.5,0",L),"":(M={},M[3]="M.5,.5 L.5,0",M),"":(O={},O[1]="M.5,.5 L1,.5",O),"":(T={},T[3]="M.5,.5 L1,.5",T),"":(D={},D[1]="M.5,.5 L.5,1",D),"":(R={},R[3]="M.5,.5 L.5,1",R),"":(A={},A[1]=function(e,t){return"M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)},A),"":(P={},P[1]=function(e,t){return"M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1"},P),"":(B={},B[1]=function(e,t){return"M.5,1 L.5,"+(.5-t)+" L1,"+(.5-t)+" M.5,"+(.5+t)+" L1,"+(.5+t)},B),"":(I={},I[1]=function(e,t){return"M"+(.5-e)+",1 L"+(.5-e)+",.5 L1,.5 M"+(.5+e)+",.5 L"+(.5+e)+",1"},I),"":(H={},H[1]=function(e,t){return"M1,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1"},H),"":(j={},j[1]=function(e,t){return"M0,"+(.5-t)+" L.5,"+(.5-t)+" L.5,1 M0,"+(.5+t)+" L.5,"+(.5+t)},j),"":(W={},W[1]=function(e,t){return"M"+(.5+e)+",1 L"+(.5+e)+",.5 L0,.5 M"+(.5-e)+",.5 L"+(.5-e)+",1"},W),"":(F={},F[1]=function(e,t){return"M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M0,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",1"},F),"":($={},$[1]=function(e,t){return"M.5,0 L.5,"+(.5+t)+" L1,"+(.5+t)+" M.5,"+(.5-t)+" L1,"+(.5-t)},$),"":(N={},N[1]=function(e,t){return"M1,.5 L"+(.5-e)+",.5 L"+(.5-e)+",0 M"+(.5+e)+",.5 L"+(.5+e)+",0"},N),"":(z={},z[1]=function(e,t){return"M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0 M1,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",0"},z),"":(U={},U[1]=function(e,t){return"M0,"+(.5+t)+" L.5,"+(.5+t)+" L.5,0 M0,"+(.5-t)+" L.5,"+(.5-t)},U),"":(q={},q[1]=function(e,t){return"M0,.5 L"+(.5+e)+",.5 L"+(.5+e)+",0 M"+(.5-e)+",.5 L"+(.5-e)+",0"},q),"":(Y={},Y[1]=function(e,t){return"M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0 M0,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",0"},Y),"":(V={},V[1]=function(e,t){return"M.5,0 L.5,1 M.5,"+(.5-t)+" L1,"+(.5-t)+" M.5,"+(.5+t)+" L1,"+(.5+t)},V),"":(K={},K[1]=function(e,t){return"M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1 M"+(.5+e)+",.5 L1,.5"},K),"":(G={},G[1]=function(e,t){return"M"+(.5-e)+",0 L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1 M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0"},G),"":(X={},X[1]=function(e,t){return"M.5,0 L.5,1 M0,"+(.5-t)+" L.5,"+(.5-t)+" M0,"+(.5+t)+" L.5,"+(.5+t)},X),"":(Z={},Z[1]=function(e,t){return"M0,.5 L"+(.5-e)+",.5 M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1"},Z),"":(J={},J[1]=function(e,t){return"M"+(.5+e)+",0 L"+(.5+e)+",1 M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0"},J),"":(Q={},Q[1]=function(e,t){return"M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)+" M.5,"+(.5+t)+" L.5,1"},Q),"":(ee={},ee[1]=function(e,t){return"M0,.5 L1,.5 M"+(.5-e)+",.5 L"+(.5-e)+",1 M"+(.5+e)+",.5 L"+(.5+e)+",1"},ee),"":(te={},te[1]=function(e,t){return"M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1"},te),"":(ie={},ie[1]=function(e,t){return"M.5,0 L.5,"+(.5-t)+" M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)},ie),"":(ne={},ne[1]=function(e,t){return"M0,.5 L1,.5 M"+(.5-e)+",.5 L"+(.5-e)+",0 M"+(.5+e)+",.5 L"+(.5+e)+",0"},ne),"":(re={},re[1]=function(e,t){return"M0,"+(.5+t)+" L1,"+(.5+t)+" M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0 M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0"},re),"":(oe={},oe[1]=function(e,t){return"M.5,0 L.5,1 M0,"+(.5-t)+" L1,"+(.5-t)+" M0,"+(.5+t)+" L1,"+(.5+t)},oe),"":(se={},se[1]=function(e,t){return"M0,.5 L1,.5 M"+(.5-e)+",0 L"+(.5-e)+",1 M"+(.5+e)+",0 L"+(.5+e)+",1"},se),"":(ae={},ae[1]=function(e,t){return"M0,"+(.5+t)+" L"+(.5-e)+","+(.5+t)+" L"+(.5-e)+",1 M1,"+(.5+t)+" L"+(.5+e)+","+(.5+t)+" L"+(.5+e)+",1 M0,"+(.5-t)+" L"+(.5-e)+","+(.5-t)+" L"+(.5-e)+",0 M1,"+(.5-t)+" L"+(.5+e)+","+(.5-t)+" L"+(.5+e)+",0"},ae),"":(le={},le[1]="M1,0 L0,1",le),"":(ce={},ce[1]="M0,0 L1,1",ce),"":(ue={},ue[1]="M1,0 L0,1 M0,0 L1,1",ue),"":(he={},he[1]="M.5,.5 L0,.5",he[3]="M.5,.5 L1,.5",he),"":(de={},de[1]="M.5,.5 L.5,0",de[3]="M.5,.5 L.5,1",de),"":(fe={},fe[1]="M.5,.5 L1,.5",fe[3]="M.5,.5 L0,.5",fe),"":(pe={},pe[1]="M.5,.5 L.5,1",pe[3]="M.5,.5 L.5,0",pe),"":(ve={},ve[1]="M.5,.5 L.5,1",ve[3]="M.5,.5 L1,.5",ve),"":(_e={},_e[1]="M.5,.5 L1,.5",_e[3]="M.5,.5 L.5,1",_e),"":(me={},me[1]="M.5,.5 L.5,1",me[3]="M.5,.5 L0,.5",me),"":(ge={},ge[1]="M.5,.5 L0,.5",ge[3]="M.5,.5 L.5,1",ge),"":(ye={},ye[1]="M.5,.5 L.5,0",ye[3]="M.5,.5 L1,.5",ye),"":(be={},be[1]="M.5,.5 L1,.5",be[3]="M.5,.5 L.5,0",be),"":(we={},we[1]="M.5,.5 L.5,0",we[3]="M.5,.5 L0,.5",we),"":(Ce={},Ce[1]="M.5,.5 L0,.5",Ce[3]="M.5,.5 L.5,0",Ce),"":(Se={},Se[1]="M.5,0 L.5,1",Se[3]="M.5,.5 L1,.5",Se),"":(ke={},ke[1]="M0.5,1 L.5,.5 L1,.5",ke[3]="M.5,.5 L.5,0",ke),"":(xe={},xe[1]="M.5,0 L.5,.5 L1,.5",xe[3]="M.5,.5 L.5,1",xe),"":(Ee={},Ee[1]="M.5,.5 L1,.5",Ee[3]="M.5,0 L.5,1",Ee),"":(Le={},Le[1]="M.5,.5 L.5,1",Le[3]="M.5,0 L.5,.5 L1,.5",Le),"":(Me={},Me[1]="M.5,.5 L.5,0",Me[3]="M0.5,1 L.5,.5 L1,.5",Me),"":(Oe={},Oe[1]="M.5,0 L.5,1",Oe[3]="M.5,.5 L0,.5",Oe),"":(Te={},Te[1]="M0,.5 L.5,.5 L.5,1",Te[3]="M.5,.5 L.5,0",Te),"":(De={},De[1]="M.5,0 L.5,.5 L0,.5",De[3]="M.5,.5 L.5,1",De),"":(Re={},Re[1]="M.5,.5 L0,.5",Re[3]="M.5,0 L.5,1",Re),"":(Ae={},Ae[1]="M.5,.5 L.5,1",Ae[3]="M.5,0 L.5,.5 L0,.5",Ae),"":(Pe={},Pe[1]="M.5,.5 L.5,0",Pe[3]="M0,.5 L.5,.5 L.5,1",Pe),"":(Be={},Be[1]="M0.5,1 L.5,.5 L1,.5",Be[3]="M.5,.5 L0,.5",Be),"":(Ie={},Ie[1]="M0,.5 L.5,.5 L.5,1",Ie[3]="M.5,.5 L1,.5",Ie),"":(He={},He[1]="M.5,.5 L.5,1",He[3]="M0,.5 L1,.5",He),"":(je={},je[1]="M0,.5 L1,.5",je[3]="M.5,.5 L.5,1",je),"":(We={},We[1]="M.5,.5 L1,.5",We[3]="M0,.5 L.5,.5 L.5,1",We),"":(Fe={},Fe[1]="M.5,.5 L0,.5",Fe[3]="M0.5,1 L.5,.5 L1,.5",Fe),"":($e={},$e[1]="M.5,0 L.5,.5 L1,.5",$e[3]="M.5,.5 L0,.5",$e),"":(Ne={},Ne[1]="M.5,0 L.5,.5 L0,.5",Ne[3]="M.5,.5 L1,.5",Ne),"":(ze={},ze[1]="M.5,.5 L.5,0",ze[3]="M0,.5 L1,.5",ze),"":(Ue={},Ue[1]="M0,.5 L1,.5",Ue[3]="M.5,.5 L.5,0",Ue),"":(qe={},qe[1]="M.5,.5 L1,.5",qe[3]="M.5,0 L.5,.5 L0,.5",qe),"":(Ye={},Ye[1]="M.5,.5 L0,.5",Ye[3]="M.5,0 L.5,.5 L1,.5",Ye),"":(Ve={},Ve[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Ve[3]="M.5,.5 L0,.5",Ve),"":(Ke={},Ke[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Ke[3]="M.5,.5 L1,.5",Ke),"":(Ge={},Ge[1]="M.5,0 L.5,1",Ge[3]="M0,.5 L1,.5",Ge),"":(Xe={},Xe[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Xe[3]="M.5,.5 L.5,0",Xe),"":(Ze={},Ze[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Ze[3]="M.5,.5 L.5,1",Ze),"":(Je={},Je[1]="M0,.5 L1,.5",Je[3]="M.5,0 L.5,1",Je),"":(Qe={},Qe[1]="M0.5,1 L.5,.5 L1,.5",Qe[3]="M.5,0 L.5,.5 L0,.5",Qe),"":(et={},et[1]="M0,.5 L.5,.5 L.5,1",et[3]="M.5,0 L.5,.5 L1,.5",et),"":(tt={},tt[1]="M.5,0 L.5,.5 L1,.5",tt[3]="M0,.5 L.5,.5 L.5,1",tt),"":(it={},it[1]="M.5,0 L.5,.5 L0,.5",it[3]="M0.5,1 L.5,.5 L1,.5",it),"":(nt={},nt[1]="M.5,.5 L.5,1",nt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",nt),"":(rt={},rt[1]="M.5,.5 L.5,0",rt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",rt),"":(ot={},ot[1]="M.5,.5 L1,.5",ot[3]="M.5,0 L.5,1 M.5,.5 L0,.5",ot),"":(st={},st[1]="M.5,.5 L0,.5",st[3]="M.5,0 L.5,1 M.5,.5 L1,.5",st),"":(at={},at[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",at),"":(lt={},lt[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",lt),"":(ct={},ct[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",ct),"":(ut={},ut[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",ut),"":(ht={},ht[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",ht),"":(dt={},dt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",dt),"":(ft={},ft[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",ft),"":(pt={},pt[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",pt),"":(vt={},vt[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",vt),"":(_t={},_t[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",_t),"":(mt={},mt[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",mt),"":(gt={},gt[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",gt),"":(yt={},yt[1]="C.5,1,.5,.5,1,.5",yt),"":(bt={},bt[1]="C.5,1,.5,.5,0,.5",bt),"":(wt={},wt[1]="C.5,0,.5,.5,0,.5",wt),"":(Ct={},Ct[1]="C.5,0,.5,.5,1,.5",Ct)},t.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0},"":{d:"M0,0 L1,.5 L0,1",type:1,horizontalPadding:.5},"":{d:"M1,0 L0,.5 L1,1",type:0},"":{d:"M1,0 L0,.5 L1,1",type:1,horizontalPadding:.5}},t.tryDrawCustomChar=function(e,i,n,r,o,s){var a=t.blockElementDefinitions[i];if(a)return function(e,t,i,n,r,o){for(var s=0;s<t.length;s++){var a=t[s],l=r/8,c=o/8;e.fillRect(i+a.x*l,n+a.y*c,a.w*l,a.h*c)}}(e,a,n,r,o,s),!0;var l=Et[i];if(l)return function(e,t,i,n,r,o){var s,a=Lt.get(t);a||(a=new Map,Lt.set(t,a));var l=e.fillStyle;if("string"!=typeof l)throw new Error('Unexpected fillStyle type "'+l+'"');var c=a.get(l);if(!c){var u=t[0].length,h=t.length,d=document.createElement("canvas");d.width=u,d.height=h;var f=(0,xt.throwIfFalsy)(d.getContext("2d")),p=new ImageData(u,h),v=void 0,_=void 0,m=void 0,g=void 0;if(l.startsWith("#"))v=parseInt(l.slice(1,3),16),_=parseInt(l.slice(3,5),16),m=parseInt(l.slice(5,7),16),g=l.length>7&&parseInt(l.slice(7,9),16)||1;else{if(!l.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+l+'" when drawing pattern glyph');v=(s=St(l.substring(5,l.length-1).split(",").map(function(e){return parseFloat(e)}),4))[0],_=s[1],m=s[2],g=s[3]}for(var y=0;y<h;y++)for(var b=0;b<u;b++)p.data[4*(y*u+b)]=v,p.data[4*(y*u+b)+1]=_,p.data[4*(y*u+b)+2]=m,p.data[4*(y*u+b)+3]=t[y][b]*(255*g);f.putImageData(p,0,0),c=(0,xt.throwIfFalsy)(e.createPattern(d,null)),a.set(l,c)}e.fillStyle=c,e.fillRect(i,n,r,o)}(e,l,n,r,o,s),!0;var c=t.boxDrawingDefinitions[i];if(c)return function(e,t,i,n,r,o){var s,a,l,c;e.strokeStyle=e.fillStyle;try{for(var u=kt(Object.entries(t)),h=u.next();!h.done;h=u.next()){var d=St(h.value,2),f=d[0],p=d[1];e.beginPath(),e.lineWidth=window.devicePixelRatio*Number.parseInt(f);var v=void 0;v="function"==typeof p?p(.15,.15/o*r):p;try{for(var _=(l=void 0,kt(v.split(" "))),m=_.next();!m.done;m=_.next()){var g=m.value,y=g[0],b=Ot[y];if(b){var w=g.substring(1).split(",");w[0]&&w[1]&&b(e,Tt(w,r,o,i,n))}else console.error('Could not find drawing instructions for "'+y+'"')}}catch(e){l={error:e}}finally{try{m&&!m.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}e.stroke(),e.closePath()}}catch(e){s={error:e}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(s)throw s.error}}}(e,c,n,r,o,s),!0;var u=t.powerlineDefinitions[i];return!!u&&(function(e,t,i,n,r,o){var s,a;e.beginPath(),e.lineWidth=window.devicePixelRatio;try{for(var l=kt(t.d.split(" ")),c=l.next();!c.done;c=l.next()){var u=c.value,h=u[0],d=Ot[h];if(d){var f=u.substring(1).split(",");f[0]&&f[1]&&d(e,Tt(f,r,o,i,n,t.horizontalPadding))}else console.error('Could not find drawing instructions for "'+h+'"')}}catch(e){s={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}1===t.type?(e.strokeStyle=e.fillStyle,e.stroke()):e.fill(),e.closePath()}(e,u,n,r,o,s),!0)};var Lt=new Map;function Mt(e,t,i){return void 0===i&&(i=0),Math.max(Math.min(e,t),i)}var Ot={C:function(e,t){return e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},L:function(e,t){return e.lineTo(t[0],t[1])},M:function(e,t){return e.moveTo(t[0],t[1])}};function Tt(e,t,i,n,r,o){void 0===o&&(o=0);var s=e.map(function(e){return parseFloat(e)||parseInt(e)});if(s.length<2)throw new Error("Too few arguments for instruction");for(var a=0;a<s.length;a+=2)s[a]*=t-2*o*window.devicePixelRatio,0!==s[a]&&(s[a]=Mt(Math.round(s[a]+.5)-.5,t,0)),s[a]+=n+o*window.devicePixelRatio;for(var l=1;l<s.length;l+=2)s[l]*=i,0!==s[l]&&(s[l]=Mt(Math.round(s[l]+.5)-.5,i,0)),s[l]+=r;return s}},3700:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0;var i=function(){function e(){this.cache=[]}return e.prototype.resize=function(e,t){for(var i=0;i<e;i++){this.cache.length<=i&&this.cache.push([]);for(var n=this.cache[i].length;n<t;n++)this.cache[i].push(void 0);this.cache[i].length=t}this.cache.length=e},e.prototype.clear=function(){for(var e=0;e<this.cache.length;e++)for(var t=0;t<this.cache[e].length;t++)this.cache[e][t]=void 0},e}();t.GridCache=i},5098:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;var a=i(1546),l=i(8803),c=i(2040),u=i(2585),h=function(e){function t(t,i,n,r,o,s,a,l,c){var u=e.call(this,t,"link",i,!0,n,r,a,l,c)||this;return o.onShowLinkUnderline(function(e){return u._onShowLinkUnderline(e)}),o.onHideLinkUnderline(function(e){return u._onHideLinkUnderline(e)}),s.onShowLinkUnderline(function(e){return u._onShowLinkUnderline(e)}),s.onHideLinkUnderline(function(e){return u._onHideLinkUnderline(e)}),u}return r(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(e.fg===l.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,c.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},o([s(6,u.IBufferService),s(7,u.IOptionsService),s(8,u.IDecorationService)],t)}(a.BaseRenderLayer);t.LinkRenderLayer=h},3525:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=void 0;var l=i(9596),c=i(4149),u=i(2512),h=i(5098),d=i(844),f=i(4725),p=i(2585),v=i(1420),_=i(8460),m=1,g=function(e){function t(t,i,n,r,o,s,a,d){var f=e.call(this)||this;f._colors=t,f._screenElement=i,f._bufferService=s,f._charSizeService=a,f._optionsService=d,f._id=m++,f._onRequestRedraw=new _.EventEmitter;var p=f._optionsService.rawOptions.allowTransparency;return f._renderLayers=[o.createInstance(l.TextRenderLayer,f._screenElement,0,f._colors,p,f._id),o.createInstance(c.SelectionRenderLayer,f._screenElement,1,f._colors,f._id),o.createInstance(h.LinkRenderLayer,f._screenElement,2,f._colors,f._id,n,r),o.createInstance(u.CursorRenderLayer,f._screenElement,3,f._colors,f._id,f._onRequestRedraw)],f.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},f._devicePixelRatio=window.devicePixelRatio,f._updateDimensions(),f.onOptionsChanged(),f}return r(t,e),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t,i;try{for(var n=a(this._renderLayers),r=n.next();!r.done;r=n.next())r.value.dispose()}catch(e){t={error:e}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}e.prototype.dispose.call(this),(0,v.removeTerminalFromCache)(this._id)},t.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},t.prototype.setColors=function(e){var t,i;this._colors=e;try{for(var n=a(this._renderLayers),r=n.next();!r.done;r=n.next()){var o=r.value;o.setColors(this._colors),o.reset()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}},t.prototype.onResize=function(e,t){var i,n;this._updateDimensions();try{for(var r=a(this._renderLayers),o=r.next();!o.done;o=r.next())o.value.resize(this.dimensions)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},t.prototype.onBlur=function(){this._runOperation(function(e){return e.onBlur()})},t.prototype.onFocus=function(){this._runOperation(function(e){return e.onFocus()})},t.prototype.onSelectionChanged=function(e,t,i){void 0===i&&(i=!1),this._runOperation(function(n){return n.onSelectionChanged(e,t,i)}),this._colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})},t.prototype.onCursorMove=function(){this._runOperation(function(e){return e.onCursorMove()})},t.prototype.onOptionsChanged=function(){this._runOperation(function(e){return e.onOptionsChanged()})},t.prototype.clear=function(){this._runOperation(function(e){return e.reset()})},t.prototype._runOperation=function(e){var t,i;try{for(var n=a(this._renderLayers),r=n.next();!r.done;r=n.next())e(r.value)}catch(e){t={error:e}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}},t.prototype.renderRows=function(e,t){var i,n;try{for(var r=a(this._renderLayers),o=r.next();!o.done;o=r.next())o.value.onGridChanged(e,t)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}},t.prototype.clearTextureAtlas=function(){var e,t;try{for(var i=a(this._renderLayers),n=i.next();!n.done;n=i.next())n.value.clearTextureAtlas()}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},t.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},o([s(4,p.IInstantiationService),s(5,p.IBufferService),s(6,f.ICharSizeService),s(7,p.IOptionsService)],t)}(d.Disposable);t.Renderer=g},1752:(e,t)=>{function i(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.excludeFromContrastRatioDemands=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=i,t.excludeFromContrastRatioDemands=function(e){return i(e)||function(e){return 9472<=e&&e<=9631}(e)}},4149:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0;var a=i(1546),l=i(2585),c=function(e){function t(t,i,n,r,o,s,a){var l=e.call(this,t,"selection",i,!0,n,r,o,s,a)||this;return l._clearState(),l}return r(t,e),t.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},t.prototype.resize=function(t){e.prototype.resize.call(this,t),this._clearState()},t.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},t.prototype.onSelectionChanged=function(t,i,n){if(e.prototype.onSelectionChanged.call(this,t,i,n),this._didStateChange(t,i,n,this._bufferService.buffer.ydisp))if(this._clearAll(),t&&i){var r=t[1]-this._bufferService.buffer.ydisp,o=i[1]-this._bufferService.buffer.ydisp,s=Math.max(r,0),a=Math.min(o,this._bufferService.rows-1);if(s>=this._bufferService.rows||a<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,n){var l=t[0],c=i[0]-l,u=a-s+1;this._fillCells(l,s,c,u)}else{l=r===s?t[0]:0;var h=s===o?i[0]:this._bufferService.cols;this._fillCells(l,s,h-l,1);var d=Math.max(a-s-1,0);if(this._fillCells(0,s+1,this._bufferService.cols,d),s!==a){var f=o===a?i[0]:this._bufferService.cols;this._fillCells(0,a,f,1)}}this._state.start=[t[0],t[1]],this._state.end=[i[0],i[1]],this._state.columnSelectMode=n,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},t.prototype._didStateChange=function(e,t,i,n){return!this._areCoordinatesEqual(e,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||i!==this._state.columnSelectMode||n!==this._state.ydisp},t.prototype._areCoordinatesEqual=function(e,t){return!(!e||!t)&&e[0]===t[0]&&e[1]===t[1]},o([s(4,l.IBufferService),s(5,l.IOptionsService),s(6,l.IDecorationService)],t)}(a.BaseRenderLayer);t.SelectionRenderLayer=c},9596:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;var l=i(3700),c=i(1546),u=i(3734),h=i(643),d=i(511),f=i(2585),p=i(4725),v=i(4269),_=function(e){function t(t,i,n,r,o,s,a,c,u){var h=e.call(this,t,"text",i,r,n,o,s,a,u)||this;return h._characterJoinerService=c,h._characterWidth=0,h._characterFont="",h._characterOverlapCache={},h._workCell=new d.CellData,h._state=new l.GridCache,h}return r(t,e),t.prototype.resize=function(t){e.prototype.resize.call(this,t);var i=this._getFont(!1,!1);this._characterWidth===t.scaledCharWidth&&this._characterFont===i||(this._characterWidth=t.scaledCharWidth,this._characterFont=i,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},t.prototype.reset=function(){this._state.clear(),this._clearAll()},t.prototype._forEachCell=function(e,t,i){for(var n=e;n<=t;n++)for(var r=n+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.lines.get(r),s=this._characterJoinerService.getJoinedCharacters(r),a=0;a<this._bufferService.cols;a++){o.loadCell(a,this._workCell);var l=this._workCell,c=!1,u=a;if(0!==l.getWidth()){if(s.length>0&&a===s[0][0]){c=!0;var d=s.shift();l=new v.JoinedCellData(this._workCell,o.translateToString(!0,d[0],d[1]),d[1]-d[0]),u=d[1]-1}!c&&this._isOverlapping(l)&&u<o.length-1&&o.getCodePoint(u+1)===h.NULL_CELL_CODE&&(l.content&=-12582913,l.content|=2<<22),i(l,a,n),a=u}}},t.prototype._drawBackground=function(e,t){var i=this,n=this._ctx,r=this._bufferService.cols,o=0,s=0,l=null;n.save(),this._forEachCell(e,t,function(e,t,c){var h,d,f=null;e.isInverse()?f=e.isFgDefault()?i._colors.foreground.css:e.isFgRGB()?"rgb("+u.AttributeData.toColorRGB(e.getFgColor()).join(",")+")":i._colors.ansi[e.getFgColor()].css:e.isBgRGB()?f="rgb("+u.AttributeData.toColorRGB(e.getBgColor()).join(",")+")":e.isBgPalette()&&(f=i._colors.ansi[e.getBgColor()].css);var p=!1;try{for(var v=a(i._decorationService.getDecorationsAtCell(t,i._bufferService.buffer.ydisp+c)),_=v.next();!_.done;_=v.next()){var m=_.value;"top"!==m.options.layer&&p||(m.backgroundColorRGB&&(f=m.backgroundColorRGB.css),p="top"===m.options.layer)}}catch(e){h={error:e}}finally{try{_&&!_.done&&(d=v.return)&&d.call(v)}finally{if(h)throw h.error}}null===l&&(o=t,s=c),c!==s?(n.fillStyle=l||"",i._fillCells(o,s,r-o,1),o=t,s=c):l!==f&&(n.fillStyle=l||"",i._fillCells(o,s,t-o,1),o=t,s=c),l=f}),null!==l&&(n.fillStyle=l,this._fillCells(o,s,r-o,1)),n.restore()},t.prototype._drawForeground=function(e,t){var i=this;this._forEachCell(e,t,function(e,t,n){if(!e.isInvisible()&&(i._drawChars(e,t,n),e.isUnderline()||e.isStrikethrough())){if(i._ctx.save(),e.isInverse())if(e.isBgDefault())i._ctx.fillStyle=i._colors.background.css;else if(e.isBgRGB())i._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(e.getBgColor()).join(",")+")";else{var r=e.getBgColor();i._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&r<8&&(r+=8),i._ctx.fillStyle=i._colors.ansi[r].css}else if(e.isFgDefault())i._ctx.fillStyle=i._colors.foreground.css;else if(e.isFgRGB())i._ctx.fillStyle="rgb("+u.AttributeData.toColorRGB(e.getFgColor()).join(",")+")";else{var o=e.getFgColor();i._optionsService.rawOptions.drawBoldTextInBrightColors&&e.isBold()&&o<8&&(o+=8),i._ctx.fillStyle=i._colors.ansi[o].css}e.isStrikethrough()&&i._fillMiddleLineAtCells(t,n,e.getWidth()),e.isUnderline()&&i._fillBottomLineAtCells(t,n,e.getWidth()),i._ctx.restore()}})},t.prototype.onGridChanged=function(e,t){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,t-e+1),this._drawBackground(e,t),this._drawForeground(e,t))},t.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},t.prototype._isOverlapping=function(e){if(1!==e.getWidth())return!1;if(e.getCode()<256)return!1;var t=e.getChars();if(this._characterOverlapCache.hasOwnProperty(t))return this._characterOverlapCache[t];this._ctx.save(),this._ctx.font=this._characterFont;var i=Math.floor(this._ctx.measureText(t).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[t]=i,i},o([s(5,f.IBufferService),s(6,f.IOptionsService),s(7,p.ICharacterJoinerService),s(8,f.IDecorationService)],t)}(c.BaseRenderLayer);t.TextRenderLayer=_},9616:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCharAtlas=void 0;var i=function(){function e(){this._didWarmUp=!1}return e.prototype.dispose=function(){},e.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},e.prototype._doWarmUp=function(){},e.prototype.clear=function(){},e.prototype.beginFrame=function(){},e}();t.BaseCharAtlas=i},1420:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireCharAtlas=void 0;var n=i(2040),r=i(1906),o=[];t.acquireCharAtlas=function(e,t,i,s,a){for(var l=(0,n.generateConfig)(s,a,e,i),c=0;c<o.length;c++){var u=(h=o[c]).ownedBy.indexOf(t);if(u>=0){if((0,n.configEquals)(h.config,l))return h.atlas;1===h.ownedBy.length?(h.atlas.dispose(),o.splice(c,1)):h.ownedBy.splice(u,1);break}}for(c=0;c<o.length;c++){var h=o[c];if((0,n.configEquals)(h.config,l))return h.ownedBy.push(t),h.atlas}var d={atlas:new r.DynamicCharAtlas(document,l),config:l,ownedBy:[t]};return o.push(d),d.atlas},t.removeTerminalFromCache=function(e){for(var t=0;t<o.length;t++){var i=o[t].ownedBy.indexOf(e);if(-1!==i){1===o[t].ownedBy.length?(o[t].atlas.dispose(),o.splice(t,1)):o[t].ownedBy.splice(i,1);break}}}},2040:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;var n=i(643);t.generateConfig=function(e,t,i,n){var r={foreground:n.foreground,background:n.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:n.ansi.slice()};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:e,scaledCharHeight:t,fontFamily:i.fontFamily,fontSize:i.fontSize,fontWeight:i.fontWeight,fontWeightBold:i.fontWeightBold,allowTransparency:i.allowTransparency,colors:r}},t.configEquals=function(e,t){for(var i=0;i<e.colors.ansi.length;i++)if(e.colors.ansi[i].rgba!==t.colors.ansi[i].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.scaledCharWidth===t.scaledCharWidth&&e.scaledCharHeight===t.scaledCharHeight&&e.colors.foreground===t.colors.foreground&&e.colors.background===t.colors.background},t.is256Color=function(e){return e<n.DEFAULT_COLOR}},8803:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR_ATLAS_CELL_SPACING=t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;var n=i(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=n.isFirefox||n.isLegacyEdge?"bottom":"ideographic",t.CHAR_ATLAS_CELL_SPACING=1},1906:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.NoneCharAtlas=t.DynamicCharAtlas=t.getGlyphCacheKey=void 0;var o=i(8803),s=i(9616),a=i(5680),l=i(7001),c=i(6114),u=i(1752),h=i(8055),d=1024,f=1024,p={css:"rgba(0, 0, 0, 0)",rgba:0};function v(e){return e.code<<21|e.bg<<12|e.fg<<3|(e.bold?0:4)+(e.dim?0:2)+(e.italic?0:1)}t.getGlyphCacheKey=v;var _=function(e){function t(t,i){var n=e.call(this)||this;n._config=i,n._drawToCacheCount=0,n._glyphsWaitingOnBitmap=[],n._bitmapCommitTimeout=null,n._bitmap=null,n._cacheCanvas=t.createElement("canvas"),n._cacheCanvas.width=d,n._cacheCanvas.height=f,n._cacheCtx=(0,u.throwIfFalsy)(n._cacheCanvas.getContext("2d",{alpha:!0}));var r=t.createElement("canvas");r.width=n._config.scaledCharWidth,r.height=n._config.scaledCharHeight,n._tmpCtx=(0,u.throwIfFalsy)(r.getContext("2d",{alpha:n._config.allowTransparency})),n._width=Math.floor(d/n._config.scaledCharWidth),n._height=Math.floor(f/n._config.scaledCharHeight);var o=n._width*n._height;return n._cacheMap=new l.LRUMap(o),n._cacheMap.prealloc(o),n}return r(t,e),t.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},t.prototype.beginFrame=function(){this._drawToCacheCount=0},t.prototype.clear=function(){if(this._cacheMap.size>0){var e=this._width*this._height;this._cacheMap=new l.LRUMap(e),this._cacheMap.prealloc(e)}this._cacheCtx.clearRect(0,0,d,f),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},t.prototype.draw=function(e,t,i,n){if(32===t.code)return!0;if(!this._canCache(t))return!1;var r=v(t),o=this._cacheMap.get(r);if(null!=o)return this._drawFromCache(e,o,i,n),!0;if(this._drawToCacheCount<100){var s;s=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var a=this._drawToCache(t,s);return this._cacheMap.set(r,a),this._drawFromCache(e,a,i,n),!0}return!1},t.prototype._canCache=function(e){return e.code<256},t.prototype._toCoordinateX=function(e){return e%this._width*this._config.scaledCharWidth},t.prototype._toCoordinateY=function(e){return Math.floor(e/this._width)*this._config.scaledCharHeight},t.prototype._drawFromCache=function(e,t,i,n){if(!t.isEmpty){var r=this._toCoordinateX(t.index),o=this._toCoordinateY(t.index);e.drawImage(t.inBitmap?this._bitmap:this._cacheCanvas,r,o,this._config.scaledCharWidth,this._config.scaledCharHeight,i,n,this._config.scaledCharWidth,this._config.scaledCharHeight)}},t.prototype._getColorFromAnsiIndex=function(e){return e<this._config.colors.ansi.length?this._config.colors.ansi[e]:a.DEFAULT_ANSI_COLORS[e]},t.prototype._getBackgroundColor=function(e){return this._config.allowTransparency?p:e.bg===o.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:e.bg<256?this._getColorFromAnsiIndex(e.bg):this._config.colors.background},t.prototype._getForegroundColor=function(e){return e.fg===o.INVERTED_DEFAULT_COLOR?h.color.opaque(this._config.colors.background):e.fg<256?this._getColorFromAnsiIndex(e.fg):this._config.colors.foreground},t.prototype._drawToCache=function(e,t){this._drawToCacheCount++,this._tmpCtx.save();var i=this._getBackgroundColor(e);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=i.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var n=e.bold?this._config.fontWeightBold:this._config.fontWeight,r=e.italic?"italic":"";this._tmpCtx.font=r+" "+n+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=o.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(e).css,e.dim&&(this._tmpCtx.globalAlpha=o.DIM_OPACITY),this._tmpCtx.fillText(e.chars,0,this._config.scaledCharHeight);var s=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),a=!1;if(this._config.allowTransparency||(a=g(s,i)),a&&"_"===e.chars&&!this._config.allowTransparency)for(var l=1;l<=5&&(this._tmpCtx.fillText(e.chars,0,this._config.scaledCharHeight-l),a=g(s=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),i));l++);this._tmpCtx.restore();var c=this._toCoordinateX(t),u=this._toCoordinateY(t);this._cacheCtx.putImageData(s,c,u);var h={index:t,isEmpty:a,inBitmap:!1};return this._addGlyphToBitmap(h),h},t.prototype._addGlyphToBitmap=function(e){var t=this;!("createImageBitmap"in window)||c.isFirefox||c.isSafari||(this._glyphsWaitingOnBitmap.push(e),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return t._generateBitmap()},100)))},t.prototype._generateBitmap=function(){var e=this,t=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(i){e._bitmap=i;for(var n=0;n<t.length;n++)t[n].inBitmap=!0}),this._bitmapCommitTimeout=null},t}(s.BaseCharAtlas);t.DynamicCharAtlas=_;var m=function(e){function t(t,i){return e.call(this)||this}return r(t,e),t.prototype.draw=function(e,t,i,n){return!1},t}(s.BaseCharAtlas);function g(e,t){for(var i=!0,n=t.rgba>>>24,r=t.rgba>>>16&255,o=t.rgba>>>8&255,s=0;s<e.data.length;s+=4)e.data[s]===n&&e.data[s+1]===r&&e.data[s+2]===o?e.data[s+3]=0:i=!1;return i}t.NoneCharAtlas=m},7001:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LRUMap=void 0;var i=function(){function e(e){this.capacity=e,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return e.prototype._unlinkNode=function(e){var t=e.prev,i=e.next;e===this._head&&(this._head=i),e===this._tail&&(this._tail=t),null!==t&&(t.next=i),null!==i&&(i.prev=t)},e.prototype._appendNode=function(e){var t=this._tail;null!==t&&(t.next=e),e.prev=t,e.next=null,this._tail=e,null===this._head&&(this._head=e)},e.prototype.prealloc=function(e){for(var t=this._nodePool,i=0;i<e;i++)t.push({prev:null,next:null,key:null,value:null})},e.prototype.get=function(e){var t=this._map[e];return void 0!==t?(this._unlinkNode(t),this._appendNode(t),t.value):null},e.prototype.peekValue=function(e){var t=this._map[e];return void 0!==t?t.value:null},e.prototype.peek=function(){var e=this._head;return null===e?null:e.value},e.prototype.set=function(e,t){var i=this._map[e];if(void 0!==i)i=this._map[e],this._unlinkNode(i),i.value=t;else if(this.size>=this.capacity)i=this._head,this._unlinkNode(i),delete this._map[i.key],i.key=e,i.value=t,this._map[e]=i;else{var n=this._nodePool;n.length>0?((i=n.pop()).key=e,i.value=t):i={prev:null,next:null,key:e,value:t},this._map[e]=i,this.size++}this._appendNode(i)},e}();t.LRUMap=i},1296:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;var l=i(3787),c=i(8803),u=i(844),h=i(4725),d=i(2585),f=i(8460),p=i(8055),v=i(9631),_="xterm-dom-renderer-owner-",m="xterm-fg-",g="xterm-bg-",y="xterm-focus",b=1,w=function(e){function t(t,i,n,r,o,s,a,c,u,h){var d=e.call(this)||this;return d._colors=t,d._element=i,d._screenElement=n,d._viewportElement=r,d._linkifier=o,d._linkifier2=s,d._charSizeService=c,d._optionsService=u,d._bufferService=h,d._terminalClass=b++,d._rowElements=[],d._rowContainer=document.createElement("div"),d._rowContainer.classList.add("xterm-rows"),d._rowContainer.style.lineHeight="normal",d._rowContainer.setAttribute("aria-hidden","true"),d._refreshRowElements(d._bufferService.cols,d._bufferService.rows),d._selectionContainer=document.createElement("div"),d._selectionContainer.classList.add("xterm-selection"),d._selectionContainer.setAttribute("aria-hidden","true"),d.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},d._updateDimensions(),d._injectCss(),d._rowFactory=a.createInstance(l.DomRendererRowFactory,document,d._colors),d._element.classList.add(_+d._terminalClass),d._screenElement.appendChild(d._rowContainer),d._screenElement.appendChild(d._selectionContainer),d.register(d._linkifier.onShowLinkUnderline(function(e){return d._onLinkHover(e)})),d.register(d._linkifier.onHideLinkUnderline(function(e){return d._onLinkLeave(e)})),d.register(d._linkifier2.onShowLinkUnderline(function(e){return d._onLinkHover(e)})),d.register(d._linkifier2.onHideLinkUnderline(function(e){return d._onLinkLeave(e)})),d}return r(t,e),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return(new f.EventEmitter).event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._element.classList.remove(_+this._terminalClass),(0,v.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),e.prototype.dispose.call(this)},t.prototype._updateDimensions=function(){var e,t;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;try{for(var i=a(this._rowElements),n=i.next();!n.done;n=i.next()){var r=n.value;r.style.width=this.dimensions.canvasWidth+"px",r.style.height=this.dimensions.actualCellHeight+"px",r.style.lineHeight=this.dimensions.actualCellHeight+"px",r.style.overflow="hidden"}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var o=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=o,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.setColors=function(e){this._colors=e,this._injectCss()},t.prototype._injectCss=function(){var e=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var t=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";t+=this._terminalSelector+" span:not(."+l.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+l.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+l.ITALIC_CLASS+" { font-style: italic;}",t+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",t+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",t+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_BLINK_CLASS+":not(."+l.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_BLINK_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+l.CURSOR_CLASS+"."+l.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",t+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionOpaque.css+";}",this._colors.ansi.forEach(function(i,n){t+=e._terminalSelector+" ."+m+n+" { color: "+i.css+"; }"+e._terminalSelector+" ."+g+n+" { background-color: "+i.css+"; }"}),t+=this._terminalSelector+" ."+m+c.INVERTED_DEFAULT_COLOR+" { color: "+p.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+g+c.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=t},t.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},t.prototype._refreshRowElements=function(e,t){for(var i=this._rowElements.length;i<=t;i++){var n=document.createElement("div");this._rowContainer.appendChild(n),this._rowElements.push(n)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())},t.prototype.onResize=function(e,t){this._refreshRowElements(e,t),this._updateDimensions()},t.prototype.onCharSizeChanged=function(){this._updateDimensions()},t.prototype.onBlur=function(){this._rowContainer.classList.remove(y)},t.prototype.onFocus=function(){this._rowContainer.classList.add(y)},t.prototype.onSelectionChanged=function(e,t,i){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.onSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),e&&t){var n=e[1]-this._bufferService.buffer.ydisp,r=t[1]-this._bufferService.buffer.ydisp,o=Math.max(n,0),s=Math.min(r,this._bufferService.rows-1);if(!(o>=this._bufferService.rows||s<0)){var a=document.createDocumentFragment();if(i){var l=e[0]>t[0];a.appendChild(this._createSelectionElement(o,l?t[0]:e[0],l?e[0]:t[0],s-o+1))}else{var c=n===o?e[0]:0,u=o===r?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,c,u));var h=s-o-1;if(a.appendChild(this._createSelectionElement(o+1,0,this._bufferService.cols,h)),o!==s){var d=r===s?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(s,0,d))}}this._selectionContainer.appendChild(a)}}},t.prototype._createSelectionElement=function(e,t,i,n){void 0===n&&(n=1);var r=document.createElement("div");return r.style.height=n*this.dimensions.actualCellHeight+"px",r.style.top=e*this.dimensions.actualCellHeight+"px",r.style.left=t*this.dimensions.actualCellWidth+"px",r.style.width=this.dimensions.actualCellWidth*(i-t)+"px",r},t.prototype.onCursorMove=function(){},t.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},t.prototype.clear=function(){var e,t;try{for(var i=a(this._rowElements),n=i.next();!n.done;n=i.next())n.value.innerText=""}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},t.prototype.renderRows=function(e,t){for(var i=this._bufferService.buffer.ybase+this._bufferService.buffer.y,n=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),r=this._optionsService.rawOptions.cursorBlink,o=e;o<=t;o++){var s=this._rowElements[o];s.innerText="";var a=o+this._bufferService.buffer.ydisp,l=this._bufferService.buffer.lines.get(a),c=this._optionsService.rawOptions.cursorStyle;s.appendChild(this._rowFactory.createRow(l,a,a===i,c,n,r,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(t.prototype,"_terminalSelector",{get:function(){return"."+_+this._terminalClass},enumerable:!1,configurable:!0}),t.prototype._onLinkHover=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)},t.prototype._onLinkLeave=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)},t.prototype._setCellUnderline=function(e,t,i,n,r,o){for(;e!==t||i!==n;){var s=this._rowElements[i];if(!s)return;var a=s.children[e];a&&(a.style.textDecoration=o?"underline":"none"),++e>=r&&(e=0,i++)}},o([s(6,d.IInstantiationService),s(7,h.ICharSizeService),s(8,d.IOptionsService),s(9,d.IBufferService)],t)}(u.Disposable);t.DomRenderer=w},3787:function(e,t,i){var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=t.CURSOR_STYLE_UNDERLINE_CLASS=t.CURSOR_STYLE_BAR_CLASS=t.CURSOR_STYLE_BLOCK_CLASS=t.CURSOR_BLINK_CLASS=t.CURSOR_CLASS=t.STRIKETHROUGH_CLASS=t.UNDERLINE_CLASS=t.ITALIC_CLASS=t.DIM_CLASS=t.BOLD_CLASS=void 0;var s=i(8803),a=i(643),l=i(511),c=i(2585),u=i(8055),h=i(4725),d=i(4269),f=i(1752);t.BOLD_CLASS="xterm-bold",t.DIM_CLASS="xterm-dim",t.ITALIC_CLASS="xterm-italic",t.UNDERLINE_CLASS="xterm-underline",t.STRIKETHROUGH_CLASS="xterm-strikethrough",t.CURSOR_CLASS="xterm-cursor",t.CURSOR_BLINK_CLASS="xterm-cursor-blink",t.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",t.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",t.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var p=function(){function e(e,t,i,n,r,o){this._document=e,this._colors=t,this._characterJoinerService=i,this._optionsService=n,this._coreService=r,this._decorationService=o,this._workCell=new l.CellData,this._columnSelectMode=!1}return e.prototype.setColors=function(e){this._colors=e},e.prototype.onSelectionChanged=function(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i},e.prototype.createRow=function(e,i,n,r,l,c,h,f){for(var p,_,m=this._document.createDocumentFragment(),g=this._characterJoinerService.getJoinedCharacters(i),y=0,b=Math.min(e.length,f)-1;b>=0;b--)if(e.loadCell(b,this._workCell).getCode()!==a.NULL_CELL_CODE||n&&b===l){y=b+1;break}for(b=0;b<y;b++){e.loadCell(b,this._workCell);var w=this._workCell.getWidth();if(0!==w){var C=!1,S=b,k=this._workCell;if(g.length>0&&b===g[0][0]){C=!0;var x=g.shift();k=new d.JoinedCellData(this._workCell,e.translateToString(!0,x[0],x[1]),x[1]-x[0]),S=x[1]-1,w=k.getWidth()}var E=this._document.createElement("span");if(w>1&&(E.style.width=h*w+"px"),C&&(E.style.display="inline",l>=b&&l<=S&&(l=b)),!this._coreService.isCursorHidden&&n&&b===l)switch(E.classList.add(t.CURSOR_CLASS),c&&E.classList.add(t.CURSOR_BLINK_CLASS),r){case"bar":E.classList.add(t.CURSOR_STYLE_BAR_CLASS);break;case"underline":E.classList.add(t.CURSOR_STYLE_UNDERLINE_CLASS);break;default:E.classList.add(t.CURSOR_STYLE_BLOCK_CLASS)}k.isBold()&&E.classList.add(t.BOLD_CLASS),k.isItalic()&&E.classList.add(t.ITALIC_CLASS),k.isDim()&&E.classList.add(t.DIM_CLASS),k.isUnderline()&&E.classList.add(t.UNDERLINE_CLASS),k.isInvisible()?E.textContent=a.WHITESPACE_CELL_CHAR:E.textContent=k.getChars()||a.WHITESPACE_CELL_CHAR,k.isStrikethrough()&&E.classList.add(t.STRIKETHROUGH_CLASS);var L=k.getFgColor(),M=k.getFgColorMode(),O=k.getBgColor(),T=k.getBgColorMode(),D=!!k.isInverse();if(D){var R=L;L=O,O=R;var A=M;M=T,T=A}var P=void 0,B=void 0,I=!1;try{for(var H=(p=void 0,o(this._decorationService.getDecorationsAtCell(b,i))),j=H.next();!j.done;j=H.next()){var W=j.value;"top"!==W.options.layer&&I||(W.backgroundColorRGB&&(T=50331648,O=W.backgroundColorRGB.rgba>>8&16777215,P=W.backgroundColorRGB),W.foregroundColorRGB&&(M=50331648,L=W.foregroundColorRGB.rgba>>8&16777215,B=W.foregroundColorRGB),I="top"===W.options.layer)}}catch(e){p={error:e}}finally{try{j&&!j.done&&(_=H.return)&&_.call(H)}finally{if(p)throw p.error}}var F=this._isCellInSelection(b,i);I||this._colors.selectionForeground&&F&&(M=50331648,L=this._colors.selectionForeground.rgba>>8&16777215,B=this._colors.selectionForeground),F&&(P=this._colors.selectionOpaque,I=!0),I&&E.classList.add("xterm-decoration-top");var $=void 0;switch(T){case 16777216:case 33554432:$=this._colors.ansi[O],E.classList.add("xterm-bg-"+O);break;case 50331648:$=u.rgba.toColor(O>>16,O>>8&255,255&O),this._addStyle(E,"background-color:#"+v((O>>>0).toString(16),"0",6));break;default:D?($=this._colors.foreground,E.classList.add("xterm-bg-"+s.INVERTED_DEFAULT_COLOR)):$=this._colors.background}switch(M){case 16777216:case 33554432:k.isBold()&&L<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(L+=8),this._applyMinimumContrast(E,$,this._colors.ansi[L],k,P,void 0)||E.classList.add("xterm-fg-"+L);break;case 50331648:var N=u.rgba.toColor(L>>16&255,L>>8&255,255&L);this._applyMinimumContrast(E,$,N,k,P,B)||this._addStyle(E,"color:#"+v(L.toString(16),"0",6));break;default:this._applyMinimumContrast(E,$,this._colors.foreground,k,P,void 0)||D&&E.classList.add("xterm-fg-"+s.INVERTED_DEFAULT_COLOR)}m.appendChild(E),b=S}}return m},e.prototype._applyMinimumContrast=function(e,t,i,n,r,o){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,f.excludeFromContrastRatioDemands)(n.getCode()))return!1;var s=void 0;return r||o||(s=this._colors.contrastCache.getColor(t.rgba,i.rgba)),void 0===s&&(s=u.color.ensureContrastRatio(r||t,o||i,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor((r||t).rgba,(o||i).rgba,null!=s?s:null)),!!s&&(this._addStyle(e,"color:"+s.css),!0)},e.prototype._addStyle=function(e,t){e.setAttribute("style",""+(e.getAttribute("style")||"")+t+";")},e.prototype._isCellInSelection=function(e,t){var i=this._selectionStart,n=this._selectionEnd;return!(!i||!n)&&(this._columnSelectMode?i[0]<=n[0]?e>=i[0]&&t>=i[1]&&e<n[0]&&t<=n[1]:e<i[0]&&t>=i[1]&&e>=n[0]&&t<=n[1]:t>i[1]&&t<n[1]||i[1]===n[1]&&t===i[1]&&e>=i[0]&&e<n[0]||i[1]<n[1]&&t===n[1]&&e<n[0]||i[1]<n[1]&&t===i[1]&&e>=i[0])},n([r(2,h.ICharacterJoinerService),r(3,c.IOptionsService),r(4,c.ICoreService),r(5,c.IDecorationService)],e)}();function v(e,t,i){for(;e.length<i;)e=t+e;return e}t.DomRendererRowFactory=p},456:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0;var i=function(){function e(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}return e.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(e.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1]:this.selectionStart?!this.selectionEnd||this.areSelectionValuesReversed()?(e=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?(e=this.selectionStart[0]+this.selectionStartLength)>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:void 0;var e},enumerable:!1,configurable:!0}),e.prototype.areSelectionValuesReversed=function(){var e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])},e.prototype.onTrim=function(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},e}();t.SelectionModel=i},428:function(e,t,i){var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;var o=i(2585),s=i(8460),a=function(){function e(e,t,i){this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=new s.EventEmitter,this._measureStrategy=new l(e,t,this._optionsService)}return Object.defineProperty(e.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),e.prototype.measure=function(){var e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())},n([r(2,o.IOptionsService)],e)}();t.CharSizeService=a;var l=function(){function e(e,t,i){this._document=e,this._parentElement=t,this._optionsService=i,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return e.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var e=this._measureElement.getBoundingClientRect();return 0!==e.width&&0!==e.height&&(this._result.width=e.width,this._result.height=Math.ceil(e.height)),this._result},e}()},4269:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;var a=i(3734),l=i(643),c=i(511),u=i(2585),h=function(e){function t(t,i,n){var r=e.call(this)||this;return r.content=0,r.combinedData="",r.fg=t.fg,r.bg=t.bg,r.combinedData=i,r._width=n,r}return r(t,e),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(e){throw new Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(a.AttributeData);t.JoinedCellData=h;var d=function(){function e(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new c.CellData}return e.prototype.register=function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id},e.prototype.deregister=function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1},e.prototype.getJoinedCharacters=function(e){if(0===this._characterJoiners.length)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];for(var i=[],n=t.translateToString(!0),r=0,o=0,s=0,a=t.getFg(0),c=t.getBg(0),u=0;u<t.getTrimmedLength();u++)if(t.loadCell(u,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==a||this._workCell.bg!==c){if(u-r>1)for(var h=this._getJoinedRanges(n,s,o,t,r),d=0;d<h.length;d++)i.push(h[d]);r=u,s=o,a=this._workCell.fg,c=this._workCell.bg}o+=this._workCell.getChars().length||l.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-r>1)for(h=this._getJoinedRanges(n,s,o,t,r),d=0;d<h.length;d++)i.push(h[d]);return i},e.prototype._getJoinedRanges=function(t,i,n,r,o){var s=t.substring(i,n),a=[];try{a=this._characterJoiners[0].handler(s)}catch(e){console.error(e)}for(var l=1;l<this._characterJoiners.length;l++)try{for(var c=this._characterJoiners[l].handler(s),u=0;u<c.length;u++)e._mergeRanges(a,c[u])}catch(e){console.error(e)}return this._stringRangesToCellRanges(a,r,o),a},e.prototype._stringRangesToCellRanges=function(e,t,i){var n=0,r=!1,o=0,s=e[n];if(s){for(var a=i;a<this._bufferService.cols;a++){var c=t.getWidth(a),u=t.getString(a).length||l.WHITESPACE_CELL_CHAR.length;if(0!==c){if(!r&&s[0]<=o&&(s[0]=a,r=!0),s[1]<=o){if(s[1]=a,!(s=e[++n]))break;s[0]<=o?(s[0]=a,r=!0):r=!1}o+=u}}s&&(s[1]=this._bufferService.cols)}},e._mergeRanges=function(e,t){for(var i=!1,n=0;n<e.length;n++){var r=e[n];if(i){if(t[1]<=r[0])return e[n-1][1]=t[1],e;if(t[1]<=r[1])return e[n-1][1]=Math.max(t[1],r[1]),e.splice(n,1),e;e.splice(n,1),n--}else{if(t[1]<=r[0])return e.splice(n,0,t),e;if(t[1]<=r[1])return r[0]=Math.min(t[0],r[0]),e;t[0]<r[1]&&(r[0]=Math.min(t[0],r[0]),i=!0)}}return i?e[e.length-1][1]=t[1]:e.push(t),e},e=o([s(0,u.IBufferService)],e)}();t.CharacterJoinerService=d},5114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0;var i=function(){function e(e){this._textarea=e}return Object.defineProperty(e.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),e}();t.CoreBrowserService=i},8934:function(e,t,i){var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;var o=i(4725),s=i(9806),a=function(){function e(e,t){this._renderService=e,this._charSizeService=t}return e.prototype.getCoords=function(e,t,i,n,r){return(0,s.getCoords)(window,e,t,i,n,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,r)},e.prototype.getRawByteCoords=function(e,t,i,n){var r=this.getCoords(e,t,i,n);return(0,s.getRawByteCoords)(r)},n([r(0,o.IRenderService),r(1,o.ICharSizeService)],e)}();t.MouseService=a},3230:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;var a=i(6193),l=i(8460),c=i(844),u=i(5596),h=i(3656),d=i(2585),f=i(4725),p=function(e){function t(t,i,n,r,o,s,c){var d=e.call(this)||this;if(d._renderer=t,d._rowCount=i,d._charSizeService=o,d._isPaused=!1,d._needsFullRefresh=!1,d._isNextRenderRedrawOnly=!0,d._needsSelectionRefresh=!1,d._canvasWidth=0,d._canvasHeight=0,d._selectionState={start:void 0,end:void 0,columnSelectMode:!1},d._onDimensionsChange=new l.EventEmitter,d._onRenderedViewportChange=new l.EventEmitter,d._onRender=new l.EventEmitter,d._onRefreshRequest=new l.EventEmitter,d.register({dispose:function(){return d._renderer.dispose()}}),d._renderDebouncer=new a.RenderDebouncer(function(e,t){return d._renderRows(e,t)}),d.register(d._renderDebouncer),d._screenDprMonitor=new u.ScreenDprMonitor,d._screenDprMonitor.setListener(function(){return d.onDevicePixelRatioChange()}),d.register(d._screenDprMonitor),d.register(c.onResize(function(){return d._fullRefresh()})),d.register(c.buffers.onBufferActivate(function(){var e;return null===(e=d._renderer)||void 0===e?void 0:e.clear()})),d.register(r.onOptionChange(function(){return d._handleOptionsChanged()})),d.register(d._charSizeService.onCharSizeChange(function(){return d.onCharSizeChanged()})),d.register(s.onDecorationRegistered(function(){return d._fullRefresh()})),d.register(s.onDecorationRemoved(function(){return d._fullRefresh()})),d._renderer.onRequestRedraw(function(e){return d.refreshRows(e.start,e.end,!0)}),d.register((0,h.addDisposableDomListener)(window,"resize",function(){return d.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var f=new IntersectionObserver(function(e){return d._onIntersectionChange(e[e.length-1])},{threshold:0});f.observe(n),d.register({dispose:function(){return f.disconnect()}})}return d}return r(t,e),Object.defineProperty(t.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRenderedViewportChange",{get:function(){return this._onRenderedViewportChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),t.prototype._onIntersectionChange=function(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},t.prototype.refreshRows=function(e,t,i){void 0===i&&(i=!1),this._isPaused?this._needsFullRefresh=!0:(i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))},t.prototype._renderRows=function(e,t){this._renderer.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0},t.prototype.resize=function(e,t){this._rowCount=t,this._fireOnCanvasResize()},t.prototype._handleOptionsChanged=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},t.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype.setRenderer=function(e){var t=this;this._renderer.dispose(),this._renderer=e,this._renderer.onRequestRedraw(function(e){return t.refreshRows(e.start,e.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},t.prototype.addRefreshCallback=function(e){return this._renderDebouncer.addRefreshCallback(e)},t.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},t.prototype.clearTextureAtlas=function(){var e,t;null===(t=null===(e=this._renderer)||void 0===e?void 0:e.clearTextureAtlas)||void 0===t||t.call(e),this._fullRefresh()},t.prototype.setColors=function(e){this._renderer.setColors(e),this._fullRefresh()},t.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},t.prototype.onResize=function(e,t){this._renderer.onResize(e,t),this._fullRefresh()},t.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},t.prototype.onBlur=function(){this._renderer.onBlur()},t.prototype.onFocus=function(){this._renderer.onFocus()},t.prototype.onSelectionChanged=function(e,t,i){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,this._renderer.onSelectionChanged(e,t,i)},t.prototype.onCursorMove=function(){this._renderer.onCursorMove()},t.prototype.clear=function(){this._renderer.clear()},o([s(3,d.IOptionsService),s(4,f.ICharSizeService),s(5,d.IDecorationService),s(6,d.IBufferService)],t)}(c.Disposable);t.RenderService=p},9312:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;var a=i(6114),l=i(456),c=i(511),u=i(8460),h=i(4725),d=i(2585),f=i(9806),p=i(9504),v=i(844),_=i(4841),m=String.fromCharCode(160),g=new RegExp(m,"g"),y=function(e){function t(t,i,n,r,o,s,a,h){var d=e.call(this)||this;return d._element=t,d._screenElement=i,d._linkifier=n,d._bufferService=r,d._coreService=o,d._mouseService=s,d._optionsService=a,d._renderService=h,d._dragScrollAmount=0,d._enabled=!0,d._workCell=new c.CellData,d._mouseDownTimeStamp=0,d._oldHasSelection=!1,d._oldSelectionStart=void 0,d._oldSelectionEnd=void 0,d._onLinuxMouseSelection=d.register(new u.EventEmitter),d._onRedrawRequest=d.register(new u.EventEmitter),d._onSelectionChange=d.register(new u.EventEmitter),d._onRequestScrollLines=d.register(new u.EventEmitter),d._mouseMoveListener=function(e){return d._onMouseMove(e)},d._mouseUpListener=function(e){return d._onMouseUp(e)},d._coreService.onUserInput(function(){d.hasSelection&&d.clearSelection()}),d._trimListener=d._bufferService.buffer.lines.onTrim(function(e){return d._onTrim(e)}),d.register(d._bufferService.buffers.onBufferActivate(function(e){return d._onBufferActivate(e)})),d.enable(),d._model=new l.SelectionModel(d._bufferService),d._activeSelectionMode=0,d}return r(t,e),Object.defineProperty(t.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._removeMouseDownListeners()},t.prototype.reset=function(){this.clearSelection()},t.prototype.disable=function(){this.clearSelection(),this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelection",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionText",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";var i=this._bufferService.buffer,n=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";for(var r=e[0]<t[0]?e[0]:t[0],o=e[0]<t[0]?t[0]:e[0],s=e[1];s<=t[1];s++){var l=i.translateBufferLineToString(s,!0,r,o);n.push(l)}}else{var c=e[1]===t[1]?t[0]:void 0;for(n.push(i.translateBufferLineToString(e[1],!0,e[0],c)),s=e[1]+1;s<=t[1]-1;s++){var u=i.lines.get(s);l=i.translateBufferLineToString(s,!0),(null==u?void 0:u.isWrapped)?n[n.length-1]+=l:n.push(l)}e[1]!==t[1]&&(u=i.lines.get(t[1]),l=i.translateBufferLineToString(t[1],!0,0,t[0]),u&&u.isWrapped?n[n.length-1]+=l:n.push(l))}return n.map(function(e){return e.replace(g," ")}).join(a.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),t.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},t.prototype.refresh=function(e){var t=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return t._refresh()})),a.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},t.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},t.prototype._isClickInSelection=function(e){var t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!!(i&&n&&t)&&this._areCoordsInSelection(t,i,n)},t.prototype.isCellInSelection=function(e,t){var i=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!(!i||!n)&&this._areCoordsInSelection([e,t],i,n)},t.prototype._areCoordsInSelection=function(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]},t.prototype._selectWordAtCursor=function(e,t){var i,n,r=null===(n=null===(i=this._linkifier.currentLink)||void 0===i?void 0:i.link)||void 0===n?void 0:n.range;if(r)return this._model.selectionStart=[r.start.x-1,r.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(r,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var o=this._getMouseBufferCoords(e);return!!o&&(this._selectWordAt(o,t),this._model.selectionEnd=void 0,!0)},t.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},t.prototype.selectLines=function(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()},t.prototype._onTrim=function(e){this._model.onTrim(e)&&this.refresh()},t.prototype._getMouseBufferCoords=function(e){var t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t},t.prototype._getMouseEventScrollAmount=function(e){var t=(0,f.getCoordsRelativeToElement)(window,e,this._screenElement)[1],i=this._renderService.dimensions.canvasHeight;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-50),50),(t/=50)/Math.abs(t)+Math.round(14*t))},t.prototype.shouldForceSelection=function(e){return a.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey},t.prototype.onMouseDown=function(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._onIncrementalClick(e):1===e.detail?this._onSingleClick(e):2===e.detail?this._onDoubleClick(e):3===e.detail&&this._onTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}},t.prototype._addMouseDownListeners=function(){var e=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return e._dragScroll()},50)},t.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},t.prototype._onIncrementalClick=function(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))},t.prototype._onSingleClick=function(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),this._model.selectionStart){this._model.selectionEnd=void 0;var t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},t.prototype._onDoubleClick=function(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)},t.prototype._onTripleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))},t.prototype.shouldColumnSelect=function(e){return e.altKey&&!(a.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},t.prototype._onMouseMove=function(e){if(e.stopImmediatePropagation(),this._model.selectionStart){var t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){var n=i.lines.get(this._model.selectionEnd[1]);n&&0===n.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},t.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}},t.prototype._onMouseUp=function(e){var t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var i=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(i&&void 0!==i[0]&&void 0!==i[1]){var n=(0,p.moveToCellSequence)(i[0]-1,i[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(n,!0)}}}else this._fireEventIfSelectionChanged()},t.prototype._fireEventIfSelectionChanged=function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);i?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,i)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,i)},t.prototype._fireOnSelectionChange=function(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()},t.prototype._onBufferActivate=function(e){var t=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(function(e){return t._onTrim(e)})},t.prototype._convertViewportColToCharacterIndex=function(e,t){for(var i=t[0],n=0;t[0]>=n;n++){var r=e.loadCell(n,this._workCell).getChars().length;0===this._workCell.getWidth()?i--:r>1&&t[0]!==n&&(i+=r-1)}return i},t.prototype.setSelection=function(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()},t.prototype.rightClickSelect=function(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},t.prototype._getWordAt=function(e,t,i,n){if(void 0===i&&(i=!0),void 0===n&&(n=!0),!(e[0]>=this._bufferService.cols)){var r=this._bufferService.buffer,o=r.lines.get(e[1]);if(o){var s=r.translateBufferLineToString(e[1],!1),a=this._convertViewportColToCharacterIndex(o,e),l=a,c=e[0]-a,u=0,h=0,d=0,f=0;if(" "===s.charAt(a)){for(;a>0&&" "===s.charAt(a-1);)a--;for(;l<s.length&&" "===s.charAt(l+1);)l++}else{var p=e[0],v=e[0];0===o.getWidth(p)&&(u++,p--),2===o.getWidth(v)&&(h++,v++);var _=o.getString(v).length;for(_>1&&(f+=_-1,l+=_-1);p>0&&a>0&&!this._isCharWordSeparator(o.loadCell(p-1,this._workCell));){o.loadCell(p-1,this._workCell);var m=this._workCell.getChars().length;0===this._workCell.getWidth()?(u++,p--):m>1&&(d+=m-1,a-=m-1),a--,p--}for(;v<o.length&&l+1<s.length&&!this._isCharWordSeparator(o.loadCell(v+1,this._workCell));){o.loadCell(v+1,this._workCell);var g=this._workCell.getChars().length;2===this._workCell.getWidth()?(h++,v++):g>1&&(f+=g-1,l+=g-1),l++,v++}}l++;var y=a+c-u+d,b=Math.min(this._bufferService.cols,l-a+u+h-d-f);if(t||""!==s.slice(a,l).trim()){if(i&&0===y&&32!==o.getCodePoint(0)){var w=r.lines.get(e[1]-1);if(w&&o.isWrapped&&32!==w.getCodePoint(this._bufferService.cols-1)){var C=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(C){var S=this._bufferService.cols-C.start;y-=S,b+=S}}}if(n&&y+b===this._bufferService.cols&&32!==o.getCodePoint(this._bufferService.cols-1)){var k=r.lines.get(e[1]+1);if((null==k?void 0:k.isWrapped)&&32!==k.getCodePoint(0)){var x=this._getWordAt([0,e[1]+1],!1,!1,!0);x&&(b+=x.length)}}return{start:y,length:b}}}}},t.prototype._selectWordAt=function(e,t){var i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}},t.prototype._selectToWordAt=function(e){var t=this._getWordAt(e,!0);if(t){for(var i=e[1];t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}},t.prototype._isCharWordSeparator=function(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0},t.prototype._selectLineAt=function(e){var t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(i,this._bufferService.cols)},o([s(3,d.IBufferService),s(4,d.ICoreService),s(5,h.IMouseService),s(6,d.IOptionsService),s(7,h.IRenderService)],t)}(v.Disposable);t.SelectionService=y},4725:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ICharacterJoinerService=t.ISoundService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;var n=i(8343);t.ICharSizeService=(0,n.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,n.createDecorator)("CoreBrowserService"),t.IMouseService=(0,n.createDecorator)("MouseService"),t.IRenderService=(0,n.createDecorator)("RenderService"),t.ISelectionService=(0,n.createDecorator)("SelectionService"),t.ISoundService=(0,n.createDecorator)("SoundService"),t.ICharacterJoinerService=(0,n.createDecorator)("CharacterJoinerService")},357:function(e,t,i){var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SoundService=void 0;var o=i(2585),s=function(){function e(e){this._optionsService=e}return Object.defineProperty(e,"audioContext",{get:function(){if(!e._audioContext){var t=window.AudioContext||window.webkitAudioContext;if(!t)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;e._audioContext=new t}return e._audioContext},enumerable:!1,configurable:!0}),e.prototype.playBellSound=function(){var t=e.audioContext;if(t){var i=t.createBufferSource();t.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(e){i.buffer=e,i.connect(t.destination),i.start(0)})}},e.prototype._base64ToArrayBuffer=function(e){for(var t=window.atob(e),i=t.length,n=new Uint8Array(i),r=0;r<i;r++)n[r]=t.charCodeAt(r);return n.buffer},e.prototype._removeMimeType=function(e){return e.split(",")[1]},e=n([r(0,o.IOptionsService)],e)}();t.SoundService=s},6349:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;var n=i(8460),r=function(){function e(e){this._maxLength=e,this.onDeleteEmitter=new n.EventEmitter,this.onInsertEmitter=new n.EventEmitter,this.onTrimEmitter=new n.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(e.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLength},set:function(e){if(this._maxLength!==e){for(var t=new Array(e),i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(e){if(e>this._length)for(var t=this._length;t<e;t++)this._array[t]=void 0;this._length=e},enumerable:!1,configurable:!0}),e.prototype.get=function(e){return this._array[this._getCyclicIndex(e)]},e.prototype.set=function(e,t){this._array[this._getCyclicIndex(e)]=t},e.prototype.push=function(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},e.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(e.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),e.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},e.prototype.splice=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(t){for(var r=e;r<this._length-t;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(r=this._length-1;r>=e;r--)this._array[this._getCyclicIndex(r+i.length)]=this._array[this._getCyclicIndex(r)];for(r=0;r<i.length;r++)this._array[this._getCyclicIndex(e+r)]=i[r];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){var o=this._length+i.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=i.length},e.prototype.trimStart=function(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)},e.prototype.shiftElements=function(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(var n=t-1;n>=0;n--)this.set(e+n+i,this.get(e+n));var r=e+t+i-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(n=0;n<t;n++)this.set(e+n+i,this.get(e+n))}},e.prototype._getCyclicIndex=function(e){return(this._startIndex+e)%this._maxLength},e}();t.CircularList=r},1439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t,i){if(void 0===i&&(i=5),"object"!=typeof t)return t;var n=Array.isArray(t)?[]:{};for(var r in t)n[r]=i<=1?t[r]:t[r]&&e(t[r],i-1);return n}},8055:function(e,t){var i,n,r,o,s=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s};function a(e){var t=e.toString(16);return t.length<2?"0"+t:t}function l(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=void 0,function(e){e.toCss=function(e,t,i,n){return void 0!==n?"#"+a(e)+a(t)+a(i)+a(n):"#"+a(e)+a(t)+a(i)},e.toRgba=function(e,t,i,n){return void 0===n&&(n=255),(e<<24|t<<16|i<<8|n)>>>0}}(i=t.channels||(t.channels={})),(n=t.color||(t.color={})).blend=function(e,t){var n=(255&t.rgba)/255;if(1===n)return{css:t.css,rgba:t.rgba};var r=t.rgba>>24&255,o=t.rgba>>16&255,s=t.rgba>>8&255,a=e.rgba>>24&255,l=e.rgba>>16&255,c=e.rgba>>8&255,u=a+Math.round((r-a)*n),h=l+Math.round((o-l)*n),d=c+Math.round((s-c)*n);return{css:i.toCss(u,h,d),rgba:i.toRgba(u,h,d)}},n.isOpaque=function(e){return!(255&~e.rgba)},n.ensureContrastRatio=function(e,t,i){var n=o.ensureContrastRatio(e.rgba,t.rgba,i);if(n)return o.toColor(n>>24&255,n>>16&255,n>>8&255)},n.opaque=function(e){var t=(255|e.rgba)>>>0,n=s(o.toChannels(t),3),r=n[0],a=n[1],l=n[2];return{css:i.toCss(r,a,l),rgba:t}},n.opacity=function(e,t){var n=Math.round(255*t),r=s(o.toChannels(e.rgba),3),a=r[0],l=r[1],c=r[2];return{css:i.toCss(a,l,c,n),rgba:i.toRgba(a,l,c,n)}},n.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]},(t.css||(t.css={})).toColor=function(e){if(e.match(/#[0-9a-f]{3,8}/i))switch(e.length){case 4:var t=parseInt(e.slice(1,2).repeat(2),16),i=parseInt(e.slice(2,3).repeat(2),16),n=parseInt(e.slice(3,4).repeat(2),16);return o.toColor(t,i,n);case 5:t=parseInt(e.slice(1,2).repeat(2),16),i=parseInt(e.slice(2,3).repeat(2),16),n=parseInt(e.slice(3,4).repeat(2),16);var r=parseInt(e.slice(4,5).repeat(2),16);return o.toColor(t,i,n,r);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}var s=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(s)return t=parseInt(s[1]),i=parseInt(s[2]),n=parseInt(s[3]),r=Math.round(255*(void 0===s[5]?1:parseFloat(s[5]))),o.toColor(t,i,n,r);throw new Error("css.toColor: Unsupported css format")},function(e){function t(e,t,i){var n=e/255,r=t/255,o=i/255;return.2126*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(r=t.rgb||(t.rgb={})),function(e){function t(e,t,i){for(var n=e>>24&255,o=e>>16&255,s=e>>8&255,a=t>>24&255,c=t>>16&255,u=t>>8&255,h=l(r.relativeLuminance2(a,c,u),r.relativeLuminance2(n,o,s));h<i&&(a>0||c>0||u>0);)a-=Math.max(0,Math.ceil(.1*a)),c-=Math.max(0,Math.ceil(.1*c)),u-=Math.max(0,Math.ceil(.1*u)),h=l(r.relativeLuminance2(a,c,u),r.relativeLuminance2(n,o,s));return(a<<24|c<<16|u<<8|255)>>>0}function n(e,t,i){for(var n=e>>24&255,o=e>>16&255,s=e>>8&255,a=t>>24&255,c=t>>16&255,u=t>>8&255,h=l(r.relativeLuminance2(a,c,u),r.relativeLuminance2(n,o,s));h<i&&(a<255||c<255||u<255);)a=Math.min(255,a+Math.ceil(.1*(255-a))),c=Math.min(255,c+Math.ceil(.1*(255-c))),u=Math.min(255,u+Math.ceil(.1*(255-u))),h=l(r.relativeLuminance2(a,c,u),r.relativeLuminance2(n,o,s));return(a<<24|c<<16|u<<8|255)>>>0}e.ensureContrastRatio=function(e,i,o){var s=r.relativeLuminance(e>>8),a=r.relativeLuminance(i>>8);if(l(s,a)<o){if(a<s){var c=t(e,i,o),u=l(s,r.relativeLuminance(c>>8));if(u<o){var h=n(e,e,o);return u>l(s,r.relativeLuminance(h>>8))?c:h}return c}var d=n(e,i,o),f=l(s,r.relativeLuminance(d>>8));return f<o?(h=t(e,e,o),f>l(s,r.relativeLuminance(h>>8))?d:h):d}},e.reduceLuminance=t,e.increaseLuminance=n,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,n,r){return{css:i.toCss(e,t,n,r),rgba:i.toRgba(e,t,n,r)}}}(o=t.rgba||(t.rgba={})),t.toPaddedHex=a,t.contrastRatio=l},8969:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;var s=i(844),a=i(2585),l=i(4348),c=i(7866),u=i(744),h=i(7302),d=i(6975),f=i(8460),p=i(1753),v=i(3730),_=i(1480),m=i(7994),g=i(9282),y=i(5435),b=i(5981),w=!1,C=function(e){function t(t){var i=e.call(this)||this;return i._onBinary=new f.EventEmitter,i._onData=new f.EventEmitter,i._onLineFeed=new f.EventEmitter,i._onResize=new f.EventEmitter,i._onScroll=new f.EventEmitter,i._onWriteParsed=new f.EventEmitter,i._instantiationService=new l.InstantiationService,i.optionsService=new h.OptionsService(t),i._instantiationService.setService(a.IOptionsService,i.optionsService),i._bufferService=i.register(i._instantiationService.createInstance(u.BufferService)),i._instantiationService.setService(a.IBufferService,i._bufferService),i._logService=i._instantiationService.createInstance(c.LogService),i._instantiationService.setService(a.ILogService,i._logService),i.coreService=i.register(i._instantiationService.createInstance(d.CoreService,function(){return i.scrollToBottom()})),i._instantiationService.setService(a.ICoreService,i.coreService),i.coreMouseService=i._instantiationService.createInstance(p.CoreMouseService),i._instantiationService.setService(a.ICoreMouseService,i.coreMouseService),i._dirtyRowService=i._instantiationService.createInstance(v.DirtyRowService),i._instantiationService.setService(a.IDirtyRowService,i._dirtyRowService),i.unicodeService=i._instantiationService.createInstance(_.UnicodeService),i._instantiationService.setService(a.IUnicodeService,i.unicodeService),i._charsetService=i._instantiationService.createInstance(m.CharsetService),i._instantiationService.setService(a.ICharsetService,i._charsetService),i._inputHandler=new y.InputHandler(i._bufferService,i._charsetService,i.coreService,i._dirtyRowService,i._logService,i.optionsService,i.coreMouseService,i.unicodeService),i.register((0,f.forwardEvent)(i._inputHandler.onLineFeed,i._onLineFeed)),i.register(i._inputHandler),i.register((0,f.forwardEvent)(i._bufferService.onResize,i._onResize)),i.register((0,f.forwardEvent)(i.coreService.onData,i._onData)),i.register((0,f.forwardEvent)(i.coreService.onBinary,i._onBinary)),i.register(i.optionsService.onOptionChange(function(e){return i._updateOptions(e)})),i.register(i._bufferService.onScroll(function(e){i._onScroll.fire({position:i._bufferService.buffer.ydisp,source:0}),i._dirtyRowService.markRangeDirty(i._bufferService.buffer.scrollTop,i._bufferService.buffer.scrollBottom)})),i.register(i._inputHandler.onScroll(function(e){i._onScroll.fire({position:i._bufferService.buffer.ydisp,source:0}),i._dirtyRowService.markRangeDirty(i._bufferService.buffer.scrollTop,i._bufferService.buffer.scrollBottom)})),i._writeBuffer=new b.WriteBuffer(function(e,t){return i._inputHandler.parse(e,t)}),i.register((0,f.forwardEvent)(i._writeBuffer.onWriteParsed,i._onWriteParsed)),i}return r(t,e),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){var e=this;return this._onScrollApi||(this._onScrollApi=new f.EventEmitter,this.register(this._onScroll.event(function(t){var i;null===(i=e._onScrollApi)||void 0===i||i.fire(t.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.optionsService.options},set:function(e){for(var t in e)this.optionsService.options[t]=e[t]},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t;this._isDisposed||(e.prototype.dispose.call(this),null===(t=this._windowsMode)||void 0===t||t.dispose(),this._windowsMode=void 0)},t.prototype.write=function(e,t){this._writeBuffer.write(e,t)},t.prototype.writeSync=function(e,t){this._logService.logLevel<=a.LogLevelEnum.WARN&&!w&&(this._logService.warn("writeSync is unreliable and will be removed soon."),w=!0),this._writeBuffer.writeSync(e,t)},t.prototype.resize=function(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,u.MINIMUM_COLS),t=Math.max(t,u.MINIMUM_ROWS),this._bufferService.resize(e,t))},t.prototype.scroll=function(e,t){void 0===t&&(t=!1),this._bufferService.scroll(e,t)},t.prototype.scrollLines=function(e,t,i){this._bufferService.scrollLines(e,t,i)},t.prototype.scrollPages=function(e){this._bufferService.scrollPages(e)},t.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},t.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},t.prototype.scrollToLine=function(e){this._bufferService.scrollToLine(e)},t.prototype.registerEscHandler=function(e,t){return this._inputHandler.registerEscHandler(e,t)},t.prototype.registerDcsHandler=function(e,t){return this._inputHandler.registerDcsHandler(e,t)},t.prototype.registerCsiHandler=function(e,t){return this._inputHandler.registerCsiHandler(e,t)},t.prototype.registerOscHandler=function(e,t){return this._inputHandler.registerOscHandler(e,t)},t.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},t.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},t.prototype._updateOptions=function(e){var t;switch(e){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():(null===(t=this._windowsMode)||void 0===t||t.dispose(),this._windowsMode=void 0)}},t.prototype._enableWindowsMode=function(){var e=this;if(!this._windowsMode){var t=[];t.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),t.push(this.registerCsiHandler({final:"H"},function(){return(0,g.updateWindowsModeWrappedState)(e._bufferService),!1})),this._windowsMode={dispose:function(){var e,i;try{for(var n=o(t),r=n.next();!r.done;r=n.next())r.value.dispose()}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}}}}},t}(s.Disposable);t.CoreTerminal=C},8460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0;var i=function(){function e(){this._listeners=[],this._disposed=!1}return Object.defineProperty(e.prototype,"event",{get:function(){var e=this;return this._event||(this._event=function(t){return e._listeners.push(t),{dispose:function(){if(!e._disposed)for(var i=0;i<e._listeners.length;i++)if(e._listeners[i]===t)return void e._listeners.splice(i,1)}}}),this._event},enumerable:!1,configurable:!0}),e.prototype.fire=function(e,t){for(var i=[],n=0;n<this._listeners.length;n++)i.push(this._listeners[n]);for(n=0;n<i.length;n++)i[n].call(void 0,e,t)},e.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},e}();t.EventEmitter=i,t.forwardEvent=function(e,t){return e(function(e){return t.fire(e)})}},5435:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;var o,s=i(2584),a=i(7116),l=i(2015),c=i(844),u=i(8273),h=i(482),d=i(8437),f=i(8460),p=i(643),v=i(511),_=i(3734),m=i(2585),g=i(6242),y=i(6351),b=i(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},C=131072;function S(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}!function(e){e[e.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",e[e.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(o=t.WindowsOptionsReportType||(t.WindowsOptionsReportType={}));var k=function(){function e(e,t,i,n){this._bufferService=e,this._coreService=t,this._logService=i,this._optionsService=n,this._data=new Uint32Array(0)}return e.prototype.hook=function(e){this._data=new Uint32Array(0)},e.prototype.put=function(e,t,i){this._data=(0,u.concat)(this._data,e.subarray(t,i))},e.prototype.unhook=function(e){if(!e)return this._data=new Uint32Array(0),!0;var t=(0,h.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),t){case'"q':this._coreService.triggerDataEvent(s.C0.ESC+'P1$r0"q'+s.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(s.C0.ESC+'P1$r61;1"p'+s.C0.ESC+"\\");break;case"r":var i=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+i+s.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(s.C0.ESC+"P1$r0m"+s.C0.ESC+"\\");break;case" q":var n={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];n-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(s.C0.ESC+"P1$r"+n+" q"+s.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",t),this._coreService.triggerDataEvent(s.C0.ESC+"P0$r"+s.C0.ESC+"\\")}return!0},e}(),x=function(e){function t(t,i,n,r,o,c,u,p,_){void 0===_&&(_=new l.EscapeSequenceParser);var m=e.call(this)||this;m._bufferService=t,m._charsetService=i,m._coreService=n,m._dirtyRowService=r,m._logService=o,m._optionsService=c,m._coreMouseService=u,m._unicodeService=p,m._parser=_,m._parseBuffer=new Uint32Array(4096),m._stringDecoder=new h.StringToUtf32,m._utf8Decoder=new h.Utf8ToUtf32,m._workCell=new v.CellData,m._windowTitle="",m._iconName="",m._windowTitleStack=[],m._iconNameStack=[],m._curAttrData=d.DEFAULT_ATTR_DATA.clone(),m._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone(),m._onRequestBell=new f.EventEmitter,m._onRequestRefreshRows=new f.EventEmitter,m._onRequestReset=new f.EventEmitter,m._onRequestSendFocus=new f.EventEmitter,m._onRequestSyncScrollBar=new f.EventEmitter,m._onRequestWindowsOptionsReport=new f.EventEmitter,m._onA11yChar=new f.EventEmitter,m._onA11yTab=new f.EventEmitter,m._onCursorMove=new f.EventEmitter,m._onLineFeed=new f.EventEmitter,m._onScroll=new f.EventEmitter,m._onTitleChange=new f.EventEmitter,m._onColor=new f.EventEmitter,m._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},m._specialColors=[256,257,258],m.register(m._parser),m._activeBuffer=m._bufferService.buffer,m.register(m._bufferService.buffers.onBufferActivate(function(e){return m._activeBuffer=e.activeBuffer})),m._parser.setCsiHandlerFallback(function(e,t){m._logService.debug("Unknown CSI code: ",{identifier:m._parser.identToString(e),params:t.toArray()})}),m._parser.setEscHandlerFallback(function(e){m._logService.debug("Unknown ESC code: ",{identifier:m._parser.identToString(e)})}),m._parser.setExecuteHandlerFallback(function(e){m._logService.debug("Unknown EXECUTE code: ",{code:e})}),m._parser.setOscHandlerFallback(function(e,t,i){m._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:i})}),m._parser.setDcsHandlerFallback(function(e,t,i){"HOOK"===t&&(i=i.toArray()),m._logService.debug("Unknown DCS code: ",{identifier:m._parser.identToString(e),action:t,payload:i})}),m._parser.setPrintHandler(function(e,t,i){return m.print(e,t,i)}),m._parser.registerCsiHandler({final:"@"},function(e){return m.insertChars(e)}),m._parser.registerCsiHandler({intermediates:" ",final:"@"},function(e){return m.scrollLeft(e)}),m._parser.registerCsiHandler({final:"A"},function(e){return m.cursorUp(e)}),m._parser.registerCsiHandler({intermediates:" ",final:"A"},function(e){return m.scrollRight(e)}),m._parser.registerCsiHandler({final:"B"},function(e){return m.cursorDown(e)}),m._parser.registerCsiHandler({final:"C"},function(e){return m.cursorForward(e)}),m._parser.registerCsiHandler({final:"D"},function(e){return m.cursorBackward(e)}),m._parser.registerCsiHandler({final:"E"},function(e){return m.cursorNextLine(e)}),m._parser.registerCsiHandler({final:"F"},function(e){return m.cursorPrecedingLine(e)}),m._parser.registerCsiHandler({final:"G"},function(e){return m.cursorCharAbsolute(e)}),m._parser.registerCsiHandler({final:"H"},function(e){return m.cursorPosition(e)}),m._parser.registerCsiHandler({final:"I"},function(e){return m.cursorForwardTab(e)}),m._parser.registerCsiHandler({final:"J"},function(e){return m.eraseInDisplay(e)}),m._parser.registerCsiHandler({prefix:"?",final:"J"},function(e){return m.eraseInDisplay(e)}),m._parser.registerCsiHandler({final:"K"},function(e){return m.eraseInLine(e)}),m._parser.registerCsiHandler({prefix:"?",final:"K"},function(e){return m.eraseInLine(e)}),m._parser.registerCsiHandler({final:"L"},function(e){return m.insertLines(e)}),m._parser.registerCsiHandler({final:"M"},function(e){return m.deleteLines(e)}),m._parser.registerCsiHandler({final:"P"},function(e){return m.deleteChars(e)}),m._parser.registerCsiHandler({final:"S"},function(e){return m.scrollUp(e)}),m._parser.registerCsiHandler({final:"T"},function(e){return m.scrollDown(e)}),m._parser.registerCsiHandler({final:"X"},function(e){return m.eraseChars(e)}),m._parser.registerCsiHandler({final:"Z"},function(e){return m.cursorBackwardTab(e)}),m._parser.registerCsiHandler({final:"`"},function(e){return m.charPosAbsolute(e)}),m._parser.registerCsiHandler({final:"a"},function(e){return m.hPositionRelative(e)}),m._parser.registerCsiHandler({final:"b"},function(e){return m.repeatPrecedingCharacter(e)}),m._parser.registerCsiHandler({final:"c"},function(e){return m.sendDeviceAttributesPrimary(e)}),m._parser.registerCsiHandler({prefix:">",final:"c"},function(e){return m.sendDeviceAttributesSecondary(e)}),m._parser.registerCsiHandler({final:"d"},function(e){return m.linePosAbsolute(e)}),m._parser.registerCsiHandler({final:"e"},function(e){return m.vPositionRelative(e)}),m._parser.registerCsiHandler({final:"f"},function(e){return m.hVPosition(e)}),m._parser.registerCsiHandler({final:"g"},function(e){return m.tabClear(e)}),m._parser.registerCsiHandler({final:"h"},function(e){return m.setMode(e)}),m._parser.registerCsiHandler({prefix:"?",final:"h"},function(e){return m.setModePrivate(e)}),m._parser.registerCsiHandler({final:"l"},function(e){return m.resetMode(e)}),m._parser.registerCsiHandler({prefix:"?",final:"l"},function(e){return m.resetModePrivate(e)}),m._parser.registerCsiHandler({final:"m"},function(e){return m.charAttributes(e)}),m._parser.registerCsiHandler({final:"n"},function(e){return m.deviceStatus(e)}),m._parser.registerCsiHandler({prefix:"?",final:"n"},function(e){return m.deviceStatusPrivate(e)}),m._parser.registerCsiHandler({intermediates:"!",final:"p"},function(e){return m.softReset(e)}),m._parser.registerCsiHandler({intermediates:" ",final:"q"},function(e){return m.setCursorStyle(e)}),m._parser.registerCsiHandler({final:"r"},function(e){return m.setScrollRegion(e)}),m._parser.registerCsiHandler({final:"s"},function(e){return m.saveCursor(e)}),m._parser.registerCsiHandler({final:"t"},function(e){return m.windowOptions(e)}),m._parser.registerCsiHandler({final:"u"},function(e){return m.restoreCursor(e)}),m._parser.registerCsiHandler({intermediates:"'",final:"}"},function(e){return m.insertColumns(e)}),m._parser.registerCsiHandler({intermediates:"'",final:"~"},function(e){return m.deleteColumns(e)}),m._parser.setExecuteHandler(s.C0.BEL,function(){return m.bell()}),m._parser.setExecuteHandler(s.C0.LF,function(){return m.lineFeed()}),m._parser.setExecuteHandler(s.C0.VT,function(){return m.lineFeed()}),m._parser.setExecuteHandler(s.C0.FF,function(){return m.lineFeed()}),m._parser.setExecuteHandler(s.C0.CR,function(){return m.carriageReturn()}),m._parser.setExecuteHandler(s.C0.BS,function(){return m.backspace()}),m._parser.setExecuteHandler(s.C0.HT,function(){return m.tab()}),m._parser.setExecuteHandler(s.C0.SO,function(){return m.shiftOut()}),m._parser.setExecuteHandler(s.C0.SI,function(){return m.shiftIn()}),m._parser.setExecuteHandler(s.C1.IND,function(){return m.index()}),m._parser.setExecuteHandler(s.C1.NEL,function(){return m.nextLine()}),m._parser.setExecuteHandler(s.C1.HTS,function(){return m.tabSet()}),m._parser.registerOscHandler(0,new g.OscHandler(function(e){return m.setTitle(e),m.setIconName(e),!0})),m._parser.registerOscHandler(1,new g.OscHandler(function(e){return m.setIconName(e)})),m._parser.registerOscHandler(2,new g.OscHandler(function(e){return m.setTitle(e)})),m._parser.registerOscHandler(4,new g.OscHandler(function(e){return m.setOrReportIndexedColor(e)})),m._parser.registerOscHandler(10,new g.OscHandler(function(e){return m.setOrReportFgColor(e)})),m._parser.registerOscHandler(11,new g.OscHandler(function(e){return m.setOrReportBgColor(e)})),m._parser.registerOscHandler(12,new g.OscHandler(function(e){return m.setOrReportCursorColor(e)})),m._parser.registerOscHandler(104,new g.OscHandler(function(e){return m.restoreIndexedColor(e)})),m._parser.registerOscHandler(110,new g.OscHandler(function(e){return m.restoreFgColor(e)})),m._parser.registerOscHandler(111,new g.OscHandler(function(e){return m.restoreBgColor(e)})),m._parser.registerOscHandler(112,new g.OscHandler(function(e){return m.restoreCursorColor(e)})),m._parser.registerEscHandler({final:"7"},function(){return m.saveCursor()}),m._parser.registerEscHandler({final:"8"},function(){return m.restoreCursor()}),m._parser.registerEscHandler({final:"D"},function(){return m.index()}),m._parser.registerEscHandler({final:"E"},function(){return m.nextLine()}),m._parser.registerEscHandler({final:"H"},function(){return m.tabSet()}),m._parser.registerEscHandler({final:"M"},function(){return m.reverseIndex()}),m._parser.registerEscHandler({final:"="},function(){return m.keypadApplicationMode()}),m._parser.registerEscHandler({final:">"},function(){return m.keypadNumericMode()}),m._parser.registerEscHandler({final:"c"},function(){return m.fullReset()}),m._parser.registerEscHandler({final:"n"},function(){return m.setgLevel(2)}),m._parser.registerEscHandler({final:"o"},function(){return m.setgLevel(3)}),m._parser.registerEscHandler({final:"|"},function(){return m.setgLevel(3)}),m._parser.registerEscHandler({final:"}"},function(){return m.setgLevel(2)}),m._parser.registerEscHandler({final:"~"},function(){return m.setgLevel(1)}),m._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return m.selectDefaultCharset()}),m._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return m.selectDefaultCharset()});var y=function(e){b._parser.registerEscHandler({intermediates:"(",final:e},function(){return m.selectCharset("("+e)}),b._parser.registerEscHandler({intermediates:")",final:e},function(){return m.selectCharset(")"+e)}),b._parser.registerEscHandler({intermediates:"*",final:e},function(){return m.selectCharset("*"+e)}),b._parser.registerEscHandler({intermediates:"+",final:e},function(){return m.selectCharset("+"+e)}),b._parser.registerEscHandler({intermediates:"-",final:e},function(){return m.selectCharset("-"+e)}),b._parser.registerEscHandler({intermediates:".",final:e},function(){return m.selectCharset("."+e)}),b._parser.registerEscHandler({intermediates:"/",final:e},function(){return m.selectCharset("/"+e)})},b=this;for(var w in a.CHARSETS)y(w);return m._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return m.screenAlignmentPattern()}),m._parser.setErrorHandler(function(e){return m._logService.error("Parsing error: ",e),e}),m._parser.registerDcsHandler({intermediates:"$",final:"q"},new k(m._bufferService,m._coreService,m._logService,m._optionsService)),m}return r(t,e),Object.defineProperty(t.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this)},t.prototype._preserveStack=function(e,t,i,n){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=n},t.prototype._logSlowResolvingAsync=function(e){this._logService.logLevel<=m.LogLevelEnum.WARN&&Promise.race([e,new Promise(function(e,t){return setTimeout(function(){return t("#SLOW_TIMEOUT")},5e3)})]).catch(function(e){if("#SLOW_TIMEOUT"!==e)throw e;console.warn("async parser handler taking longer than 5000 ms")})},t.prototype.parse=function(e,t){var i,n=this._activeBuffer.x,r=this._activeBuffer.y,o=0,s=this._parseStack.paused;if(s){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;n=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>C&&(o=this._parseStack.position+C)}if(this._logService.logLevel<=m.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof e?' "'+e+'"':' "'+Array.prototype.map.call(e,function(e){return String.fromCharCode(e)}).join("")+'"'),"string"==typeof e?e.split("").map(function(e){return e.charCodeAt(0)}):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<C&&(this._parseBuffer=new Uint32Array(Math.min(e.length,C))),s||this._dirtyRowService.clearRange(),e.length>C)for(var a=o;a<e.length;a+=C){var l=a+C<e.length?a+C:e.length,c="string"==typeof e?this._stringDecoder.decode(e.substring(a,l),this._parseBuffer):this._utf8Decoder.decode(e.subarray(a,l),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,c))return this._preserveStack(n,r,c,a),this._logSlowResolvingAsync(i),i}else if(!s&&(c="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer),i=this._parser.parse(this._parseBuffer,c)))return this._preserveStack(n,r,c,0),this._logSlowResolvingAsync(i),i;this._activeBuffer.x===n&&this._activeBuffer.y===r||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},t.prototype.print=function(e,t,i){var n,r,o=this._charsetService.charset,s=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,l=this._coreService.decPrivateModes.wraparound,c=this._coreService.modes.insertMode,u=this._curAttrData,d=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&2===d.getWidth(this._activeBuffer.x-1)&&d.setCellFromCodePoint(this._activeBuffer.x-1,0,1,u.fg,u.bg,u.extended);for(var f=t;f<i;++f){if(n=e[f],r=this._unicodeService.wcwidth(n),n<127&&o){var v=o[String.fromCharCode(n)];v&&(n=v.charCodeAt(0))}if(s&&this._onA11yChar.fire((0,h.stringFromCodePoint)(n)),r||!this._activeBuffer.x){if(this._activeBuffer.x+r-1>=a)if(l){for(;this._activeBuffer.x<a;)d.setCellFromCodePoint(this._activeBuffer.x++,0,1,u.fg,u.bg,u.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),d=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=a-1,2===r)continue;if(c&&(d.insertCells(this._activeBuffer.x,r,this._activeBuffer.getNullCell(u),u),2===d.getWidth(a-1)&&d.setCellFromCodePoint(a-1,p.NULL_CELL_CODE,p.NULL_CELL_WIDTH,u.fg,u.bg,u.extended)),d.setCellFromCodePoint(this._activeBuffer.x++,n,r,u.fg,u.bg,u.extended),r>0)for(;--r;)d.setCellFromCodePoint(this._activeBuffer.x++,0,0,u.fg,u.bg,u.extended)}else d.getWidth(this._activeBuffer.x-1)?d.addCodepointToCell(this._activeBuffer.x-1,n):d.addCodepointToCell(this._activeBuffer.x-2,n)}i-t>0&&(d.loadCell(this._activeBuffer.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<a&&i-t>0&&0===d.getWidth(this._activeBuffer.x)&&!d.hasContent(this._activeBuffer.x)&&d.setCellFromCodePoint(this._activeBuffer.x,0,1,u.fg,u.bg,u.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype.registerCsiHandler=function(e,t){var i=this;return"t"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,function(e){return!S(e.params[0],i._optionsService.rawOptions.windowOptions)||t(e)})},t.prototype.registerDcsHandler=function(e,t){return this._parser.registerDcsHandler(e,new y.DcsHandler(t))},t.prototype.registerEscHandler=function(e,t){return this._parser.registerEscHandler(e,t)},t.prototype.registerOscHandler=function(e,t){return this._parser.registerOscHandler(e,new g.OscHandler(t))},t.prototype.bell=function(){return this._onRequestBell.fire(),!0},t.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},t.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},t.prototype.backspace=function(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===e?void 0:e.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},t.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0},t.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},t.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},t.prototype._restrictCursor=function(e){void 0===e&&(e=this._bufferService.cols-1),this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype._setCursor=function(e,t){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},t.prototype._moveCursor=function(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)},t.prototype.cursorUp=function(e){var t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0},t.prototype.cursorDown=function(e){var t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0},t.prototype.cursorForward=function(e){return this._moveCursor(e.params[0]||1,0),!0},t.prototype.cursorBackward=function(e){return this._moveCursor(-(e.params[0]||1),0),!0},t.prototype.cursorNextLine=function(e){return this.cursorDown(e),this._activeBuffer.x=0,!0},t.prototype.cursorPrecedingLine=function(e){return this.cursorUp(e),this._activeBuffer.x=0,!0},t.prototype.cursorCharAbsolute=function(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0},t.prototype.cursorPosition=function(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0},t.prototype.charPosAbsolute=function(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0},t.prototype.hPositionRelative=function(e){return this._moveCursor(e.params[0]||1,0),!0},t.prototype.linePosAbsolute=function(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0},t.prototype.vPositionRelative=function(e){return this._moveCursor(0,e.params[0]||1),!0},t.prototype.hVPosition=function(e){return this.cursorPosition(e),!0},t.prototype.tabClear=function(e){var t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0},t.prototype.cursorForwardTab=function(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var t=e.params[0]||1;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},t.prototype.cursorBackwardTab=function(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var t=e.params[0]||1;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},t.prototype._eraseInBufferLine=function(e,t,i,n){void 0===n&&(n=!1);var r=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);r.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),n&&(r.isWrapped=!1)},t.prototype._resetBufferLine=function(e){var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);t.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),t.isWrapped=!1},t.prototype.eraseInDisplay=function(e){var t;switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(t=this._activeBuffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);t<this._bufferService.rows;t++)this._resetBufferLine(t);this._dirtyRowService.markDirty(t);break;case 1:for(t=this._activeBuffer.y,this._dirtyRowService.markDirty(t),this._eraseInBufferLine(t,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(t+1).isWrapped=!1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 2:for(t=this._bufferService.rows,this._dirtyRowService.markDirty(t-1);t--;)this._resetBufferLine(t);this._dirtyRowService.markDirty(0);break;case 3:var i=this._activeBuffer.lines.length-this._bufferService.rows;i>0&&(this._activeBuffer.lines.trimStart(i),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-i,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-i,0),this._onScroll.fire(0))}return!0},t.prototype.eraseInLine=function(e){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},t.prototype.insertLines=function(e){this._restrictCursor();var t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var i=this._activeBuffer.ybase+this._activeBuffer.y,n=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-n+1;t--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},t.prototype.deleteLines=function(e){this._restrictCursor();var t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var i,n=this._activeBuffer.ybase+this._activeBuffer.y;for(i=this._bufferService.rows-1-this._activeBuffer.scrollBottom,i=this._bufferService.rows-1+this._activeBuffer.ybase-i;t--;)this._activeBuffer.lines.splice(n,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},t.prototype.insertChars=function(e){this._restrictCursor();var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.deleteChars=function(e){this._restrictCursor();var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.scrollUp=function(e){for(var t=e.params[0]||1;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollDown=function(e){for(var t=e.params[0]||1;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(d.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollLeft=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){var n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),n.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.scrollRight=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){var n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),n.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.insertColumns=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){var n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),n.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.deleteColumns=function(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var t=e.params[0]||1,i=this._activeBuffer.scrollTop;i<=this._activeBuffer.scrollBottom;++i){var n=this._activeBuffer.lines.get(this._activeBuffer.ybase+i);n.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),n.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},t.prototype.eraseChars=function(e){this._restrictCursor();var t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},t.prototype.repeatPrecedingCharacter=function(e){if(!this._parser.precedingCodepoint)return!0;for(var t=e.params[0]||1,i=new Uint32Array(t),n=0;n<t;++n)i[n]=this._parser.precedingCodepoint;return this.print(i,0,i.length),!0},t.prototype.sendDeviceAttributesPrimary=function(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(s.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(s.C0.ESC+"[?6c")),!0},t.prototype.sendDeviceAttributesSecondary=function(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(s.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(s.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(s.C0.ESC+"[>83;40003;0c")),!0},t.prototype._is=function(e){return 0===(this._optionsService.rawOptions.termName+"").indexOf(e)},t.prototype.setMode=function(e){for(var t=0;t<e.length;t++)4===e.params[t]&&(this._coreService.modes.insertMode=!0);return!0},t.prototype.setModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),this._charsetService.setgCharset(1,a.DEFAULT_CHARSET),this._charsetService.setgCharset(2,a.DEFAULT_CHARSET),this._charsetService.setgCharset(3,a.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},t.prototype.resetMode=function(e){for(var t=0;t<e.length;t++)4===e.params[t]&&(this._coreService.modes.insertMode=!1);return!0},t.prototype.resetModePrivate=function(e){for(var t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},t.prototype._updateAttrColor=function(e,t,i,n,r){return 2===t?(e|=50331648,e&=-16777216,e|=_.AttributeData.fromColorRGB([i,n,r])):5===t&&(e&=-50331904,e|=33554432|255&i),e},t.prototype._extractColor=function(e,t,i){var n=[0,0,-1,0,0,0],r=0,o=0;do{if(n[o+r]=e.params[t+o],e.hasSubParams(t+o)){var s=e.getSubParams(t+o),a=0;do{5===n[1]&&(r=1),n[o+a+1+r]=s[a]}while(++a<s.length&&a+o+1+r<n.length);break}if(5===n[1]&&o+r>=2||2===n[1]&&o+r>=5)break;n[1]&&(r=1)}while(++o+t<e.length&&o+r<n.length);for(a=2;a<n.length;++a)-1===n[a]&&(n[a]=0);switch(n[0]){case 38:i.fg=this._updateAttrColor(i.fg,n[1],n[3],n[4],n[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,n[1],n[3],n[4],n[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,n[1],n[3],n[4],n[5])}return o},t.prototype._processUnderline=function(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()},t.prototype.charAttributes=function(e){if(1===e.length&&0===e.params[0])return this._curAttrData.fg=d.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=d.DEFAULT_ATTR_DATA.bg,!0;for(var t,i=e.length,n=this._curAttrData,r=0;r<i;r++)(t=e.params[r])>=30&&t<=37?(n.fg&=-50331904,n.fg|=16777216|t-30):t>=40&&t<=47?(n.bg&=-50331904,n.bg|=16777216|t-40):t>=90&&t<=97?(n.fg&=-50331904,n.fg|=16777224|t-90):t>=100&&t<=107?(n.bg&=-50331904,n.bg|=16777224|t-100):0===t?(n.fg=d.DEFAULT_ATTR_DATA.fg,n.bg=d.DEFAULT_ATTR_DATA.bg):1===t?n.fg|=134217728:3===t?n.bg|=67108864:4===t?(n.fg|=268435456,this._processUnderline(e.hasSubParams(r)?e.getSubParams(r)[0]:1,n)):5===t?n.fg|=536870912:7===t?n.fg|=67108864:8===t?n.fg|=1073741824:9===t?n.fg|=2147483648:2===t?n.bg|=134217728:21===t?this._processUnderline(2,n):22===t?(n.fg&=-134217729,n.bg&=-134217729):23===t?n.bg&=-67108865:24===t?n.fg&=-268435457:25===t?n.fg&=-536870913:27===t?n.fg&=-67108865:28===t?n.fg&=-1073741825:29===t?n.fg&=2147483647:39===t?(n.fg&=-67108864,n.fg|=16777215&d.DEFAULT_ATTR_DATA.fg):49===t?(n.bg&=-67108864,n.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):38===t||48===t||58===t?r+=this._extractColor(e,r,n):59===t?(n.extended=n.extended.clone(),n.extended.underlineColor=-1,n.updateExtended()):100===t?(n.fg&=-67108864,n.fg|=16777215&d.DEFAULT_ATTR_DATA.fg,n.bg&=-67108864,n.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",t);return!0},t.prototype.deviceStatus=function(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(s.C0.ESC+"[0n");break;case 6:var t=this._activeBuffer.y+1,i=this._activeBuffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+"["+t+";"+i+"R")}return!0},t.prototype.deviceStatusPrivate=function(e){if(6===e.params[0]){var t=this._activeBuffer.y+1,i=this._activeBuffer.x+1;this._coreService.triggerDataEvent(s.C0.ESC+"[?"+t+";"+i+"R")}return!0},t.prototype.softReset=function(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},t.prototype.setCursorStyle=function(e){var t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var i=t%2==1;return this._optionsService.options.cursorBlink=i,!0},t.prototype.setScrollRegion=function(e){var t,i=e.params[0]||1;return(e.length<2||(t=e.params[1])>this._bufferService.rows||0===t)&&(t=this._bufferService.rows),t>i&&(this._activeBuffer.scrollTop=i-1,this._activeBuffer.scrollBottom=t-1,this._setCursor(0,0)),!0},t.prototype.windowOptions=function(e){if(!S(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;var t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(o.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(o.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(s.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},t.prototype.saveCursor=function(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},t.prototype.restoreCursor=function(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},t.prototype.setTitle=function(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0},t.prototype.setIconName=function(e){return this._iconName=e,!0},t.prototype.setOrReportIndexedColor=function(e){for(var t=[],i=e.split(";");i.length>1;){var n=i.shift(),r=i.shift();if(/^\d+$/.exec(n)){var o=parseInt(n);if(0<=o&&o<256)if("?"===r)t.push({type:0,index:o});else{var s=(0,b.parseColor)(r);s&&t.push({type:1,index:o,color:s})}}}return t.length&&this._onColor.fire(t),!0},t.prototype._setOrReportSpecialColor=function(e,t){for(var i=e.split(";"),n=0;n<i.length&&!(t>=this._specialColors.length);++n,++t)if("?"===i[n])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{var r=(0,b.parseColor)(i[n]);r&&this._onColor.fire([{type:1,index:this._specialColors[t],color:r}])}return!0},t.prototype.setOrReportFgColor=function(e){return this._setOrReportSpecialColor(e,0)},t.prototype.setOrReportBgColor=function(e){return this._setOrReportSpecialColor(e,1)},t.prototype.setOrReportCursorColor=function(e){return this._setOrReportSpecialColor(e,2)},t.prototype.restoreIndexedColor=function(e){if(!e)return this._onColor.fire([{type:2}]),!0;for(var t=[],i=e.split(";"),n=0;n<i.length;++n)if(/^\d+$/.exec(i[n])){var r=parseInt(i[n]);0<=r&&r<256&&t.push({type:2,index:r})}return t.length&&this._onColor.fire(t),!0},t.prototype.restoreFgColor=function(e){return this._onColor.fire([{type:2,index:256}]),!0},t.prototype.restoreBgColor=function(e){return this._onColor.fire([{type:2,index:257}]),!0},t.prototype.restoreCursorColor=function(e){return this._onColor.fire([{type:2,index:258}]),!0},t.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},t.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},t.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},t.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,a.DEFAULT_CHARSET),!0},t.prototype.selectCharset=function(e){return 2!==e.length?(this.selectDefaultCharset(),!0):("/"===e[0]||this._charsetService.setgCharset(w[e[0]],a.CHARSETS[e[1]]||a.DEFAULT_CHARSET),!0)},t.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},t.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},t.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},t.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},t.prototype.reset=function(){this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone()},t.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},t.prototype.setgLevel=function(e){return this._charsetService.setgLevel(e),!0},t.prototype.screenAlignmentPattern=function(){var e=new v.CellData;e.content=1<<22|"E".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(var t=0;t<this._bufferService.rows;++t){var i=this._activeBuffer.ybase+this._activeBuffer.y+t,n=this._activeBuffer.lines.get(i);n&&(n.fill(e),n.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},t}(c.Disposable);t.InputHandler=x},844:function(e,t){var i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.Disposable=void 0;var n=function(){function e(){this._disposables=[],this._isDisposed=!1}return e.prototype.dispose=function(){var e,t;this._isDisposed=!0;try{for(var n=i(this._disposables),r=n.next();!r.done;r=n.next())r.value.dispose()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this._disposables.length=0},e.prototype.register=function(e){return this._disposables.push(e),e},e.prototype.unregister=function(e){var t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)},e}();function r(e){var t,n;try{for(var r=i(e),o=r.next();!o.done;o=r.next())o.value.dispose()}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.length=0}t.Disposable=n,t.disposeArray=r,t.getDisposeArrayDisposable=function(e){return{dispose:function(){return r(e)}}}},6114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.isSafari=t.isLegacyEdge=t.isFirefox=void 0;var i="undefined"==typeof navigator,n=i?"node":navigator.userAgent,r=i?"node":navigator.platform;t.isFirefox=n.includes("Firefox"),t.isLegacyEdge=n.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(n),t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(r),t.isIpad="iPad"===r,t.isIphone="iPhone"===r,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(r),t.isLinux=r.indexOf("Linux")>=0},6106:function(e,t){var i=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SortedList=void 0;var n=function(){function e(e){this._getKey=e,this._array=[]}return e.prototype.clear=function(){this._array.length=0},e.prototype.insert=function(e){if(0!==this._array.length){var t=this._search(this._getKey(e),0,this._array.length-1);this._array.splice(t,0,e)}else this._array.push(e)},e.prototype.delete=function(e){if(0===this._array.length)return!1;var t=this._getKey(e),i=this._search(t,0,this._array.length-1);if(this._getKey(this._array[i])!==t)return!1;do{if(this._array[i]===e)return this._array.splice(i,1),!0}while(++i<this._array.length&&this._getKey(this._array[i])===t);return!1},e.prototype.getKeyIterator=function(e){var t;return i(this,function(i){switch(i.label){case 0:if(0===this._array.length)return[2];if((t=this._search(e,0,this._array.length-1))<0||t>=this._array.length)return[2];if(this._getKey(this._array[t])!==e)return[2];i.label=1;case 1:return[4,this._array[t]];case 2:i.sent(),i.label=3;case 3:if(++t<this._array.length&&this._getKey(this._array[t])===e)return[3,1];i.label=4;case 4:return[2]}})},e.prototype.values=function(){return this._array.values()},e.prototype._search=function(e,t,i){if(i<t)return t;var n=Math.floor((t+i)/2);if(this._getKey(this._array[n])>e)return this._search(e,t,n-1);if(this._getKey(this._array[n])<e)return this._search(e,n+1,i);for(;n>0&&this._getKey(this._array[n-1])===e;)n--;return n},e}();t.SortedList=n},8273:(e,t)=>{function i(e,t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=e.length),i>=e.length)return e;i=(e.length+i)%e.length,n=n>=e.length?e.length:(e.length+n)%e.length;for(var r=i;r<n;++r)e[r]=t;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.concat=t.fillFallback=t.fill=void 0,t.fill=function(e,t,n,r){return e.fill?e.fill(t,n,r):i(e,t,n,r)},t.fillFallback=i,t.concat=function(e,t){var i=new e.constructor(e.length+t.length);return i.set(e),i.set(t,e.length),i}},9282:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;var n=i(643);t.updateWindowsModeWrappedState=function(e){var t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),i=null==t?void 0:t.get(e.cols-1),r=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);r&&i&&(r.isWrapped=i[n.CHAR_DATA_CODE_INDEX]!==n.NULL_CELL_CODE&&i[n.CHAR_DATA_CODE_INDEX]!==n.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;var i=function(){function e(){this.fg=0,this.bg=0,this.extended=new n}return e.toColorRGB=function(e){return[e>>>16&255,e>>>8&255,255&e]},e.fromColorRGB=function(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},e.prototype.clone=function(){var t=new e;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t},e.prototype.isInverse=function(){return 67108864&this.fg},e.prototype.isBold=function(){return 134217728&this.fg},e.prototype.isUnderline=function(){return 268435456&this.fg},e.prototype.isBlink=function(){return 536870912&this.fg},e.prototype.isInvisible=function(){return 1073741824&this.fg},e.prototype.isItalic=function(){return 67108864&this.bg},e.prototype.isDim=function(){return 134217728&this.bg},e.prototype.isStrikethrough=function(){return 2147483648&this.fg},e.prototype.getFgColorMode=function(){return 50331648&this.fg},e.prototype.getBgColorMode=function(){return 50331648&this.bg},e.prototype.isFgRGB=function(){return!(50331648&~this.fg)},e.prototype.isBgRGB=function(){return!(50331648&~this.bg)},e.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},e.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},e.prototype.isFgDefault=function(){return!(50331648&this.fg)},e.prototype.isBgDefault=function(){return!(50331648&this.bg)},e.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},e.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},e.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},e.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},e.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},e.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},e.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},e.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&~this.extended.underlineColor):this.isFgRGB()},e.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},e.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?!(50331648&this.extended.underlineColor):this.isFgDefault()},e.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},e}();t.AttributeData=i;var n=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=-1),this.underlineStyle=e,this.underlineColor=t}return e.prototype.clone=function(){return new e(this.underlineStyle,this.underlineColor)},e.prototype.isEmpty=function(){return 0===this.underlineStyle},e}();t.ExtendedAttrs=n},9092:function(e,t,i){var n=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferStringIterator=t.Buffer=t.MAX_BUFFER_SIZE=void 0;var o=i(6349),s=i(8437),a=i(511),l=i(643),c=i(4634),u=i(4863),h=i(7116),d=i(3734);t.MAX_BUFFER_SIZE=4294967295;var f=function(){function e(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=s.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=a.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]),this._whitespaceCell=a.CellData.fromCharData([0,l.WHITESPACE_CELL_CHAR,l.WHITESPACE_CELL_WIDTH,l.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new o.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return e.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell},e.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell},e.prototype.getBlankLine=function(e,t){return new s.BufferLine(this._bufferService.cols,this.getNullCell(e),t)},Object.defineProperty(e.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),e.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var i=e+this._optionsService.rawOptions.scrollback;return i>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:i},e.prototype.fillViewportRows=function(e){if(0===this.lines.length){void 0===e&&(e=s.DEFAULT_ATTR_DATA);for(var t=this._rows;t--;)this.lines.push(this.getBlankLine(e))}},e.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new o.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},e.prototype.resize=function(e,t){var i=this.getNullCell(s.DEFAULT_ATTR_DATA),n=this._getCorrectBufferLength(t);if(n>this.lines.maxLength&&(this.lines.maxLength=n),this.lines.length>0){if(this._cols<e)for(var r=0;r<this.lines.length;r++)this.lines.get(r).resize(e,i);var o=0;if(this._rows<t)for(var a=this._rows;a<t;a++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new s.BufferLine(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+o+1?(this.ybase--,o++,this.ydisp>0&&this.ydisp--):this.lines.push(new s.BufferLine(e,i)));else for(a=this._rows;a>t;a--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(n<this.lines.maxLength){var l=this.lines.length-n;l>0&&(this.lines.trimStart(l),this.ybase=Math.max(this.ybase-l,0),this.ydisp=Math.max(this.ydisp-l,0),this.savedY=Math.max(this.savedY-l,0)),this.lines.maxLength=n}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),o&&(this.y+=o),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(r=0;r<this.lines.length;r++)this.lines.get(r).resize(e,i);this._cols=e,this._rows=t},Object.defineProperty(e.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),e.prototype._reflow=function(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))},e.prototype._reflowLarger=function(e,t){var i=(0,c.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(s.DEFAULT_ATTR_DATA));if(i.length>0){var n=(0,c.reflowLargerCreateNewLayout)(this.lines,i);(0,c.reflowLargerApplyNewLayout)(this.lines,n.layout),this._reflowLargerAdjustViewport(e,t,n.countRemoved)}},e.prototype._reflowLargerAdjustViewport=function(e,t,i){for(var n=this.getNullCell(s.DEFAULT_ATTR_DATA),r=i;r-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new s.BufferLine(e,n))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)},e.prototype._reflowSmaller=function(e,t){for(var i=this.getNullCell(s.DEFAULT_ATTR_DATA),o=[],a=0,l=this.lines.length-1;l>=0;l--){var u=this.lines.get(l);if(!(!u||!u.isWrapped&&u.getTrimmedLength()<=e)){for(var h=[u];u.isWrapped&&l>0;)u=this.lines.get(--l),h.unshift(u);var d=this.ybase+this.y;if(!(d>=l&&d<l+h.length)){var f,p=h[h.length-1].getTrimmedLength(),v=(0,c.reflowSmallerGetNewLineLengths)(h,this._cols,e),_=v.length-h.length;f=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+_):Math.max(0,this.lines.length-this.lines.maxLength+_);for(var m=[],g=0;g<_;g++){var y=this.getBlankLine(s.DEFAULT_ATTR_DATA,!0);m.push(y)}m.length>0&&(o.push({start:l+h.length+a,newLines:m}),a+=m.length),h.push.apply(h,r([],n(m),!1));var b=v.length-1,w=v[b];0===w&&(w=v[--b]);for(var C=h.length-_-1,S=p;C>=0;){var k=Math.min(S,w);if(void 0===h[b])break;if(h[b].copyCellsFrom(h[C],S-k,w-k,k,!0),0==(w-=k)&&(w=v[--b]),0==(S-=k)){C--;var x=Math.max(C,0);S=(0,c.getWrappedLineTrimmedLength)(h,x,this._cols)}}for(g=0;g<h.length;g++)v[g]<e&&h[g].setCell(v[g],i);for(var E=_-f;E-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+a)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+_,this.ybase+t-1)}}}if(o.length>0){var L=[],M=[];for(g=0;g<this.lines.length;g++)M.push(this.lines.get(g));var O=this.lines.length,T=O-1,D=0,R=o[D];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+a);var A=0;for(g=Math.min(this.lines.maxLength-1,O+a-1);g>=0;g--)if(R&&R.start>T+A){for(var P=R.newLines.length-1;P>=0;P--)this.lines.set(g--,R.newLines[P]);g++,L.push({index:T+1,amount:R.newLines.length}),A+=R.newLines.length,R=o[++D]}else this.lines.set(g,M[T--]);var B=0;for(g=L.length-1;g>=0;g--)L[g].index+=B,this.lines.onInsertEmitter.fire(L[g]),B+=L[g].amount;var I=Math.max(0,O+a-this.lines.maxLength);I>0&&this.lines.onTrimEmitter.fire(I)}},e.prototype.stringIndexToBufferIndex=function(e,t,i){for(void 0===i&&(i=!1);t;){var n=this.lines.get(e);if(!n)return[-1,-1];for(var r=i?n.getTrimmedLength():n.length,o=0;o<r;++o)if(n.get(o)[l.CHAR_DATA_WIDTH_INDEX]&&(t-=n.get(o)[l.CHAR_DATA_CHAR_INDEX].length||1),t<0)return[e,o];e++}return[e,0]},e.prototype.translateBufferLineToString=function(e,t,i,n){void 0===i&&(i=0);var r=this.lines.get(e);return r?r.translateToString(t,i,n):""},e.prototype.getWrappedRangeForLine=function(e){for(var t=e,i=e;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}},e.prototype.setupTabStops=function(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0},e.prototype.prevStop=function(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},e.prototype.nextStop=function(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},e.prototype.clearMarkers=function(e){this._isClearing=!0;for(var t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1},e.prototype.clearAllMarkers=function(){this._isClearing=!0;for(var e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1},e.prototype.addMarker=function(e){var t=this,i=new u.Marker(e);return this.markers.push(i),i.register(this.lines.onTrim(function(e){i.line-=e,i.line<0&&i.dispose()})),i.register(this.lines.onInsert(function(e){i.line>=e.index&&(i.line+=e.amount)})),i.register(this.lines.onDelete(function(e){i.line>=e.index&&i.line<e.index+e.amount&&i.dispose(),i.line>e.index&&(i.line-=e.amount)})),i.register(i.onDispose(function(){return t._removeMarker(i)})),i},e.prototype._removeMarker=function(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)},e.prototype.iterator=function(e,t,i,n,r){return new p(this,e,t,i,n,r)},e}();t.Buffer=f;var p=function(){function e(e,t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=e.lines.length),void 0===r&&(r=0),void 0===o&&(o=0),this._buffer=e,this._trimRight=t,this._startIndex=i,this._endIndex=n,this._startOverscan=r,this._endOverscan=o,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return e.prototype.hasNext=function(){return this._current<this._endIndex},e.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var t="",i=e.first;i<=e.last;++i)t+=this._buffer.translateBufferLineToString(i,this._trimRight);return this._current=e.last+1,{range:e,content:t}},e}();t.BufferStringIterator=p},8437:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;var n=i(482),r=i(643),o=i(511),s=i(3734);t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);var a=function(){function e(e,t,i){void 0===i&&(i=!1),this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);for(var n=t||o.CellData.fromCharData([0,r.NULL_CELL_CHAR,r.NULL_CELL_WIDTH,r.NULL_CELL_CODE]),s=0;s<e;++s)this.setCell(s,n);this.length=e}return e.prototype.get=function(e){var t=this._data[3*e+0],i=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:i?(0,n.stringFromCodePoint)(i):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):i]},e.prototype.set=function(e,t){this._data[3*e+1]=t[r.CHAR_DATA_ATTR_INDEX],t[r.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[r.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[r.CHAR_DATA_WIDTH_INDEX]<<22},e.prototype.getWidth=function(e){return this._data[3*e+0]>>22},e.prototype.hasWidth=function(e){return 12582912&this._data[3*e+0]},e.prototype.getFg=function(e){return this._data[3*e+1]},e.prototype.getBg=function(e){return this._data[3*e+2]},e.prototype.hasContent=function(e){return 4194303&this._data[3*e+0]},e.prototype.getCodePoint=function(e){var t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t},e.prototype.isCombined=function(e){return 2097152&this._data[3*e+0]},e.prototype.getString=function(e){var t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,n.stringFromCodePoint)(2097151&t):""},e.prototype.loadCell=function(e,t){var i=3*e;return t.content=this._data[i+0],t.fg=this._data[i+1],t.bg=this._data[i+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t},e.prototype.setCell=function(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg},e.prototype.setCellFromCodePoint=function(e,t,i,n,r,o){268435456&r&&(this._extendedAttrs[e]=o),this._data[3*e+0]=t|i<<22,this._data[3*e+1]=n,this._data[3*e+2]=r},e.prototype.addCodepointToCell=function(e,t){var i=this._data[3*e+0];2097152&i?this._combined[e]+=(0,n.stringFromCodePoint)(t):(2097151&i?(this._combined[e]=(0,n.stringFromCodePoint)(2097151&i)+(0,n.stringFromCodePoint)(t),i&=-2097152,i|=2097152):i=t|1<<22,this._data[3*e+0]=i)},e.prototype.insertCells=function(e,t,i,n){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new s.ExtendedAttrs),t<this.length-e){for(var r=new o.CellData,a=this.length-e-t-1;a>=0;--a)this.setCell(e+t+a,this.loadCell(e+a,r));for(a=0;a<t;++a)this.setCell(e+a,i)}else for(a=e;a<this.length;++a)this.setCell(a,i);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new s.ExtendedAttrs)},e.prototype.deleteCells=function(e,t,i,n){if(e%=this.length,t<this.length-e){for(var r=new o.CellData,a=0;a<this.length-e-t;++a)this.setCell(e+a,this.loadCell(e+t+a,r));for(a=this.length-t;a<this.length;++a)this.setCell(a,i)}else for(a=e;a<this.length;++a)this.setCell(a,i);e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new s.ExtendedAttrs),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodePoint(e,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new s.ExtendedAttrs)},e.prototype.replaceCells=function(e,t,i,n){for(e&&2===this.getWidth(e-1)&&this.setCellFromCodePoint(e-1,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new s.ExtendedAttrs),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodePoint(t,0,1,(null==n?void 0:n.fg)||0,(null==n?void 0:n.bg)||0,(null==n?void 0:n.extended)||new s.ExtendedAttrs);e<t&&e<this.length;)this.setCell(e++,i)},e.prototype.resize=function(e,t){if(e!==this.length){if(e>this.length){var i=new Uint32Array(3*e);this.length&&(3*e<this._data.length?i.set(this._data.subarray(0,3*e)):i.set(this._data)),this._data=i;for(var n=this.length;n<e;++n)this.setCell(n,t)}else if(e){(i=new Uint32Array(3*e)).set(this._data.subarray(0,3*e)),this._data=i;var r=Object.keys(this._combined);for(n=0;n<r.length;n++){var o=parseInt(r[n],10);o>=e&&delete this._combined[o]}}else this._data=new Uint32Array(0),this._combined={};this.length=e}},e.prototype.fill=function(e){this._combined={},this._extendedAttrs={};for(var t=0;t<this.length;++t)this.setCell(t,e)},e.prototype.copyFrom=function(e){for(var t in this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={},e._combined)this._combined[t]=e._combined[t];for(var t in this._extendedAttrs={},e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped},e.prototype.clone=function(){var t=new e(0);for(var i in t._data=new Uint32Array(this._data),t.length=this.length,this._combined)t._combined[i]=this._combined[i];for(var i in this._extendedAttrs)t._extendedAttrs[i]=this._extendedAttrs[i];return t.isWrapped=this.isWrapped,t},e.prototype.getTrimmedLength=function(){for(var e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0},e.prototype.copyCellsFrom=function(e,t,i,n,r){var o=e._data;if(r)for(var s=n-1;s>=0;s--)for(var a=0;a<3;a++)this._data[3*(i+s)+a]=o[3*(t+s)+a];else for(s=0;s<n;s++)for(a=0;a<3;a++)this._data[3*(i+s)+a]=o[3*(t+s)+a];var l=Object.keys(e._combined);for(a=0;a<l.length;a++){var c=parseInt(l[a],10);c>=t&&(this._combined[c-t+i]=e._combined[c])}},e.prototype.translateToString=function(e,t,i){void 0===e&&(e=!1),void 0===t&&(t=0),void 0===i&&(i=this.length),e&&(i=Math.min(i,this.getTrimmedLength()));for(var o="";t<i;){var s=this._data[3*t+0],a=2097151&s;o+=2097152&s?this._combined[t]:a?(0,n.stringFromCodePoint)(a):r.WHITESPACE_CELL_CHAR,t+=s>>22||1}return o},e}();t.BufferLine=a},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error("Buffer range end ("+e.end.x+", "+e.end.y+") cannot be before start ("+e.start.x+", "+e.start.y+")");return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function i(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();var n=!e[t].hasContent(i-1)&&1===e[t].getWidth(i-1),r=2===e[t+1].getWidth(0);return n&&r?i-1:i}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,n,r,o){for(var s=[],a=0;a<e.length-1;a++){var l=a,c=e.get(++l);if(c.isWrapped){for(var u=[e.get(a)];l<e.length&&c.isWrapped;)u.push(c),c=e.get(++l);if(r>=a&&r<l)a+=u.length-1;else{for(var h=0,d=i(u,h,t),f=1,p=0;f<u.length;){var v=i(u,f,t),_=v-p,m=n-d,g=Math.min(_,m);u[h].copyCellsFrom(u[f],p,d,g,!1),(d+=g)===n&&(h++,d=0),(p+=g)===v&&(f++,p=0),0===d&&0!==h&&2===u[h-1].getWidth(n-1)&&(u[h].copyCellsFrom(u[h-1],n-1,d++,1,!1),u[h-1].setCell(n-1,o))}u[h].replaceCells(d,n,o);for(var y=0,b=u.length-1;b>0&&(b>h||0===u[b].getTrimmedLength());b--)y++;y>0&&(s.push(a+u.length-y),s.push(y)),a+=u.length-1}}}return s},t.reflowLargerCreateNewLayout=function(e,t){for(var i=[],n=0,r=t[n],o=0,s=0;s<e.length;s++)if(r===s){var a=t[++n];e.onDeleteEmitter.fire({index:s-o,amount:a}),s+=a-1,o+=a,r=t[++n]}else i.push(s);return{layout:i,countRemoved:o}},t.reflowLargerApplyNewLayout=function(e,t){for(var i=[],n=0;n<t.length;n++)i.push(e.get(t[n]));for(n=0;n<i.length;n++)e.set(n,i[n]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,n){for(var r=[],o=e.map(function(n,r){return i(e,r,t)}).reduce(function(e,t){return e+t}),s=0,a=0,l=0;l<o;){if(o-l<n){r.push(o-l);break}s+=n;var c=i(e,a,t);s>c&&(s-=c,a++);var u=2===e[a].getWidth(s-1);u&&s--;var h=u?n-1:n;r.push(h),l+=h}return r},t.getWrappedLineTrimmedLength=i},5295:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;var o=i(9092),s=i(8460),a=function(e){function t(t,i){var n=e.call(this)||this;return n._optionsService=t,n._bufferService=i,n._onBufferActivate=n.register(new s.EventEmitter),n.reset(),n}return r(t,e),Object.defineProperty(t.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._normal=new o.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new o.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(t.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),t.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},t.prototype.activateAltBuffer=function(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},t.prototype.resize=function(e,t){this._normal.resize(e,t),this._alt.resize(e,t)},t.prototype.setupTabStops=function(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)},t}(i(844).Disposable);t.BufferSet=a},511:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;var o=i(482),s=i(643),a=i(3734),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=0,t.fg=0,t.bg=0,t.extended=new a.ExtendedAttrs,t.combinedData="",t}return r(t,e),t.fromCharData=function(e){var i=new t;return i.setFromCharData(e),i},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,o.stringFromCodePoint)(2097151&this.content):""},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(e){this.fg=e[s.CHAR_DATA_ATTR_INDEX],this.bg=0;var t=!1;if(e[s.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[s.CHAR_DATA_CHAR_INDEX].length){var i=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var n=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=n&&n<=57343?this.content=1024*(i-55296)+n-56320+65536|e[s.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[s.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[s.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(a.AttributeData);t.CellData=l},643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=256,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;var o=i(8460),s=function(e){function t(i){var n=e.call(this)||this;return n.line=i,n._id=t._nextId++,n.isDisposed=!1,n._onDispose=new o.EventEmitter,n}return r(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),e.prototype.dispose.call(this))},t._nextId=1,t}(i(844).Disposable);t.Marker=s},7116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},t.CHARSETS.A={"#":""},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},t.CHARSETS.C=t.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},t.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},t.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.E=t.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},t.CHARSETS.H=t.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},t.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(e,t)=>{var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,function(e){e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="",e.BS="\b",e.HT="\t",e.LF="\n",e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""}(i=t.C0||(t.C0={})),(n=t.C1||(t.C1={})).PAD="",n.HOP="",n.BPH="",n.NBH="",n.IND="",n.NEL="",n.SSA="",n.ESA="",n.HTS="",n.HTJ="",n.VTS="",n.PLD="",n.PLU="",n.RI="",n.SS2="",n.SS3="",n.DCS="",n.PU1="",n.PU2="",n.STS="",n.CCH="",n.MW="",n.SPA="",n.EPA="",n.SOS="",n.SGCI="",n.SCI="",n.CSI="",n.ST="",n.OSC="",n.PM="",n.APC="",(t.C1_ESCAPED||(t.C1_ESCAPED={})).ST=i.ESC+"\\"},7399:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;var n=i(2584),r={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};t.evaluateKeyboardEvent=function(e,t,i,o){var s={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?s.key=t?n.C0.ESC+"OA":n.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?s.key=t?n.C0.ESC+"OD":n.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?s.key=t?n.C0.ESC+"OC":n.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(s.key=t?n.C0.ESC+"OB":n.C0.ESC+"[B");break;case 8:if(e.shiftKey){s.key=n.C0.BS;break}if(e.altKey){s.key=n.C0.ESC+n.C0.DEL;break}s.key=n.C0.DEL;break;case 9:if(e.shiftKey){s.key=n.C0.ESC+"[Z";break}s.key=n.C0.HT,s.cancel=!0;break;case 13:s.key=e.altKey?n.C0.ESC+n.C0.CR:n.C0.CR,s.cancel=!0;break;case 27:s.key=n.C0.ESC,e.altKey&&(s.key=n.C0.ESC+n.C0.ESC),s.cancel=!0;break;case 37:if(e.metaKey)break;a?(s.key=n.C0.ESC+"[1;"+(a+1)+"D",s.key===n.C0.ESC+"[1;3D"&&(s.key=n.C0.ESC+(i?"b":"[1;5D"))):s.key=t?n.C0.ESC+"OD":n.C0.ESC+"[D";break;case 39:if(e.metaKey)break;a?(s.key=n.C0.ESC+"[1;"+(a+1)+"C",s.key===n.C0.ESC+"[1;3C"&&(s.key=n.C0.ESC+(i?"f":"[1;5C"))):s.key=t?n.C0.ESC+"OC":n.C0.ESC+"[C";break;case 38:if(e.metaKey)break;a?(s.key=n.C0.ESC+"[1;"+(a+1)+"A",i||s.key!==n.C0.ESC+"[1;3A"||(s.key=n.C0.ESC+"[1;5A")):s.key=t?n.C0.ESC+"OA":n.C0.ESC+"[A";break;case 40:if(e.metaKey)break;a?(s.key=n.C0.ESC+"[1;"+(a+1)+"B",i||s.key!==n.C0.ESC+"[1;3B"||(s.key=n.C0.ESC+"[1;5B")):s.key=t?n.C0.ESC+"OB":n.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(s.key=n.C0.ESC+"[2~");break;case 46:s.key=a?n.C0.ESC+"[3;"+(a+1)+"~":n.C0.ESC+"[3~";break;case 36:s.key=a?n.C0.ESC+"[1;"+(a+1)+"H":t?n.C0.ESC+"OH":n.C0.ESC+"[H";break;case 35:s.key=a?n.C0.ESC+"[1;"+(a+1)+"F":t?n.C0.ESC+"OF":n.C0.ESC+"[F";break;case 33:e.shiftKey?s.type=2:e.ctrlKey?s.key=n.C0.ESC+"[5;"+(a+1)+"~":s.key=n.C0.ESC+"[5~";break;case 34:e.shiftKey?s.type=3:e.ctrlKey?s.key=n.C0.ESC+"[6;"+(a+1)+"~":s.key=n.C0.ESC+"[6~";break;case 112:s.key=a?n.C0.ESC+"[1;"+(a+1)+"P":n.C0.ESC+"OP";break;case 113:s.key=a?n.C0.ESC+"[1;"+(a+1)+"Q":n.C0.ESC+"OQ";break;case 114:s.key=a?n.C0.ESC+"[1;"+(a+1)+"R":n.C0.ESC+"OR";break;case 115:s.key=a?n.C0.ESC+"[1;"+(a+1)+"S":n.C0.ESC+"OS";break;case 116:s.key=a?n.C0.ESC+"[15;"+(a+1)+"~":n.C0.ESC+"[15~";break;case 117:s.key=a?n.C0.ESC+"[17;"+(a+1)+"~":n.C0.ESC+"[17~";break;case 118:s.key=a?n.C0.ESC+"[18;"+(a+1)+"~":n.C0.ESC+"[18~";break;case 119:s.key=a?n.C0.ESC+"[19;"+(a+1)+"~":n.C0.ESC+"[19~";break;case 120:s.key=a?n.C0.ESC+"[20;"+(a+1)+"~":n.C0.ESC+"[20~";break;case 121:s.key=a?n.C0.ESC+"[21;"+(a+1)+"~":n.C0.ESC+"[21~";break;case 122:s.key=a?n.C0.ESC+"[23;"+(a+1)+"~":n.C0.ESC+"[23~";break;case 123:s.key=a?n.C0.ESC+"[24;"+(a+1)+"~":n.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(i&&!o||!e.altKey||e.metaKey)!i||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?s.key=e.key:e.key&&e.ctrlKey&&("_"===e.key&&(s.key=n.C0.US),"@"===e.key&&(s.key=n.C0.NUL)):65===e.keyCode&&(s.type=1);else{var l=r[e.keyCode],c=null==l?void 0:l[e.shiftKey?1:0];if(c)s.key=n.C0.ESC+c;else if(e.keyCode>=65&&e.keyCode<=90){var u=e.ctrlKey?e.keyCode-64:e.keyCode+32,h=String.fromCharCode(u);e.shiftKey&&(h=h.toUpperCase()),s.key=n.C0.ESC+h}else"Dead"===e.key&&e.code.startsWith("Key")&&(h=e.code.slice(3,4),e.shiftKey||(h=h.toLowerCase()),s.key=n.C0.ESC+h,s.cancel=!0)}else e.keyCode>=65&&e.keyCode<=90?s.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?s.key=n.C0.NUL:e.keyCode>=51&&e.keyCode<=55?s.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?s.key=n.C0.DEL:219===e.keyCode?s.key=n.C0.ESC:220===e.keyCode?s.key=n.C0.FS:221===e.keyCode&&(s.key=n.C0.GS)}return s}},482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=e.length);for(var n="",r=t;r<i;++r){var o=e[r];o>65535?(o-=65536,n+=String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):n+=String.fromCharCode(o)}return n};var i=function(){function e(){this._interim=0}return e.prototype.clear=function(){this._interim=0},e.prototype.decode=function(e,t){var i=e.length;if(!i)return 0;var n=0,r=0;this._interim&&(56320<=(a=e.charCodeAt(r++))&&a<=57343?t[n++]=1024*(this._interim-55296)+a-56320+65536:(t[n++]=this._interim,t[n++]=a),this._interim=0);for(var o=r;o<i;++o){var s=e.charCodeAt(o);if(55296<=s&&s<=56319){if(++o>=i)return this._interim=s,n;var a;56320<=(a=e.charCodeAt(o))&&a<=57343?t[n++]=1024*(s-55296)+a-56320+65536:(t[n++]=s,t[n++]=a)}else 65279!==s&&(t[n++]=s)}return n},e}();t.StringToUtf32=i;var n=function(){function e(){this.interim=new Uint8Array(3)}return e.prototype.clear=function(){this.interim.fill(0)},e.prototype.decode=function(e,t){var i=e.length;if(!i)return 0;var n,r,o,s,a=0,l=0,c=0;if(this.interim[0]){var u=!1,h=this.interim[0];h&=192==(224&h)?31:224==(240&h)?15:7;for(var d=0,f=void 0;(f=63&this.interim[++d])&&d<4;)h<<=6,h|=f;for(var p=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,v=p-d;c<v;){if(c>=i)return 0;if(128!=(192&(f=e[c++]))){c--,u=!0;break}this.interim[d++]=f,h<<=6,h|=63&f}u||(2===p?h<128?c--:t[a++]=h:3===p?h<2048||h>=55296&&h<=57343||65279===h||(t[a++]=h):h<65536||h>1114111||(t[a++]=h)),this.interim.fill(0)}for(var _=i-4,m=c;m<i;){for(;!(!(m<_)||128&(n=e[m])||128&(r=e[m+1])||128&(o=e[m+2])||128&(s=e[m+3]));)t[a++]=n,t[a++]=r,t[a++]=o,t[a++]=s,m+=4;if((n=e[m++])<128)t[a++]=n;else if(192==(224&n)){if(m>=i)return this.interim[0]=n,a;if(128!=(192&(r=e[m++]))){m--;continue}if((l=(31&n)<<6|63&r)<128){m--;continue}t[a++]=l}else if(224==(240&n)){if(m>=i)return this.interim[0]=n,a;if(128!=(192&(r=e[m++]))){m--;continue}if(m>=i)return this.interim[0]=n,this.interim[1]=r,a;if(128!=(192&(o=e[m++]))){m--;continue}if((l=(15&n)<<12|(63&r)<<6|63&o)<2048||l>=55296&&l<=57343||65279===l)continue;t[a++]=l}else if(240==(248&n)){if(m>=i)return this.interim[0]=n,a;if(128!=(192&(r=e[m++]))){m--;continue}if(m>=i)return this.interim[0]=n,this.interim[1]=r,a;if(128!=(192&(o=e[m++]))){m--;continue}if(m>=i)return this.interim[0]=n,this.interim[1]=r,this.interim[2]=o,a;if(128!=(192&(s=e[m++]))){m--;continue}if((l=(7&n)<<18|(63&r)<<12|(63&o)<<6|63&s)<65536||l>1114111)continue;t[a++]=l}}return a},e}();t.Utf8ToUtf32=n},225:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;var n,r=i(8273),o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],s=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],a=function(){function e(){if(this.version="6",!n){n=new Uint8Array(65536),(0,r.fill)(n,1),n[0]=0,(0,r.fill)(n,0,1,32),(0,r.fill)(n,0,127,160),(0,r.fill)(n,2,4352,4448),n[9001]=2,n[9002]=2,(0,r.fill)(n,2,11904,42192),n[12351]=1,(0,r.fill)(n,2,44032,55204),(0,r.fill)(n,2,63744,64256),(0,r.fill)(n,2,65040,65050),(0,r.fill)(n,2,65072,65136),(0,r.fill)(n,2,65280,65377),(0,r.fill)(n,2,65504,65511);for(var e=0;e<o.length;++e)(0,r.fill)(n,0,o[e][0],o[e][1]+1)}}return e.prototype.wcwidth=function(e){return e<32?0:e<127?1:e<65536?n[e]:function(e,t){var i,n=0,r=t.length-1;if(e<t[0][0]||e>t[r][1])return!1;for(;r>=n;)if(e>t[i=n+r>>1][1])n=i+1;else{if(!(e<t[i][0]))return!0;r=i-1}return!1}(e,s)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1},e}();t.UnicodeV6=a},5981:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;var n=i(8460),r="undefined"==typeof queueMicrotask?function(e){Promise.resolve().then(e)}:queueMicrotask,o=function(){function e(e){this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._onWriteParsed=new n.EventEmitter}return Object.defineProperty(e.prototype,"onWriteParsed",{get:function(){return this._onWriteParsed.event},enumerable:!1,configurable:!0}),e.prototype.writeSync=function(e,t){if(void 0!==t&&this._syncCalls>t)this._syncCalls=0;else if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var i;for(this._isSyncWriting=!0;i=this._writeBuffer.shift();){this._action(i);var n=this._callbacks.shift();n&&n()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},e.prototype.write=function(e,t){var i=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return i._innerWrite()})),this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)},e.prototype._innerWrite=function(e,t){var i=this;void 0===e&&(e=0),void 0===t&&(t=!0);for(var n=e||Date.now();this._writeBuffer.length>this._bufferOffset;){var o=this._writeBuffer[this._bufferOffset],s=this._action(o,t);if(s)return void s.catch(function(e){return r(function(){throw e}),Promise.resolve(!1)}).then(function(e){return Date.now()-n>=12?setTimeout(function(){return i._innerWrite(0,e)}):i._innerWrite(n,e)});var a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-n>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return i._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()},e}();t.WriteBuffer=o},5941:function(e,t){var i=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;var n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,r=/^[\da-f]+$/;function o(e,t){var i=e.toString(16),n=i.length<2?"0"+i:i;switch(t){case 4:return i[0];case 8:return n;case 12:return(n+n).slice(0,3);default:return n+n}}t.parseColor=function(e){if(e){var t=e.toLowerCase();if(0===t.indexOf("rgb:")){t=t.slice(4);var i=n.exec(t);if(i){var o=i[1]?15:i[4]?255:i[7]?4095:65535;return[Math.round(parseInt(i[1]||i[4]||i[7]||i[10],16)/o*255),Math.round(parseInt(i[2]||i[5]||i[8]||i[11],16)/o*255),Math.round(parseInt(i[3]||i[6]||i[9]||i[12],16)/o*255)]}}else if(0===t.indexOf("#")&&(t=t.slice(1),r.exec(t)&&[3,6,9,12].includes(t.length))){for(var s=t.length/3,a=[0,0,0],l=0;l<3;++l){var c=parseInt(t.slice(s*l,s*l+s),16);a[l]=1===s?c<<4:2===s?c:3===s?c>>4:c>>8}return a}}},t.toRgbString=function(e,t){void 0===t&&(t=16);var n=i(e,3),r=n[0],s=n[1],a=n[2];return"rgb:"+o(r,t)+"/"+o(s,t)+"/"+o(a,t)}},5770:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;var n=i(482),r=i(8742),o=i(5770),s=[],a=function(){function e(){this._handlers=Object.create(null),this._active=s,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=s},e.prototype.registerHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var i=this._handlers[e];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.reset=function(){if(this._active.length)for(var e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=s,this._ident=0},e.prototype.hook=function(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||s,this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].hook(t);else this._handlerFb(this._ident,"HOOK",t)},e.prototype.put=function(e,t,i){if(this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].put(e,t,i);else this._handlerFb(this._ident,"PUT",(0,n.utf32ToString)(e,t,i))},e.prototype.unhook=function(e,t){if(void 0===t&&(t=!0),this._active.length){var i=!1,n=this._active.length-1,r=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===i){for(;n>=0&&!0!==(i=this._active[n].unhook(e));n--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,i;n--}for(;n>=0;n--)if((i=this._active[n].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,"UNHOOK",e);this._active=s,this._ident=0},e}();t.DcsParser=a;var l=new r.Params;l.addParam(0);var c=function(){function e(e){this._handler=e,this._data="",this._params=l,this._hitLimit=!1}return e.prototype.hook=function(e){this._params=e.length>1||e.params[0]?e.clone():l,this._data="",this._hitLimit=!1},e.prototype.put=function(e,t,i){this._hitLimit||(this._data+=(0,n.utf32ToString)(e,t,i),this._data.length>o.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.unhook=function(e){var t=this,i=!1;if(this._hitLimit)i=!1;else if(e&&(i=this._handler(this._data,this._params))instanceof Promise)return i.then(function(e){return t._params=l,t._data="",t._hitLimit=!1,e});return this._params=l,this._data="",this._hitLimit=!1,i},e}();t.DcsHandler=c},2015:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;var o=i(844),s=i(8273),a=i(8742),l=i(6242),c=i(6351),u=function(){function e(e){this.table=new Uint8Array(e)}return e.prototype.setDefault=function(e,t){(0,s.fill)(this.table,e<<4|t)},e.prototype.add=function(e,t,i,n){this.table[t<<8|e]=i<<4|n},e.prototype.addMany=function(e,t,i,n){for(var r=0;r<e.length;r++)this.table[t<<8|e[r]]=i<<4|n},e}();t.TransitionTable=u;var h=160;t.VT500_TRANSITION_TABLE=function(){var e=new u(4095),t=Array.apply(null,Array(256)).map(function(e,t){return t}),i=function(e,i){return t.slice(e,i)},n=i(32,127),r=i(0,24);r.push(25),r.push.apply(r,i(28,32));var o,s=i(0,14);for(o in e.setDefault(1,0),e.addMany(n,0,2,0),s)e.addMany([24,26,153,154],o,3,0),e.addMany(i(128,144),o,3,0),e.addMany(i(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(r,0,3,0),e.addMany(r,1,3,1),e.add(127,1,0,1),e.addMany(r,8,0,8),e.addMany(r,3,3,3),e.add(127,3,0,3),e.addMany(r,4,3,4),e.add(127,4,0,4),e.addMany(r,6,3,6),e.addMany(r,5,3,5),e.add(127,5,0,5),e.addMany(r,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(n,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(n,7,0,7),e.addMany(r,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(r,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(r,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(r,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(r,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(r,13,13,13),e.addMany(n,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(h,0,2,0),e.add(h,8,5,8),e.add(h,6,0,6),e.add(h,11,0,11),e.add(h,13,13,13),e}();var d=function(e){function i(i){void 0===i&&(i=t.VT500_TRANSITION_TABLE);var n=e.call(this)||this;return n._transitions=i,n._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},n.initialState=0,n.currentState=n.initialState,n._params=new a.Params,n._params.addParam(0),n._collect=0,n.precedingCodepoint=0,n._printHandlerFb=function(e,t,i){},n._executeHandlerFb=function(e){},n._csiHandlerFb=function(e,t){},n._escHandlerFb=function(e){},n._errorHandlerFb=function(e){return e},n._printHandler=n._printHandlerFb,n._executeHandlers=Object.create(null),n._csiHandlers=Object.create(null),n._escHandlers=Object.create(null),n._oscParser=new l.OscParser,n._dcsParser=new c.DcsParser,n._errorHandler=n._errorHandlerFb,n.registerEscHandler({final:"\\"},function(){return!0}),n}return r(i,e),i.prototype._identifier=function(e,t){void 0===t&&(t=[64,126]);var i=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if((i=e.prefix.charCodeAt(0))&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var n=0;n<e.intermediates.length;++n){var r=e.intermediates.charCodeAt(n);if(32>r||r>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=r}}if(1!==e.final.length)throw new Error("final must be a single byte");var o=e.final.charCodeAt(0);if(t[0]>o||o>t[1])throw new Error("final must be in range "+t[0]+" .. "+t[1]);return(i<<=8)|o},i.prototype.identToString=function(e){for(var t=[];e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join("")},i.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},i.prototype.setPrintHandler=function(e){this._printHandler=e},i.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},i.prototype.registerEscHandler=function(e,t){var i=this._identifier(e,[48,126]);void 0===this._escHandlers[i]&&(this._escHandlers[i]=[]);var n=this._escHandlers[i];return n.push(t),{dispose:function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},i.prototype.clearEscHandler=function(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]},i.prototype.setEscHandlerFallback=function(e){this._escHandlerFb=e},i.prototype.setExecuteHandler=function(e,t){this._executeHandlers[e.charCodeAt(0)]=t},i.prototype.clearExecuteHandler=function(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]},i.prototype.setExecuteHandlerFallback=function(e){this._executeHandlerFb=e},i.prototype.registerCsiHandler=function(e,t){var i=this._identifier(e);void 0===this._csiHandlers[i]&&(this._csiHandlers[i]=[]);var n=this._csiHandlers[i];return n.push(t),{dispose:function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},i.prototype.clearCsiHandler=function(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]},i.prototype.setCsiHandlerFallback=function(e){this._csiHandlerFb=e},i.prototype.registerDcsHandler=function(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)},i.prototype.clearDcsHandler=function(e){this._dcsParser.clearHandler(this._identifier(e))},i.prototype.setDcsHandlerFallback=function(e){this._dcsParser.setHandlerFallback(e)},i.prototype.registerOscHandler=function(e,t){return this._oscParser.registerHandler(e,t)},i.prototype.clearOscHandler=function(e){this._oscParser.clearHandler(e)},i.prototype.setOscHandlerFallback=function(e){this._oscParser.setHandlerFallback(e)},i.prototype.setErrorHandler=function(e){this._errorHandler=e},i.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},i.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])},i.prototype._preserveStack=function(e,t,i,n,r){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=n,this._parseStack.chunkPos=r},i.prototype.parse=function(e,t,i){var n,r=0,o=0,s=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,s=this._parseStack.chunkPos+1;else{if(void 0===i||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var a=this._parseStack.handlers,l=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===i&&l>-1)for(;l>=0&&!0!==(n=a[l](this._params));l--)if(n instanceof Promise)return this._parseStack.handlerPos=l,n;this._parseStack.handlers=[];break;case 4:if(!1===i&&l>-1)for(;l>=0&&!0!==(n=a[l]());l--)if(n instanceof Promise)return this._parseStack.handlerPos=l,n;this._parseStack.handlers=[];break;case 6:if(r=e[this._parseStack.chunkPos],n=this._dcsParser.unhook(24!==r&&26!==r,i))return n;27===r&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(r=e[this._parseStack.chunkPos],n=this._oscParser.end(24!==r&&26!==r,i))return n;27===r&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,s=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var c=s;c<t;++c){switch(r=e[c],(o=this._transitions.table[this.currentState<<8|(r<160?r:h)])>>4){case 2:for(var u=c+1;;++u){if(u>=t||(r=e[u])<32||r>126&&r<h){this._printHandler(e,c,u),c=u-1;break}if(++u>=t||(r=e[u])<32||r>126&&r<h){this._printHandler(e,c,u),c=u-1;break}if(++u>=t||(r=e[u])<32||r>126&&r<h){this._printHandler(e,c,u),c=u-1;break}if(++u>=t||(r=e[u])<32||r>126&&r<h){this._printHandler(e,c,u),c=u-1;break}}break;case 3:this._executeHandlers[r]?this._executeHandlers[r]():this._executeHandlerFb(r),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:c,code:r,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var d=(a=this._csiHandlers[this._collect<<8|r])?a.length-1:-1;d>=0&&!0!==(n=a[d](this._params));d--)if(n instanceof Promise)return this._preserveStack(3,a,d,o,c),n;d<0&&this._csiHandlerFb(this._collect<<8|r,this._params),this.precedingCodepoint=0;break;case 8:do{switch(r){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(r-48)}}while(++c<t&&(r=e[c])>47&&r<60);c--;break;case 9:this._collect<<=8,this._collect|=r;break;case 10:for(var f=this._escHandlers[this._collect<<8|r],p=f?f.length-1:-1;p>=0&&!0!==(n=f[p]());p--)if(n instanceof Promise)return this._preserveStack(4,f,p,o,c),n;p<0&&this._escHandlerFb(this._collect<<8|r),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|r,this._params);break;case 13:for(var v=c+1;;++v)if(v>=t||24===(r=e[v])||26===r||27===r||r>127&&r<h){this._dcsParser.put(e,c,v),c=v-1;break}break;case 14:if(n=this._dcsParser.unhook(24!==r&&26!==r))return this._preserveStack(6,[],0,o,c),n;27===r&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var _=c+1;;_++)if(_>=t||(r=e[_])<32||r>127&&r<h){this._oscParser.put(e,c,_),c=_-1;break}break;case 6:if(n=this._oscParser.end(24!==r&&26!==r))return this._preserveStack(5,[],0,o,c),n;27===r&&(o|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&o}},i}(o.Disposable);t.EscapeSequenceParser=d},6242:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;var n=i(5770),r=i(482),o=[],s=function(){function e(){this._state=0,this._active=o,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return e.prototype.registerHandler=function(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);var i=this._handlers[e];return i.push(t),{dispose:function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}}},e.prototype.clearHandler=function(e){this._handlers[e]&&delete this._handlers[e]},e.prototype.setHandlerFallback=function(e){this._handlerFb=e},e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=o},e.prototype.reset=function(){if(2===this._state)for(var e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=o,this._id=-1,this._state=0},e.prototype._start=function(){if(this._active=this._handlers[this._id]||o,this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,"START")},e.prototype._put=function(e,t,i){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(e,t,i);else this._handlerFb(this._id,"PUT",(0,r.utf32ToString)(e,t,i))},e.prototype.start=function(){this.reset(),this._state=1},e.prototype.put=function(e,t,i){if(3!==this._state){if(1===this._state)for(;t<i;){var n=e[t++];if(59===n){this._state=2,this._start();break}if(n<48||57<n)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+n-48}2===this._state&&i-t>0&&this._put(e,t,i)}},e.prototype.end=function(e,t){if(void 0===t&&(t=!0),0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){var i=!1,n=this._active.length-1,r=!1;if(this._stack.paused&&(n=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===i){for(;n>=0&&!0!==(i=this._active[n].end(e));n--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!1,i;n--}for(;n>=0;n--)if((i=this._active[n].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=n,this._stack.fallThrough=!0,i}else this._handlerFb(this._id,"END",e);this._active=o,this._id=-1,this._state=0}},e}();t.OscParser=s;var a=function(){function e(e){this._handler=e,this._data="",this._hitLimit=!1}return e.prototype.start=function(){this._data="",this._hitLimit=!1},e.prototype.put=function(e,t,i){this._hitLimit||(this._data+=(0,r.utf32ToString)(e,t,i),this._data.length>n.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.end=function(e){var t=this,i=!1;if(this._hitLimit)i=!1;else if(e&&(i=this._handler(this._data))instanceof Promise)return i.then(function(e){return t._data="",t._hitLimit=!1,e});return this._data="",this._hitLimit=!1,i},e}();t.OscHandler=a},8742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;var i=2147483647,n=function(){function e(e,t){if(void 0===e&&(e=32),void 0===t&&(t=32),this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return e.fromArray=function(t){var i=new e;if(!t.length)return i;for(var n=Array.isArray(t[0])?1:0;n<t.length;++n){var r=t[n];if(Array.isArray(r))for(var o=0;o<r.length;++o)i.addSubParam(r[o]);else i.addParam(r)}return i},e.prototype.clone=function(){var t=new e(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t},e.prototype.toArray=function(){for(var e=[],t=0;t<this.length;++t){e.push(this.params[t]);var i=this._subParamsIdx[t]>>8,n=255&this._subParamsIdx[t];n-i>0&&e.push(Array.prototype.slice.call(this._subParams,i,n))}return e},e.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},e.prototype.addParam=function(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>i?i:e}},e.prototype.addSubParam=function(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>i?i:e,this._subParamsIdx[this.length-1]++}},e.prototype.hasSubParams=function(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0},e.prototype.getSubParams=function(e){var t=this._subParamsIdx[e]>>8,i=255&this._subParamsIdx[e];return i-t>0?this._subParams.subarray(t,i):null},e.prototype.getSubParamsAll=function(){for(var e={},t=0;t<this.length;++t){var i=this._subParamsIdx[t]>>8,n=255&this._subParamsIdx[t];n-i>0&&(e[t]=this._subParams.slice(i,n))}return e},e.prototype.addDigit=function(e){var t;if(!(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var n=this._digitIsSub?this._subParams:this.params,r=n[t-1];n[t-1]=~r?Math.min(10*r+e,i):e}},e}();t.Params=n},5741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0;var i=function(){function e(){this._addons=[]}return e.prototype.dispose=function(){for(var e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()},e.prototype.loadAddon=function(e,t){var i=this,n={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(n),t.dispose=function(){return i._wrappedAddonDispose(n)},t.activate(e)},e.prototype._wrappedAddonDispose=function(e){if(!e.isDisposed){for(var t=-1,i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},e}();t.AddonManager=i},8771:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;var n=i(3785),r=i(511),o=function(){function e(e,t){this._buffer=e,this.type=t}return e.prototype.init=function(e){return this._buffer=e,this},Object.defineProperty(e.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),e.prototype.getLine=function(e){var t=this._buffer.lines.get(e);if(t)return new n.BufferLineApiView(t)},e.prototype.getNullCell=function(){return new r.CellData},e}();t.BufferApiView=o},3785:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;var n=i(511),r=function(){function e(e){this._line=e}return Object.defineProperty(e.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),e.prototype.getCell=function(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new n.CellData)},e.prototype.translateToString=function(e,t,i){return this._line.translateToString(e,t,i)},e}();t.BufferLineApiView=r},8285:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;var n=i(8771),r=i(8460),o=function(){function e(e){var t=this;this._core=e,this._onBufferChange=new r.EventEmitter,this._normal=new n.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new n.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return t._onBufferChange.fire(t.active)})}return Object.defineProperty(e.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),e}();t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0;var i=function(){function e(e){this._core=e}return e.prototype.registerCsiHandler=function(e,t){return this._core.registerCsiHandler(e,function(e){return t(e.toArray())})},e.prototype.addCsiHandler=function(e,t){return this.registerCsiHandler(e,t)},e.prototype.registerDcsHandler=function(e,t){return this._core.registerDcsHandler(e,function(e,i){return t(e,i.toArray())})},e.prototype.addDcsHandler=function(e,t){return this.registerDcsHandler(e,t)},e.prototype.registerEscHandler=function(e,t){return this._core.registerEscHandler(e,t)},e.prototype.addEscHandler=function(e,t){return this.registerEscHandler(e,t)},e.prototype.registerOscHandler=function(e,t){return this._core.registerOscHandler(e,t)},e.prototype.addOscHandler=function(e,t){return this.registerOscHandler(e,t)},e}();t.ParserApi=i},7090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0;var i=function(){function e(e){this._core=e}return e.prototype.register=function(e){this._core.unicodeService.register(e)},Object.defineProperty(e.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(e){this._core.unicodeService.activeVersion=e},enumerable:!1,configurable:!0}),e}();t.UnicodeApi=i},744:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;var a=i(2585),l=i(5295),c=i(8460),u=i(844);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;var h=function(e){function i(i){var n=e.call(this)||this;return n._optionsService=i,n.isUserScrolling=!1,n._onResize=new c.EventEmitter,n._onScroll=new c.EventEmitter,n.cols=Math.max(i.rawOptions.cols||0,t.MINIMUM_COLS),n.rows=Math.max(i.rawOptions.rows||0,t.MINIMUM_ROWS),n.buffers=new l.BufferSet(i,n),n}return r(i,e),Object.defineProperty(i.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),i.prototype.dispose=function(){e.prototype.dispose.call(this),this.buffers.dispose()},i.prototype.resize=function(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:t})},i.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},i.prototype.scroll=function(e,t){void 0===t&&(t=!1);var i,n=this.buffer;(i=this._cachedBlankLine)&&i.length===this.cols&&i.getFg(0)===e.fg&&i.getBg(0)===e.bg||(i=n.getBlankLine(e,t),this._cachedBlankLine=i),i.isWrapped=t;var r=n.ybase+n.scrollTop,o=n.ybase+n.scrollBottom;if(0===n.scrollTop){var s=n.lines.isFull;o===n.lines.length-1?s?n.lines.recycle().copyFrom(i):n.lines.push(i.clone()):n.lines.splice(o+1,0,i.clone()),s?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{var a=o-r+1;n.lines.shiftElements(r+1,a-1,-1),n.lines.set(o,i.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)},i.prototype.scrollLines=function(e,t,i){var n=this.buffer;if(e<0){if(0===n.ydisp)return;this.isUserScrolling=!0}else e+n.ydisp>=n.ybase&&(this.isUserScrolling=!1);var r=n.ydisp;n.ydisp=Math.max(Math.min(n.ydisp+e,n.ybase),0),r!==n.ydisp&&(t||this._onScroll.fire(n.ydisp))},i.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},i.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},i.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},i.prototype.scrollToLine=function(e){var t=e-this.buffer.ydisp;0!==t&&this.scrollLines(t)},o([s(0,a.IOptionsService)],i)}(u.Disposable);t.BufferService=h},7994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0;var i=function(){function e(){this.glevel=0,this._charsets=[]}return e.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},e.prototype.setgLevel=function(e){this.glevel=e,this.charset=this._charsets[e]},e.prototype.setgCharset=function(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)},e}();t.CharsetService=i},1753:function(e,t,i){var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;var s=i(2585),a=i(8460),l={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(e){return 4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)}},VT200:{events:19,restrict:function(e){return 32!==e.action}},DRAG:{events:23,restrict:function(e){return 32!==e.action||3!==e.button}},ANY:{events:31,restrict:function(e){return!0}}};function c(e,t){var i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(i|=64,i|=e.action):(i|=3&e.button,4&e.button&&(i|=64),8&e.button&&(i|=128),32===e.action?i|=32:0!==e.action||t||(i|=3)),i}var u=String.fromCharCode,h={DEFAULT:function(e){var t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"[M"+u(t[0])+u(t[1])+u(t[2])},SGR:function(e){var t=0===e.action&&4!==e.button?"m":"M";return"[<"+c(e,!0)+";"+e.col+";"+e.row+t}},d=function(){function e(e,t){var i,n,r,s;this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new a.EventEmitter,this._lastEvent=null;try{for(var c=o(Object.keys(l)),u=c.next();!u.done;u=c.next()){var d=u.value;this.addProtocol(d,l[d])}}catch(e){i={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(i)throw i.error}}try{for(var f=o(Object.keys(h)),p=f.next();!p.done;p=f.next()){var v=p.value;this.addEncoding(v,h[v])}}catch(e){r={error:e}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(r)throw r.error}}this.reset()}return e.prototype.addProtocol=function(e,t){this._protocols[e]=t},e.prototype.addEncoding=function(e,t){this._encodings[e]=t},Object.defineProperty(e.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(e){if(!this._protocols[e])throw new Error('unknown protocol "'+e+'"');this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(e){if(!this._encodings[e])throw new Error('unknown encoding "'+e+'"');this._activeEncoding=e},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(e.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),e.prototype.triggerMouseEvent=function(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._compareEvents(this._lastEvent,e))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;var t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0},e.prototype.explainEvents=function(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}},e.prototype._compareEvents=function(e,t){return e.col===t.col&&e.row===t.row&&e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift},n([r(0,s.IBufferService),r(1,s.ICoreService)],e)}();t.CoreMouseService=d},6975:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},s=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;var a=i(2585),l=i(8460),c=i(1439),u=i(844),h=Object.freeze({insertMode:!1}),d=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),f=function(e){function t(t,i,n,r){var o=e.call(this)||this;return o._bufferService=i,o._logService=n,o._optionsService=r,o.isCursorInitialized=!1,o.isCursorHidden=!1,o._onData=o.register(new l.EventEmitter),o._onUserInput=o.register(new l.EventEmitter),o._onBinary=o.register(new l.EventEmitter),o._scrollToBottom=t,o.register({dispose:function(){return o._scrollToBottom=void 0}}),o.modes=(0,c.clone)(h),o.decPrivateModes=(0,c.clone)(d),o}return r(t,e),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.modes=(0,c.clone)(h),this.decPrivateModes=(0,c.clone)(d)},t.prototype.triggerDataEvent=function(e,t){if(void 0===t&&(t=!1),!this._optionsService.rawOptions.disableStdin){var i=this._bufferService.buffer;i.ybase!==i.ydisp&&this._scrollToBottom(),t&&this._onUserInput.fire(),this._logService.debug('sending data "'+e+'"',function(){return e.split("").map(function(e){return e.charCodeAt(0)})}),this._onData.fire(e)}},t.prototype.triggerBinaryEvent=function(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+e+'"',function(){return e.split("").map(function(e){return e.charCodeAt(0)})}),this._onBinary.fire(e))},o([s(1,a.IBufferService),s(2,a.ILogService),s(3,a.IOptionsService)],t)}(u.Disposable);t.CoreService=f},9074:function(e,t,i){var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationService=void 0;var a=i(8055),l=i(8460),c=i(844),u=i(6106),h=function(e){function t(){var t=e.call(this)||this;return t._decorations=new u.SortedList(function(e){return e.marker.line}),t._onDecorationRegistered=t.register(new l.EventEmitter),t._onDecorationRemoved=t.register(new l.EventEmitter),t}return r(t,e),Object.defineProperty(t.prototype,"onDecorationRegistered",{get:function(){return this._onDecorationRegistered.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDecorationRemoved",{get:function(){return this._onDecorationRemoved.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decorations",{get:function(){return this._decorations.values()},enumerable:!1,configurable:!0}),t.prototype.registerDecoration=function(e){var t=this;if(!e.marker.isDisposed){var i=new d(e);if(i){var n=i.marker.onDispose(function(){return i.dispose()});i.onDispose(function(){i&&(t._decorations.delete(i)&&t._onDecorationRemoved.fire(i),n.dispose())}),this._decorations.insert(i),this._onDecorationRegistered.fire(i)}return i}},t.prototype.reset=function(){var e,t;try{for(var i=s(this._decorations.values()),n=i.next();!n.done;n=i.next())n.value.dispose()}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this._decorations.clear()},t.prototype.getDecorationsAtLine=function(e){return o(this,function(t){return[2,this._decorations.getKeyIterator(e)]})},t.prototype.getDecorationsAtCell=function(e,t,i){var n,r,a,l,c,u,h,d,f,p,v;return o(this,function(o){switch(o.label){case 0:n=0,r=0,o.label=1;case 1:o.trys.push([1,6,7,8]),a=s(this._decorations.getKeyIterator(t)),l=a.next(),o.label=2;case 2:return l.done?[3,5]:(c=l.value,n=null!==(f=c.options.x)&&void 0!==f?f:0,r=n+(null!==(p=c.options.width)&&void 0!==p?p:1),!(e>=n&&e<r)||i&&(null!==(v=c.options.layer)&&void 0!==v?v:"bottom")!==i?[3,4]:[4,c]);case 3:o.sent(),o.label=4;case 4:return l=a.next(),[3,2];case 5:return[3,8];case 6:return u=o.sent(),h={error:u},[3,8];case 7:try{l&&!l.done&&(d=a.return)&&d.call(a)}finally{if(h)throw h.error}return[7];case 8:return[2]}})},t.prototype.dispose=function(){var e,t;try{for(var i=s(this._decorations.values()),n=i.next();!n.done;n=i.next()){var r=n.value;this._onDecorationRemoved.fire(r)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this.reset()},t}(c.Disposable);t.DecorationService=h;var d=function(e){function t(t){var i=e.call(this)||this;return i.options=t,i.isDisposed=!1,i.onRenderEmitter=i.register(new l.EventEmitter),i.onRender=i.onRenderEmitter.event,i._onDispose=i.register(new l.EventEmitter),i.onDispose=i._onDispose.event,i._cachedBg=null,i._cachedFg=null,i.marker=t.marker,i.options.overviewRulerOptions&&!i.options.overviewRulerOptions.position&&(i.options.overviewRulerOptions.position="full"),i}return r(t,e),Object.defineProperty(t.prototype,"backgroundColorRGB",{get:function(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"foregroundColorRGB",{get:function(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._onDispose.fire(),e.prototype.dispose.call(this))},t}(c.Disposable)},3730:function(e,t,i){var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DirtyRowService=void 0;var o=i(2585),s=function(){function e(e){this._bufferService=e,this.clearRange()}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),e.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},e.prototype.markDirty=function(e){e<this._start?this._start=e:e>this._end&&(this._end=e)},e.prototype.markRangeDirty=function(e,t){if(e>t){var i=e;e=t,t=i}e<this._start&&(this._start=e),t>this._end&&(this._end=t)},e.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},n([r(0,o.IBufferService)],e)}();t.DirtyRowService=s},4348:function(e,t,i){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;var s=i(2585),a=i(8343),l=function(){function e(){for(var e,t,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];this._entries=new Map;try{for(var s=n(i),a=s.next();!a.done;a=s.next()){var l=r(a.value,2),c=l[0],u=l[1];this.set(c,u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}}return e.prototype.set=function(e,t){var i=this._entries.get(e);return this._entries.set(e,t),i},e.prototype.forEach=function(e){this._entries.forEach(function(t,i){return e(i,t)})},e.prototype.has=function(e){return this._entries.has(e)},e.prototype.get=function(e){return this._entries.get(e)},e}();t.ServiceCollection=l;var c=function(){function e(){this._services=new l,this._services.set(s.IInstantiationService,this)}return e.prototype.setService=function(e,t){this._services.set(e,t)},e.prototype.getService=function(e){return this._services.get(e)},e.prototype.createInstance=function(e){for(var t,i,s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];var c=(0,a.getServiceDependencies)(e).sort(function(e,t){return e.index-t.index}),u=[];try{for(var h=n(c),d=h.next();!d.done;d=h.next()){var f=d.value,p=this._services.get(f.id);if(!p)throw new Error("[createInstance] "+e.name+" depends on UNKNOWN service "+f.id+".");u.push(p)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(t)throw t.error}}var v=c.length>0?c[0].index:s.length;if(s.length!==v)throw new Error("[createInstance] First service dependency of "+e.name+" at position "+(v+1)+" conflicts with "+s.length+" static arguments");return new(e.bind.apply(e,o([void 0],r(o(o([],r(s),!1),r(u),!1)),!1)))},e}();t.InstantiationService=c},7866:function(e,t,i){var n=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},r=this&&this.__param||function(e,t){return function(i,n){t(i,n,e)}},o=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;var a=i(2585),l={debug:a.LogLevelEnum.DEBUG,info:a.LogLevelEnum.INFO,warn:a.LogLevelEnum.WARN,error:a.LogLevelEnum.ERROR,off:a.LogLevelEnum.OFF},c=function(){function e(e){var t=this;this._optionsService=e,this.logLevel=a.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(e){"logLevel"===e&&t._updateLogLevel()})}return e.prototype._updateLogLevel=function(){this.logLevel=l[this._optionsService.rawOptions.logLevel]},e.prototype._evalLazyOptionalParams=function(e){for(var t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())},e.prototype._log=function(e,t,i){this._evalLazyOptionalParams(i),e.call.apply(e,s([console,"xterm.js: "+t],o(i),!1))},e.prototype.debug=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.logLevel<=a.LogLevelEnum.DEBUG&&this._log(console.log,e,t)},e.prototype.info=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.logLevel<=a.LogLevelEnum.INFO&&this._log(console.info,e,t)},e.prototype.warn=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.logLevel<=a.LogLevelEnum.WARN&&this._log(console.warn,e,t)},e.prototype.error=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.logLevel<=a.LogLevelEnum.ERROR&&this._log(console.error,e,t)},n([r(0,a.IOptionsService)],e)}();t.LogService=c},7302:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=t.DEFAULT_BELL_SOUND=void 0;var r=i(8460),o=i(6114);t.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:t.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:o.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:void 0};var s=["normal","bold","100","200","300","400","500","600","700","800","900"],a=function(){function e(e){this._onOptionChange=new r.EventEmitter;var i=n({},t.DEFAULT_OPTIONS);for(var o in e)if(o in i)try{var s=e[o];i[o]=this._sanitizeAndValidateOption(o,s)}catch(e){console.error(e)}this.rawOptions=i,this.options=n({},i),this._setupOptions()}return Object.defineProperty(e.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),e.prototype._setupOptions=function(){var e=this,i=function(i){if(!(i in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+i+'"');return e.rawOptions[i]},n=function(i,n){if(!(i in t.DEFAULT_OPTIONS))throw new Error('No option with key "'+i+'"');n=e._sanitizeAndValidateOption(i,n),e.rawOptions[i]!==n&&(e.rawOptions[i]=n,e._onOptionChange.fire(i))};for(var r in this.rawOptions){var o={get:i.bind(this,r),set:n.bind(this,r)};Object.defineProperty(this.options,r,o)}},e.prototype.setOption=function(e,t){this.options[e]=t},e.prototype._sanitizeAndValidateOption=function(e,i){switch(e){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":i||(i=t.DEFAULT_OPTIONS[e]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof i&&1<=i&&i<=1e3)break;i=s.includes(i)?i:t.DEFAULT_OPTIONS[e];break;case"cursorWidth":i=Math.floor(i);case"lineHeight":case"tabStopWidth":if(i<1)throw new Error(e+" cannot be less than 1, value: "+i);break;case"minimumContrastRatio":i=Math.max(1,Math.min(21,Math.round(10*i)/10));break;case"scrollback":if((i=Math.min(i,4294967295))<0)throw new Error(e+" cannot be less than 0, value: "+i);break;case"fastScrollSensitivity":case"scrollSensitivity":if(i<=0)throw new Error(e+" cannot be less than or equal to 0, value: "+i);case"rows":case"cols":if(!i&&0!==i)throw new Error(e+" must be numeric, value: "+i)}return i},e.prototype.getOption=function(e){return this.options[e]},e}();t.OptionsService=a},8343:(e,t)=>{function i(e,t,i){t.di$target===t?t.di$dependencies.push({id:e,index:i}):(t.di$dependencies=[{id:e,index:i}],t.di$target=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0,t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e.di$dependencies||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);var n=function(e,t,r){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(n,e,r)};return n.toString=function(){return e},t.serviceRegistry.set(e,n),n}},2585:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.IDirtyRowService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;var n,r=i(8343);t.IBufferService=(0,r.createDecorator)("BufferService"),t.ICoreMouseService=(0,r.createDecorator)("CoreMouseService"),t.ICoreService=(0,r.createDecorator)("CoreService"),t.ICharsetService=(0,r.createDecorator)("CharsetService"),t.IDirtyRowService=(0,r.createDecorator)("DirtyRowService"),t.IInstantiationService=(0,r.createDecorator)("InstantiationService"),(n=t.LogLevelEnum||(t.LogLevelEnum={}))[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.WARN=2]="WARN",n[n.ERROR=3]="ERROR",n[n.OFF=4]="OFF",t.ILogService=(0,r.createDecorator)("LogService"),t.IOptionsService=(0,r.createDecorator)("OptionsService"),t.IUnicodeService=(0,r.createDecorator)("UnicodeService"),t.IDecorationService=(0,r.createDecorator)("DecorationService")},1480:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;var n=i(8460),r=i(225),o=function(){function e(){this._providers=Object.create(null),this._active="",this._onChange=new n.EventEmitter;var e=new r.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._active},set:function(e){if(!this._providers[e])throw new Error('unknown Unicode version "'+e+'"');this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)},enumerable:!1,configurable:!0}),e.prototype.register=function(e){this._providers[e.version]=e},e.prototype.wcwidth=function(e){return this._activeProvider.wcwidth(e)},e.prototype.getStringCellWidth=function(e){for(var t=0,i=e.length,n=0;n<i;++n){var r=e.charCodeAt(n);if(55296<=r&&r<=56319){if(++n>=i)return t+this.wcwidth(r);var o=e.charCodeAt(n);56320<=o&&o<=57343?r=1024*(r-55296)+o-56320+65536:t+=this.wcwidth(o)}t+=this.wcwidth(r)}return t},e}();t.UnicodeService=o}},t={};return function i(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}(4389)})();var qt=t(Ut.exports),Yt={exports:{}};!function(e){window,e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0;var n=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var e=this._terminal._core,t=window.getComputedStyle(this._terminal.element.parentElement),i=parseInt(t.getPropertyValue("height")),n=Math.max(0,parseInt(t.getPropertyValue("width"))),r=window.getComputedStyle(this._terminal.element),o=i-(parseInt(r.getPropertyValue("padding-top"))+parseInt(r.getPropertyValue("padding-bottom"))),s=n-(parseInt(r.getPropertyValue("padding-right"))+parseInt(r.getPropertyValue("padding-left")))-e.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(s/e._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(o/e._renderService.dimensions.actualCellHeight))}}},e}();t.FitAddon=n}])}(Yt);class Vt{constructor(e){this.size=e,this.entries=[],this.cursor=0}push(e){if(""===e.trim())return;e!=this.entries[this.entries.length-1]&&(this.entries.push(e),this.entries.length>this.size&&this.entries.pop(0),this.cursor=this.entries.length)}rewind(){this.cursor=this.entries.length}getPrevious(){const e=Math.max(0,this.cursor-1);return this.cursor=e,this.entries[e]}getNext(){const e=Math.min(this.entries.length,this.cursor+1);return this.cursor=e,this.entries[e]}}for(var Kt="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(","\\<\\<\\<",">>",">\\&","<\\&","[&;()|<>]"].join("|")+")",Gt=new RegExp("^"+Kt+"$"),Xt="|&;()<> \\t",Zt=/^#$/,Jt="",Qt=0;Qt<4;Qt++)Jt+=(4294967296*Math.random()).toString(16);var ei=new RegExp("^"+Jt);function ti(e,t,i){i||(i={});var n=i.escape||"\\",r=new RegExp(["("+Kt+")","("+("(\\"+n+"['\""+Xt+"]|[^\\s'\""+Xt+"])+")+"|\"((\\\\\"|[^\"])*?)\"|'((\\\\'|[^'])*?)')+"].join("|"),"g"),o=function(e,t){for(var i,n=t.lastIndex,r=[];i=t.exec(e);)r.push(i),t.lastIndex===i.index&&(t.lastIndex+=1);return t.lastIndex=n,r}(e,r);if(0===o.length)return[];t||(t={});var s=!1;return o.map(function(i){var r=i[0];if(r&&!s){if(Gt.test(r))return{op:r};var o,a=!1,l=!1,c="",u=!1;for(o=0;o<r.length;o++){var h=r.charAt(o);if(u=u||!a&&("*"===h||"?"===h),l)c+=h,l=!1;else if(a)h===a?a=!1:"'"==a?c+=h:h===n?(o+=1,c+='"'===(h=r.charAt(o))||h===n||"$"===h?h:n+h):c+="$"===h?f():h;else if('"'===h||"'"===h)a=h;else{if(Gt.test(h))return{op:r};if(Zt.test(h)){s=!0;var d={comment:e.slice(i.index+o+1)};return c.length?[c,d]:[d]}h===n?l=!0:c+="$"===h?f():h}}return u?{op:"glob",pattern:c}:c}function f(){var e,i;o+=1;var n=r.charAt(o);if("{"===n){if(o+=1,"}"===r.charAt(o))throw new Error("Bad substitution: "+r.slice(o-2,o+1));if((e=r.indexOf("}",o))<0)throw new Error("Bad substitution: "+r.slice(o));i=r.slice(o,e),o=e}else if(/[*@#?$!_-]/.test(n))i=n,o+=1;else{var s=r.slice(o);(e=s.match(/[^\w\d_]/))?(i=s.slice(0,e.index),o+=e.index-1):(i=s,o=r.length)}return function(e,t,i){var n="function"==typeof e?e(i):e[i];return void 0===n&&""!=i?n="":void 0===n&&(n="$"),"object"==typeof n?t+Jt+JSON.stringify(n)+Jt:t+n}(t,"",i)}}).reduce(function(e,t){return void 0===t?e:e.concat(t)},[])}var ii=function(e,t,i){var n=ti(e,t,i);return"function"!=typeof t?n:n.reduce(function(e,t){if("object"==typeof t)return e.concat(t);var i=t.split(RegExp("("+Jt+".*?"+Jt+")","g"));return 1===i.length?e.concat(i[0]):e.concat(i.filter(Boolean).map(function(e){return ei.test(e)?JSON.parse(e.split(Jt)[1]):e}))},[])};function ni(e,t=!0){let i;const n=[],r=/\w+/g;for(;i=r.exec(e);)t?n.push(i.index):n.push(i.index+i[0].length);return n}function ri(e,t){const i=ni(e,!0).reverse().find(e=>e<t);return null==i?0:i}function oi(e,t,i){let n=0,r=0;for(let o=0;o<t;++o){"\n"==e.charAt(o)?(r=0,n+=1):(r+=1,r>i&&(r=0,n+=1))}return{row:n,col:r}}function si(e,t){return oi(e,e.length,t).row+1}function ai(e){return null!=e.match(/[^\\][ \t]$/m)}function li(e){if(""===e.trim())return"";if(ai(e))return"";return ii(e).pop()||""}function ci(e,t){if(e.length>=t[0].length)return e;const i=e;e+=t[0].slice(e.length,e.length+1);for(let n=0;n<t.length;n++){if(!t[n].startsWith(i))return null;if(!t[n].startsWith(e))return i}return ci(e,t)}class ui{constructor(e,t={}){this.term=e,this._handleTermData=this.handleTermData.bind(this),this._handleTermResize=this.handleTermResize.bind(this),this.history=new Vt(t.historySize||10),this.maxAutocompleteEntries=t.maxAutocompleteEntries||100,this._autocompleteHandlers=[],this._active=!1,this._input="",this._cursor=0,this._activePrompt=null,this._activeCharPrompt=null,this._termSize={cols:this.term.cols,rows:this.term.rows},this.attach()}detach(){this.term.off("data",this._handleTermData),this.term.off("resize",this._handleTermResize)}attach(){this.term.onData(this._handleTermData),this.term.onResize(this._handleTermResize)}addAutocompleteHandler(e,...t){this._autocompleteHandlers.push({fn:e,args:t})}removeAutocompleteHandler(e){const t=this._autocompleteHandlers.findIndex(t=>t.fn===e);-1!==t&&this._autocompleteHandlers.splice(t,1)}read(e,t="> "){return new Promise((i,n)=>{this.term.write(e),this._activePrompt={prompt:e,continuationPrompt:t,resolve:i,reject:n},this._input="",this._cursor=0,this._active=!0})}readChar(e){return new Promise((t,i)=>{this.term.write(e),this._activeCharPrompt={prompt:e,resolve:t,reject:i}})}abortRead(e="aborted"){null==this._activePrompt&&null==this._activeCharPrompt||this.term.write("\r\n"),null!=this._activePrompt&&(this._activePrompt.reject(e),this._activePrompt=null),null!=this._activeCharPrompt&&(this._activeCharPrompt.reject(e),this._activeCharPrompt=null),this._active=!1}println(e){this.print(e+"\n")}print(e){const t=e.replace(/[\r\n]+/g,"\n");this.term.write(t.replace(/\n/g,"\r\n"))}printWide(e,t=2){if(0==e.length)return println("");const i=e.reduce((e,t)=>Math.max(e,t.length),0)+t,n=Math.floor(this._termSize.cols/i),r=Math.ceil(e.length/n);let o=0;for(let t=0;t<r;++t){let t="";for(let r=0;r<n;++r)if(o<e.length){let n=e[o++];n+=" ".repeat(i-n.length),t+=n}this.println(t)}}applyPrompts(e){const t=(this._activePrompt||{}).prompt||"",i=(this._activePrompt||{}).continuationPrompt||"";return t+e.replace(/\n/g,"\n"+i)}applyPromptOffset(e,t){return this.applyPrompts(e.substr(0,t)).length}clearInput(){const e=this.applyPrompts(this._input),t=si(e,this._termSize.cols),i=this.applyPromptOffset(this._input,this._cursor),{col:n,row:r}=oi(e,i,this._termSize.cols),o=t-r-1;for(var s=0;s<o;++s)this.term.write("[E");this.term.write("\r[K");for(s=1;s<t;++s)this.term.write("[F[K")}setInput(e,t=!0){t&&this.clearInput();const i=this.applyPrompts(e);this.print(i),this._cursor>e.length&&(this._cursor=e.length);const n=this.applyPromptOffset(e,this._cursor),r=si(i,this._termSize.cols),{col:o,row:s}=oi(i,n,this._termSize.cols),a=r-s-1;this.term.write("\r");for(var l=0;l<a;++l)this.term.write("[F");for(l=0;l<o;++l)this.term.write("[C");this._input=e}printAndRestartPrompt(e){const t=this._cursor;this.setCursor(this._input.length),this.term.write("\r\n");const i=()=>{this._cursor=t,this.setInput(this._input)},n=e();null==n?i():n.then(i)}setCursor(e){e<0&&(e=0),e>this._input.length&&(e=this._input.length);const t=this.applyPrompts(this._input);si(t,this._termSize.cols);const i=this.applyPromptOffset(this._input,this._cursor),{col:n,row:r}=oi(t,i,this._termSize.cols),o=this.applyPromptOffset(this._input,e),{col:s,row:a}=oi(t,o,this._termSize.cols);if(a>r)for(let e=r;e<a;++e)this.term.write("[B");else for(let e=a;e<r;++e)this.term.write("[A");if(s>n)for(let e=n;e<s;++e)this.term.write("[C");else for(let e=s;e<n;++e)this.term.write("[D");this._cursor=e}handleCursorMove(e){if(e>0){const t=Math.min(e,this._input.length-this._cursor);this.setCursor(this._cursor+t)}else if(e<0){const t=Math.max(e,-this._cursor);this.setCursor(this._cursor+t)}}handleCursorErase(e){const{_cursor:t,_input:i}=this;if(e){if(t<=0)return;const e=i.substr(0,t-1)+i.substr(t);this.clearInput(),this._cursor-=1,this.setInput(e,!1)}else{const e=i.substr(0,t)+i.substr(t+1);this.setInput(e)}}handleCursorInsert(e){const{_cursor:t,_input:i}=this,n=i.substr(0,t)+e+i.substr(t);this._cursor+=e.length,this.setInput(n)}handleReadComplete(){this.history&&this.history.push(this._input),this._activePrompt&&(this._activePrompt.resolve(this._input),this._activePrompt=null),this.term.write("\r\n"),this._active=!1}handleTermResize(e){const{rows:t,cols:i}=e;this.clearInput(),this._termSize={cols:i,rows:t},this.setInput(this._input,!1)}handleTermData(e){if(this._active){if(null!=this._activeCharPrompt)return this._activeCharPrompt.resolve(e),this._activeCharPrompt=null,void this.term.write("\r\n");if(e.length>3&&27!==e.charCodeAt(0)){const t=e.replace(/[\r\n]+/g,"\r");Array.from(t).forEach(e=>this.handleData(e))}else this.handleData(e)}}handleData(e){if(!this._active)return;const t=e.charCodeAt(0);let i;if(27==t)switch(e.substr(1)){case"[A":if(this.history){let e=this.history.getPrevious();e&&(this.setInput(e),this.setCursor(e.length))}break;case"[B":if(this.history){let e=this.history.getNext();e||(e=""),this.setInput(e),this.setCursor(e.length)}break;case"[D":this.handleCursorMove(-1);break;case"[C":this.handleCursorMove(1);break;case"[3~":this.handleCursorErase(!1);break;case"[F":this.setCursor(this._input.length);break;case"[H":this.setCursor(0);break;case"b":i=ri(this._input,this._cursor),null!=i&&this.setCursor(i);break;case"f":i=function(e,t){const i=ni(e,!1).find(e=>e>t);return null==i?e.length:i}(this._input,this._cursor),null!=i&&this.setCursor(i);break;case"":i=ri(this._input,this._cursor),null!=i&&(this.setInput(this._input.substr(0,i)+this._input.substr(this._cursor)),this.setCursor(i))}else if(t<32||127===t)switch(e){case"\r":""!=(n=this._input).trim()&&((n.match(/'/g)||[]).length%2!=0||(n.match(/"/g)||[]).length%2!=0||""==n.split(/(\|\||\||&&)/g).pop().trim()||n.endsWith("\\")&&!n.endsWith("\\\\"))?this.handleCursorInsert("\n"):this.handleReadComplete();break;case"":this.handleCursorErase(!0);break;case"\t":if(this._autocompleteHandlers.length>0){const e=this._input.substr(0,this._cursor),t=ai(e),i=function(e,t){const i=ii(t);let n=i.length-1,r=i[n]||"";""===t.trim()?(n=0,r=""):ai(t)&&(n+=1,r="");const o=e.reduce((e,{fn:t,args:r})=>{try{return e.concat(t(n,i,...r))}catch(t){return console.error("Auto-complete error:",t),e}},[]);return o.filter(e=>e.startsWith(r))}(this._autocompleteHandlers,e);if(i.sort(),0===i.length)t||this.handleCursorInsert(" ");else if(1===i.length){const t=li(e);this.handleCursorInsert(i[0].substr(t.length)+" ")}else if(i.length<=this.maxAutocompleteEntries){const t=ci(e,i);if(t){const i=li(e);this.handleCursorInsert(t.substr(i.length))}this.printAndRestartPrompt(()=>{this.printWide(i)})}else this.printAndRestartPrompt(()=>this.readChar(`Display all ${i.length} possibilities? (y or n)`).then(e=>{"y"!=e&&"Y"!=e||this.printWide(i)}))}else this.handleCursorInsert("    ");break;case"":this.setCursor(this._input.length),this.term.write("^C\r\n"+((this._activePrompt||{}).prompt||"")),this._input="",this._cursor=0,this.history&&this.history.rewind()}else this.handleCursorInsert(e);var n}}function hi(e){let t,i,n,o,s,a,l,c,u,h;return{c(){t=E("div"),i=E("div"),n=E("button"),o=O(e[2]),a=T(),l=E("div"),c=E("div"),P(n,"class","term-fontsize-btn svelte-1l313pp"),P(n,"title",s="Font size: "+e[3][e[0]].key),P(i,"class","terminal-toolbar svelte-1l313pp"),P(c,"class","terminal-inner svelte-1l313pp"),P(l,"class","terminal-container svelte-1l313pp"),P(t,"class","terminal-widget svelte-1l313pp")},m(r,s){S(r,t,s),C(t,i),C(i,n),C(n,o),C(t,a),C(t,l),C(l,c),e[10](c),u||(h=R(n,"click",e[4]),u=!0)},p(e,[t]){4&t&&B(o,e[2]),1&t&&s!==(s="Font size: "+e[3][e[0]].key)&&P(n,"title",s)},i:r,o:r,d(i){i&&k(t),e[10](null),u=!1,h()}}}const di="talesmud_term_fontsize";function fi(e,t){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>e(...n),t)}}function pi(e,t){return 0===e?["north","east","south","west","say"]:[]}function vi(e,t,i){let n,{onTerminalReady:r=()=>{}}=t,{onInput:o=()=>{}}=t;const s=Y();let a,l,c,u,h;const d=[{label:"S",scale:.7,key:"small"},{label:"M",scale:.85,key:"medium"},{label:"L",scale:1,key:"large"}];let f=0;function p(){return Math.round(function(){const e=window.innerWidth;return e>=3e3?26:e>=2600?24:e>=2200?22:e>=1800?20:e>=1600?18:e>=1400?17:15}()*d[f].scale)}function v(){l&&(l.setOption("fontSize",p()),c&&c.fit())}function _(){u.read("~$ ").then(e=>{o(e),_()}).catch(e=>console.log(`Error reading: ${e}`))}return U(()=>{!function(){try{const e=localStorage.getItem(di);if(e){const t=d.findIndex(t=>t.key===e);t>=0&&i(0,f=t)}}catch(e){}}();const e=p();l=new qt.Terminal({fontSize:e,fontFamily:"'JetBrains Mono', 'Fira Code', 'Consolas', monospace"}),c=new Yt.exports.FitAddon,l.loadAddon(c),l.setOption("cursorBlink",!0),l.setOption("convertEol",!0),l.open(a),c.fit(),u=new ui(l),u.addAutocompleteHandler(pi);const t=e=>{u.clearInput(),l.writeln(e)};r(l,t),s("ready",{term:l,renderer:t}),_();const n=fi(()=>{v()},100);return window.addEventListener("resize",n),h=new ResizeObserver(fi(()=>{c&&c.fit()},100)),h.observe(a),()=>{window.removeEventListener("resize",n)}}),q(()=>{h&&h.disconnect(),l&&l.dispose()}),e.$$set=e=>{"onTerminalReady"in e&&i(5,r=e.onTerminalReady),"onInput"in e&&i(6,o=e.onInput)},e.$$.update=()=>{1&e.$$.dirty&&i(2,n=d[f].label)},[f,a,n,d,function(){i(0,f=(f+1)%d.length);try{localStorage.setItem(di,d[f].key)}catch(e){}v()},r,o,function(e){u&&u.clearInput(),l&&l.writeln(e)},function(){return l},function(){c&&c.fit()},function(e){K[e?"unshift":"push"](()=>{a=e,i(1,a)})}]}class _i extends ge{constructor(e){super(),me(this,e,vi,hi,u,{onTerminalReady:5,onInput:6,writeln:7,getTerminal:8,fit:9})}get writeln(){return this.$$.ctx[7]}get getTerminal(){return this.$$.ctx[8]}get fit(){return this.$$.ctx[9]}}function mi(e,t,i){const n=e.slice();return n[24]=t[i],n}function gi(e,t){let i,n,r=t[24].html+"";return{key:e,first:null,c(){i=E("span"),P(i,"class",n="tx-line "+t[24].cls+" svelte-1st12pn"),this.first=i},m(e,t){S(e,i,t),i.innerHTML=r},p(e,o){t=e,8&o&&r!==(r=t[24].html+"")&&(i.innerHTML=r),8&o&&n!==(n="tx-line "+t[24].cls+" svelte-1st12pn")&&P(i,"class",n)},d(e){e&&k(i)}}}function yi(e){let t,i,n,o,s,a,c,u,h,d,f,p,v,_,m,g,y,b,w,x,L,M,D,j,W,F,$=[],N=new Map,z=e[3];const U=e=>e[24].id;for(let t=0;t<z.length;t+=1){let i=mi(e,z,t),n=U(i);N.set(n,$[t]=gi(n,i))}return{c(){t=E("div"),i=E("div"),n=T(),o=E("div"),s=T(),a=E("div"),c=E("div"),u=T(),h=E("div"),d=T(),f=E("div"),p=T(),v=E("span"),v.textContent="talesmud  terminal session",_=T(),m=E("button"),g=O(e[5]),b=T(),w=E("div");for(let e=0;e<$.length;e+=1)$[e].c();x=T(),L=E("div"),M=E("span"),M.textContent=">",D=T(),j=E("input"),P(i,"class","tx-scanlines svelte-1st12pn"),P(o,"class","tx-vignette svelte-1st12pn"),P(c,"class","tx-dot tx-dot-red svelte-1st12pn"),P(h,"class","tx-dot tx-dot-amber svelte-1st12pn"),P(f,"class","tx-dot tx-dot-green svelte-1st12pn"),P(v,"class","tx-title svelte-1st12pn"),P(m,"class","tx-fontsize-btn svelte-1st12pn"),P(m,"title",y="Font size: "+e[7][e[0]].key),P(a,"class","tx-titlebar svelte-1st12pn"),P(w,"class","tx-body svelte-1st12pn"),H(w,"font-size",e[6]),P(M,"class","tx-prompt svelte-1st12pn"),P(j,"type","text"),P(j,"class","tx-input svelte-1st12pn"),H(j,"font-size",e[6]),P(j,"placeholder","_"),P(j,"spellcheck","false"),P(j,"autocomplete","off"),P(L,"class","tx-input-area svelte-1st12pn"),H(L,"font-size",e[6]),P(t,"class","tx-window svelte-1st12pn")},m(r,l){S(r,t,l),C(t,i),C(t,n),C(t,o),C(t,s),C(t,a),C(a,c),C(a,u),C(a,h),C(a,d),C(a,f),C(a,p),C(a,v),C(a,_),C(a,m),C(m,g),C(t,b),C(t,w);for(let e=0;e<$.length;e+=1)$[e]&&$[e].m(w,null);e[13](w),C(t,x),C(t,L),C(L,M),C(L,D),C(L,j),e[14](j),I(j,e[4]),W||(F=[R(m,"click",A(e[8])),R(j,"input",e[15]),R(j,"keydown",e[9]),R(t,"click",e[10])],W=!0)},p(e,[t]){32&t&&B(g,e[5]),1&t&&y!==(y="Font size: "+e[7][e[0]].key)&&P(m,"title",y),8&t&&(z=e[3],$=fe($,t,U,1,e,z,N,w,he,gi,null,mi)),64&t&&H(w,"font-size",e[6]),64&t&&H(j,"font-size",e[6]),16&t&&j.value!==e[4]&&I(j,e[4]),64&t&&H(L,"font-size",e[6])},i:r,o:r,d(i){i&&k(t);for(let e=0;e<$.length;e+=1)$[e].d();e[13](null),e[14](null),W=!1,l(F)}}}const bi="talesmud_termx_fontsize";function wi(e){if(!e)return"";let t=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}(e);return t=t.replace(/\*\*(.+?)\*\*/g,'<span class="tx-highlight">$1</span>'),t}function Ci(e,t,i){let n,r,{onTerminalReady:o=()=>{}}=t,{onInput:s=()=>{}}=t;const a=Y();let l,c,u=[],h="",d=[],f=-1,p="",v=0;const _=[{label:"S",size:"0.78rem",key:"small"},{label:"M",size:"0.92rem",key:"medium"},{label:"L",size:"1.08rem",key:"large"}];let m=0;function g(e,t=""){v++;const n=t||function(e){if(!e||!e.trim())return"";const t=e.trim();return/^\[.+\]$/.test(t)?"tx-bright":/^\+\s*\[/.test(t)||t.startsWith("- The visible exits")||/^Exits?:/i.test(t)?"tx-cyan":t.startsWith("- In the room:")||"You look around ..."===t||t.startsWith("Connected to")||"Connection Closed."===t||"reconnecting ..."===t?"tx-muted":"Please log in to connect to the game."===t?"tx-amber":""}(e);u.push({html:wi(e),cls:n,id:v}),u.length>1e3?i(3,u=u.slice(u.length-1e3)):i(3,u)}async function y(){await(Q(),Z),l&&i(1,l.scrollTop=l.scrollHeight,l)}return U(()=>{if(function(){try{const e=localStorage.getItem(bi);if(e){const t=_.findIndex(t=>t.key===e);t>=0&&i(0,m=t)}}catch(e){}}(),!document.querySelector('link[href*="Fira+Code"]')){const e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&display=swap",document.head.appendChild(e)}const e=e=>{if(null==e)return;String(e).split("\n").forEach(e=>g(e)),y()};o(null,e),a("ready",{renderer:e}),c&&c.focus()}),e.$$set=e=>{"onTerminalReady"in e&&i(11,o=e.onTerminalReady),"onInput"in e&&i(12,s=e.onInput)},e.$$.update=()=>{1&e.$$.dirty&&i(6,n=_[m].size),1&e.$$.dirty&&i(5,r=_[m].label)},[m,l,c,u,h,r,n,_,function(){i(0,m=(m+1)%_.length);try{localStorage.setItem(bi,_[m].key)}catch(e){}},function(e){if("Enter"===e.key){e.preventDefault();const t=h;t.trim()&&(g("> "+t,"tx-cmd"),d=[...d,t],f=-1,p="",s(t),y()),i(4,h="")}else"ArrowUp"===e.key?(e.preventDefault(),d.length>0&&(-1===f?(p=h,f=d.length-1):f>0&&f--,i(4,h=d[f]))):"ArrowDown"===e.key&&(e.preventDefault(),-1!==f&&(f<d.length-1?(f++,i(4,h=d[f])):(f=-1,i(4,h=p))))},function(){c&&c.focus()},o,s,function(e){K[e?"unshift":"push"](()=>{l=e,i(1,l)})},function(e){K[e?"unshift":"push"](()=>{c=e,i(2,c)})},function(){h=this.value,i(4,h)}]}class Si extends ge{constructor(e){super(),me(this,e,Ci,yi,u,{onTerminalReady:11,onInput:12})}}function ki(e){let t,i,n,o,s,a,c,u,h,d,f,p,v,_,m,g,y,b,w,x,L,M,O;return{c(){t=E("div"),i=E("div"),n=T(),o=E("div"),s=E("button"),a=E("i"),a.textContent="north",u=T(),h=E("button"),d=E("i"),d.textContent="west",p=T(),v=E("div"),v.innerHTML='<i class="material-icons svelte-1f35i07">my_location</i>',_=T(),m=E("button"),g=E("i"),g.textContent="east",b=T(),w=E("button"),x=E("i"),x.textContent="south",P(i,"class","compass-circle svelte-1f35i07"),P(a,"class","material-icons svelte-1f35i07"),P(s,"class","compass-btn compass-north svelte-1f35i07"),s.disabled=c=!e[3],P(s,"title","North"),P(d,"class","material-icons svelte-1f35i07"),P(h,"class","compass-btn compass-west svelte-1f35i07"),h.disabled=f=!e[0],P(h,"title","West"),P(v,"class","compass-center svelte-1f35i07"),P(g,"class","material-icons svelte-1f35i07"),P(m,"class","compass-btn compass-east svelte-1f35i07"),m.disabled=y=!e[1],P(m,"title","East"),P(x,"class","material-icons svelte-1f35i07"),P(w,"class","compass-btn compass-south svelte-1f35i07"),w.disabled=L=!e[2],P(w,"title","South"),P(o,"class","compass svelte-1f35i07"),P(t,"class","compass-wrapper svelte-1f35i07")},m(r,l){S(r,t,l),C(t,i),C(t,n),C(t,o),C(o,s),C(s,a),C(o,u),C(o,h),C(h,d),C(o,p),C(o,v),C(o,_),C(o,m),C(m,g),C(o,b),C(o,w),C(w,x),M||(O=[R(s,"click",e[7]),R(h,"click",e[8]),R(m,"click",e[9]),R(w,"click",e[10])],M=!0)},p(e,[t]){8&t&&c!==(c=!e[3])&&(s.disabled=c),1&t&&f!==(f=!e[0])&&(h.disabled=f),2&t&&y!==(y=!e[1])&&(m.disabled=y),4&t&&L!==(L=!e[2])&&(w.disabled=L)},i:r,o:r,d(e){e&&k(t),M=!1,l(O)}}}function xi(e,t,i){let n,r,o,s,{cardinalExits:a=[]}=t,{sendMessage:l}=t;function c(e){l(e)}return e.$$set=e=>{"cardinalExits"in e&&i(5,a=e.cardinalExits),"sendMessage"in e&&i(6,l=e.sendMessage)},e.$$.update=()=>{32&e.$$.dirty&&console.log("CompassExits received:",a),32&e.$$.dirty&&i(3,n=a.find(e=>"north"===e.name)?.available||!1),32&e.$$.dirty&&i(2,r=a.find(e=>"south"===e.name)?.available||!1),32&e.$$.dirty&&i(1,o=a.find(e=>"east"===e.name)?.available||!1),32&e.$$.dirty&&i(0,s=a.find(e=>"west"===e.name)?.available||!1)},[s,o,r,n,c,a,l,()=>c("north"),()=>c("west"),()=>c("east"),()=>c("south")]}class Ei extends ge{constructor(e){super(),me(this,e,xi,ki,u,{cardinalExits:5,sendMessage:6})}}function Li(e,t,i){const n=e.slice();return n[23]=t[i],n}function Mi(e,t,i){const n=e.slice();return n[26]=t[i],n}function Oi(e,t,i){const n=e.slice();return n[23]=t[i],n}function Ti(e,t,i){const n=e.slice();return n[23]=t[i],n}function Di(e,t,i){const n=e.slice();return n[33]=t[i],n}function Ri(e){let t,i,n,r=e[8],o=[];for(let t=0;t<r.length;t+=1)o[t]=Ai(Di(e,r,t));return{c(){t=E("div");for(let e=0;e<o.length;e+=1)o[e].c();i=T(),n=E("div"),P(t,"class","special-exits svelte-1xlo1ch"),P(n,"class","separator svelte-1xlo1ch")},m(e,r){S(e,t,r);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null);S(e,i,r),S(e,n,r)},p(e,i){if(1280&i[0]){let n;for(r=e[8],n=0;n<r.length;n+=1){const s=Di(e,r,n);o[n]?o[n].p(s,i):(o[n]=Ai(s),o[n].c(),o[n].m(t,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}},d(e){e&&k(t),x(o,e),e&&k(i),e&&k(n)}}}function Ai(e){let t,i,n,r,o,s,a=e[33].name+"";function l(){return e[16](e[33])}return{c(){t=E("button"),i=O(a),n=T(),P(t,"class","btn exit-btn svelte-1xlo1ch"),P(t,"title",r=e[33].name)},m(e,r){S(e,t,r),C(t,i),C(t,n),o||(s=R(t,"click",l),o=!0)},p(n,o){e=n,256&o[0]&&a!==(a=e[33].name+"")&&B(i,a),256&o[0]&&r!==(r=e[33].name)&&P(t,"title",r)},d(e){e&&k(t),o=!1,s()}}}function Pi(e){let t,i,n,r,o,s,a,l,c,u,h=e[23].icon+"",d=e[23].label+"";function f(){return e[17](e[23])}return{c(){t=E("button"),i=E("i"),n=O(h),r=T(),o=O(d),s=T(),P(i,"class","material-icons svelte-1xlo1ch"),P(t,"class",a="btn "+(e[3].inCombat?"combat-btn":"cmd-btn")+" svelte-1xlo1ch"),P(t,"title",l=e[23].label)},m(e,a){S(e,t,a),C(t,i),C(i,n),C(t,r),C(t,o),C(t,s),c||(u=R(t,"click",f),c=!0)},p(i,r){e=i,128&r[0]&&h!==(h=e[23].icon+"")&&B(n,h),128&r[0]&&d!==(d=e[23].label+"")&&B(o,d),8&r[0]&&a!==(a="btn "+(e[3].inCombat?"combat-btn":"cmd-btn")+" svelte-1xlo1ch")&&P(t,"class",a),128&r[0]&&l!==(l=e[23].label)&&P(t,"title",l)},d(e){e&&k(t),c=!1,u()}}}function Bi(e){let t,i,n,r,o,s,a,l,c,u=e[23].icon+"",h=e[23].label+"";function d(){return e[18](e[23])}return{c(){t=E("button"),i=E("i"),n=O(u),r=T(),o=O(h),s=T(),P(i,"class","material-icons svelte-1xlo1ch"),P(t,"class","btn context-btn svelte-1xlo1ch"),P(t,"title",a=e[23].label)},m(e,a){S(e,t,a),C(t,i),C(i,n),C(t,r),C(t,o),C(t,s),l||(c=R(t,"click",d),l=!0)},p(i,r){e=i,64&r[0]&&u!==(u=e[23].icon+"")&&B(n,u),64&r[0]&&h!==(h=e[23].label+"")&&B(o,h),64&r[0]&&a!==(a=e[23].label)&&P(t,"title",a)},d(e){e&&k(t),l=!1,c()}}}function Ii(e){let t,i,n,r=e[5],o=[];for(let t=0;t<r.length;t+=1)o[t]=Hi(Mi(e,r,t));return{c(){t=E("div"),i=T(),n=E("div");for(let e=0;e<o.length;e+=1)o[e].c();P(t,"class","separator svelte-1xlo1ch"),P(n,"class","room-actions-section svelte-1xlo1ch")},m(e,r){S(e,t,r),S(e,i,r),S(e,n,r);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(n,null)},p(e,t){if(1056&t[0]){let i;for(r=e[5],i=0;i<r.length;i+=1){const s=Mi(e,r,i);o[i]?o[i].p(s,t):(o[i]=Hi(s),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(e){e&&k(t),e&&k(i),e&&k(n),x(o,e)}}}function Hi(e){let t,i,n,r,o,s,a=e[26].name+"";function l(){return e[19](e[26])}return{c(){t=E("button"),i=O(a),n=T(),P(t,"class","btn room-action-btn svelte-1xlo1ch"),P(t,"title",r=e[26].description||e[26].name)},m(e,r){S(e,t,r),C(t,i),C(t,n),o||(s=R(t,"click",l),o=!0)},p(n,o){e=n,32&o[0]&&a!==(a=e[26].name+"")&&B(i,a),32&o[0]&&r!==(r=e[26].description||e[26].name)&&P(t,"title",r)},d(e){e&&k(t),o=!1,s()}}}function ji(e){let t,i,n,r,o,s=e[9],a=[];for(let t=0;t<s.length;t+=1)a[t]=Wi(Li(e,s,t));return{c(){t=E("div"),i=T(),n=E("div");for(let e=0;e<a.length;e+=1)a[e].c();P(t,"class","menu-backdrop svelte-1xlo1ch"),P(n,"class","more-popup svelte-1xlo1ch")},m(s,l){S(s,t,l),S(s,i,l),S(s,n,l);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(n,null);r||(o=R(t,"click",e[12]),r=!0)},p(e,t){if(1536&t[0]){let i;for(s=e[9],i=0;i<s.length;i+=1){const r=Li(e,s,i);a[i]?a[i].p(r,t):(a[i]=Wi(r),a[i].c(),a[i].m(n,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=s.length}},d(e){e&&k(t),e&&k(i),e&&k(n),x(a,e),r=!1,o()}}}function Wi(e){let t,i,n,r,o,s,a,l,c=e[23].icon+"",u=e[23].label+"";function h(){return e[20](e[23])}return{c(){t=E("button"),i=E("i"),n=O(c),r=T(),o=O(u),s=T(),P(i,"class","material-icons svelte-1xlo1ch"),P(t,"class","popup-btn svelte-1xlo1ch"),P(t,"title",e[23].label)},m(e,c){S(e,t,c),C(t,i),C(i,n),C(t,r),C(t,o),C(t,s),a||(l=R(t,"click",h),a=!0)},p(t,i){e=t},d(e){e&&k(t),a=!1,l()}}}function Fi(e){let t,i,n,r,o,s,a,l,c,u,h,d,f,p,v,_,m,g,y;n=new Ei({props:{cardinalExits:e[2],sendMessage:e[1]}});let b=e[8].length>0&&Ri(e),w=e[7],L=[];for(let t=0;t<w.length;t+=1)L[t]=Pi(Ti(e,w,t));let M=e[6],O=[];for(let t=0;t<M.length;t+=1)O[t]=Bi(Oi(e,M,t));let D=e[5].length>0&&Ii(e),A=e[4]&&ji(e);return{c(){t=E("div"),i=E("div"),pe(n.$$.fragment),r=T(),o=E("div"),s=E("div"),b&&b.c(),a=T(),l=E("div");for(let e=0;e<L.length;e+=1)L[e].c();c=T();for(let e=0;e<O.length;e+=1)O[e].c();u=T(),D&&D.c(),h=T(),d=E("div"),f=T(),p=E("div"),v=E("button"),v.innerHTML='<i class="material-icons svelte-1xlo1ch">more_horiz</i>',_=T(),A&&A.c(),P(i,"class","compass-container svelte-1xlo1ch"),P(l,"class","commands-section svelte-1xlo1ch"),P(d,"class","spacer svelte-1xlo1ch"),P(v,"class","btn more-btn svelte-1xlo1ch"),P(v,"title","More commands"),j(v,"active",e[4]),P(p,"class","more-menu-container svelte-1xlo1ch"),P(s,"class","action-bar svelte-1xlo1ch"),P(o,"class","action-row svelte-1xlo1ch"),P(t,"class","mudx svelte-1xlo1ch")},m(w,k){S(w,t,k),C(t,i),ve(n,i,null),C(t,r),C(t,o),C(o,s),b&&b.m(s,null),C(s,a),C(s,l);for(let e=0;e<L.length;e+=1)L[e]&&L[e].m(l,null);C(l,c);for(let e=0;e<O.length;e+=1)O[e]&&O[e].m(l,null);C(s,u),D&&D.m(s,null),C(s,h),C(s,d),C(s,f),C(s,p),C(p,v),C(p,_),A&&A.m(p,null),m=!0,g||(y=R(v,"click",e[11]),g=!0)},p(e,t){const i={};if(4&t[0]&&(i.cardinalExits=e[2]),2&t[0]&&(i.sendMessage=e[1]),n.$set(i),e[8].length>0?b?b.p(e,t):(b=Ri(e),b.c(),b.m(s,a)):b&&(b.d(1),b=null),1160&t[0]){let i;for(w=e[7],i=0;i<w.length;i+=1){const n=Ti(e,w,i);L[i]?L[i].p(n,t):(L[i]=Pi(n),L[i].c(),L[i].m(l,c))}for(;i<L.length;i+=1)L[i].d(1);L.length=w.length}if(1088&t[0]){let i;for(M=e[6],i=0;i<M.length;i+=1){const n=Oi(e,M,i);O[i]?O[i].p(n,t):(O[i]=Bi(n),O[i].c(),O[i].m(l,null))}for(;i<O.length;i+=1)O[i].d(1);O.length=M.length}e[5].length>0?D?D.p(e,t):(D=Ii(e),D.c(),D.m(s,h)):D&&(D.d(1),D=null),(!m||16&t[0])&&j(v,"active",e[4]),e[4]?A?A.p(e,t):(A=ji(e),A.c(),A.m(p,null)):A&&(A.d(1),A=null)},i(e){m||(ce(n.$$.fragment,e),m=!0)},o(e){ue(n.$$.fragment,e),m=!1},d(e){e&&k(t),_e(n),b&&b.d(),x(L,e),x(O,e),D&&D.d(),A&&A.d(),g=!1,y()}}}function $i(e,t,i){let n,o,s,a,l,c,u,h,d=r,p=()=>(d(),d=f(v,e=>i(3,h=e)),v);e.$$.on_destroy.push(()=>d());let{store:v}=t;p();let{term:_}=t,{sendMessage:m}=t,g=!1;const y=[{name:"look",icon:"visibility",label:"Look"},{name:"i",icon:"inventory_2",label:"Inv"},{name:"equipment",icon:"shield",label:"Equip"},{name:"character",icon:"person",label:"Stats"}],b=[{name:"attack",icon:"swords",label:"Attack"},{name:"defend",icon:"security",label:"Defend"},{name:"flee",icon:"directions_run",label:"Flee"},{name:"status",icon:"monitor_heart",label:"Status"}];function w(e){m(e),i(4,g=!1)}return e.$$set=e=>{"store"in e&&p(i(0,v=e.store)),"term"in e&&i(13,_=e.term),"sendMessage"in e&&i(1,m=e.sendMessage)},e.$$.update=()=>{var t;8&e.$$.dirty[0]&&i(2,n=function(e){const t=e||[];return console.log("getCardinalExits input:",t),ke.map(e=>{const i=t.find(t=>{const i=(t.name||t.Name||t.direction||t.Direction||t.exit||t.Exit||t.id||t.ID||"").toLowerCase().trim(),n=t.hidden||t.Hidden||t.isHidden||!1,r=i===e&&!n;return r&&console.log(`Found exit match for ${e}:`,t),r});return{name:e,available:!!i}})}(h.exits)),8&e.$$.dirty[0]&&i(14,(t=h.exits,o=(t||[]).filter(e=>{const t=e.name?.toLowerCase();return!e.hidden&&!ke.includes(t)&&!xe.includes(t)}))),8&e.$$.dirty[0]&&i(15,s=function(e){return(e||[]).filter(e=>{const t=e.name?.toLowerCase();return!e.hidden&&xe.includes(t)})}(h.exits)),16396&e.$$.dirty[0]&&h.exits&&(console.log("Raw exits from store:",JSON.stringify(h.exits,null,2)),console.log("Cardinal exits derived:",JSON.stringify(n,null,2)),console.log("Special exits:",JSON.stringify(o,null,2))),49152&e.$$.dirty[0]&&i(8,a=[...s,...o]),8&e.$$.dirty[0]&&i(7,l=h.inCombat?b:y),8&e.$$.dirty[0]&&i(6,c=h.inCombat?[]:[...h.hasMerchant?[{name:"list",icon:"store",label:"Shop"}]:[],...h.hasItems?[{name:"pickup",icon:"back_hand",label:"Pickup"}]:[]]),8&e.$$.dirty[0]&&i(5,u=h.actions||[])},[v,m,n,h,g,u,c,l,a,[{name:"who",icon:"people",label:"Who"},{name:"bind",icon:"location_on",label:"Bind"},{name:"drop",icon:"delete",label:"Drop"},{name:"use",icon:"touch_app",label:"Use"},{name:"examine",icon:"search",label:"Examine"},{name:"shrug",icon:"sentiment_neutral",label:"Shrug"},{name:"scream",icon:"campaign",label:"Scream"},{name:"help",icon:"help",label:"Help"}],w,function(){i(4,g=!g)},function(){i(4,g=!1)},_,o,s,e=>w(e.name),e=>w(e.name),e=>w(e.name),e=>w(e.name),e=>w(e.name)]}class Ni extends ge{constructor(e){super(),me(this,e,$i,Fi,u,{store:0,term:13,sendMessage:1},null,[-1,-1])}}function zi(e){let t,i,n;return i=new Ni({props:{store:e[0],sendMessage:e[1],term:e[2]}}),{c(){t=E("div"),pe(i.$$.fragment),P(t,"class","actionbar-widget svelte-15y8uxh")},m(e,r){S(e,t,r),ve(i,t,null),n=!0},p(e,[t]){const n={};1&t&&(n.store=e[0]),2&t&&(n.sendMessage=e[1]),4&t&&(n.term=e[2]),i.$set(n)},i(e){n||(ce(i.$$.fragment,e),n=!0)},o(e){ue(i.$$.fragment,e),n=!1},d(e){e&&k(t),_e(i)}}}function Ui(e,t,i){let{store:n}=t,{sendMessage:r}=t,{term:o=null}=t;return e.$$set=e=>{"store"in e&&i(0,n=e.store),"sendMessage"in e&&i(1,r=e.sendMessage),"term"in e&&i(2,o=e.term)},[n,r,o]}class qi extends ge{constructor(e){super(),me(this,e,Ui,zi,u,{store:0,sendMessage:1,term:2})}}function Yi(e,t,i){const n=e.slice();return n[1]=t[i][0],n[2]=t[i][1],n}function Vi(e){let t,i,n,o,s,a,l,c=e[1].slice(0,3)+"",u=e[2]+"";return{c(){t=E("div"),i=E("span"),n=O(c),o=T(),s=E("span"),a=O(u),l=T(),P(i,"class","attr-name svelte-r31qiv"),P(s,"class","attr-value svelte-r31qiv"),P(t,"class","attr-item svelte-r31qiv")},m(e,r){S(e,t,r),C(t,i),C(i,n),C(t,o),C(t,s),C(s,a),C(t,l)},p:r,d(e){e&&k(t)}}}function Ki(e){let t,i,n,o,s,a,l,c,u,h,d,f,p,v,_,m,g,y,b,w,L,M,O,D,R,A,B,I,j,W,F,$,N,z,U,q,Y,V,K,G,X,Z,J,Q,ee=Object.entries(e[0].attributes),te=[];for(let t=0;t<ee.length;t+=1)te[t]=Vi(Yi(e,ee,t));return{c(){t=E("div"),i=E("div"),i.innerHTML='<i class="material-icons svelte-r31qiv">person</i> \n    <span class="widget-title svelte-r31qiv">Character</span>',n=T(),o=E("div"),o.textContent=`${e[0].name}`,s=T(),a=E("div"),a.textContent=`Level ${e[0].level}  ${e[0].race}  ${e[0].class}`,l=T(),c=E("div"),u=E("div"),h=E("span"),h.textContent="HP",d=T(),f=E("span"),f.textContent=`${e[0].currentHp}/${e[0].maxHp}`,p=T(),v=E("div"),_=E("div"),m=T(),g=E("div"),y=E("div"),b=E("span"),b.textContent="MP",w=T(),L=E("span"),L.textContent=`${e[0].currentMp}/${e[0].maxMp}`,M=T(),O=E("div"),D=E("div"),R=T(),A=E("div"),B=E("div"),I=E("span"),I.textContent="XP",j=T(),W=E("span"),W.textContent=`${e[0].xp}/${e[0].xpToNext}`,F=T(),$=E("div"),N=E("div"),z=T(),U=E("div"),q=E("span"),q.textContent="Gold",Y=T(),V=E("span"),V.textContent=`${e[0].gold.toLocaleString()}`,K=T(),G=E("div"),G.textContent="Attributes",X=T(),Z=E("div");for(let e=0;e<te.length;e+=1)te[e].c();J=T(),Q=E("div"),Q.textContent="Placeholder data - server integration pending",P(i,"class","widget-header svelte-r31qiv"),P(o,"class","char-name svelte-r31qiv"),P(a,"class","char-info svelte-r31qiv"),P(u,"class","bar-label svelte-r31qiv"),P(_,"class","bar-fill hp svelte-r31qiv"),H(_,"width",e[0].currentHp/e[0].maxHp*100+"%"),P(v,"class","bar svelte-r31qiv"),P(c,"class","bar-container svelte-r31qiv"),P(y,"class","bar-label svelte-r31qiv"),P(D,"class","bar-fill mp svelte-r31qiv"),H(D,"width",e[0].currentMp/e[0].maxMp*100+"%"),P(O,"class","bar svelte-r31qiv"),P(g,"class","bar-container svelte-r31qiv"),P(B,"class","bar-label svelte-r31qiv"),P(N,"class","bar-fill xp svelte-r31qiv"),H(N,"width",e[0].xp/e[0].xpToNext*100+"%"),P($,"class","bar svelte-r31qiv"),P(A,"class","bar-container svelte-r31qiv"),P(q,"class","stat-label svelte-r31qiv"),P(V,"class","stat-value gold svelte-r31qiv"),P(U,"class","stat-row svelte-r31qiv"),P(G,"class","section-title svelte-r31qiv"),P(Z,"class","attributes-grid svelte-r31qiv"),P(Q,"class","placeholder-notice svelte-r31qiv"),P(t,"class","character-widget svelte-r31qiv")},m(e,r){S(e,t,r),C(t,i),C(t,n),C(t,o),C(t,s),C(t,a),C(t,l),C(t,c),C(c,u),C(u,h),C(u,d),C(u,f),C(c,p),C(c,v),C(v,_),C(t,m),C(t,g),C(g,y),C(y,b),C(y,w),C(y,L),C(g,M),C(g,O),C(O,D),C(t,R),C(t,A),C(A,B),C(B,I),C(B,j),C(B,W),C(A,F),C(A,$),C($,N),C(t,z),C(t,U),C(U,q),C(U,Y),C(U,V),C(t,K),C(t,G),C(t,X),C(t,Z);for(let e=0;e<te.length;e+=1)te[e]&&te[e].m(Z,null);C(t,J),C(t,Q)},p(e,[t]){if(1&t){let i;for(ee=Object.entries(e[0].attributes),i=0;i<ee.length;i+=1){const n=Yi(e,ee,i);te[i]?te[i].p(n,t):(te[i]=Vi(n),te[i].c(),te[i].m(Z,null))}for(;i<te.length;i+=1)te[i].d(1);te.length=ee.length}},i:r,o:r,d(e){e&&k(t),x(te,e)}}}function Gi(e){return[{name:"Legolas Longstride",race:"Elf",class:"Ranger",level:12,xp:4250,xpToNext:5e3,gold:1847,currentHp:85,maxHp:100,currentMp:45,maxMp:60,attributes:{strength:14,dexterity:18,constitution:12,intelligence:13,wisdom:15,charisma:11}}]}class Xi extends ge{constructor(e){super(),me(this,e,Gi,Ki,u,{})}}function Zi(e,t,i){const n=e.slice();n[19]=t[i];const r=n[4](n[19]);return n[20]=r,n}function Ji(e){let t,i,n,r;return{c(){t=E("span"),i=E("i"),i.textContent="paid",n=T(),r=O(e[2]),P(i,"class","material-icons svelte-uuioh0"),P(t,"class","gold-display svelte-uuioh0")},m(e,o){S(e,t,o),C(t,i),C(t,n),C(t,r)},p(e,t){4&t&&B(r,e[2])},d(e){e&&k(t)}}}function Qi(e){let t,i=[],n=new Map,r=e[1];const o=e=>e[19].ID||e[19].name;for(let t=0;t<r.length;t+=1){let s=Zi(e,r,t),a=o(s);n.set(a,i[t]=cn(a,s))}return{c(){t=E("div");for(let e=0;e<i.length;e+=1)i[e].c();P(t,"class","inventory-grid svelte-uuioh0")},m(e,n){S(e,t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p(e,s){1018&s&&(r=e[1],i=fe(i,s,o,1,e,r,n,t,he,cn,null,Zi))},d(e){e&&k(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function en(e){let t;return{c(){t=E("div"),t.innerHTML='<i class="material-icons svelte-uuioh0">inventory_2</i>\n      Your inventory is empty.',P(t,"class","empty-state svelte-uuioh0")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function tn(e){let t;return{c(){t=E("span"),t.textContent="E",P(t,"class","equipped-badge svelte-uuioh0")},m(e,i){S(e,t,i)},d(e){e&&k(t)}}}function nn(e){let t,i,n,r=e[19].quantity+"";return{c(){t=E("span"),i=O("x"),n=O(r),P(t,"class","item-quantity svelte-uuioh0")},m(e,r){S(e,t,r),C(t,i),C(t,n)},p(e,t){2&t&&r!==(r=e[19].quantity+"")&&B(n,r)},d(e){e&&k(t)}}}function rn(e){let t,i,n,r,o=fn(e[19])&&!e[20];function s(e,t){return 2&t&&(i=null),e[20]?sn:(null==i&&(n=e[19],i=!(!n.slot||"inventory"===n.slot||"container"===n.slot||"purse"===n.slot)),i?on:void 0);var n}let a=s(e,-1),l=a&&a(e),c=o&&an(e),u=!e[20]&&ln(e);return{c(){t=E("div"),l&&l.c(),n=T(),c&&c.c(),r=T(),u&&u.c(),P(t,"class","action-popup svelte-uuioh0")},m(e,i){S(e,t,i),l&&l.m(t,null),C(t,n),c&&c.m(t,null),C(t,r),u&&u.m(t,null)},p(e,i){a===(a=s(e,i))&&l?l.p(e,i):(l&&l.d(1),l=a&&a(e),l&&(l.c(),l.m(t,n))),2&i&&(o=fn(e[19])&&!e[20]),o?c?c.p(e,i):(c=an(e),c.c(),c.m(t,r)):c&&(c.d(1),c=null),e[20]?u&&(u.d(1),u=null):u?u.p(e,i):(u=ln(e),u.c(),u.m(t,null))},d(e){e&&k(t),l&&l.d(),c&&c.d(),u&&u.d()}}}function on(e){let t,i,n;function r(){return e[13](e[19])}return{c(){t=E("button"),t.innerHTML='<i class="material-icons svelte-uuioh0">shield</i> Equip',P(t,"class","action-btn equip svelte-uuioh0")},m(e,o){S(e,t,o),i||(n=R(t,"click",A(r)),i=!0)},p(t,i){e=t},d(e){e&&k(t),i=!1,n()}}}function sn(e){let t,i,n;function r(){return e[12](e[19])}return{c(){t=E("button"),t.innerHTML='<i class="material-icons svelte-uuioh0">remove_circle_outline</i> Unequip',P(t,"class","action-btn unequip svelte-uuioh0")},m(e,o){S(e,t,o),i||(n=R(t,"click",A(r)),i=!0)},p(t,i){e=t},d(e){e&&k(t),i=!1,n()}}}function an(e){let t,i,n;function r(){return e[14](e[19])}return{c(){t=E("button"),t.innerHTML='<i class="material-icons svelte-uuioh0">local_drink</i> Use',P(t,"class","action-btn use svelte-uuioh0")},m(e,o){S(e,t,o),i||(n=R(t,"click",A(r)),i=!0)},p(t,i){e=t},d(e){e&&k(t),i=!1,n()}}}function ln(e){let t,i,n;function r(){return e[15](e[19])}return{c(){t=E("button"),t.innerHTML='<i class="material-icons svelte-uuioh0">delete_outline</i> Drop',P(t,"class","action-btn drop svelte-uuioh0")},m(e,o){S(e,t,o),i||(n=R(t,"click",A(r)),i=!0)},p(t,i){e=t},d(e){e&&k(t),i=!1,n()}}}function cn(e,t){let i,n,r,o,s,a,l,c,u,h,d,f,p,v=dn(t[19])+"",_=t[19].name+"",m=t[20]&&tn(),g=t[19].stackable&&t[19].quantity>1&&nn(t),y=t[3]===t[19].ID&&rn(t);function b(){return t[16](t[19])}return{key:e,first:null,c(){i=E("div"),m&&m.c(),n=T(),r=E("i"),o=O(v),s=T(),a=E("span"),l=O(_),c=T(),g&&g.c(),u=T(),y&&y.c(),h=T(),P(r,"class","material-icons item-icon svelte-uuioh0"),H(r,"color",hn(t[19].quality)),P(a,"class","item-name svelte-uuioh0"),P(i,"class","item-slot svelte-uuioh0"),P(i,"title",d=t[19].name+(t[19].quality&&"normal"!==t[19].quality?" ["+t[19].quality.toUpperCase()+"]":"")+(t[19].type?" ("+t[19].type+")":"")),H(i,"border-color",hn(t[19].quality)),j(i,"selected",t[3]===t[19].ID),j(i,"equipped-item",t[20]),this.first=i},m(e,t){S(e,i,t),m&&m.m(i,null),C(i,n),C(i,r),C(r,o),C(i,s),C(i,a),C(a,l),C(i,c),g&&g.m(i,null),C(i,u),y&&y.m(i,null),C(i,h),f||(p=R(i,"click",b),f=!0)},p(e,s){(t=e)[20]?m||(m=tn(),m.c(),m.m(i,n)):m&&(m.d(1),m=null),2&s&&v!==(v=dn(t[19])+"")&&B(o,v),2&s&&H(r,"color",hn(t[19].quality)),2&s&&_!==(_=t[19].name+"")&&B(l,_),t[19].stackable&&t[19].quantity>1?g?g.p(t,s):(g=nn(t),g.c(),g.m(i,u)):g&&(g.d(1),g=null),t[3]===t[19].ID?y?y.p(t,s):(y=rn(t),y.c(),y.m(i,h)):y&&(y.d(1),y=null),2&s&&d!==(d=t[19].name+(t[19].quality&&"normal"!==t[19].quality?" ["+t[19].quality.toUpperCase()+"]":"")+(t[19].type?" ("+t[19].type+")":""))&&P(i,"title",d),2&s&&H(i,"border-color",hn(t[19].quality)),10&s&&j(i,"selected",t[3]===t[19].ID),18&s&&j(i,"equipped-item",t[20])},d(e){e&&k(i),m&&m.d(),g&&g.d(),y&&y.d(),f=!1,p()}}}function un(e){let t,i,n,o,s,a,l,c,u,h,d,f,p=e[1].length+"",v=e[2]>0&&Ji(e);function _(e,t){return 0===e[1].length?en:Qi}let m=_(e),g=m(e);return{c(){t=E("div"),i=E("div"),n=E("i"),n.textContent="inventory_2",o=T(),s=E("span"),s.textContent="Inventory",a=T(),l=E("div"),v&&v.c(),c=T(),u=E("span"),h=O(p),d=O(" items"),f=T(),g.c(),P(n,"class","material-icons svelte-uuioh0"),P(s,"class","widget-title svelte-uuioh0"),P(u,"class","item-count svelte-uuioh0"),P(l,"class","header-right svelte-uuioh0"),P(i,"class","widget-header svelte-uuioh0"),P(t,"class","inventory-widget svelte-uuioh0")},m(e,r){S(e,t,r),C(t,i),C(i,n),C(i,o),C(i,s),C(i,a),C(i,l),v&&v.m(l,null),C(l,c),C(l,u),C(u,h),C(u,d),C(t,f),g.m(t,null)},p(e,[i]){e[2]>0?v?v.p(e,i):(v=Ji(e),v.c(),v.m(l,c)):v&&(v.d(1),v=null),2&i&&p!==(p=e[1].length+"")&&B(h,p),m===(m=_(e))&&g?g.p(e,i):(g.d(1),g=m(e),g&&(g.c(),g.m(t,null)))},i:r,o:r,d(e){e&&k(t),v&&v.d(),g.d()}}}function hn(e){switch(e){case"magic":return"#22c55e";case"rare":return"#3b82f6";case"legendary":return"#a855f7";case"mythic":return"#f59e0b";default:return"#9ca3af"}}function dn(e){if(e.meta&&e.meta.img)return null;switch(e.type){case"weapon":return"bolt";case"armor":return"security";case"consumable":return"local_drink";case"quest":return"auto_stories";case"currency":return"paid";case"collectible":return"star";case"crafting_material":return"build";default:return"inventory_2"}}function fn(e){return"consumable"===e.type||e.consumable}function pn(e,t,i){let n,o=r,s=()=>(o(),o=f(a,e=>i(11,n=e)),a);e.$$.on_destroy.push(()=>o());let{store:a=null}=t;s();let{sendMessage:l=null}=t,c=[],u={},h=0,d=null;function p(e){i(3,d=d===e?null:e)}function v(e){l&&l(e),i(3,d=null)}function _(e){v("equip "+(e.instanceSuffix?e.name+"-"+e.instanceSuffix:e.name))}function m(e){v("drop "+(e.instanceSuffix?e.name+"-"+e.instanceSuffix:e.name))}function g(e){v("use "+(e.instanceSuffix?e.name+"-"+e.instanceSuffix:e.name))}function y(e){v("unequip "+(e.instanceSuffix?e.name+"-"+e.instanceSuffix:e.name))}return e.$$set=e=>{"store"in e&&s(i(0,a=e.store)),"sendMessage"in e&&i(10,l=e.sendMessage)},e.$$.update=()=>{2049&e.$$.dirty&&a&&(i(1,c=n.inventory||[]),u=n.equippedItems||{},i(2,h=n.gold||0))},[a,c,h,d,function(e){return!!u&&Object.values(u).some(t=>t&&t.ID===e.ID)},p,_,m,g,y,l,n,e=>y(e),e=>_(e),e=>g(e),e=>m(e),e=>p(e.ID)]}class vn extends ge{constructor(e){super(),me(this,e,pn,un,u,{store:0,sendMessage:10})}}function _n(e){let t;return{c(){t=E("span"),t.textContent="Empty",P(t,"class","slot-empty svelte-1ji3ghz")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function mn(e){let t,i,n,o,s=e[0].head.icon+"";return{c(){t=E("i"),i=O(s),n=T(),o=E("span"),o.textContent=`${e[0].head.name}`,P(t,"class","material-icons slot-icon svelte-1ji3ghz"),H(t,"color",Bn(e[0].head.rarity)),P(o,"class","slot-name svelte-1ji3ghz")},m(e,r){S(e,t,r),C(t,i),S(e,n,r),S(e,o,r)},p:r,d(e){e&&k(t),e&&k(n),e&&k(o)}}}function gn(e){let t;return{c(){t=E("span"),t.textContent="Empty",P(t,"class","slot-empty svelte-1ji3ghz")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function yn(e){let t,i,n,o,s=e[0].neck.icon+"";return{c(){t=E("i"),i=O(s),n=T(),o=E("span"),o.textContent=`${e[0].neck.name}`,P(t,"class","material-icons slot-icon svelte-1ji3ghz"),H(t,"color",Bn(e[0].neck.rarity)),P(o,"class","slot-name svelte-1ji3ghz")},m(e,r){S(e,t,r),C(t,i),S(e,n,r),S(e,o,r)},p:r,d(e){e&&k(t),e&&k(n),e&&k(o)}}}function bn(e){let t;return{c(){t=E("span"),t.textContent="Empty",P(t,"class","slot-empty svelte-1ji3ghz")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function wn(e){let t,i,n,o,s=e[0].body.icon+"";return{c(){t=E("i"),i=O(s),n=T(),o=E("span"),o.textContent=`${e[0].body.name}`,P(t,"class","material-icons slot-icon svelte-1ji3ghz"),H(t,"color",Bn(e[0].body.rarity)),P(o,"class","slot-name svelte-1ji3ghz")},m(e,r){S(e,t,r),C(t,i),S(e,n,r),S(e,o,r)},p:r,d(e){e&&k(t),e&&k(n),e&&k(o)}}}function Cn(e){let t;return{c(){t=E("span"),t.textContent="Empty",P(t,"class","slot-empty svelte-1ji3ghz")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function Sn(e){let t,i,n,o,s=e[0].mainHand.icon+"";return{c(){t=E("i"),i=O(s),n=T(),o=E("span"),o.textContent=`${e[0].mainHand.name}`,P(t,"class","material-icons slot-icon svelte-1ji3ghz"),H(t,"color",Bn(e[0].mainHand.rarity)),P(o,"class","slot-name svelte-1ji3ghz")},m(e,r){S(e,t,r),C(t,i),S(e,n,r),S(e,o,r)},p:r,d(e){e&&k(t),e&&k(n),e&&k(o)}}}function kn(e){let t;return{c(){t=E("span"),t.textContent="Empty",P(t,"class","slot-empty svelte-1ji3ghz")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function xn(e){let t,i,n,o,s=e[0].hands.icon+"";return{c(){t=E("i"),i=O(s),n=T(),o=E("span"),o.textContent=`${e[0].hands.name}`,P(t,"class","material-icons slot-icon svelte-1ji3ghz"),H(t,"color",Bn(e[0].hands.rarity)),P(o,"class","slot-name svelte-1ji3ghz")},m(e,r){S(e,t,r),C(t,i),S(e,n,r),S(e,o,r)},p:r,d(e){e&&k(t),e&&k(n),e&&k(o)}}}function En(e){let t;return{c(){t=E("span"),t.textContent="Empty",P(t,"class","slot-empty svelte-1ji3ghz")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function Ln(e){let t,i,n,o,s=e[0].offHand.icon+"";return{c(){t=E("i"),i=O(s),n=T(),o=E("span"),o.textContent=`${e[0].offHand.name}`,P(t,"class","material-icons slot-icon svelte-1ji3ghz"),H(t,"color",Bn(e[0].offHand.rarity)),P(o,"class","slot-name svelte-1ji3ghz")},m(e,r){S(e,t,r),C(t,i),S(e,n,r),S(e,o,r)},p:r,d(e){e&&k(t),e&&k(n),e&&k(o)}}}function Mn(e){let t;return{c(){t=E("span"),t.textContent="Empty",P(t,"class","slot-empty svelte-1ji3ghz")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function On(e){let t,i,n,o,s=e[0].feet.icon+"";return{c(){t=E("i"),i=O(s),n=T(),o=E("span"),o.textContent=`${e[0].feet.name}`,P(t,"class","material-icons slot-icon svelte-1ji3ghz"),H(t,"color",Bn(e[0].feet.rarity)),P(o,"class","slot-name svelte-1ji3ghz")},m(e,r){S(e,t,r),C(t,i),S(e,n,r),S(e,o,r)},p:r,d(e){e&&k(t),e&&k(n),e&&k(o)}}}function Tn(e){let t;return{c(){t=E("span"),t.textContent="Empty",P(t,"class","slot-empty svelte-1ji3ghz")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function Dn(e){let t,i,n,o,s=e[0].ring1.icon+"";return{c(){t=E("i"),i=O(s),n=T(),o=E("span"),o.textContent=`${e[0].ring1.name}`,P(t,"class","material-icons slot-icon svelte-1ji3ghz"),H(t,"color",Bn(e[0].ring1.rarity)),P(o,"class","slot-name svelte-1ji3ghz")},m(e,r){S(e,t,r),C(t,i),S(e,n,r),S(e,o,r)},p:r,d(e){e&&k(t),e&&k(n),e&&k(o)}}}function Rn(e){let t;return{c(){t=E("span"),t.textContent="Empty",P(t,"class","slot-empty svelte-1ji3ghz")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function An(e){let t,i,n,o,s=e[0].ring2.icon+"";return{c(){t=E("i"),i=O(s),n=T(),o=E("span"),o.textContent=`${e[0].ring2.name}`,P(t,"class","material-icons slot-icon svelte-1ji3ghz"),H(t,"color",Bn(e[0].ring2.rarity)),P(o,"class","slot-name svelte-1ji3ghz")},m(e,r){S(e,t,r),C(t,i),S(e,n,r),S(e,o,r)},p:r,d(e){e&&k(t),e&&k(n),e&&k(o)}}}function Pn(e){let t,i,n,o,s,a,l,c,u,h,d,f,p,v,_,m,g,y,b,w,x,L,M,O,D,R,A,B,I,W,F,$,N,z,U,q,Y,V,K,G,X,Z,J,Q,ee;let te=function(e){return e[0].head?mn:_n}(e),ie=te(e);let ne=function(e){return e[0].neck?yn:gn}(e),re=ne(e);let oe=function(e){return e[0].body?wn:bn}(e),se=oe(e);let ae=function(e){return e[0].mainHand?Sn:Cn}(e),le=ae(e);let ce=function(e){return e[0].hands?xn:kn}(e),ue=ce(e);let he=function(e){return e[0].offHand?Ln:En}(e),de=he(e);let fe=function(e){return e[0].feet?On:Mn}(e),pe=fe(e);let ve=function(e){return e[0].ring1?Dn:Tn}(e),_e=ve(e);let me=function(e){return e[0].ring2?An:Rn}(e),ge=me(e);return{c(){t=E("div"),i=E("div"),i.innerHTML='<i class="material-icons svelte-1ji3ghz">shield</i> \n    <span class="widget-title svelte-1ji3ghz">Equipment</span>',n=T(),o=E("div"),s=E("div"),a=E("div"),l=E("span"),l.textContent=`${e[1].head}`,c=T(),ie.c(),u=T(),h=E("div"),d=E("span"),d.textContent=`${e[1].neck}`,f=T(),re.c(),p=T(),v=E("div"),_=E("div"),m=E("span"),m.textContent=`${e[1].body}`,g=T(),se.c(),y=T(),b=E("div"),w=E("div"),x=E("span"),x.textContent=`${e[1].mainHand}`,L=T(),le.c(),M=T(),O=E("div"),D=E("span"),D.textContent=`${e[1].hands}`,R=T(),ue.c(),A=T(),B=E("div"),I=E("span"),I.textContent=`${e[1].offHand}`,W=T(),de.c(),F=T(),$=E("div"),N=E("div"),z=E("span"),z.textContent=`${e[1].feet}`,U=T(),pe.c(),q=T(),Y=E("div"),V=E("span"),V.textContent=`${e[1].ring1}`,K=T(),_e.c(),G=T(),X=E("div"),Z=E("span"),Z.textContent=`${e[1].ring2}`,J=T(),ge.c(),Q=T(),ee=E("div"),ee.textContent="Placeholder data - server integration pending",P(i,"class","widget-header svelte-1ji3ghz"),P(l,"class","slot-label svelte-1ji3ghz"),P(a,"class","equipment-slot svelte-1ji3ghz"),H(a,"border-color",Bn(e[0].head?.rarity)),j(a,"empty",!e[0].head),P(d,"class","slot-label svelte-1ji3ghz"),P(h,"class","equipment-slot svelte-1ji3ghz"),H(h,"border-color",Bn(e[0].neck?.rarity)),j(h,"empty",!e[0].neck),P(s,"class","equipment-row svelte-1ji3ghz"),P(m,"class","slot-label svelte-1ji3ghz"),P(_,"class","equipment-slot svelte-1ji3ghz"),H(_,"border-color",Bn(e[0].body?.rarity)),j(_,"empty",!e[0].body),P(v,"class","equipment-row svelte-1ji3ghz"),P(x,"class","slot-label svelte-1ji3ghz"),P(w,"class","equipment-slot svelte-1ji3ghz"),H(w,"border-color",Bn(e[0].mainHand?.rarity)),j(w,"empty",!e[0].mainHand),P(D,"class","slot-label svelte-1ji3ghz"),P(O,"class","equipment-slot svelte-1ji3ghz"),H(O,"border-color",Bn(e[0].hands?.rarity)),j(O,"empty",!e[0].hands),P(I,"class","slot-label svelte-1ji3ghz"),P(B,"class","equipment-slot svelte-1ji3ghz"),H(B,"border-color",Bn(e[0].offHand?.rarity)),j(B,"empty",!e[0].offHand),P(b,"class","equipment-row svelte-1ji3ghz"),P(z,"class","slot-label svelte-1ji3ghz"),P(N,"class","equipment-slot svelte-1ji3ghz"),H(N,"border-color",Bn(e[0].feet?.rarity)),j(N,"empty",!e[0].feet),P(V,"class","slot-label svelte-1ji3ghz"),P(Y,"class","equipment-slot svelte-1ji3ghz"),H(Y,"border-color",Bn(e[0].ring1?.rarity)),j(Y,"empty",!e[0].ring1),P(Z,"class","slot-label svelte-1ji3ghz"),P(X,"class","equipment-slot svelte-1ji3ghz"),H(X,"border-color",Bn(e[0].ring2?.rarity)),j(X,"empty",!e[0].ring2),P($,"class","equipment-row svelte-1ji3ghz"),P(o,"class","equipment-grid svelte-1ji3ghz"),P(ee,"class","placeholder-notice svelte-1ji3ghz"),P(t,"class","equipment-widget svelte-1ji3ghz")},m(e,r){S(e,t,r),C(t,i),C(t,n),C(t,o),C(o,s),C(s,a),C(a,l),C(a,c),ie.m(a,null),C(s,u),C(s,h),C(h,d),C(h,f),re.m(h,null),C(o,p),C(o,v),C(v,_),C(_,m),C(_,g),se.m(_,null),C(o,y),C(o,b),C(b,w),C(w,x),C(w,L),le.m(w,null),C(b,M),C(b,O),C(O,D),C(O,R),ue.m(O,null),C(b,A),C(b,B),C(B,I),C(B,W),de.m(B,null),C(o,F),C(o,$),C($,N),C(N,z),C(N,U),pe.m(N,null),C($,q),C($,Y),C(Y,V),C(Y,K),_e.m(Y,null),C($,G),C($,X),C(X,Z),C(X,J),ge.m(X,null),C(t,Q),C(t,ee)},p(e,[t]){ie.p(e,t),re.p(e,t),se.p(e,t),le.p(e,t),ue.p(e,t),de.p(e,t),pe.p(e,t),_e.p(e,t),ge.p(e,t)},i:r,o:r,d(e){e&&k(t),ie.d(),re.d(),se.d(),le.d(),ue.d(),de.d(),pe.d(),_e.d(),ge.d()}}}function Bn(e){if(!e)return"#4b5563";switch(e){case"uncommon":return"#22c55e";case"rare":return"#3b82f6";case"epic":return"#a855f7";case"legendary":return"#f59e0b";default:return"#9ca3af"}}function In(e){return[{head:{name:"Steel Helm",icon:"person",rarity:"uncommon"},body:{name:"Chainmail",icon:"checkroom",rarity:"uncommon"},hands:null,feet:{name:"Leather Boots",icon:"do_not_step",rarity:"common"},mainHand:{name:"Iron Sword",icon:"bolt",rarity:"uncommon"},offHand:{name:"Wooden Shield",icon:"shield",rarity:"common"},ring1:{name:"Gold Ring",icon:"circle",rarity:"rare"},ring2:null,neck:null},{head:"Head",body:"Body",hands:"Hands",feet:"Feet",mainHand:"Main Hand",offHand:"Off Hand",ring1:"Ring 1",ring2:"Ring 2",neck:"Neck"}]}class Hn extends ge{constructor(e){super(),me(this,e,In,Pn,u,{})}}function jn(e){let t,i,n,o=e[15].widgetType+"";return{c(){t=E("div"),i=O("Unknown widget: "),n=O(o)},m(e,r){S(e,t,r),C(t,i),C(t,n)},p(e,t){32768&t&&o!==(o=e[15].widgetType+"")&&B(n,o)},i:r,o:r,d(e){e&&k(t)}}}function Wn(e){let t,i,n;const r=[e[5](e[15])];var s=e[4](e[15].widgetType);function a(e){let t={};for(let e=0;e<r.length;e+=1)t=o(t,r[e]);return{props:t}}return s&&(t=W(s,a())),{c(){t&&pe(t.$$.fragment),i=D()},m(e,r){t&&ve(t,e,r),S(e,i,r),n=!0},p(e,n){const o=32800&n?function(e,t){const i={},n={},r={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(n[e]=1);for(const e in a)r[e]||(i[e]=a[e],r[e]=1);e[o]=a}else for(const e in s)r[e]=1}for(const e in n)e in i||(i[e]=void 0);return i}(r,[(l=e[5](e[15]),"object"==typeof l&&null!==l?l:{})]):{};var l;if(32768&n&&s!==(s=e[4](e[15].widgetType))){if(t){ae();const e=t;ue(e.$$.fragment,1,0,()=>{_e(e,1)}),le()}s?(t=W(s,a()),pe(t.$$.fragment),ce(t.$$.fragment,1),ve(t,i.parentNode,i)):t=null}else s&&t.$set(o)},i(e){n||(t&&ce(t.$$.fragment,e),n=!0)},o(e){t&&ue(t.$$.fragment,e),n=!1},d(e){e&&k(i),t&&_e(t,e)}}}function Fn(e){let t,i,n,r,o;const s=[Wn,jn],a=[];function l(e,i){return 32768&i&&(t=null),null==t&&(t=!!e[4](e[15].widgetType)),t?0:1}return i=l(e,-1),n=a[i]=s[i](e),{c(){n.c(),r=D()},m(e,t){a[i].m(e,t),S(e,r,t),o=!0},p(e,t){let o=i;i=l(e,t),i===o?a[i].p(e,t):(ae(),ue(a[o],1,1,()=>{a[o]=null}),le(),n=a[i],n?n.p(e,t):(n=a[i]=s[i](e),n.c()),ce(n,1),n.m(r.parentNode,r))},i(e){o||(ce(n),o=!0)},o(e){ue(n),o=!1},d(e){a[i].d(e),e&&k(r)}}}function $n(e){let t,i,n;return i=new ht({props:{widget:e[15],editMode:e[1],resizePointerDown:e[16],$$slots:{default:[Fn]},$$scope:{ctx:e}}}),i.$on("remove",e[3]),{c(){t=E("div"),pe(i.$$.fragment),P(t,"class","grid-item-content svelte-kufy8k")},m(e,r){S(e,t,r),ve(i,t,null),n=!0},p(e,t){const n={};32768&t&&(n.widget=e[15]),2&t&&(n.editMode=e[1]),65536&t&&(n.resizePointerDown=e[16]),163840&t&&(n.$$scope={dirty:t,ctx:e}),i.$set(n)},i(e){n||(ce(i.$$.fragment,e),n=!0)},o(e){ue(i.$$.fragment,e),n=!1},d(e){e&&k(t),_e(i)}}}function Nn(e){let t,i,n,r;function o(t){e[10](t)}let s={rowHeight:Un,cols:[[zn,zn]],gap:[qn,qn],fastStart:!0,sensor:20,throttleResize:999999,$$slots:{default:[$n,({dataItem:e,resizePointerDown:t})=>({15:e,16:t}),({dataItem:e,resizePointerDown:t})=>(e?32768:0)|(t?65536:0)]},$$scope:{ctx:e}};return void 0!==e[0]&&(s.items=e[0]),i=new rt({props:s}),K.push(()=>function(e,t,i){const n=e.$$.props[t];void 0!==n&&(e.$$.bound[n]=i,i(e.$$.ctx[n]))}(i,"items",o)),i.$on("change",e[2]),{c(){t=E("div"),pe(i.$$.fragment),P(t,"class","widget-grid-container svelte-kufy8k"),j(t,"edit-mode",e[1])},m(e,n){S(e,t,n),ve(i,t,null),r=!0},p(e,[o]){const s={};229378&o&&(s.$$scope={dirty:o,ctx:e}),!n&&1&o&&(n=!0,s.items=e[0],function(e){X.push(e)}(()=>n=!1)),i.$set(s),(!r||2&o)&&j(t,"edit-mode",e[1])},i(e){r||(ce(i.$$.fragment,e),r=!0)},o(e){ue(i.$$.fragment,e),r=!1},d(e){e&&k(t),_e(i)}}}const zn=24,Un=40,qn=8;function Yn(e,t,i){let{store:n}=t,{sendMessage:r}=t,{onTerminalReady:o=()=>{}}=t,{onTerminalInput:s=()=>{}}=t;const a={room:zt,terminal:_i,terminalx:Si,actionbar:qi,character:Xi,inventory:vn,equipment:Hn};let l=p(Te),c=l.widgets,u=l.editMode,h=c.length;return q(Te.subscribe(e=>{const t=e.widgets.length;e.editMode===u&&t===h||(i(1,u=e.editMode),i(0,c=e.widgets),h=t)})),e.$$set=e=>{"store"in e&&i(6,n=e.store),"sendMessage"in e&&i(7,r=e.sendMessage),"onTerminalReady"in e&&i(8,o=e.onTerminalReady),"onTerminalInput"in e&&i(9,s=e.onTerminalInput)},[c,u,function(e){const{unsafeItem:t,id:n,cols:r}=e.detail;i(0,c=c.map(e=>e.id===n&&t&&t[r]?{...e,[r]:{...e[r],x:t[r].x,y:t[r].y,w:t[r].w,h:t[r].h,min:e[r]?.min||{w:4,h:3},max:e[r]?.max||{w:24,h:20},customResizer:e[r]?.customResizer??!0}}:e)),Te.updateWidgets(c)},function(e){Te.removeWidget(e.detail.id),i(0,c=c.filter(t=>t.id!==e.detail.id))},function(e){return a[e]||null},function(e){const t={};switch(e.widgetType){case"room":case"inventory":return{store:n,sendMessage:r};case"terminal":case"terminalx":return{onTerminalReady:o,onInput:s};case"actionbar":return{store:n,sendMessage:r,term:null};default:return t}},n,r,o,s,function(e){c=e,i(0,c)}]}class Vn extends ge{constructor(e){super(),me(this,e,Yn,Nn,u,{store:6,sendMessage:7,onTerminalReady:8,onTerminalInput:9})}}function Kn(e){let t,i,n,o,s,a,c,u,h,d,f,p,v,_,m,g;return{c(){t=E("div"),i=E("div"),i.innerHTML='<i class="material-icons svelte-e5t6u0">edit</i>\n    Edit Mode',n=T(),o=E("div"),s=T(),a=E("button"),a.innerHTML='<i class="material-icons svelte-e5t6u0">add</i>\n    Add Widget',c=T(),u=E("button"),u.innerHTML='<i class="material-icons svelte-e5t6u0">refresh</i>\n    Reset',h=T(),d=E("div"),f=T(),p=E("button"),p.innerHTML='<i class="material-icons svelte-e5t6u0">close</i>\n    Cancel',v=T(),_=E("button"),_.innerHTML='<i class="material-icons svelte-e5t6u0">save</i>\n    Save',P(i,"class","edit-mode-label svelte-e5t6u0"),P(o,"class","divider svelte-e5t6u0"),P(a,"class","toolbar-btn add-btn svelte-e5t6u0"),P(u,"class","toolbar-btn reset-btn svelte-e5t6u0"),P(d,"class","divider svelte-e5t6u0"),P(p,"class","toolbar-btn cancel-btn svelte-e5t6u0"),P(_,"class","toolbar-btn save-btn svelte-e5t6u0"),P(t,"class","edit-toolbar svelte-e5t6u0")},m(r,l){S(r,t,l),C(t,i),C(t,n),C(t,o),C(t,s),C(t,a),C(t,c),C(t,u),C(t,h),C(t,d),C(t,f),C(t,p),C(t,v),C(t,_),m||(g=[R(a,"click",e[3]),R(u,"click",e[2]),R(p,"click",e[1]),R(_,"click",e[0])],m=!0)},p:r,i:r,o:r,d(e){e&&k(t),m=!1,l(g)}}}function Gn(e){const t=Y();return[function(){Te.exitEditMode(!0)},function(){Te.exitEditMode(!1)},function(){confirm("Reset layout to default? This will discard your custom layout.")&&Te.resetToDefault()},function(){t("openAddPanel")}]}class Xn extends ge{constructor(e){super(),me(this,e,Gn,Kn,u,{})}}function Zn(e,t,i){const n=e.slice();return n[8]=t[i],n}function Jn(e,t,i){const n=e.slice();return n[11]=t[i],n}function Qn(e){let t;return{c(){t=E("div"),t.textContent="Already added",P(t,"class","already-added svelte-463lfb")},m(e,i){S(e,t,i)},d(e){e&&k(t)}}}function er(e){let t,i,n,r,o,s,a,l,c,u,h,d,f,p,v=e[11].icon+"",_=e[11].name+"",m=e[11].description+"",g=!e[11].canAdd&&Qn();function y(){return e[6](e[11])}return{c(){t=E("div"),i=E("div"),n=E("i"),r=O(v),o=T(),s=E("div"),a=O(_),l=T(),c=E("div"),u=O(m),h=T(),g&&g.c(),d=T(),P(n,"class","material-icons svelte-463lfb"),P(i,"class","widget-icon svelte-463lfb"),P(s,"class","widget-name svelte-463lfb"),P(c,"class","widget-description svelte-463lfb"),P(t,"class","widget-card svelte-463lfb"),j(t,"disabled",!e[11].canAdd)},m(e,v){S(e,t,v),C(t,i),C(i,n),C(n,r),C(t,o),C(t,s),C(s,a),C(t,l),C(t,c),C(c,u),C(t,h),g&&g.m(t,null),C(t,d),f||(p=R(t,"click",y),f=!0)},p(i,n){e=i,1&n&&v!==(v=e[11].icon+"")&&B(r,v),1&n&&_!==(_=e[11].name+"")&&B(a,_),1&n&&m!==(m=e[11].description+"")&&B(u,m),e[11].canAdd?g&&(g.d(1),g=null):g||(g=Qn(),g.c(),g.m(t,d)),1&n&&j(t,"disabled",!e[11].canAdd)},d(e){e&&k(t),g&&g.d(),f=!1,p()}}}function tr(e){let t,i,n,r,o,s,a=e[8].name+"",l=e[8].widgets,c=[];for(let t=0;t<l.length;t+=1)c[t]=er(Jn(e,l,t));return{c(){t=E("div"),i=E("div"),n=O(a),r=T(),o=E("div");for(let e=0;e<c.length;e+=1)c[e].c();s=T(),P(i,"class","category-header svelte-463lfb"),P(o,"class","widget-grid svelte-463lfb"),P(t,"class","category svelte-463lfb")},m(e,a){S(e,t,a),C(t,i),C(i,n),C(t,r),C(t,o);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(o,null);C(t,s)},p(e,t){if(1&t&&a!==(a=e[8].name+"")&&B(n,a),3&t){let i;for(l=e[8].widgets,i=0;i<l.length;i+=1){const n=Jn(e,l,i);c[i]?c[i].p(n,t):(c[i]=er(n),c[i].c(),c[i].m(o,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=l.length}},d(e){e&&k(t),x(c,e)}}}function ir(e){let t,i,n,o,s,a,c,u,h,d=e[0],f=[];for(let t=0;t<d.length;t+=1)f[t]=tr(Zn(e,d,t));return{c(){t=E("div"),i=E("div"),n=E("div"),o=E("div"),o.innerHTML='<i class="material-icons svelte-463lfb">widgets</i>\n        Add Widget',s=T(),a=E("button"),a.innerHTML='<i class="material-icons">close</i>',c=T();for(let e=0;e<f.length;e+=1)f[e].c();P(o,"class","panel-title svelte-463lfb"),P(a,"class","close-btn svelte-463lfb"),P(n,"class","panel-header svelte-463lfb"),P(i,"class","panel svelte-463lfb"),P(t,"class","panel-backdrop svelte-463lfb")},m(r,l){S(r,t,l),C(t,i),C(i,n),C(n,o),C(n,s),C(n,a),C(i,c);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(i,null);u||(h=[R(window,"keydown",e[4]),R(a,"click",e[2]),R(t,"click",e[3])],u=!0)},p(e,[t]){if(3&t){let n;for(d=e[0],n=0;n<d.length;n+=1){const r=Zn(e,d,n);f[n]?f[n].p(r,t):(f[n]=tr(r),f[n].c(),f[n].m(i,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=d.length}},i:r,o:r,d(e){e&&k(t),x(f,e),u=!1,l(h)}}}function nr(e,t,i){let n,r;const o=Y();function s(e){const t=ot[e];Te.addWidget(e,t),a()}function a(){o("close")}return e.$$.update=()=>{32&e.$$.dirty&&i(0,r=Object.entries(st).map(([e,t])=>({key:e,...t,widgets:n.filter(t=>t.category===e)})))},i(5,n=Object.entries(ot).map(([e,t])=>({type:e,...t})).map(e=>({...e,canAdd:Te.canAddWidget(e.type,ot)}))),[r,s,a,function(e){e.target===e.currentTarget&&a()},function(e){"Escape"===e.key&&a()},n,e=>e.canAdd&&s(e.type)]}class rr extends ge{constructor(e){super(),me(this,e,nr,ir,u,{})}}function or(e,t,i){const n=e.slice();return n[11]=t[i],n}function sr(e){let t,i,n=e[3],r=[];for(let t=0;t<n.length;t+=1)r[t]=ar(or(e,n,t));return{c(){t=E("table"),i=E("tbody");for(let e=0;e<r.length;e+=1)r[e].c()},m(e,n){S(e,t,n),C(t,i);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(i,null)},p(e,t){if(8&t){let o;for(n=e[3],o=0;o<n.length;o+=1){const s=or(e,n,o);r[o]?r[o].p(s,t):(r[o]=ar(s),r[o].c(),r[o].m(i,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){e&&k(t),x(r,e)}}}function ar(e){let t,i,n,r,o,s,a,l=e[11].name+"",c=e[11].value+"";return{c(){t=E("tr"),i=E("td"),n=O(l),r=T(),o=E("td"),s=O(c),a=T(),P(i,"class","svelte-k4txm1"),P(o,"class","right svelte-k4txm1")},m(e,l){S(e,t,l),C(t,i),C(i,n),C(t,r),C(t,o),C(o,s),C(t,a)},p(e,t){8&t&&l!==(l=e[11].name+"")&&B(n,l),8&t&&c!==(c=e[11].value+"")&&B(s,c)},d(e){e&&k(t)}}}function lr(e){let t,i,n,o,s,a,l,c,u,h,f,p,v,_,m,g,y,b=e[3]&&sr(e);return{c(){t=E("div"),i=E("div"),n=E("img"),s=T(),a=E("span"),l=O(e[0]),c=T(),u=E("span"),h=O(e[1]),f=T(),p=E("div"),b&&b.c(),v=T(),_=E("div"),m=E("button"),m.textContent="Choose",d(n.src,o=e[5]())||P(n,"src",o),P(n,"alt",""),P(n,"class","circle img svelte-k4txm1"),P(a,"class","card-title"),P(i,"class","card-content white-text"),P(p,"class","card-content"),P(m,"class","btn green"),P(_,"class","card-content"),P(t,"class","card cyan darken-3 hoverable characterCard center-align svelte-k4txm1")},m(r,o){S(r,t,o),C(t,i),C(i,n),C(i,s),C(i,a),C(a,l),C(i,c),C(i,u),C(u,h),C(t,f),C(t,p),b&&b.m(p,null),C(t,v),C(t,_),C(_,m),g||(y=R(m,"click",e[9]),g=!0)},p(e,[t]){1&t&&B(l,e[0]),2&t&&B(h,e[1]),e[3]?b?b.p(e,t):(b=sr(e),b.c(),b.m(p,null)):b&&(b.d(1),b=null)},i:r,o:r,d(e){e&&k(t),b&&b.d(),g=!1,y()}}}function cr(e,t,i){let{name:n}=t,{description:r}=t,{created:o}=t,{level:s}=t,{xp:a}=t,{templateId:l}=t,{attributes:c}=t,{callback:u}=t;return e.$$set=e=>{"name"in e&&i(0,n=e.name),"description"in e&&i(1,r=e.description),"created"in e&&i(6,o=e.created),"level"in e&&i(7,s=e.level),"xp"in e&&i(8,a=e.xp),"templateId"in e&&i(2,l=e.templateId),"attributes"in e&&i(3,c=e.attributes),"callback"in e&&i(4,u=e.callback)},[n,r,l,c,u,function(){return"/play/img/avatars/"+(1+Math.abs(n.hashCode()%12))+"p.png"},o,s,a,()=>{u(l)}]}!function(e){e.exports=function(){var t,n;function r(){return t.apply(null,arguments)}function o(e){t=e}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(l(e,t))return!1;return!0}function u(e){return void 0===e}function h(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var i,n=[],r=e.length;for(i=0;i<r;++i)n.push(t(e[i],i));return n}function p(e,t){for(var i in t)l(t,i)&&(e[i]=t[i]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function v(e,t,i,n){return Ki(e,t,i,n,!0).utc()}function _(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(e){return null==e._pf&&(e._pf=_()),e._pf}function g(e){var t=null,i=!1,r=e._d&&!isNaN(e._d.getTime());return r&&(t=m(e),i=n.call(t.parsedDateParts,function(e){return null!=e}),r=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i),e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?r:(e._isValid=r,e._isValid)}function y(e){var t=v(NaN);return null!=e?p(m(t),e):m(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,i=Object(this),n=i.length>>>0;for(t=0;t<n;t++)if(t in i&&e.call(this,i[t],t,i))return!0;return!1};var b=r.momentProperties=[],w=!1;function C(e,t){var i,n,r,o=b.length;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=m(t)),u(t._locale)||(e._locale=t._locale),o>0)for(i=0;i<o;i++)u(r=t[n=b[i]])||(e[n]=r);return e}function S(e){C(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,r.updateOffset(this),w=!1)}function k(e){return e instanceof S||null!=e&&null!=e._isAMomentObject}function x(e){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function E(e,t){var i=!0;return p(function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),i){var n,o,s,a=[],c=arguments.length;for(o=0;o<c;o++){if(n="","object"==typeof arguments[o]){for(s in n+="\n["+o+"] ",arguments[0])l(arguments[0],s)&&(n+=s+": "+arguments[0][s]+", ");n=n.slice(0,-2)}else n=arguments[o];a.push(n)}x(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),i=!1}return t.apply(this,arguments)},t)}var L,M={};function O(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),M[e]||(x(t),M[e]=!0)}function T(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e){var t,i;for(i in e)l(e,i)&&(T(t=e[i])?this[i]=t:this["_"+i]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function R(e,t){var i,n=p({},e);for(i in t)l(t,i)&&(a(e[i])&&a(t[i])?(n[i]={},p(n[i],e[i]),p(n[i],t[i])):null!=t[i]?n[i]=t[i]:delete n[i]);for(i in e)l(e,i)&&!l(t,i)&&a(e[i])&&(n[i]=p({},n[i]));return n}function A(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,L=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)l(e,t)&&i.push(t);return i};var P={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function B(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return T(n)?n.call(t,i):n}function I(e,t,i){var n=""+Math.abs(e),r=t-n.length;return(e>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}var H=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,j=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,W={},F={};function $(e,t,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),e&&(F[e]=r),t&&(F[t[0]]=function(){return I(r.apply(this,arguments),t[1],t[2])}),i&&(F[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function N(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t,i,n=e.match(H);for(t=0,i=n.length;t<i;t++)F[n[t]]?n[t]=F[n[t]]:n[t]=N(n[t]);return function(t){var r,o="";for(r=0;r<i;r++)o+=T(n[r])?n[r].call(t,e):n[r];return o}}function U(e,t){return e.isValid()?(t=q(t,e.localeData()),W[t]=W[t]||z(t),W[t](e)):e.localeData().invalidDate()}function q(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}for(j.lastIndex=0;i>=0&&j.test(e);)e=e.replace(j,n),j.lastIndex=0,i-=1;return e}var Y={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function V(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.match(H).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])}var K="Invalid date";function G(){return this._invalidDate}var X="%d",Z=/\d{1,2}/;function J(e){return this._ordinal.replace("%d",e)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ee(e,t,i,n){var r=this._relativeTime[i];return T(r)?r(e,t,i,n):r.replace(/%d/i,e)}function te(e,t){var i=this._relativeTime[e>0?"future":"past"];return T(i)?i(t):i.replace(/%s/i,t)}var ie={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ne(e){return"string"==typeof e?ie[e]||ie[e.toLowerCase()]:void 0}function re(e){var t,i,n={};for(i in e)l(e,i)&&(t=ne(i))&&(n[t]=e[i]);return n}var oe={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function se(e){var t,i=[];for(t in e)l(e,t)&&i.push({unit:t,priority:oe[t]});return i.sort(function(e,t){return e.priority-t.priority}),i}var ae,le=/\d/,ce=/\d\d/,ue=/\d{3}/,he=/\d{4}/,de=/[+-]?\d{6}/,fe=/\d\d?/,pe=/\d\d\d\d?/,ve=/\d\d\d\d\d\d?/,_e=/\d{1,3}/,me=/\d{1,4}/,ge=/[+-]?\d{1,6}/,ye=/\d+/,be=/[+-]?\d+/,we=/Z|[+-]\d\d:?\d\d/gi,Ce=/Z|[+-]\d\d(?::?\d\d)?/gi,Se=/[+-]?\d+(\.\d{1,3})?/,ke=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,xe=/^[1-9]\d?/,Ee=/^([1-9]\d|\d)/;function Le(e,t,i){ae[e]=T(t)?t:function(e,n){return e&&i?i:t}}function Me(e,t){return l(ae,e)?ae[e](t._strict,t._locale):new RegExp(Oe(e))}function Oe(e){return Te(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,r){return t||i||n||r}))}function Te(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function De(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Re(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=De(t)),i}ae={};var Ae={};function Pe(e,t){var i,n,r=t;for("string"==typeof e&&(e=[e]),h(t)&&(r=function(e,i){i[t]=Re(e)}),n=e.length,i=0;i<n;i++)Ae[e[i]]=r}function Be(e,t){Pe(e,function(e,i,n,r){n._w=n._w||{},t(e,n._w,n,r)})}function Ie(e,t,i){null!=t&&l(Ae,e)&&Ae[e](t,i._a,i,e)}function He(e){return e%4==0&&e%100!=0||e%400==0}var je=0,We=1,Fe=2,$e=3,Ne=4,ze=5,Ue=6,qe=7,Ye=8;function Ve(e){return He(e)?366:365}$("Y",0,0,function(){var e=this.year();return e<=9999?I(e,4):"+"+e}),$(0,["YY",2],0,function(){return this.year()%100}),$(0,["YYYY",4],0,"year"),$(0,["YYYYY",5],0,"year"),$(0,["YYYYYY",6,!0],0,"year"),Le("Y",be),Le("YY",fe,ce),Le("YYYY",me,he),Le("YYYYY",ge,de),Le("YYYYYY",ge,de),Pe(["YYYYY","YYYYYY"],je),Pe("YYYY",function(e,t){t[je]=2===e.length?r.parseTwoDigitYear(e):Re(e)}),Pe("YY",function(e,t){t[je]=r.parseTwoDigitYear(e)}),Pe("Y",function(e,t){t[je]=parseInt(e,10)}),r.parseTwoDigitYear=function(e){return Re(e)+(Re(e)>68?1900:2e3)};var Ke,Ge=Ze("FullYear",!0);function Xe(){return He(this.year())}function Ze(e,t){return function(i){return null!=i?(Qe(this,e,i),r.updateOffset(this,t),this):Je(this,e)}}function Je(e,t){if(!e.isValid())return NaN;var i=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return n?i.getUTCSeconds():i.getSeconds();case"Minutes":return n?i.getUTCMinutes():i.getMinutes();case"Hours":return n?i.getUTCHours():i.getHours();case"Date":return n?i.getUTCDate():i.getDate();case"Day":return n?i.getUTCDay():i.getDay();case"Month":return n?i.getUTCMonth():i.getMonth();case"FullYear":return n?i.getUTCFullYear():i.getFullYear();default:return NaN}}function Qe(e,t,i){var n,r,o,s,a;if(e.isValid()&&!isNaN(i)){switch(n=e._d,r=e._isUTC,t){case"Milliseconds":return void(r?n.setUTCMilliseconds(i):n.setMilliseconds(i));case"Seconds":return void(r?n.setUTCSeconds(i):n.setSeconds(i));case"Minutes":return void(r?n.setUTCMinutes(i):n.setMinutes(i));case"Hours":return void(r?n.setUTCHours(i):n.setHours(i));case"Date":return void(r?n.setUTCDate(i):n.setDate(i));case"FullYear":break;default:return}o=i,s=e.month(),a=29!==(a=e.date())||1!==s||He(o)?a:28,r?n.setUTCFullYear(o,s,a):n.setFullYear(o,s,a)}}function et(e){return T(this[e=ne(e)])?this[e]():this}function tt(e,t){if("object"==typeof e){var i,n=se(e=re(e)),r=n.length;for(i=0;i<r;i++)this[n[i].unit](e[n[i].unit])}else if(T(this[e=ne(e)]))return this[e](t);return this}function it(e,t){return(e%t+t)%t}function nt(e,t){if(isNaN(e)||isNaN(t))return NaN;var i=it(t,12);return e+=(t-i)/12,1===i?He(e)?29:28:31-i%7%2}Ke=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},$("M",["MM",2],"Mo",function(){return this.month()+1}),$("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),$("MMMM",0,0,function(e){return this.localeData().months(this,e)}),Le("M",fe,xe),Le("MM",fe,ce),Le("MMM",function(e,t){return t.monthsShortRegex(e)}),Le("MMMM",function(e,t){return t.monthsRegex(e)}),Pe(["M","MM"],function(e,t){t[We]=Re(e)-1}),Pe(["MMM","MMMM"],function(e,t,i,n){var r=i._locale.monthsParse(e,n,i._strict);null!=r?t[We]=r:m(i).invalidMonth=e});var rt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ot="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),st=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,at=ke,lt=ke;function ct(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||st).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function ut(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[st.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ht(e,t,i){var n,r,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)o=v([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(r=Ke.call(this._shortMonthsParse,s))?r:null:-1!==(r=Ke.call(this._longMonthsParse,s))?r:null:"MMM"===t?-1!==(r=Ke.call(this._shortMonthsParse,s))||-1!==(r=Ke.call(this._longMonthsParse,s))?r:null:-1!==(r=Ke.call(this._longMonthsParse,s))||-1!==(r=Ke.call(this._shortMonthsParse,s))?r:null}function dt(e,t,i){var n,r,o;if(this._monthsParseExact)return ht.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=v([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}}function ft(e,t){if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Re(t);else if(!h(t=e.localeData().monthsParse(t)))return e;var i=t,n=e.date();return n=n<29?n:Math.min(n,nt(e.year(),i)),e._isUTC?e._d.setUTCMonth(i,n):e._d.setMonth(i,n),e}function pt(e){return null!=e?(ft(this,e),r.updateOffset(this,!0),this):Je(this,"Month")}function vt(){return nt(this.year(),this.month())}function _t(e){return this._monthsParseExact?(l(this,"_monthsRegex")||gt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=at),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function mt(e){return this._monthsParseExact?(l(this,"_monthsRegex")||gt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=lt),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function gt(){function e(e,t){return t.length-e.length}var t,i,n,r,o=[],s=[],a=[];for(t=0;t<12;t++)i=v([2e3,t]),n=Te(this.monthsShort(i,"")),r=Te(this.months(i,"")),o.push(n),s.push(r),a.push(r),a.push(n);o.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function yt(e,t,i,n,r,o,s){var a;return e<100&&e>=0?(a=new Date(e+400,t,i,n,r,o,s),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,i,n,r,o,s),a}function bt(e){var t,i;return e<100&&e>=0?((i=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,i)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function wt(e,t,i){var n=7+t-i;return-(7+bt(e,0,n).getUTCDay()-t)%7+n-1}function Ct(e,t,i,n,r){var o,s,a=1+7*(t-1)+(7+i-n)%7+wt(e,n,r);return a<=0?s=Ve(o=e-1)+a:a>Ve(e)?(o=e+1,s=a-Ve(e)):(o=e,s=a),{year:o,dayOfYear:s}}function St(e,t,i){var n,r,o=wt(e.year(),t,i),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return s<1?n=s+kt(r=e.year()-1,t,i):s>kt(e.year(),t,i)?(n=s-kt(e.year(),t,i),r=e.year()+1):(r=e.year(),n=s),{week:n,year:r}}function kt(e,t,i){var n=wt(e,t,i),r=wt(e+1,t,i);return(Ve(e)-n+r)/7}function xt(e){return St(e,this._week.dow,this._week.doy).week}$("w",["ww",2],"wo","week"),$("W",["WW",2],"Wo","isoWeek"),Le("w",fe,xe),Le("ww",fe,ce),Le("W",fe,xe),Le("WW",fe,ce),Be(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=Re(e)});var Et={dow:0,doy:6};function Lt(){return this._week.dow}function Mt(){return this._week.doy}function Ot(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Tt(e){var t=St(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Dt(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Rt(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function At(e,t){return e.slice(t,7).concat(e.slice(0,t))}$("d",0,"do","day"),$("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),$("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),$("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),$("e",0,0,"weekday"),$("E",0,0,"isoWeekday"),Le("d",fe),Le("e",fe),Le("E",fe),Le("dd",function(e,t){return t.weekdaysMinRegex(e)}),Le("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Le("dddd",function(e,t){return t.weekdaysRegex(e)}),Be(["dd","ddd","dddd"],function(e,t,i,n){var r=i._locale.weekdaysParse(e,n,i._strict);null!=r?t.d=r:m(i).invalidWeekday=e}),Be(["d","e","E"],function(e,t,i,n){t[n]=Re(e)});var Pt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Bt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),It="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ht=ke,jt=ke,Wt=ke;function Ft(e,t){var i=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?At(i,this._week.dow):e?i[e.day()]:i}function $t(e){return!0===e?At(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Nt(e){return!0===e?At(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function zt(e,t,i){var n,r,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)o=v([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(r=Ke.call(this._weekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Ke.call(this._shortWeekdaysParse,s))?r:null:-1!==(r=Ke.call(this._minWeekdaysParse,s))?r:null:"dddd"===t?-1!==(r=Ke.call(this._weekdaysParse,s))||-1!==(r=Ke.call(this._shortWeekdaysParse,s))||-1!==(r=Ke.call(this._minWeekdaysParse,s))?r:null:"ddd"===t?-1!==(r=Ke.call(this._shortWeekdaysParse,s))||-1!==(r=Ke.call(this._weekdaysParse,s))||-1!==(r=Ke.call(this._minWeekdaysParse,s))?r:null:-1!==(r=Ke.call(this._minWeekdaysParse,s))||-1!==(r=Ke.call(this._weekdaysParse,s))||-1!==(r=Ke.call(this._shortWeekdaysParse,s))?r:null}function Ut(e,t,i){var n,r,o;if(this._weekdaysParseExact)return zt.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=v([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}}function qt(e){if(!this.isValid())return null!=e?this:NaN;var t=Je(this,"Day");return null!=e?(e=Dt(e,this.localeData()),this.add(e-t,"d")):t}function Yt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Vt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Rt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Kt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Ht),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Gt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xt(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Wt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Zt(){function e(e,t){return t.length-e.length}var t,i,n,r,o,s=[],a=[],l=[],c=[];for(t=0;t<7;t++)i=v([2e3,1]).day(t),n=Te(this.weekdaysMin(i,"")),r=Te(this.weekdaysShort(i,"")),o=Te(this.weekdays(i,"")),s.push(n),a.push(r),l.push(o),c.push(n),c.push(r),c.push(o);s.sort(e),a.sort(e),l.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Jt(){return this.hours()%12||12}function Qt(){return this.hours()||24}function ei(e,t){$(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function ti(e,t){return t._meridiemParse}function ii(e){return"p"===(e+"").toLowerCase().charAt(0)}$("H",["HH",2],0,"hour"),$("h",["hh",2],0,Jt),$("k",["kk",2],0,Qt),$("hmm",0,0,function(){return""+Jt.apply(this)+I(this.minutes(),2)}),$("hmmss",0,0,function(){return""+Jt.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}),$("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),$("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}),ei("a",!0),ei("A",!1),Le("a",ti),Le("A",ti),Le("H",fe,Ee),Le("h",fe,xe),Le("k",fe,xe),Le("HH",fe,ce),Le("hh",fe,ce),Le("kk",fe,ce),Le("hmm",pe),Le("hmmss",ve),Le("Hmm",pe),Le("Hmmss",ve),Pe(["H","HH"],$e),Pe(["k","kk"],function(e,t,i){var n=Re(e);t[$e]=24===n?0:n}),Pe(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),Pe(["h","hh"],function(e,t,i){t[$e]=Re(e),m(i).bigHour=!0}),Pe("hmm",function(e,t,i){var n=e.length-2;t[$e]=Re(e.substr(0,n)),t[Ne]=Re(e.substr(n)),m(i).bigHour=!0}),Pe("hmmss",function(e,t,i){var n=e.length-4,r=e.length-2;t[$e]=Re(e.substr(0,n)),t[Ne]=Re(e.substr(n,2)),t[ze]=Re(e.substr(r)),m(i).bigHour=!0}),Pe("Hmm",function(e,t,i){var n=e.length-2;t[$e]=Re(e.substr(0,n)),t[Ne]=Re(e.substr(n))}),Pe("Hmmss",function(e,t,i){var n=e.length-4,r=e.length-2;t[$e]=Re(e.substr(0,n)),t[Ne]=Re(e.substr(n,2)),t[ze]=Re(e.substr(r))});var ni=/[ap]\.?m?\.?/i,ri=Ze("Hours",!0);function oi(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}var si,ai={calendar:P,longDateFormat:Y,invalidDate:K,ordinal:X,dayOfMonthOrdinalParse:Z,relativeTime:Q,months:rt,monthsShort:ot,week:Et,weekdays:Pt,weekdaysMin:It,weekdaysShort:Bt,meridiemParse:ni},li={},ci={};function ui(e,t){var i,n=Math.min(e.length,t.length);for(i=0;i<n;i+=1)if(e[i]!==t[i])return i;return n}function hi(e){return e?e.toLowerCase().replace("_","-"):e}function di(e){for(var t,i,n,r,o=0;o<e.length;){for(t=(r=hi(e[o]).split("-")).length,i=(i=hi(e[o+1]))?i.split("-"):null;t>0;){if(n=pi(r.slice(0,t).join("-")))return n;if(i&&i.length>=t&&ui(r,i)>=t-1)break;t--}o++}return si}function fi(e){return!(!e||!e.match("^[^/\\\\]*$"))}function pi(t){var n=null;if(void 0===li[t]&&e&&e.exports&&fi(t))try{n=si._abbr,i("./locale/"+t),vi(n)}catch(e){li[t]=null}return li[t]}function vi(e,t){var i;return e&&((i=u(t)?gi(e):_i(e,t))?si=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),si._abbr}function _i(e,t){if(null!==t){var i,n=ai;if(t.abbr=e,null!=li[e])O("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=li[e]._config;else if(null!=t.parentLocale)if(null!=li[t.parentLocale])n=li[t.parentLocale]._config;else{if(null==(i=pi(t.parentLocale)))return ci[t.parentLocale]||(ci[t.parentLocale]=[]),ci[t.parentLocale].push({name:e,config:t}),null;n=i._config}return li[e]=new A(R(n,t)),ci[e]&&ci[e].forEach(function(e){_i(e.name,e.config)}),vi(e),li[e]}return delete li[e],null}function mi(e,t){if(null!=t){var i,n,r=ai;null!=li[e]&&null!=li[e].parentLocale?li[e].set(R(li[e]._config,t)):(null!=(n=pi(e))&&(r=n._config),t=R(r,t),null==n&&(t.abbr=e),(i=new A(t)).parentLocale=li[e],li[e]=i),vi(e)}else null!=li[e]&&(null!=li[e].parentLocale?(li[e]=li[e].parentLocale,e===vi()&&vi(e)):null!=li[e]&&delete li[e]);return li[e]}function gi(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return si;if(!s(e)){if(t=pi(e))return t;e=[e]}return di(e)}function yi(){return L(li)}function bi(e){var t,i=e._a;return i&&-2===m(e).overflow&&(t=i[We]<0||i[We]>11?We:i[Fe]<1||i[Fe]>nt(i[je],i[We])?Fe:i[$e]<0||i[$e]>24||24===i[$e]&&(0!==i[Ne]||0!==i[ze]||0!==i[Ue])?$e:i[Ne]<0||i[Ne]>59?Ne:i[ze]<0||i[ze]>59?ze:i[Ue]<0||i[Ue]>999?Ue:-1,m(e)._overflowDayOfYear&&(t<je||t>Fe)&&(t=Fe),m(e)._overflowWeeks&&-1===t&&(t=qe),m(e)._overflowWeekday&&-1===t&&(t=Ye),m(e).overflow=t),e}var wi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ci=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Si=/Z|[+-]\d\d(?::?\d\d)?/,ki=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],xi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ei=/^\/?Date\((-?\d+)/i,Li=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Mi={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Oi(e){var t,i,n,r,o,s,a=e._i,l=wi.exec(a)||Ci.exec(a),c=ki.length,u=xi.length;if(l){for(m(e).iso=!0,t=0,i=c;t<i;t++)if(ki[t][1].exec(l[1])){r=ki[t][0],n=!1!==ki[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,i=u;t<i;t++)if(xi[t][1].exec(l[3])){o=(l[2]||" ")+xi[t][0];break}if(null==o)return void(e._isValid=!1)}if(!n&&null!=o)return void(e._isValid=!1);if(l[4]){if(!Si.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=r+(o||"")+(s||""),$i(e)}else e._isValid=!1}function Ti(e,t,i,n,r,o){var s=[Di(e),ot.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(r,10)];return o&&s.push(parseInt(o,10)),s}function Di(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Ri(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ai(e,t,i){return!e||Bt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(i).weekdayMismatch=!0,i._isValid=!1,!1)}function Pi(e,t,i){if(e)return Mi[e];if(t)return 0;var n=parseInt(i,10),r=n%100;return(n-r)/100*60+r}function Bi(e){var t,i=Li.exec(Ri(e._i));if(i){if(t=Ti(i[4],i[3],i[2],i[5],i[6],i[7]),!Ai(i[1],t,e))return;e._a=t,e._tzm=Pi(i[8],i[9],i[10]),e._d=bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function Ii(e){var t=Ei.exec(e._i);null===t?(Oi(e),!1===e._isValid&&(delete e._isValid,Bi(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Hi(e,t,i){return null!=e?e:null!=t?t:i}function ji(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Wi(e){var t,i,n,r,o,s=[];if(!e._d){for(n=ji(e),e._w&&null==e._a[Fe]&&null==e._a[We]&&Fi(e),null!=e._dayOfYear&&(o=Hi(e._a[je],n[je]),(e._dayOfYear>Ve(o)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),i=bt(o,0,e._dayOfYear),e._a[We]=i.getUTCMonth(),e._a[Fe]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=n[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[$e]&&0===e._a[Ne]&&0===e._a[ze]&&0===e._a[Ue]&&(e._nextDay=!0,e._a[$e]=0),e._d=(e._useUTC?bt:yt).apply(null,s),r=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[$e]=24),e._w&&void 0!==e._w.d&&e._w.d!==r&&(m(e).weekdayMismatch=!0)}}function Fi(e){var t,i,n,r,o,s,a,l,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,s=4,i=Hi(t.GG,e._a[je],St(Gi(),1,4).year),n=Hi(t.W,1),((r=Hi(t.E,1))<1||r>7)&&(l=!0)):(o=e._locale._week.dow,s=e._locale._week.doy,c=St(Gi(),o,s),i=Hi(t.gg,e._a[je],c.year),n=Hi(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+o,(t.e<0||t.e>6)&&(l=!0)):r=o),n<1||n>kt(i,o,s)?m(e)._overflowWeeks=!0:null!=l?m(e)._overflowWeekday=!0:(a=Ct(i,n,r,o,s),e._a[je]=a.year,e._dayOfYear=a.dayOfYear)}function $i(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],m(e).empty=!0;var t,i,n,o,s,a,l,c=""+e._i,u=c.length,h=0;for(l=(n=q(e._f,e._locale).match(H)||[]).length,t=0;t<l;t++)o=n[t],(i=(c.match(Me(o,e))||[])[0])&&((s=c.substr(0,c.indexOf(i))).length>0&&m(e).unusedInput.push(s),c=c.slice(c.indexOf(i)+i.length),h+=i.length),F[o]?(i?m(e).empty=!1:m(e).unusedTokens.push(o),Ie(o,i,e)):e._strict&&!i&&m(e).unusedTokens.push(o);m(e).charsLeftOver=u-h,c.length>0&&m(e).unusedInput.push(c),e._a[$e]<=12&&!0===m(e).bigHour&&e._a[$e]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[$e]=Ni(e._locale,e._a[$e],e._meridiem),null!==(a=m(e).era)&&(e._a[je]=e._locale.erasConvertYear(a,e._a[je])),Wi(e),bi(e)}else Bi(e);else Oi(e)}function Ni(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?((n=e.isPM(i))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}function zi(e){var t,i,n,r,o,s,a=!1,l=e._f.length;if(0===l)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<l;r++)o=0,s=!1,t=C({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],$i(t),g(t)&&(s=!0),o+=m(t).charsLeftOver,o+=10*m(t).unusedTokens.length,m(t).score=o,a?o<n&&(n=o,i=t):(null==n||o<n||s)&&(n=o,i=t,s&&(a=!0));p(e,i||t)}function Ui(e){if(!e._d){var t=re(e._i),i=void 0===t.day?t.date:t.day;e._a=f([t.year,t.month,i,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Wi(e)}}function qi(e){var t=new S(bi(Yi(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Yi(e){var t=e._i,i=e._f;return e._locale=e._locale||gi(e._l),null===t||void 0===i&&""===t?y({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),k(t)?new S(bi(t)):(d(t)?e._d=t:s(i)?zi(e):i?$i(e):Vi(e),g(e)||(e._d=null),e))}function Vi(e){var t=e._i;u(t)?e._d=new Date(r.now()):d(t)?e._d=new Date(t.valueOf()):"string"==typeof t?Ii(e):s(t)?(e._a=f(t.slice(0),function(e){return parseInt(e,10)}),Wi(e)):a(t)?Ui(e):h(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Ki(e,t,i,n,r){var o={};return!0!==t&&!1!==t||(n=t,t=void 0),!0!==i&&!1!==i||(n=i,i=void 0),(a(e)&&c(e)||s(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=i,o._i=e,o._f=t,o._strict=n,qi(o)}function Gi(e,t,i,n){return Ki(e,t,i,n,!1)}r.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),r.ISO_8601=function(){},r.RFC_2822=function(){};var Xi=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Gi.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()}),Zi=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Gi.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()});function Ji(e,t){var i,n;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Gi();for(i=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](i)||(i=t[n]);return i}function Qi(){return Ji("isBefore",[].slice.call(arguments,0))}function en(){return Ji("isAfter",[].slice.call(arguments,0))}var tn=function(){return Date.now?Date.now():+new Date},nn=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rn(e){var t,i,n=!1,r=nn.length;for(t in e)if(l(e,t)&&(-1===Ke.call(nn,t)||null!=e[t]&&isNaN(e[t])))return!1;for(i=0;i<r;++i)if(e[nn[i]]){if(n)return!1;parseFloat(e[nn[i]])!==Re(e[nn[i]])&&(n=!0)}return!0}function on(){return this._isValid}function sn(){return On(NaN)}function an(e){var t=re(e),i=t.year||0,n=t.quarter||0,r=t.month||0,o=t.week||t.isoWeek||0,s=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._isValid=rn(t),this._milliseconds=+u+1e3*c+6e4*l+1e3*a*60*60,this._days=+s+7*o,this._months=+r+3*n+12*i,this._data={},this._locale=gi(),this._bubble()}function ln(e){return e instanceof an}function cn(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function un(e,t,i){var n,r=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(n=0;n<r;n++)(i&&e[n]!==t[n]||!i&&Re(e[n])!==Re(t[n]))&&s++;return s+o}function hn(e,t){$(e,0,0,function(){var e=this.utcOffset(),i="+";return e<0&&(e=-e,i="-"),i+I(~~(e/60),2)+t+I(~~e%60,2)})}hn("Z",":"),hn("ZZ",""),Le("Z",Ce),Le("ZZ",Ce),Pe(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=fn(Ce,e)});var dn=/([\+\-]|\d\d)/gi;function fn(e,t){var i,n,r=(t||"").match(e);return null===r?null:0===(n=60*(i=((r[r.length-1]||[])+"").match(dn)||["-",0,0])[1]+Re(i[2]))?0:"+"===i[0]?n:-n}function pn(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(k(e)||d(e)?e.valueOf():Gi(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),r.updateOffset(i,!1),i):Gi(e).local()}function vn(e){return-Math.round(e._d.getTimezoneOffset())}function _n(e,t,i){var n,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=fn(Ce,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&t&&(n=vn(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==e&&(!t||this._changeInProgress?Pn(this,On(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:vn(this)}function mn(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function gn(e){return this.utcOffset(0,e)}function yn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(vn(this),"m")),this}function bn(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=fn(we,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function wn(e){return!!this.isValid()&&(e=e?Gi(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Cn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Sn(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e,t={};return C(t,this),(t=Yi(t))._a?(e=t._isUTC?v(t._a):Gi(t._a),this._isDSTShifted=this.isValid()&&un(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function kn(){return!!this.isValid()&&!this._isUTC}function xn(){return!!this.isValid()&&this._isUTC}function En(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ln=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Mn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function On(e,t){var i,n,r,o=e,s=null;return ln(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:h(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(s=Ln.exec(e))?(i="-"===s[1]?-1:1,o={y:0,d:Re(s[Fe])*i,h:Re(s[$e])*i,m:Re(s[Ne])*i,s:Re(s[ze])*i,ms:Re(cn(1e3*s[Ue]))*i}):(s=Mn.exec(e))?(i="-"===s[1]?-1:1,o={y:Tn(s[2],i),M:Tn(s[3],i),w:Tn(s[4],i),d:Tn(s[5],i),h:Tn(s[6],i),m:Tn(s[7],i),s:Tn(s[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Rn(Gi(o.from),Gi(o.to)),(o={}).ms=r.milliseconds,o.M=r.months),n=new an(o),ln(e)&&l(e,"_locale")&&(n._locale=e._locale),ln(e)&&l(e,"_isValid")&&(n._isValid=e._isValid),n}function Tn(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Dn(e,t){var i={};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Rn(e,t){var i;return e.isValid()&&t.isValid()?(t=pn(t,e),e.isBefore(t)?i=Dn(e,t):((i=Dn(t,e)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function An(e,t){return function(i,n){var r;return null===n||isNaN(+n)||(O(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=i,i=n,n=r),Pn(this,On(i,n),e),this}}function Pn(e,t,i,n){var o=t._milliseconds,s=cn(t._days),a=cn(t._months);e.isValid()&&(n=null==n||n,a&&ft(e,Je(e,"Month")+a*i),s&&Qe(e,"Date",Je(e,"Date")+s*i),o&&e._d.setTime(e._d.valueOf()+o*i),n&&r.updateOffset(e,s||a))}On.fn=an.prototype,On.invalid=sn;var Bn=An(1,"add"),In=An(-1,"subtract");function Hn(e){return"string"==typeof e||e instanceof String}function jn(e){return k(e)||d(e)||Hn(e)||h(e)||Fn(e)||Wn(e)||null==e}function Wn(e){var t,i,n=a(e)&&!c(e),r=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s=o.length;for(t=0;t<s;t+=1)i=o[t],r=r||l(e,i);return n&&r}function Fn(e){var t=s(e),i=!1;return t&&(i=0===e.filter(function(t){return!h(t)&&Hn(e)}).length),t&&i}function $n(e){var t,i,n=a(e)&&!c(e),r=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)i=o[t],r=r||l(e,i);return n&&r}function Nn(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function zn(e,t){1===arguments.length&&(arguments[0]?jn(arguments[0])?(e=arguments[0],t=void 0):$n(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var i=e||Gi(),n=pn(i,this).startOf("day"),o=r.calendarFormat(this,n)||"sameElse",s=t&&(T(t[o])?t[o].call(this,i):t[o]);return this.format(s||this.localeData().calendar(o,this,Gi(i)))}function Un(){return new S(this)}function qn(e,t){var i=k(e)?e:Gi(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())}function Yn(e,t){var i=k(e)?e:Gi(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())}function Vn(e,t,i,n){var r=k(e)?e:Gi(e),o=k(t)?t:Gi(t);return!!(this.isValid()&&r.isValid()&&o.isValid())&&("("===(n=n||"()")[0]?this.isAfter(r,i):!this.isBefore(r,i))&&(")"===n[1]?this.isBefore(o,i):!this.isAfter(o,i))}function Kn(e,t){var i,n=k(e)?e:Gi(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))}function Gn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Xn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Zn(e,t,i){var n,r,o;if(!this.isValid())return NaN;if(!(n=pn(e,this)).isValid())return NaN;switch(r=6e4*(n.utcOffset()-this.utcOffset()),t=ne(t)){case"year":o=Jn(this,n)/12;break;case"month":o=Jn(this,n);break;case"quarter":o=Jn(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-r)/864e5;break;case"week":o=(this-n-r)/6048e5;break;default:o=this-n}return i?o:De(o)}function Jn(e,t){if(e.date()<t.date())return-Jn(t,e);var i=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(i,"months");return-(i+(t-n<0?(t-n)/(n-e.clone().add(i-1,"months")):(t-n)/(e.clone().add(i+1,"months")-n)))||0}function Qn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function er(e){if(!this.isValid())return null;var t=!0!==e,i=t?this.clone().utc():this;return i.year()<0||i.year()>9999?U(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):T(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",U(i,"Z")):U(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function tr(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,i,n,r="moment",o="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+r+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",n=o+'[")]',this.format(e+t+i+n)}function ir(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=U(this,e);return this.localeData().postformat(t)}function nr(e,t){return this.isValid()&&(k(e)&&e.isValid()||Gi(e).isValid())?On({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function rr(e){return this.from(Gi(),e)}function or(e,t){return this.isValid()&&(k(e)&&e.isValid()||Gi(e).isValid())?On({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function sr(e){return this.to(Gi(),e)}function ar(e){var t;return void 0===e?this._locale._abbr:(null!=(t=gi(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var lr=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function cr(){return this._locale}var ur=1e3,hr=60*ur,dr=60*hr,fr=3506328*dr;function pr(e,t){return(e%t+t)%t}function vr(e,t,i){return e<100&&e>=0?new Date(e+400,t,i)-fr:new Date(e,t,i).valueOf()}function _r(e,t,i){return e<100&&e>=0?Date.UTC(e+400,t,i)-fr:Date.UTC(e,t,i)}function mr(e){var t,i;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(i=this._isUTC?_r:vr,e){case"year":t=i(this.year(),0,1);break;case"quarter":t=i(this.year(),this.month()-this.month()%3,1);break;case"month":t=i(this.year(),this.month(),1);break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=i(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=pr(t+(this._isUTC?0:this.utcOffset()*hr),dr);break;case"minute":t=this._d.valueOf(),t-=pr(t,hr);break;case"second":t=this._d.valueOf(),t-=pr(t,ur)}return this._d.setTime(t),r.updateOffset(this,!0),this}function gr(e){var t,i;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(i=this._isUTC?_r:vr,e){case"year":t=i(this.year()+1,0,1)-1;break;case"quarter":t=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=i(this.year(),this.month()+1,1)-1;break;case"week":t=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=dr-pr(t+(this._isUTC?0:this.utcOffset()*hr),dr)-1;break;case"minute":t=this._d.valueOf(),t+=hr-pr(t,hr)-1;break;case"second":t=this._d.valueOf(),t+=ur-pr(t,ur)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function yr(){return this._d.valueOf()-6e4*(this._offset||0)}function br(){return Math.floor(this.valueOf()/1e3)}function wr(){return new Date(this.valueOf())}function Cr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Sr(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function kr(){return this.isValid()?this.toISOString():null}function xr(){return g(this)}function Er(){return p({},m(this))}function Lr(){return m(this).overflow}function Mr(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Or(e,t){var i,n,o,s=this._eras||gi("en")._eras;for(i=0,n=s.length;i<n;++i)switch("string"==typeof s[i].since&&(o=r(s[i].since).startOf("day"),s[i].since=o.valueOf()),typeof s[i].until){case"undefined":s[i].until=1/0;break;case"string":o=r(s[i].until).startOf("day").valueOf(),s[i].until=o.valueOf()}return s}function Tr(e,t,i){var n,r,o,s,a,l=this.eras();for(e=e.toUpperCase(),n=0,r=l.length;n<r;++n)if(o=l[n].name.toUpperCase(),s=l[n].abbr.toUpperCase(),a=l[n].narrow.toUpperCase(),i)switch(t){case"N":case"NN":case"NNN":if(s===e)return l[n];break;case"NNNN":if(o===e)return l[n];break;case"NNNNN":if(a===e)return l[n]}else if([o,s,a].indexOf(e)>=0)return l[n]}function Dr(e,t){var i=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*i}function Rr(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].name;if(n[e].until<=i&&i<=n[e].since)return n[e].name}return""}function Ar(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].narrow;if(n[e].until<=i&&i<=n[e].since)return n[e].narrow}return""}function Pr(){var e,t,i,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(i=this.clone().startOf("day").valueOf(),n[e].since<=i&&i<=n[e].until)return n[e].abbr;if(n[e].until<=i&&i<=n[e].since)return n[e].abbr}return""}function Br(){var e,t,i,n,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(i=o[e].since<=o[e].until?1:-1,n=this.clone().startOf("day").valueOf(),o[e].since<=n&&n<=o[e].until||o[e].until<=n&&n<=o[e].since)return(this.year()-r(o[e].since).year())*i+o[e].offset;return this.year()}function Ir(e){return l(this,"_erasNameRegex")||zr.call(this),e?this._erasNameRegex:this._erasRegex}function Hr(e){return l(this,"_erasAbbrRegex")||zr.call(this),e?this._erasAbbrRegex:this._erasRegex}function jr(e){return l(this,"_erasNarrowRegex")||zr.call(this),e?this._erasNarrowRegex:this._erasRegex}function Wr(e,t){return t.erasAbbrRegex(e)}function Fr(e,t){return t.erasNameRegex(e)}function $r(e,t){return t.erasNarrowRegex(e)}function Nr(e,t){return t._eraYearOrdinalRegex||ye}function zr(){var e,t,i,n,r,o=[],s=[],a=[],l=[],c=this.eras();for(e=0,t=c.length;e<t;++e)i=Te(c[e].name),n=Te(c[e].abbr),r=Te(c[e].narrow),s.push(i),o.push(n),a.push(r),l.push(i),l.push(n),l.push(r);this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function Ur(e,t){$(0,[e,e.length],0,t)}function qr(e){return Zr.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Yr(e){return Zr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Vr(){return kt(this.year(),1,4)}function Kr(){return kt(this.isoWeekYear(),1,4)}function Gr(){var e=this.localeData()._week;return kt(this.year(),e.dow,e.doy)}function Xr(){var e=this.localeData()._week;return kt(this.weekYear(),e.dow,e.doy)}function Zr(e,t,i,n,r){var o;return null==e?St(this,n,r).year:(t>(o=kt(e,n,r))&&(t=o),Jr.call(this,e,t,i,n,r))}function Jr(e,t,i,n,r){var o=Ct(e,t,i,n,r),s=bt(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Qr(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}$("N",0,0,"eraAbbr"),$("NN",0,0,"eraAbbr"),$("NNN",0,0,"eraAbbr"),$("NNNN",0,0,"eraName"),$("NNNNN",0,0,"eraNarrow"),$("y",["y",1],"yo","eraYear"),$("y",["yy",2],0,"eraYear"),$("y",["yyy",3],0,"eraYear"),$("y",["yyyy",4],0,"eraYear"),Le("N",Wr),Le("NN",Wr),Le("NNN",Wr),Le("NNNN",Fr),Le("NNNNN",$r),Pe(["N","NN","NNN","NNNN","NNNNN"],function(e,t,i,n){var r=i._locale.erasParse(e,n,i._strict);r?m(i).era=r:m(i).invalidEra=e}),Le("y",ye),Le("yy",ye),Le("yyy",ye),Le("yyyy",ye),Le("yo",Nr),Pe(["y","yy","yyy","yyyy"],je),Pe(["yo"],function(e,t,i,n){var r;i._locale._eraYearOrdinalRegex&&(r=e.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?t[je]=i._locale.eraYearOrdinalParse(e,r):t[je]=parseInt(e,10)}),$(0,["gg",2],0,function(){return this.weekYear()%100}),$(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ur("gggg","weekYear"),Ur("ggggg","weekYear"),Ur("GGGG","isoWeekYear"),Ur("GGGGG","isoWeekYear"),Le("G",be),Le("g",be),Le("GG",fe,ce),Le("gg",fe,ce),Le("GGGG",me,he),Le("gggg",me,he),Le("GGGGG",ge,de),Le("ggggg",ge,de),Be(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=Re(e)}),Be(["gg","GG"],function(e,t,i,n){t[n]=r.parseTwoDigitYear(e)}),$("Q",0,"Qo","quarter"),Le("Q",le),Pe("Q",function(e,t){t[We]=3*(Re(e)-1)}),$("D",["DD",2],"Do","date"),Le("D",fe,xe),Le("DD",fe,ce),Le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),Pe(["D","DD"],Fe),Pe("Do",function(e,t){t[Fe]=Re(e.match(fe)[0])});var eo=Ze("Date",!0);function to(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}$("DDD",["DDDD",3],"DDDo","dayOfYear"),Le("DDD",_e),Le("DDDD",ue),Pe(["DDD","DDDD"],function(e,t,i){i._dayOfYear=Re(e)}),$("m",["mm",2],0,"minute"),Le("m",fe,Ee),Le("mm",fe,ce),Pe(["m","mm"],Ne);var io=Ze("Minutes",!1);$("s",["ss",2],0,"second"),Le("s",fe,Ee),Le("ss",fe,ce),Pe(["s","ss"],ze);var no,ro,oo=Ze("Seconds",!1);for($("S",0,0,function(){return~~(this.millisecond()/100)}),$(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),$(0,["SSS",3],0,"millisecond"),$(0,["SSSS",4],0,function(){return 10*this.millisecond()}),$(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),$(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),$(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),$(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),$(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Le("S",_e,le),Le("SS",_e,ce),Le("SSS",_e,ue),no="SSSS";no.length<=9;no+="S")Le(no,ye);function so(e,t){t[Ue]=Re(1e3*("0."+e))}for(no="S";no.length<=9;no+="S")Pe(no,so);function ao(){return this._isUTC?"UTC":""}function lo(){return this._isUTC?"Coordinated Universal Time":""}ro=Ze("Milliseconds",!1),$("z",0,0,"zoneAbbr"),$("zz",0,0,"zoneName");var co=S.prototype;function uo(e){return Gi(1e3*e)}function ho(){return Gi.apply(null,arguments).parseZone()}function fo(e){return e}co.add=Bn,co.calendar=zn,co.clone=Un,co.diff=Zn,co.endOf=gr,co.format=ir,co.from=nr,co.fromNow=rr,co.to=or,co.toNow=sr,co.get=et,co.invalidAt=Lr,co.isAfter=qn,co.isBefore=Yn,co.isBetween=Vn,co.isSame=Kn,co.isSameOrAfter=Gn,co.isSameOrBefore=Xn,co.isValid=xr,co.lang=lr,co.locale=ar,co.localeData=cr,co.max=Zi,co.min=Xi,co.parsingFlags=Er,co.set=tt,co.startOf=mr,co.subtract=In,co.toArray=Cr,co.toObject=Sr,co.toDate=wr,co.toISOString=er,co.inspect=tr,"undefined"!=typeof Symbol&&null!=Symbol.for&&(co[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),co.toJSON=kr,co.toString=Qn,co.unix=br,co.valueOf=yr,co.creationData=Mr,co.eraName=Rr,co.eraNarrow=Ar,co.eraAbbr=Pr,co.eraYear=Br,co.year=Ge,co.isLeapYear=Xe,co.weekYear=qr,co.isoWeekYear=Yr,co.quarter=co.quarters=Qr,co.month=pt,co.daysInMonth=vt,co.week=co.weeks=Ot,co.isoWeek=co.isoWeeks=Tt,co.weeksInYear=Gr,co.weeksInWeekYear=Xr,co.isoWeeksInYear=Vr,co.isoWeeksInISOWeekYear=Kr,co.date=eo,co.day=co.days=qt,co.weekday=Yt,co.isoWeekday=Vt,co.dayOfYear=to,co.hour=co.hours=ri,co.minute=co.minutes=io,co.second=co.seconds=oo,co.millisecond=co.milliseconds=ro,co.utcOffset=_n,co.utc=gn,co.local=yn,co.parseZone=bn,co.hasAlignedHourOffset=wn,co.isDST=Cn,co.isLocal=kn,co.isUtcOffset=xn,co.isUtc=En,co.isUTC=En,co.zoneAbbr=ao,co.zoneName=lo,co.dates=E("dates accessor is deprecated. Use date instead.",eo),co.months=E("months accessor is deprecated. Use month instead",pt),co.years=E("years accessor is deprecated. Use year instead",Ge),co.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",mn),co.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Sn);var po=A.prototype;function vo(e,t,i,n){var r=gi(),o=v().set(n,t);return r[i](o,e)}function _o(e,t,i){if(h(e)&&(t=e,e=void 0),e=e||"",null!=t)return vo(e,t,i,"month");var n,r=[];for(n=0;n<12;n++)r[n]=vo(e,n,i,"month");return r}function mo(e,t,i,n){"boolean"==typeof e?(h(t)&&(i=t,t=void 0),t=t||""):(i=t=e,e=!1,h(t)&&(i=t,t=void 0),t=t||"");var r,o=gi(),s=e?o._week.dow:0,a=[];if(null!=i)return vo(t,(i+s)%7,n,"day");for(r=0;r<7;r++)a[r]=vo(t,(r+s)%7,n,"day");return a}function go(e,t){return _o(e,t,"months")}function yo(e,t){return _o(e,t,"monthsShort")}function bo(e,t,i){return mo(e,t,i,"weekdays")}function wo(e,t,i){return mo(e,t,i,"weekdaysShort")}function Co(e,t,i){return mo(e,t,i,"weekdaysMin")}po.calendar=B,po.longDateFormat=V,po.invalidDate=G,po.ordinal=J,po.preparse=fo,po.postformat=fo,po.relativeTime=ee,po.pastFuture=te,po.set=D,po.eras=Or,po.erasParse=Tr,po.erasConvertYear=Dr,po.erasAbbrRegex=Hr,po.erasNameRegex=Ir,po.erasNarrowRegex=jr,po.months=ct,po.monthsShort=ut,po.monthsParse=dt,po.monthsRegex=mt,po.monthsShortRegex=_t,po.week=xt,po.firstDayOfYear=Mt,po.firstDayOfWeek=Lt,po.weekdays=Ft,po.weekdaysMin=Nt,po.weekdaysShort=$t,po.weekdaysParse=Ut,po.weekdaysRegex=Kt,po.weekdaysShortRegex=Gt,po.weekdaysMinRegex=Xt,po.isPM=ii,po.meridiem=oi,vi("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Re(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=E("moment.lang is deprecated. Use moment.locale instead.",vi),r.langData=E("moment.langData is deprecated. Use moment.localeData instead.",gi);var So=Math.abs;function ko(){var e=this._data;return this._milliseconds=So(this._milliseconds),this._days=So(this._days),this._months=So(this._months),e.milliseconds=So(e.milliseconds),e.seconds=So(e.seconds),e.minutes=So(e.minutes),e.hours=So(e.hours),e.months=So(e.months),e.years=So(e.years),this}function xo(e,t,i,n){var r=On(t,i);return e._milliseconds+=n*r._milliseconds,e._days+=n*r._days,e._months+=n*r._months,e._bubble()}function Eo(e,t){return xo(this,e,t,1)}function Lo(e,t){return xo(this,e,t,-1)}function Mo(e){return e<0?Math.floor(e):Math.ceil(e)}function Oo(){var e,t,i,n,r,o=this._milliseconds,s=this._days,a=this._months,l=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*Mo(Do(a)+s),s=0,a=0),l.milliseconds=o%1e3,e=De(o/1e3),l.seconds=e%60,t=De(e/60),l.minutes=t%60,i=De(t/60),l.hours=i%24,s+=De(i/24),a+=r=De(To(s)),s-=Mo(Do(r)),n=De(a/12),a%=12,l.days=s,l.months=a,l.years=n,this}function To(e){return 4800*e/146097}function Do(e){return 146097*e/4800}function Ro(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,i=this._months+To(t),e){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(t=this._days+Math.round(Do(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function Ao(e){return function(){return this.as(e)}}var Po=Ao("ms"),Bo=Ao("s"),Io=Ao("m"),Ho=Ao("h"),jo=Ao("d"),Wo=Ao("w"),Fo=Ao("M"),$o=Ao("Q"),No=Ao("y"),zo=Po;function Uo(){return On(this)}function qo(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function Yo(e){return function(){return this.isValid()?this._data[e]:NaN}}var Vo=Yo("milliseconds"),Ko=Yo("seconds"),Go=Yo("minutes"),Xo=Yo("hours"),Zo=Yo("days"),Jo=Yo("months"),Qo=Yo("years");function es(){return De(this.days()/7)}var ts=Math.round,is={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ns(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function rs(e,t,i,n){var r=On(e).abs(),o=ts(r.as("s")),s=ts(r.as("m")),a=ts(r.as("h")),l=ts(r.as("d")),c=ts(r.as("M")),u=ts(r.as("w")),h=ts(r.as("y")),d=o<=i.ss&&["s",o]||o<i.s&&["ss",o]||s<=1&&["m"]||s<i.m&&["mm",s]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];return null!=i.w&&(d=d||u<=1&&["w"]||u<i.w&&["ww",u]),(d=d||c<=1&&["M"]||c<i.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=t,d[3]=+e>0,d[4]=n,ns.apply(null,d)}function os(e){return void 0===e?ts:"function"==typeof e&&(ts=e,!0)}function ss(e,t){return void 0!==is[e]&&(void 0===t?is[e]:(is[e]=t,"s"===e&&(is.ss=t-1),!0))}function as(e,t){if(!this.isValid())return this.localeData().invalidDate();var i,n,r=!1,o=is;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(o=Object.assign({},is,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),n=rs(this,!r,o,i=this.localeData()),r&&(n=i.pastFuture(+this,n)),i.postformat(n)}var ls=Math.abs;function cs(e){return(e>0)-(e<0)||+e}function us(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i,n,r,o,s,a,l=ls(this._milliseconds)/1e3,c=ls(this._days),u=ls(this._months),h=this.asSeconds();return h?(e=De(l/60),t=De(e/60),l%=60,e%=60,i=De(u/12),u%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=h<0?"-":"",o=cs(this._months)!==cs(h)?"-":"",s=cs(this._days)!==cs(h)?"-":"",a=cs(this._milliseconds)!==cs(h)?"-":"",r+"P"+(i?o+i+"Y":"")+(u?o+u+"M":"")+(c?s+c+"D":"")+(t||e||l?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(l?a+n+"S":"")):"P0D"}var hs=an.prototype;return hs.isValid=on,hs.abs=ko,hs.add=Eo,hs.subtract=Lo,hs.as=Ro,hs.asMilliseconds=Po,hs.asSeconds=Bo,hs.asMinutes=Io,hs.asHours=Ho,hs.asDays=jo,hs.asWeeks=Wo,hs.asMonths=Fo,hs.asQuarters=$o,hs.asYears=No,hs.valueOf=zo,hs._bubble=Oo,hs.clone=Uo,hs.get=qo,hs.milliseconds=Vo,hs.seconds=Ko,hs.minutes=Go,hs.hours=Xo,hs.days=Zo,hs.weeks=es,hs.months=Jo,hs.years=Qo,hs.humanize=as,hs.toISOString=us,hs.toString=us,hs.toJSON=us,hs.locale=ar,hs.localeData=cr,hs.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",us),hs.lang=lr,$("X",0,0,"unix"),$("x",0,0,"valueOf"),Le("x",be),Le("X",Se),Pe("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e))}),Pe("x",function(e,t,i){i._d=new Date(Re(e))}),
//! moment.js
r.version="2.30.1",o(Gi),r.fn=co,r.min=Qi,r.max=en,r.now=tn,r.utc=v,r.unix=uo,r.months=go,r.isDate=d,r.locale=vi,r.invalid=y,r.duration=On,r.isMoment=k,r.weekdays=bo,r.parseZone=ho,r.localeData=gi,r.isDuration=ln,r.monthsShort=yo,r.weekdaysMin=Co,r.defineLocale=_i,r.updateLocale=mi,r.locales=yi,r.weekdaysShort=wo,r.normalizeUnits=ne,r.relativeTimeRounding=os,r.relativeTimeThreshold=ss,r.calendarFormat=Nn,r.prototype=co,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}({exports:{}});class ur extends ge{constructor(e){super(),me(this,e,cr,lr,u,{name:0,description:1,created:6,level:7,xp:8,templateId:2,attributes:3,callback:4})}}var hr=function(e,t){return hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},hr(e,t)};function dr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}hr(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var fr=function(){return fr=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},fr.apply(this,arguments)};function pr(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}function vr(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})}function _r(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function mr(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}function gr(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}var yr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function br(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wr(e,t){return e(t={exports:{}},t.exports),t.exports}var Cr,Sr,kr=function(e){return e&&e.Math==Math&&e},xr=kr("object"==typeof globalThis&&globalThis)||kr("object"==typeof window&&window)||kr("object"==typeof self&&self)||kr("object"==typeof yr&&yr)||function(){return this}()||Function("return this")(),Er=function(e){try{return!!e()}catch(e){return!0}},Lr=!Er(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Mr=!Er(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),Or=Function.prototype.call,Tr=Mr?Or.bind(Or):function(){return Or.apply(Or,arguments)},Dr={}.propertyIsEnumerable,Rr=Object.getOwnPropertyDescriptor,Ar=Rr&&!Dr.call({1:2},1)?function(e){var t=Rr(this,e);return!!t&&t.enumerable}:Dr,Pr={f:Ar},Br=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ir=Function,Hr=Ir.prototype,jr=Hr.bind,Wr=Hr.call,Fr=Mr&&jr.bind(Wr,Wr),$r=function(e){return e instanceof Ir?Mr?Fr(e):function(){return Wr.apply(e,arguments)}:void 0},Nr=$r({}.toString),zr=$r("".slice),Ur=function(e){return zr(Nr(e),8,-1)},qr=Object,Yr=$r("".split),Vr=Er(function(){return!qr("z").propertyIsEnumerable(0)})?function(e){return"String"==Ur(e)?Yr(e,""):qr(e)}:qr,Kr=function(e){return null==e},Gr=TypeError,Xr=function(e){if(Kr(e))throw Gr("Can't call method on "+e);return e},Zr=function(e){return Vr(Xr(e))},Jr="object"==typeof document&&document.all,Qr={all:Jr,IS_HTMLDDA:void 0===Jr&&void 0!==Jr},eo=Qr.all,to=Qr.IS_HTMLDDA?function(e){return"function"==typeof e||e===eo}:function(e){return"function"==typeof e},io=Qr.all,no=Qr.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:to(e)||e===io}:function(e){return"object"==typeof e?null!==e:to(e)},ro=function(e,t){return arguments.length<2?function(e){return to(e)?e:void 0}(xr[e]):xr[e]&&xr[e][t]},oo=$r({}.isPrototypeOf),so=ro("navigator","userAgent")||"",ao=xr.process,lo=xr.Deno,co=ao&&ao.versions||lo&&lo.version,uo=co&&co.v8;uo&&(Sr=(Cr=uo.split("."))[0]>0&&Cr[0]<4?1:+(Cr[0]+Cr[1])),!Sr&&so&&(!(Cr=so.match(/Edge\/(\d+)/))||Cr[1]>=74)&&(Cr=so.match(/Chrome\/(\d+)/))&&(Sr=+Cr[1]);var ho=Sr,fo=!!Object.getOwnPropertySymbols&&!Er(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ho&&ho<41}),po=fo&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,vo=Object,_o=po?function(e){return"symbol"==typeof e}:function(e){var t=ro("Symbol");return to(t)&&oo(t.prototype,vo(e))},mo=String,go=function(e){try{return mo(e)}catch(e){return"Object"}},yo=TypeError,bo=function(e){if(to(e))return e;throw yo(go(e)+" is not a function")},wo=function(e,t){var i=e[t];return Kr(i)?void 0:bo(i)},Co=TypeError,So=Object.defineProperty,ko=function(e,t){try{So(xr,e,{value:t,configurable:!0,writable:!0})}catch(i){xr[e]=t}return t},xo=xr["__core-js_shared__"]||ko("__core-js_shared__",{}),Eo=wr(function(e){(e.exports=function(e,t){return xo[e]||(xo[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.4",mode:"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.4/LICENSE",source:"https://github.com/zloirock/core-js"})}),Lo=Object,Mo=function(e){return Lo(Xr(e))},Oo=$r({}.hasOwnProperty),To=Object.hasOwn||function(e,t){return Oo(Mo(e),t)},Do=0,Ro=Math.random(),Ao=$r(1..toString),Po=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Ao(++Do+Ro,36)},Bo=Eo("wks"),Io=xr.Symbol,Ho=Io&&Io.for,jo=po?Io:Io&&Io.withoutSetter||Po,Wo=function(e){if(!To(Bo,e)||!fo&&"string"!=typeof Bo[e]){var t="Symbol."+e;fo&&To(Io,e)?Bo[e]=Io[e]:Bo[e]=po&&Ho?Ho(t):jo(t)}return Bo[e]},Fo=TypeError,$o=Wo("toPrimitive"),No=function(e){var t=function(e,t){if(!no(e)||_o(e))return e;var i,n=wo(e,$o);if(n){if(void 0===t&&(t="default"),i=Tr(n,e,t),!no(i)||_o(i))return i;throw Fo("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var i,n;if("string"===t&&to(i=e.toString)&&!no(n=Tr(i,e)))return n;if(to(i=e.valueOf)&&!no(n=Tr(i,e)))return n;if("string"!==t&&to(i=e.toString)&&!no(n=Tr(i,e)))return n;throw Co("Can't convert object to primitive value")}(e,t)}(e,"string");return _o(t)?t:t+""},zo=xr.document,Uo=no(zo)&&no(zo.createElement),qo=function(e){return Uo?zo.createElement(e):{}},Yo=!Lr&&!Er(function(){return 7!=Object.defineProperty(qo("div"),"a",{get:function(){return 7}}).a}),Vo=Object.getOwnPropertyDescriptor,Ko={f:Lr?Vo:function(e,t){if(e=Zr(e),t=No(t),Yo)try{return Vo(e,t)}catch(e){}if(To(e,t))return Br(!Tr(Pr.f,e,t),e[t])}},Go=Lr&&Er(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),Xo=String,Zo=TypeError,Jo=function(e){if(no(e))return e;throw Zo(Xo(e)+" is not an object")},Qo=TypeError,es=Object.defineProperty,ts=Object.getOwnPropertyDescriptor,is={f:Lr?Go?function(e,t,i){if(Jo(e),t=No(t),Jo(i),"function"==typeof e&&"prototype"===t&&"value"in i&&"writable"in i&&!i.writable){var n=ts(e,t);n&&n.writable&&(e[t]=i.value,i={configurable:"configurable"in i?i.configurable:n.configurable,enumerable:"enumerable"in i?i.enumerable:n.enumerable,writable:!1})}return es(e,t,i)}:es:function(e,t,i){if(Jo(e),t=No(t),Jo(i),Yo)try{return es(e,t,i)}catch(e){}if("get"in i||"set"in i)throw Qo("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},ns=Lr?function(e,t,i){return is.f(e,t,Br(1,i))}:function(e,t,i){return e[t]=i,e},rs=Function.prototype,os=Lr&&Object.getOwnPropertyDescriptor,ss=To(rs,"name"),as={EXISTS:ss,PROPER:ss&&"something"===function(){}.name,CONFIGURABLE:ss&&(!Lr||Lr&&os(rs,"name").configurable)},ls=$r(Function.toString);to(xo.inspectSource)||(xo.inspectSource=function(e){return ls(e)});var cs,us,hs,ds=xo.inspectSource,fs=xr.WeakMap,ps=to(fs)&&/native code/.test(String(fs)),vs=Eo("keys"),_s=function(e){return vs[e]||(vs[e]=Po(e))},ms={},gs=xr.TypeError,ys=xr.WeakMap;if(ps||xo.state){var bs=xo.state||(xo.state=new ys),ws=$r(bs.get),Cs=$r(bs.has),Ss=$r(bs.set);cs=function(e,t){if(Cs(bs,e))throw gs("Object already initialized");return t.facade=e,Ss(bs,e,t),t},us=function(e){return ws(bs,e)||{}},hs=function(e){return Cs(bs,e)}}else{var ks=_s("state");ms[ks]=!0,cs=function(e,t){if(To(e,ks))throw gs("Object already initialized");return t.facade=e,ns(e,ks,t),t},us=function(e){return To(e,ks)?e[ks]:{}},hs=function(e){return To(e,ks)}}var xs={set:cs,get:us,has:hs,enforce:function(e){return hs(e)?us(e):cs(e,{})},getterFor:function(e){return function(t){var i;if(!no(t)||(i=us(t)).type!==e)throw gs("Incompatible receiver, "+e+" required");return i}}},Es=wr(function(e){var t=as.CONFIGURABLE,i=xs.enforce,n=xs.get,r=Object.defineProperty,o=Lr&&!Er(function(){return 8!==r(function(){},"length",{value:8}).length}),s=String(String).split("String"),a=e.exports=function(e,n,a){"Symbol("===String(n).slice(0,7)&&(n="["+String(n).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),a&&a.getter&&(n="get "+n),a&&a.setter&&(n="set "+n),(!To(e,"name")||t&&e.name!==n)&&(Lr?r(e,"name",{value:n,configurable:!0}):e.name=n),o&&a&&To(a,"arity")&&e.length!==a.arity&&r(e,"length",{value:a.arity});try{a&&To(a,"constructor")&&a.constructor?Lr&&r(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var l=i(e);return To(l,"source")||(l.source=s.join("string"==typeof n?n:"")),e};Function.prototype.toString=a(function(){return to(this)&&n(this).source||ds(this)},"toString")}),Ls=function(e,t,i,n){n||(n={});var r=n.enumerable,o=void 0!==n.name?n.name:t;if(to(i)&&Es(i,o,n),n.global)r?e[t]=i:ko(t,i);else{try{n.unsafe?e[t]&&(r=!0):delete e[t]}catch(e){}r?e[t]=i:is.f(e,t,{value:i,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e},Ms=Math.ceil,Os=Math.floor,Ts=Math.trunc||function(e){var t=+e;return(t>0?Os:Ms)(t)},Ds=function(e){var t=+e;return t!=t||0===t?0:Ts(t)},Rs=Math.max,As=Math.min,Ps=function(e,t){var i=Ds(e);return i<0?Rs(i+t,0):As(i,t)},Bs=Math.min,Is=function(e){return e>0?Bs(Ds(e),9007199254740991):0},Hs=function(e){return Is(e.length)},js=function(e){return function(t,i,n){var r,o=Zr(t),s=Hs(o),a=Ps(n,s);if(e&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===i)return e||a||0;return!e&&-1}},Ws={includes:js(!0),indexOf:js(!1)},Fs=Ws.indexOf,$s=$r([].push),Ns=function(e,t){var i,n=Zr(e),r=0,o=[];for(i in n)!To(ms,i)&&To(n,i)&&$s(o,i);for(;t.length>r;)To(n,i=t[r++])&&(~Fs(o,i)||$s(o,i));return o},zs=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Us=zs.concat("length","prototype"),qs={f:Object.getOwnPropertyNames||function(e){return Ns(e,Us)}},Ys={f:Object.getOwnPropertySymbols},Vs=$r([].concat),Ks=ro("Reflect","ownKeys")||function(e){var t=qs.f(Jo(e)),i=Ys.f;return i?Vs(t,i(e)):t},Gs=function(e,t,i){for(var n=Ks(t),r=is.f,o=Ko.f,s=0;s<n.length;s++){var a=n[s];To(e,a)||i&&To(i,a)||r(e,a,o(t,a))}},Xs=/#|\.prototype\./,Zs=function(e,t){var i=Qs[Js(e)];return i==ta||i!=ea&&(to(t)?Er(t):!!t)},Js=Zs.normalize=function(e){return String(e).replace(Xs,".").toLowerCase()},Qs=Zs.data={},ea=Zs.NATIVE="N",ta=Zs.POLYFILL="P",ia=Zs,na=Ko.f,ra=function(e,t){var i,n,r,o,s,a=e.target,l=e.global,c=e.stat;if(i=l?xr:c?xr[a]||ko(a,{}):(xr[a]||{}).prototype)for(n in t){if(o=t[n],r=e.dontCallGetSet?(s=na(i,n))&&s.value:i[n],!ia(l?n:a+(c?".":"#")+n,e.forced)&&void 0!==r){if(typeof o==typeof r)continue;Gs(o,r)}(e.sham||r&&r.sham)&&ns(o,"sham",!0),Ls(i,n,o,e)}},oa={};oa[Wo("toStringTag")]="z";var sa,aa="[object z]"===String(oa),la=Wo("toStringTag"),ca=Object,ua="Arguments"==Ur(function(){return arguments}()),ha=aa?Ur:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=ca(e),la))?i:ua?Ur(t):"Object"==(n=Ur(t))&&to(t.callee)?"Arguments":n},da=String,fa=function(e){if("Symbol"===ha(e))throw TypeError("Cannot convert a Symbol value to a string");return da(e)},pa=Wo("match"),va=TypeError,_a=function(e){if(function(e){var t;return no(e)&&(void 0!==(t=e[pa])?!!t:"RegExp"==Ur(e))}(e))throw va("The method doesn't accept regular expressions");return e},ma=Wo("match"),ga=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[ma]=!1,"/./"[e](t)}catch(e){}}return!1},ya=Ko.f,ba=$r("".startsWith),wa=$r("".slice),Ca=Math.min,Sa=ga("startsWith"),ka=!(Sa||(sa=ya(String.prototype,"startsWith"),!sa||sa.writable));ra({target:"String",proto:!0,forced:!ka&&!Sa},{startsWith:function(e){var t=fa(Xr(this));_a(e);var i=Is(Ca(arguments.length>1?arguments[1]:void 0,t.length)),n=fa(e);return ba?ba(t,n,i):wa(t,i,i+n.length)===n}});var xa=function(e,t){return $r(xr[e].prototype[t])};xa("String","startsWith");var Ea=Array.isArray||function(e){return"Array"==Ur(e)},La=TypeError,Ma=function(e){if(e>9007199254740991)throw La("Maximum allowed index exceeded");return e},Oa=function(e,t,i){var n=No(t);n in e?is.f(e,n,Br(0,i)):e[n]=i},Ta=function(){},Da=[],Ra=ro("Reflect","construct"),Aa=/^\s*(?:class|function)\b/,Pa=$r(Aa.exec),Ba=!Aa.exec(Ta),Ia=function(e){if(!to(e))return!1;try{return Ra(Ta,Da,e),!0}catch(e){return!1}},Ha=function(e){if(!to(e))return!1;switch(ha(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ba||!!Pa(Aa,ds(e))}catch(e){return!0}};Ha.sham=!0;var ja=!Ra||Er(function(){var e;return Ia(Ia.call)||!Ia(Object)||!Ia(function(){e=!0})||e})?Ha:Ia,Wa=Wo("species"),Fa=Array,$a=function(e,t){return new(function(e){var t;return Ea(e)&&(t=e.constructor,(ja(t)&&(t===Fa||Ea(t.prototype))||no(t)&&null===(t=t[Wa]))&&(t=void 0)),void 0===t?Fa:t}(e))(0===t?0:t)},Na=Wo("species"),za=Wo("isConcatSpreadable"),Ua=ho>=51||!Er(function(){var e=[];return e[za]=!1,e.concat()[0]!==e}),qa=ho>=51||!Er(function(){var e=[];return(e.constructor={})[Na]=function(){return{foo:1}},1!==e.concat(Boolean).foo}),Ya=function(e){if(!no(e))return!1;var t=e[za];return void 0!==t?!!t:Ea(e)};ra({target:"Array",proto:!0,arity:1,forced:!Ua||!qa},{concat:function(e){var t,i,n,r,o,s=Mo(this),a=$a(s,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(Ya(o=-1===t?s:arguments[t]))for(r=Hs(o),Ma(l+r),i=0;i<r;i++,l++)i in o&&Oa(a,l,o[i]);else Ma(l+1),Oa(a,l++,o);return a.length=l,a}});var Va=aa?{}.toString:function(){return"[object "+ha(this)+"]"};aa||Ls(Object.prototype,"toString",Va,{unsafe:!0});var Ka,Ga=Object.keys||function(e){return Ns(e,zs)},Xa=Lr&&!Go?Object.defineProperties:function(e,t){Jo(e);for(var i,n=Zr(t),r=Ga(t),o=r.length,s=0;o>s;)is.f(e,i=r[s++],n[i]);return e},Za={f:Xa},Ja=ro("document","documentElement"),Qa=_s("IE_PROTO"),el=function(){},tl=function(e){return"<script>"+e+"<\/script>"},il=function(e){e.write(tl("")),e.close();var t=e.parentWindow.Object;return e=null,t},nl=function(){try{Ka=new ActiveXObject("htmlfile")}catch(e){}var e,t;nl="undefined"!=typeof document?document.domain&&Ka?il(Ka):((t=qo("iframe")).style.display="none",Ja.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(tl("document.F=Object")),e.close(),e.F):il(Ka);for(var i=zs.length;i--;)delete nl.prototype[zs[i]];return nl()};ms[Qa]=!0;var rl=Object.create||function(e,t){var i;return null!==e?(el.prototype=Jo(e),i=new el,el.prototype=null,i[Qa]=e):i=nl(),void 0===t?i:Za.f(i,t)},ol=Array,sl=Math.max,al=qs.f,ll="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],cl={f:function(e){return ll&&"Window"==Ur(e)?function(e){try{return al(e)}catch(e){return function(e){for(var t=Hs(e),i=Ps(void 0,t),n=Ps(t,t),r=ol(sl(n-i,0)),o=0;i<n;i++,o++)Oa(r,o,e[i]);return r.length=o,r}(ll)}}(e):al(Zr(e))}},ul={f:Wo},hl=xr,dl=is.f,fl=function(e){var t=hl.Symbol||(hl.Symbol={});To(t,e)||dl(t,e,{value:ul.f(e)})},pl=function(){var e=ro("Symbol"),t=e&&e.prototype,i=t&&t.valueOf,n=Wo("toPrimitive");t&&!t[n]&&Ls(t,n,function(e){return Tr(i,this)},{arity:1})},vl=is.f,_l=Wo("toStringTag"),ml=function(e,t,i){e&&!i&&(e=e.prototype),e&&!To(e,_l)&&vl(e,_l,{configurable:!0,value:t})},gl=$r($r.bind),yl=function(e,t){return bo(e),void 0===t?e:Mr?gl(e,t):function(){return e.apply(t,arguments)}},bl=$r([].push),wl=function(e){var t=1==e,i=2==e,n=3==e,r=4==e,o=6==e,s=7==e,a=5==e||o;return function(l,c,u,h){for(var d,f,p=Mo(l),v=Vr(p),_=yl(c,u),m=Hs(v),g=0,y=h||$a,b=t?y(l,m):i||s?y(l,0):void 0;m>g;g++)if((a||g in v)&&(f=_(d=v[g],g,p),e))if(t)b[g]=f;else if(f)switch(e){case 3:return!0;case 5:return d;case 6:return g;case 2:bl(b,d)}else switch(e){case 4:return!1;case 7:bl(b,d)}return o?-1:n||r?r:b}},Cl=[wl(0),wl(1),wl(2),wl(3),wl(4),wl(5),wl(6),wl(7)][0],Sl=_s("hidden"),kl=xs.set,xl=xs.getterFor("Symbol"),El=Object.prototype,Ll=xr.Symbol,Ml=Ll&&Ll.prototype,Ol=xr.TypeError,Tl=xr.QObject,Dl=Ko.f,Rl=is.f,Al=cl.f,Pl=Pr.f,Bl=$r([].push),Il=Eo("symbols"),Hl=Eo("op-symbols"),jl=Eo("wks"),Wl=!Tl||!Tl.prototype||!Tl.prototype.findChild,Fl=Lr&&Er(function(){return 7!=rl(Rl({},"a",{get:function(){return Rl(this,"a",{value:7}).a}})).a})?function(e,t,i){var n=Dl(El,t);n&&delete El[t],Rl(e,t,i),n&&e!==El&&Rl(El,t,n)}:Rl,$l=function(e,t){var i=Il[e]=rl(Ml);return kl(i,{type:"Symbol",tag:e,description:t}),Lr||(i.description=t),i},Nl=function(e,t,i){e===El&&Nl(Hl,t,i),Jo(e);var n=No(t);return Jo(i),To(Il,n)?(i.enumerable?(To(e,Sl)&&e[Sl][n]&&(e[Sl][n]=!1),i=rl(i,{enumerable:Br(0,!1)})):(To(e,Sl)||Rl(e,Sl,Br(1,{})),e[Sl][n]=!0),Fl(e,n,i)):Rl(e,n,i)},zl=function(e,t){Jo(e);var i=Zr(t),n=Ga(i).concat(Vl(i));return Cl(n,function(t){Lr&&!Tr(Ul,i,t)||Nl(e,t,i[t])}),e},Ul=function(e){var t=No(e),i=Tr(Pl,this,t);return!(this===El&&To(Il,t)&&!To(Hl,t))&&(!(i||!To(this,t)||!To(Il,t)||To(this,Sl)&&this[Sl][t])||i)},ql=function(e,t){var i=Zr(e),n=No(t);if(i!==El||!To(Il,n)||To(Hl,n)){var r=Dl(i,n);return!r||!To(Il,n)||To(i,Sl)&&i[Sl][n]||(r.enumerable=!0),r}},Yl=function(e){var t=Al(Zr(e)),i=[];return Cl(t,function(e){To(Il,e)||To(ms,e)||Bl(i,e)}),i},Vl=function(e){var t=e===El,i=Al(t?Hl:Zr(e)),n=[];return Cl(i,function(e){!To(Il,e)||t&&!To(El,e)||Bl(n,Il[e])}),n};fo||(Ml=(Ll=function(){if(oo(Ml,this))throw Ol("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?fa(arguments[0]):void 0,t=Po(e),i=function(e){this===El&&Tr(i,Hl,e),To(this,Sl)&&To(this[Sl],t)&&(this[Sl][t]=!1),Fl(this,t,Br(1,e))};return Lr&&Wl&&Fl(El,t,{configurable:!0,set:i}),$l(t,e)}).prototype,Ls(Ml,"toString",function(){return xl(this).tag}),Ls(Ll,"withoutSetter",function(e){return $l(Po(e),e)}),Pr.f=Ul,is.f=Nl,Za.f=zl,Ko.f=ql,qs.f=cl.f=Yl,Ys.f=Vl,ul.f=function(e){return $l(Wo(e),e)},Lr&&(Rl(Ml,"description",{configurable:!0,get:function(){return xl(this).description}}),Ls(El,"propertyIsEnumerable",Ul,{unsafe:!0}))),ra({global:!0,constructor:!0,wrap:!0,forced:!fo,sham:!fo},{Symbol:Ll}),Cl(Ga(jl),function(e){fl(e)}),ra({target:"Symbol",stat:!0,forced:!fo},{useSetter:function(){Wl=!0},useSimple:function(){Wl=!1}}),ra({target:"Object",stat:!0,forced:!fo,sham:!Lr},{create:function(e,t){return void 0===t?rl(e):zl(rl(e),t)},defineProperty:Nl,defineProperties:zl,getOwnPropertyDescriptor:ql}),ra({target:"Object",stat:!0,forced:!fo},{getOwnPropertyNames:Yl}),pl(),ml(Ll,"Symbol"),ms[Sl]=!0;var Kl=fo&&!!Symbol.for&&!!Symbol.keyFor,Gl=Eo("string-to-symbol-registry"),Xl=Eo("symbol-to-string-registry");ra({target:"Symbol",stat:!0,forced:!Kl},{for:function(e){var t=fa(e);if(To(Gl,t))return Gl[t];var i=ro("Symbol")(t);return Gl[t]=i,Xl[i]=t,i}});var Zl=Eo("symbol-to-string-registry");ra({target:"Symbol",stat:!0,forced:!Kl},{keyFor:function(e){if(!_o(e))throw TypeError(go(e)+" is not a symbol");if(To(Zl,e))return Zl[e]}});var Jl=Function.prototype,Ql=Jl.apply,ec=Jl.call,tc="object"==typeof Reflect&&Reflect.apply||(Mr?ec.bind(Ql):function(){return ec.apply(Ql,arguments)}),ic=$r([].slice),nc=ro("JSON","stringify"),rc=$r(/./.exec),oc=$r("".charAt),sc=$r("".charCodeAt),ac=$r("".replace),lc=$r(1..toString),cc=/[\uD800-\uDFFF]/g,uc=/^[\uD800-\uDBFF]$/,hc=/^[\uDC00-\uDFFF]$/,dc=!fo||Er(function(){var e=ro("Symbol")();return"[null]"!=nc([e])||"{}"!=nc({a:e})||"{}"!=nc(Object(e))}),fc=Er(function(){return'"\\udf06\\ud834"'!==nc("\udf06\ud834")||'"\\udead"'!==nc("\udead")}),pc=function(e,t){var i=ic(arguments),n=t;if((no(t)||void 0!==e)&&!_o(e))return Ea(t)||(t=function(e,t){if(to(n)&&(t=Tr(n,this,e,t)),!_o(t))return t}),i[1]=t,tc(nc,null,i)},vc=function(e,t,i){var n=oc(i,t-1),r=oc(i,t+1);return rc(uc,e)&&!rc(hc,r)||rc(hc,e)&&!rc(uc,n)?"\\u"+lc(sc(e,0),16):e};nc&&ra({target:"JSON",stat:!0,arity:3,forced:dc||fc},{stringify:function(e,t,i){var n=ic(arguments),r=tc(dc?pc:nc,null,n);return fc&&"string"==typeof r?ac(r,cc,vc):r}});var _c=!fo||Er(function(){Ys.f(1)});ra({target:"Object",stat:!0,forced:_c},{getOwnPropertySymbols:function(e){var t=Ys.f;return t?t(Mo(e)):[]}}),fl("asyncIterator");var mc=is.f,gc=xr.Symbol,yc=gc&&gc.prototype;if(Lr&&to(gc)&&(!("description"in yc)||void 0!==gc().description)){var bc={},wc=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:fa(arguments[0]),t=oo(yc,this)?new gc(e):void 0===e?gc():gc(e);return""===e&&(bc[t]=!0),t};Gs(wc,gc),wc.prototype=yc,yc.constructor=wc;var Cc="Symbol(test)"==String(gc("test")),Sc=$r(yc.valueOf),kc=$r(yc.toString),xc=/^Symbol\((.*)\)[^)]+$/,Ec=$r("".replace),Lc=$r("".slice);mc(yc,"description",{configurable:!0,get:function(){var e=Sc(this);if(To(bc,e))return"";var t=kc(e),i=Cc?Lc(t,7,-1):Ec(t,xc,"$1");return""===i?void 0:i}}),ra({global:!0,constructor:!0,forced:!0},{Symbol:wc})}fl("hasInstance"),fl("isConcatSpreadable"),fl("iterator"),fl("match"),fl("matchAll"),fl("replace"),fl("search"),fl("species"),fl("split"),fl("toPrimitive"),pl(),fl("toStringTag"),ml(ro("Symbol"),"Symbol"),fl("unscopables"),ml(xr.JSON,"JSON",!0),ml(Math,"Math",!0),ra({global:!0},{Reflect:{}}),ml(xr.Reflect,"Reflect",!0),hl.Symbol;var Mc,Oc,Tc,Dc=$r("".charAt),Rc=$r("".charCodeAt),Ac=$r("".slice),Pc=function(e){return function(t,i){var n,r,o=fa(Xr(t)),s=Ds(i),a=o.length;return s<0||s>=a?e?"":void 0:(n=Rc(o,s))<55296||n>56319||s+1===a||(r=Rc(o,s+1))<56320||r>57343?e?Dc(o,s):n:e?Ac(o,s,s+2):r-56320+(n-55296<<10)+65536}},Bc={codeAt:Pc(!1),charAt:Pc(!0)},Ic=!Er(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Hc=_s("IE_PROTO"),jc=Object,Wc=jc.prototype,Fc=Ic?jc.getPrototypeOf:function(e){var t=Mo(e);if(To(t,Hc))return t[Hc];var i=t.constructor;return to(i)&&t instanceof i?i.prototype:t instanceof jc?Wc:null},$c=Wo("iterator"),Nc=!1;[].keys&&("next"in(Tc=[].keys())?(Oc=Fc(Fc(Tc)))!==Object.prototype&&(Mc=Oc):Nc=!0);var zc=!no(Mc)||Er(function(){var e={};return Mc[$c].call(e)!==e});zc&&(Mc={}),to(Mc[$c])||Ls(Mc,$c,function(){return this});var Uc={IteratorPrototype:Mc,BUGGY_SAFARI_ITERATORS:Nc},qc={},Yc=Uc.IteratorPrototype,Vc=function(){return this},Kc=String,Gc=TypeError,Xc=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=$r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return Jo(i),function(e){if("object"==typeof e||to(e))return e;throw Gc("Can't set "+Kc(e)+" as a prototype")}(n),t?e(i,n):i.__proto__=n,i}}():void 0),Zc=as.PROPER,Jc=as.CONFIGURABLE,Qc=Uc.IteratorPrototype,eu=Uc.BUGGY_SAFARI_ITERATORS,tu=Wo("iterator"),iu=function(){return this},nu=function(e,t,i,n,r,o,s){!function(e,t,i){var n=t+" Iterator";e.prototype=rl(Yc,{next:Br(1,i)}),ml(e,n,!1),qc[n]=Vc}(i,t,n);var a,l,c,u=function(e){if(e===r&&v)return v;if(!eu&&e in f)return f[e];switch(e){case"keys":case"values":case"entries":return function(){return new i(this,e)}}return function(){return new i(this)}},h=t+" Iterator",d=!1,f=e.prototype,p=f[tu]||f["@@iterator"]||r&&f[r],v=!eu&&p||u(r),_="Array"==t&&f.entries||p;if(_&&(a=Fc(_.call(new e)))!==Object.prototype&&a.next&&(Fc(a)!==Qc&&(Xc?Xc(a,Qc):to(a[tu])||Ls(a,tu,iu)),ml(a,h,!0)),Zc&&"values"==r&&p&&"values"!==p.name&&(Jc?ns(f,"name","values"):(d=!0,v=function(){return Tr(p,this)})),r)if(l={values:u("values"),keys:o?v:u("keys"),entries:u("entries")},s)for(c in l)(eu||d||!(c in f))&&Ls(f,c,l[c]);else ra({target:t,proto:!0,forced:eu||d},l);return f[tu]!==v&&Ls(f,tu,v,{name:r}),qc[t]=v,l},ru=function(e,t){return{value:e,done:t}},ou=Bc.charAt,su=xs.set,au=xs.getterFor("String Iterator");nu(String,"String",function(e){su(this,{type:"String Iterator",string:fa(e),index:0})},function(){var e,t=au(this),i=t.string,n=t.index;return n>=i.length?ru(void 0,!0):(e=ou(i,n),t.index+=e.length,ru(e,!1))});var lu=function(e,t,i){var n,r;Jo(e);try{if(!(n=wo(e,"return"))){if("throw"===t)throw i;return i}n=Tr(n,e)}catch(e){r=!0,n=e}if("throw"===t)throw i;if(r)throw n;return Jo(n),i},cu=function(e,t,i,n){try{return n?t(Jo(i)[0],i[1]):t(i)}catch(t){lu(e,"throw",t)}},uu=Wo("iterator"),hu=Array.prototype,du=function(e){return void 0!==e&&(qc.Array===e||hu[uu]===e)},fu=Wo("iterator"),pu=function(e){if(!Kr(e))return wo(e,fu)||wo(e,"@@iterator")||qc[ha(e)]},vu=TypeError,_u=function(e,t){var i=arguments.length<2?pu(e):t;if(bo(i))return Jo(Tr(i,e));throw vu(go(e)+" is not iterable")},mu=Array,gu=Wo("iterator"),yu=!1;try{var bu=0,wu={next:function(){return{done:!!bu++}},return:function(){yu=!0}};wu[gu]=function(){return this},Array.from(wu,function(){throw 2})}catch(hr){}var Cu=function(e,t){if(!t&&!yu)return!1;var i=!1;try{var n={};n[gu]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(e){}return i},Su=!Cu(function(e){Array.from(e)});ra({target:"Array",stat:!0,forced:Su},{from:function(e){var t=Mo(e),i=ja(this),n=arguments.length,r=n>1?arguments[1]:void 0,o=void 0!==r;o&&(r=yl(r,n>2?arguments[2]:void 0));var s,a,l,c,u,h,d=pu(t),f=0;if(!d||this===mu&&du(d))for(s=Hs(t),a=i?new this(s):mu(s);s>f;f++)h=o?r(t[f],f):t[f],Oa(a,f,h);else for(u=(c=_u(t,d)).next,a=i?new this:[];!(l=Tr(u,c)).done;f++)h=o?cu(c,r,[l.value,f],!0):l.value,Oa(a,f,h);return a.length=f,a}}),hl.Array.from;var ku,xu,Eu,Lu="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Mu=is.f,Ou=xs.enforce,Tu=xs.get,Du=xr.Int8Array,Ru=Du&&Du.prototype,Au=xr.Uint8ClampedArray,Pu=Au&&Au.prototype,Bu=Du&&Fc(Du),Iu=Ru&&Fc(Ru),Hu=Object.prototype,ju=xr.TypeError,Wu=Wo("toStringTag"),Fu=Po("TYPED_ARRAY_TAG"),$u=Lu&&!!Xc&&"Opera"!==ha(xr.opera),Nu=!1,zu={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Uu={BigInt64Array:8,BigUint64Array:8},qu=function(e){var t=Fc(e);if(no(t)){var i=Tu(t);return i&&To(i,"TypedArrayConstructor")?i.TypedArrayConstructor:qu(t)}},Yu=function(e){if(!no(e))return!1;var t=ha(e);return To(zu,t)||To(Uu,t)};for(ku in zu)(Eu=(xu=xr[ku])&&xu.prototype)?Ou(Eu).TypedArrayConstructor=xu:$u=!1;for(ku in Uu)(Eu=(xu=xr[ku])&&xu.prototype)&&(Ou(Eu).TypedArrayConstructor=xu);if((!$u||!to(Bu)||Bu===Function.prototype)&&(Bu=function(){throw ju("Incorrect invocation")},$u))for(ku in zu)xr[ku]&&Xc(xr[ku],Bu);if((!$u||!Iu||Iu===Hu)&&(Iu=Bu.prototype,$u))for(ku in zu)xr[ku]&&Xc(xr[ku].prototype,Iu);if($u&&Fc(Pu)!==Iu&&Xc(Pu,Iu),Lr&&!To(Iu,Wu))for(ku in Nu=!0,Mu(Iu,Wu,{get:function(){return no(this)?this[Fu]:void 0}}),zu)xr[ku]&&ns(xr[ku],Fu,ku);var Vu={NATIVE_ARRAY_BUFFER_VIEWS:$u,TYPED_ARRAY_TAG:Nu&&Fu,aTypedArray:function(e){if(Yu(e))return e;throw ju("Target is not a typed array")},aTypedArrayConstructor:function(e){if(to(e)&&(!Xc||oo(Bu,e)))return e;throw ju(go(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i,n){if(Lr){if(i)for(var r in zu){var o=xr[r];if(o&&To(o.prototype,e))try{delete o.prototype[e]}catch(i){try{o.prototype[e]=t}catch(e){}}}Iu[e]&&!i||Ls(Iu,e,i?t:$u&&Ru[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,i){var n,r;if(Lr){if(Xc){if(i)for(n in zu)if((r=xr[n])&&To(r,e))try{delete r[e]}catch(e){}if(Bu[e]&&!i)return;try{return Ls(Bu,e,i?t:$u&&Bu[e]||t)}catch(e){}}for(n in zu)!(r=xr[n])||r[e]&&!i||Ls(r,e,t)}},getTypedArrayConstructor:qu,isView:function(e){if(!no(e))return!1;var t=ha(e);return"DataView"===t||To(zu,t)||To(Uu,t)},isTypedArray:Yu,TypedArray:Bu,TypedArrayPrototype:Iu},Ku=TypeError,Gu=Wo("species"),Xu=Vu.aTypedArrayConstructor,Zu=Vu.getTypedArrayConstructor,Ju=Vu.aTypedArray;(0,Vu.exportTypedArrayMethod)("slice",function(e,t){for(var i=ic(Ju(this),e,t),n=Xu(function(e,t){var i,n=Jo(e).constructor;return void 0===n||Kr(i=Jo(n)[Gu])?t:function(e){if(ja(e))return e;throw Ku(go(e)+" is not a constructor")}(i)}(this,Zu(this))),r=0,o=i.length,s=new n(o);o>r;)s[r]=i[r++];return s},Er(function(){new Int8Array(1).slice()}));var Qu=is.f,eh=Wo("unscopables"),th=Array.prototype;null==th[eh]&&Qu(th,eh,{configurable:!0,value:rl(null)});var ih=function(e){th[eh][e]=!0},nh=Ws.includes,rh=Er(function(){return!Array(1).includes()});ra({target:"Array",proto:!0,forced:rh},{includes:function(e){return nh(this,e,arguments.length>1?arguments[1]:void 0)}}),ih("includes"),xa("Array","includes");var oh=$r("".indexOf);ra({target:"String",proto:!0,forced:!ga("includes")},{includes:function(e){return!!~oh(fa(Xr(this)),fa(_a(e)),arguments.length>1?arguments[1]:void 0)}}),xa("String","includes");var sh=is.f,ah=xs.set,lh=xs.getterFor("Array Iterator");nu(Array,"Array",function(e,t){ah(this,{type:"Array Iterator",target:Zr(e),index:0,kind:t})},function(){var e=lh(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,ru(void 0,!0)):ru("keys"==i?n:"values"==i?t[n]:[n,t[n]],!1)},"values");var ch=qc.Arguments=qc.Array;if(ih("keys"),ih("values"),ih("entries"),Lr&&"values"!==ch.name)try{sh(ch,"name",{value:"values"})}catch(hr){}var uh=Er(function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),hh=Object.isExtensible,dh=Er(function(){hh(1)})||uh?function(e){return!!no(e)&&(!uh||"ArrayBuffer"!=Ur(e))&&(!hh||hh(e))}:hh,fh=!Er(function(){return Object.isExtensible(Object.preventExtensions({}))}),ph=wr(function(e){var t=is.f,i=!1,n=Po("meta"),r=0,o=function(e){t(e,n,{value:{objectID:"O"+r++,weakData:{}}})},s=e.exports={enable:function(){s.enable=function(){},i=!0;var e=qs.f,t=$r([].splice),r={};r[n]=1,e(r).length&&(qs.f=function(i){for(var r=e(i),o=0,s=r.length;o<s;o++)if(r[o]===n){t(r,o,1);break}return r},ra({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:cl.f}))},fastKey:function(e,t){if(!no(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!To(e,n)){if(!dh(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!To(e,n)){if(!dh(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return fh&&i&&dh(e)&&!To(e,n)&&o(e),e}};ms[n]=!0});ph.enable,ph.fastKey,ph.getWeakData,ph.onFreeze;var vh=TypeError,_h=function(e,t){this.stopped=e,this.result=t},mh=_h.prototype,gh=function(e,t,i){var n,r,o,s,a,l,c,u=i&&i.that,h=!(!i||!i.AS_ENTRIES),d=!(!i||!i.IS_RECORD),f=!(!i||!i.IS_ITERATOR),p=!(!i||!i.INTERRUPTED),v=yl(t,u),_=function(e){return n&&lu(n,"normal",e),new _h(!0,e)},m=function(e){return h?(Jo(e),p?v(e[0],e[1],_):v(e[0],e[1])):p?v(e,_):v(e)};if(d)n=e.iterator;else if(f)n=e;else{if(!(r=pu(e)))throw vh(go(e)+" is not iterable");if(du(r)){for(o=0,s=Hs(e);s>o;o++)if((a=m(e[o]))&&oo(mh,a))return a;return new _h(!1)}n=_u(e,r)}for(l=d?e.next:n.next;!(c=Tr(l,n)).done;){try{a=m(c.value)}catch(e){lu(n,"throw",e)}if("object"==typeof a&&a&&oo(mh,a))return a}return new _h(!1)},yh=TypeError,bh=function(e,t){if(oo(t,e))return e;throw yh("Incorrect invocation")},wh=function(e,t,i){for(var n in t)Ls(e,n,t[n],i);return e},Ch=Wo("species"),Sh=is.f,kh=ph.fastKey,xh=xs.set,Eh=xs.getterFor,Lh={getConstructor:function(e,t,i,n){var r=e(function(e,r){bh(e,o),xh(e,{type:t,index:rl(null),first:void 0,last:void 0,size:0}),Lr||(e.size=0),Kr(r)||gh(r,e[n],{that:e,AS_ENTRIES:i})}),o=r.prototype,s=Eh(t),a=function(e,t,i){var n,r,o=s(e),a=l(e,t);return a?a.value=i:(o.last=a={index:r=kh(t,!0),key:t,value:i,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),Lr?o.size++:e.size++,"F"!==r&&(o.index[r]=a)),e},l=function(e,t){var i,n=s(e),r=kh(t);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==t)return i};return wh(o,{clear:function(){for(var e=s(this),t=e.index,i=e.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete t[i.index],i=i.next;e.first=e.last=void 0,Lr?e.size=0:this.size=0},delete:function(e){var t=this,i=s(t),n=l(t,e);if(n){var r=n.next,o=n.previous;delete i.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),i.first==n&&(i.first=r),i.last==n&&(i.last=o),Lr?i.size--:t.size--}return!!n},forEach:function(e){for(var t,i=s(this),n=yl(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:i.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!l(this,e)}}),wh(o,i?{get:function(e){var t=l(this,e);return t&&t.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),Lr&&Sh(o,"size",{get:function(){return s(this).size}}),r},setStrong:function(e,t,i){var n=t+" Iterator",r=Eh(t),o=Eh(n);nu(e,t,function(e,t){xh(this,{type:n,target:e,state:r(e),kind:t,last:void 0})},function(){for(var e=o(this),t=e.kind,i=e.last;i&&i.removed;)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?ru("keys"==t?i.key:"values"==t?i.value:[i.key,i.value],!1):(e.target=void 0,ru(void 0,!0))},i?"entries":"values",!i,!0),function(e){var t=ro(e),i=is.f;Lr&&t&&!t[Ch]&&i(t,Ch,{configurable:!0,get:function(){return this}})}(t)}};function Mh(e){var t=this.constructor;return this.then(function(i){return t.resolve(e()).then(function(){return i})},function(i){return t.resolve(e()).then(function(){return t.reject(i)})})}function Oh(e){return new this(function(t,i){if(!e||void 0===e.length)return i(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var r=n.length;function o(e,i){if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(t){o(e,t)},function(i){n[e]={status:"rejected",reason:i},0==--r&&t(n)})}n[e]={status:"fulfilled",value:i},0==--r&&t(n)}for(var s=0;s<n.length;s++)o(s,n[s])})}!function(e,t,i){var n=-1!==e.indexOf("Map"),r=-1!==e.indexOf("Weak"),o=n?"set":"add",s=xr[e],a=s&&s.prototype,l=s,c={},u=function(e){var t=$r(a[e]);Ls(a,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(r&&!no(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return r&&!no(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(r&&!no(e))&&t(this,0===e?0:e)}:function(e,i){return t(this,0===e?0:e,i),this})};if(ia(e,!to(s)||!(r||a.forEach&&!Er(function(){(new s).entries().next()}))))l=i.getConstructor(t,e,n,o),ph.enable();else if(ia(e,!0)){var h=new l,d=h[o](r?{}:-0,1)!=h,f=Er(function(){h.has(1)}),p=Cu(function(e){new s(e)}),v=!r&&Er(function(){for(var e=new s,t=5;t--;)e[o](t,t);return!e.has(-0)});p||((l=t(function(e,t){bh(e,a);var i=function(e,t,i){var n,r;return Xc&&to(n=t.constructor)&&n!==i&&no(r=n.prototype)&&r!==i.prototype&&Xc(e,r),e}(new s,e,l);return Kr(t)||gh(t,i[o],{that:i,AS_ENTRIES:n}),i})).prototype=a,a.constructor=l),(f||v)&&(u("delete"),u("has"),n&&u("get")),(v||d)&&u(o),r&&a.clear&&delete a.clear}c[e]=l,ra({global:!0,constructor:!0,forced:l!=s},c),ml(l,e),r||i.setStrong(l,e,n)}("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Lh),hl.Set;var Th=setTimeout;function Dh(e){return Boolean(e&&void 0!==e.length)}function Rh(){}function Ah(e){if(!(this instanceof Ah))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Wh(e,this)}function Ph(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,Ah._immediateFn(function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null!==i){var n;try{n=i(e._value)}catch(e){return void Ih(t.promise,e)}Bh(t.promise,n)}else(1===e._state?Bh:Ih)(t.promise,e._value)})):e._deferreds.push(t)}function Bh(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof Ah)return e._state=3,e._value=t,void Hh(e);if("function"==typeof i)return void Wh((n=i,r=t,function(){n.apply(r,arguments)}),e)}e._state=1,e._value=t,Hh(e)}catch(t){Ih(e,t)}var n,r}function Ih(e,t){e._state=2,e._value=t,Hh(e)}function Hh(e){2===e._state&&0===e._deferreds.length&&Ah._immediateFn(function(){e._handled||Ah._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;t<i;t++)Ph(e,e._deferreds[t]);e._deferreds=null}function jh(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function Wh(e,t){var i=!1;try{e(function(e){i||(i=!0,Bh(t,e))},function(e){i||(i=!0,Ih(t,e))})}catch(e){if(i)return;i=!0,Ih(t,e)}}Ah.prototype.catch=function(e){return this.then(null,e)},Ah.prototype.then=function(e,t){var i=new this.constructor(Rh);return Ph(this,new jh(e,t,i)),i},Ah.prototype.finally=Mh,Ah.all=function(e){return new Ah(function(t,i){if(!Dh(e))return i(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var r=n.length;function o(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){o(e,t)},i)}n[e]=s,0==--r&&t(n)}catch(e){i(e)}}for(var s=0;s<n.length;s++)o(s,n[s])})},Ah.allSettled=Oh,Ah.resolve=function(e){return e&&"object"==typeof e&&e.constructor===Ah?e:new Ah(function(t){t(e)})},Ah.reject=function(e){return new Ah(function(t,i){i(e)})},Ah.race=function(e){return new Ah(function(t,i){if(!Dh(e))return i(new TypeError("Promise.race accepts an array"));for(var n=0,r=e.length;n<r;n++)Ah.resolve(e[n]).then(t,i)})},Ah._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){Th(e,0)},Ah._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var Fh=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof Fh.Promise?Fh.Promise=Ah:(Fh.Promise.prototype.finally||(Fh.Promise.prototype.finally=Mh),Fh.Promise.allSettled||(Fh.Promise.allSettled=Oh)),function(e){function t(e){for(var t=0,i=Math.min(65536,e.length+1),n=new Uint16Array(i),r=[],o=0;;){var s=t<e.length;if(!s||o>=i-1){var a=n.subarray(0,o);if(r.push(String.fromCharCode.apply(null,a)),!s)return r.join("");e=e.subarray(t),t=0,o=0}var l=e[t++];if(128&l){if(192==(224&l)){var c=63&e[t++];n[o++]=(31&l)<<6|c}else if(224==(240&l)){c=63&e[t++];var u=63&e[t++];n[o++]=(31&l)<<12|c<<6|u}else if(240==(248&l)){var h=(7&l)<<18|(c=63&e[t++])<<12|(u=63&e[t++])<<6|63&e[t++];h>65535&&(h-=65536,n[o++]=h>>>10&1023|55296,h=56320|1023&h),n[o++]=h}}else n[o++]=l}}var i="Failed to ",n=function(e,t,n){if(e)throw new Error("".concat(i).concat(t,": the '").concat(n,"' option is unsupported."))},r="function"==typeof Buffer&&Buffer.from,o=r?function(e){return Buffer.from(e)}:function(e){for(var t=0,i=e.length,n=0,r=Math.max(32,i+(i>>>1)+7),o=new Uint8Array(r>>>3<<3);t<i;){var s=e.charCodeAt(t++);if(s>=55296&&s<=56319){if(t<i){var a=e.charCodeAt(t);56320==(64512&a)&&(++t,s=((1023&s)<<10)+(1023&a)+65536)}if(s>=55296&&s<=56319)continue}if(n+4>o.length){r+=8,r=(r*=1+t/e.length*2)>>>3<<3;var l=new Uint8Array(r);l.set(o),o=l}if(4294967168&s){if(4294965248&s)if(4294901760&s){if(4292870144&s)continue;o[n++]=s>>>18&7|240,o[n++]=s>>>12&63|128,o[n++]=s>>>6&63|128}else o[n++]=s>>>12&15|224,o[n++]=s>>>6&63|128;else o[n++]=s>>>6&31|192;o[n++]=63&s|128}else o[n++]=s}return o.slice?o.slice(0,n):o.subarray(0,n)};function s(){this.encoding="utf-8"}s.prototype.encode=function(e,t){return n(t&&t.stream,"encode","stream"),o(e)};var a=!r&&"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL,l=["utf-8","utf8","unicode-1-1-utf-8"],c=t;r?c=function(e,t){return(e instanceof Buffer?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength)).toString(t)}:a&&(c=function(e){try{return function(e){var t;try{var i=new Blob([e],{type:"text/plain;charset=UTF-8"});t=URL.createObjectURL(i);var n=new XMLHttpRequest;return n.open("GET",t,!1),n.send(),n.responseText}finally{t&&URL.revokeObjectURL(t)}}(e)}catch(i){return t(e)}});var u="construct 'TextDecoder'",h="".concat(i," ").concat(u,": the ");function d(e,t){if(n(t&&t.fatal,u,"fatal"),e=e||"utf-8",!(r?Buffer.isEncoding(e):-1!==l.indexOf(e.toLowerCase())))throw new RangeError("".concat(h," encoding label provided ('").concat(e,"') is invalid."));this.encoding=e,this.fatal=!1,this.ignoreBOM=!1}d.prototype.decode=function(e,t){var i;return n(t&&t.stream,"decode","stream"),i=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),c(i,this.encoding)},e.TextEncoder=e.TextEncoder||s,e.TextDecoder=e.TextDecoder||d}("undefined"!=typeof window?window:yr),function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=r(e);if(t){var o=r(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}(this,i)}}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}function c(e,t,i){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=l(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}},c(e,t,i||e)}var u=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return i(t,[{key:"addEventListener",value:function(e,t,i){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:i})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var i=this.listeners[e],n=0,r=i.length;n<r;n++)if(i[n].callback===t)return void i.splice(n,1)}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),i=0,n=t.length;i<n;i++){var r=t[i];try{r.callback.call(this,e)}catch(e){Promise.resolve().then(function(){throw e})}r.options&&r.options.once&&this.removeEventListener(e.type,r.callback)}return!e.defaultPrevented}}}]),t}(),h=function(t){n(l,t);var o=a(l);function l(){var t;return e(this,l),(t=o.call(this)).listeners||u.call(s(t)),Object.defineProperty(s(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(s(t),"onabort",{value:null,writable:!0,configurable:!0}),t}return i(l,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),c(r(l.prototype),"dispatchEvent",this).call(this,e)}}]),l}(u),d=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new h,writable:!0,configurable:!0})}return i(t,[{key:"abort",value:function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="AbortController",h.prototype[Symbol.toStringTag]="AbortSignal"),function(e){(function(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController})(e)&&(e.AbortController=d,e.AbortSignal=h)}("undefined"!=typeof self?self:yr)}();var $h=wr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.locked=new Map,this.addToLocked=function(t,i){var n=e.locked.get(t);void 0===n?void 0===i?e.locked.set(t,[]):e.locked.set(t,[i]):void 0!==i&&(n.unshift(i),e.locked.set(t,n))},this.isLocked=function(t){return e.locked.has(t)},this.lock=function(t){return new Promise(function(i,n){e.isLocked(t)?e.addToLocked(t,i):(e.addToLocked(t),i())})},this.unlock=function(t){var i=e.locked.get(t);if(void 0!==i&&0!==i.length){var n=i.pop();e.locked.set(t,i),void 0!==n&&setTimeout(n,0)}else e.locked.delete(t)}}return e.getInstance=function(){return void 0===e.instance&&(e.instance=new e),e.instance},e}();t.default=function(){return i.getInstance()}});br($h);var Nh=wr(function(e,t){var i=yr&&yr.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(s,a)}l((n=n.apply(e,t||[])).next())})},n=yr&&yr.__generator||function(e,t){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var r="browser-tabs-lock-key";function o(e){return new Promise(function(t){return setTimeout(t,e)})}function s(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<e;n++)i+=t[Math.floor(61*Math.random())];return i}var a=function(){function e(){this.acquiredIatSet=new Set,this.id=Date.now().toString()+s(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),void 0===e.waiters&&(e.waiters=[])}return e.prototype.acquireLock=function(t,a){return void 0===a&&(a=5e3),i(this,void 0,void 0,function(){var i,l,c,u,h,d;return n(this,function(n){switch(n.label){case 0:i=Date.now()+s(4),l=Date.now()+a,c=r+"-"+t,u=window.localStorage,n.label=1;case 1:return Date.now()<l?[4,o(30)]:[3,8];case 2:return n.sent(),null!==u.getItem(c)?[3,5]:(h=this.id+"-"+t+"-"+i,[4,o(Math.floor(25*Math.random()))]);case 3:return n.sent(),u.setItem(c,JSON.stringify({id:this.id,iat:i,timeoutKey:h,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,o(30)];case 4:return n.sent(),null!==(d=u.getItem(c))&&(d=JSON.parse(d)).id===this.id&&d.iat===i?(this.acquiredIatSet.add(i),this.refreshLockWhileAcquired(c,i),[2,!0]):[3,7];case 5:return e.lockCorrector(),[4,this.waitForSomethingToChange(l)];case 6:n.sent(),n.label=7;case 7:return i=Date.now()+s(4),[3,1];case 8:return[2,!1]}})})},e.prototype.refreshLockWhileAcquired=function(e,t){return i(this,void 0,void 0,function(){var r=this;return n(this,function(o){return setTimeout(function(){return i(r,void 0,void 0,function(){var i,r;return n(this,function(n){switch(n.label){case 0:return[4,$h.default().lock(t)];case 1:return n.sent(),this.acquiredIatSet.has(t)?(i=window.localStorage,null===(r=i.getItem(e))?($h.default().unlock(t),[2]):((r=JSON.parse(r)).timeRefreshed=Date.now(),i.setItem(e,JSON.stringify(r)),$h.default().unlock(t),this.refreshLockWhileAcquired(e,t),[2])):($h.default().unlock(t),[2])}})})},1e3),[2]})})},e.prototype.waitForSomethingToChange=function(t){return i(this,void 0,void 0,function(){return n(this,function(i){switch(i.label){case 0:return[4,new Promise(function(i){var n=!1,r=Date.now(),o=!1;function s(){if(o||(window.removeEventListener("storage",s),e.removeFromWaiting(s),clearTimeout(a),o=!0),!n){n=!0;var t=50-(Date.now()-r);t>0?setTimeout(i,t):i()}}window.addEventListener("storage",s),e.addToWaiting(s);var a=setTimeout(s,Math.max(0,t-Date.now()))})];case 1:return i.sent(),[2]}})})},e.addToWaiting=function(t){this.removeFromWaiting(t),void 0!==e.waiters&&e.waiters.push(t)},e.removeFromWaiting=function(t){void 0!==e.waiters&&(e.waiters=e.waiters.filter(function(e){return e!==t}))},e.notifyWaiters=function(){void 0!==e.waiters&&e.waiters.slice().forEach(function(e){return e()})},e.prototype.releaseLock=function(e){return i(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,this.releaseLock__private__(e)];case 1:return[2,t.sent()]}})})},e.prototype.releaseLock__private__=function(t){return i(this,void 0,void 0,function(){var i,o,s;return n(this,function(n){switch(n.label){case 0:return i=window.localStorage,o=r+"-"+t,null===(s=i.getItem(o))?[2]:(s=JSON.parse(s)).id!==this.id?[3,2]:[4,$h.default().lock(s.iat)];case 1:n.sent(),this.acquiredIatSet.delete(s.iat),i.removeItem(o),$h.default().unlock(s.iat),e.notifyWaiters(),n.label=2;case 2:return[2]}})})},e.lockCorrector=function(){for(var t=Date.now()-5e3,i=window.localStorage,n=Object.keys(i),o=!1,s=0;s<n.length;s++){var a=n[s];if(a.includes(r)){var l=i.getItem(a);null!==l&&(void 0===(l=JSON.parse(l)).timeRefreshed&&l.timeAcquired<t||void 0!==l.timeRefreshed&&l.timeRefreshed<t)&&(i.removeItem(a),o=!0)}}o&&e.notifyWaiters()},e.waiters=void 0,e}();t.default=a}),zh=br(Nh),Uh={timeoutInSeconds:60},qh=["login_required","consent_required","interaction_required","account_selection_required","access_denied"],Yh={name:"auth0-spa-js",version:"1.22.6"},Vh=function(){return Date.now()},Kh=function(e){function t(i,n){var r=e.call(this,n)||this;return r.error=i,r.error_description=n,Object.setPrototypeOf(r,t.prototype),r}return dr(t,e),t.fromPayload=function(e){return new t(e.error,e.error_description)},t}(Error),Gh=function(e){function t(i,n,r,o){void 0===o&&(o=null);var s=e.call(this,i,n)||this;return s.state=r,s.appState=o,Object.setPrototypeOf(s,t.prototype),s}return dr(t,e),t}(Kh),Xh=function(e){function t(){var i=e.call(this,"timeout","Timeout")||this;return Object.setPrototypeOf(i,t.prototype),i}return dr(t,e),t}(Kh),Zh=function(e){function t(i){var n=e.call(this)||this;return n.popup=i,Object.setPrototypeOf(n,t.prototype),n}return dr(t,e),t}(Xh),Jh=function(e){function t(i){var n=e.call(this,"cancelled","Popup closed")||this;return n.popup=i,Object.setPrototypeOf(n,t.prototype),n}return dr(t,e),t}(Kh),Qh=function(e){function t(i,n,r){var o=e.call(this,i,n)||this;return o.mfa_token=r,Object.setPrototypeOf(o,t.prototype),o}return dr(t,e),t}(Kh),ed=function(e){function t(i,n){var r=e.call(this,"missing_refresh_token","Missing Refresh Token (audience: '".concat(ud(i,["default"]),"', scope: '").concat(ud(n),"')"))||this;return r.audience=i,r.scope=n,Object.setPrototypeOf(r,t.prototype),r}return dr(t,e),t}(Kh),td=function(e){return new Promise(function(t,i){var n,r=setInterval(function(){e.popup&&e.popup.closed&&(clearInterval(r),clearTimeout(o),window.removeEventListener("message",n,!1),i(new Jh(e.popup)))},1e3),o=setTimeout(function(){clearInterval(r),i(new Zh(e.popup)),window.removeEventListener("message",n,!1)},1e3*(e.timeoutInSeconds||60));n=function(s){if(s.data&&"authorization_response"===s.data.type){if(clearTimeout(o),clearInterval(r),window.removeEventListener("message",n,!1),e.popup.close(),s.data.response.error)return i(Kh.fromPayload(s.data.response));t(s.data.response)}},window.addEventListener("message",n)})},id=function(){return window.crypto||window.msCrypto},nd=function(){var e=id();return e.subtle||e.webkitSubtle},rd=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",t="";return Array.from(id().getRandomValues(new Uint8Array(43))).forEach(function(i){return t+=e[i%66]}),t},od=function(e){return btoa(e)},sd=function(e){return Object.keys(e).filter(function(t){return void 0!==e[t]}).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},ad=function(e){return vr(void 0,void 0,void 0,function(){var t;return _r(this,function(i){switch(i.label){case 0:return t=nd().digest({name:"SHA-256"},(new TextEncoder).encode(e)),window.msCrypto?[2,new Promise(function(e,i){t.oncomplete=function(t){e(t.target.result)},t.onerror=function(e){i(e.error)},t.onabort=function(){i("The digest operation was aborted")}})]:[4,t];case 1:return[2,i.sent()]}})})},ld=function(e){return function(e){return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e.replace(/_/g,"/").replace(/-/g,"+"))},cd=function(e){var t=new Uint8Array(e);return function(e){var t={"+":"-","/":"_","=":""};return e.replace(/[+/=]/g,function(e){return t[e]})}(window.btoa(String.fromCharCode.apply(String,gr([],mr(Array.from(t)),!1))))};function ud(e,t){return void 0===t&&(t=[]),e&&!t.includes(e)?e:""}var hd=function(e,t){return vr(void 0,void 0,void 0,function(){var i,n;return _r(this,function(r){switch(r.label){case 0:return[4,(o=e,s=t,s=s||{},new Promise(function(e,t){var i=new XMLHttpRequest,n=[],r=[],a={},l=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:l,headers:{keys:function(){return n},entries:function(){return r},get:function(e){return a[e.toLowerCase()]},has:function(e){return e.toLowerCase()in a}}}};for(var c in i.open(s.method||"get",o,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,i){n.push(t=t.toLowerCase()),r.push([t,i]),a[t]=a[t]?a[t]+","+i:i}),e(l())},i.onerror=t,i.withCredentials="include"==s.credentials,s.headers)i.setRequestHeader(c,s.headers[c]);i.send(s.body||null)}))];case 1:return i=r.sent(),n={ok:i.ok},[4,i.json()];case 2:return[2,(n.json=r.sent(),n)]}var o,s})})},dd=function(e,t,i){return vr(void 0,void 0,void 0,function(){var n,r;return _r(this,function(o){return n=new AbortController,t.signal=n.signal,[2,Promise.race([hd(e,t),new Promise(function(e,t){r=setTimeout(function(){n.abort(),t(new Error("Timeout when executing 'fetch'"))},i)})]).finally(function(){clearTimeout(r)})]})})},fd=function(e,t,i,n,r,o,s){return vr(void 0,void 0,void 0,function(){return _r(this,function(a){return[2,(l={auth:{audience:t,scope:i},timeout:r,fetchUrl:e,fetchOptions:n,useFormData:s},c=o,new Promise(function(e,t){var i=new MessageChannel;i.port1.onmessage=function(n){n.data.error?t(new Error(n.data.error)):e(n.data),i.port1.close()},c.postMessage(l,[i.port2])}))];var l,c})})},pd=function(e,t,i,n,r,o,s){return void 0===s&&(s=1e4),vr(void 0,void 0,void 0,function(){return _r(this,function(a){return r?[2,fd(e,t,i,n,s,r,o)]:[2,dd(e,n,s)]})})};function vd(e,t,i,n,r,o,s){return vr(this,void 0,void 0,function(){var a,l,c,u,h,d,f,p,v;return _r(this,function(_){switch(_.label){case 0:a=null,c=0,_.label=1;case 1:if(!(c<3))return[3,6];_.label=2;case 2:return _.trys.push([2,4,,5]),[4,pd(e,i,n,r,o,s,t)];case 3:return l=_.sent(),a=null,[3,6];case 4:return u=_.sent(),a=u,[3,5];case 5:return c++,[3,1];case 6:if(a)throw a.message=a.message||"Failed to fetch",a;if(h=l.json,d=h.error,f=h.error_description,p=pr(h,["error","error_description"]),!l.ok){if(v=f||"HTTP error. Unable to fetch ".concat(e),"mfa_required"===d)throw new Qh(d,v,p.mfa_token);throw new Kh(d||"request_error",v)}return[2,p]}})})}function _d(e,t){var i=e.baseUrl,n=e.timeout,r=e.audience,o=e.scope,s=e.auth0Client,a=e.useFormData,l=pr(e,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);return vr(this,void 0,void 0,function(){var e;return _r(this,function(c){switch(c.label){case 0:return e=a?sd(l):JSON.stringify(l),[4,vd("".concat(i,"/oauth/token"),n,r||"default",o,{method:"POST",body:e,headers:{"Content-Type":a?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(s||Yh))}},t,a)];case 1:return[2,c.sent()]}})})}var md=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(e){return Array.from(new Set(e))}(e.join(" ").trim().split(/\s+/)).join(" ")},gd=function(){function e(e,t){void 0===t&&(t="@@auth0spajs@@"),this.prefix=t,this.client_id=e.client_id,this.scope=e.scope,this.audience=e.audience}return e.prototype.toKey=function(){return"".concat(this.prefix,"::").concat(this.client_id,"::").concat(this.audience,"::").concat(this.scope)},e.fromKey=function(t){var i=mr(t.split("::"),4),n=i[0],r=i[1],o=i[2];return new e({client_id:r,scope:i[3],audience:o},n)},e.fromCacheEntry=function(t){return new e({scope:t.scope,audience:t.audience,client_id:t.client_id})},e}(),yd=function(){function e(){}return e.prototype.set=function(e,t){localStorage.setItem(e,JSON.stringify(t))},e.prototype.get=function(e){var t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(e){return}},e.prototype.remove=function(e){localStorage.removeItem(e)},e.prototype.allKeys=function(){return Object.keys(window.localStorage).filter(function(e){return e.startsWith("@@auth0spajs@@")})},e}(),bd=function(){var e;this.enclosedCache=(e={},{set:function(t,i){e[t]=i},get:function(t){var i=e[t];if(i)return i},remove:function(t){delete e[t]},allKeys:function(){return Object.keys(e)}})},wd=function(){function e(e,t,i){this.cache=e,this.keyManifest=t,this.nowProvider=i,this.nowProvider=this.nowProvider||Vh}return e.prototype.get=function(e,t){var i;return void 0===t&&(t=0),vr(this,void 0,void 0,function(){var n,r,o,s,a;return _r(this,function(l){switch(l.label){case 0:return[4,this.cache.get(e.toKey())];case 1:return(n=l.sent())?[3,4]:[4,this.getCacheKeys()];case 2:return(r=l.sent())?(o=this.matchExistingCacheKey(e,r))?[4,this.cache.get(o)]:[3,4]:[2];case 3:n=l.sent(),l.label=4;case 4:return n?[4,this.nowProvider()]:[2];case 5:return s=l.sent(),a=Math.floor(s/1e3),n.expiresAt-t<a?n.body.refresh_token?(n.body={refresh_token:n.body.refresh_token},[4,this.cache.set(e.toKey(),n)]):[3,7]:[3,10];case 6:return l.sent(),[2,n.body];case 7:return[4,this.cache.remove(e.toKey())];case 8:return l.sent(),[4,null===(i=this.keyManifest)||void 0===i?void 0:i.remove(e.toKey())];case 9:return l.sent(),[2];case 10:return[2,n.body]}})})},e.prototype.set=function(e){var t;return vr(this,void 0,void 0,function(){var i,n;return _r(this,function(r){switch(r.label){case 0:return i=new gd({client_id:e.client_id,scope:e.scope,audience:e.audience}),[4,this.wrapCacheEntry(e)];case 1:return n=r.sent(),[4,this.cache.set(i.toKey(),n)];case 2:return r.sent(),[4,null===(t=this.keyManifest)||void 0===t?void 0:t.add(i.toKey())];case 3:return r.sent(),[2]}})})},e.prototype.clear=function(e){var t;return vr(this,void 0,void 0,function(){var i,n=this;return _r(this,function(r){switch(r.label){case 0:return[4,this.getCacheKeys()];case 1:return(i=r.sent())?[4,i.filter(function(t){return!e||t.includes(e)}).reduce(function(e,t){return vr(n,void 0,void 0,function(){return _r(this,function(i){switch(i.label){case 0:return[4,e];case 1:return i.sent(),[4,this.cache.remove(t)];case 2:return i.sent(),[2]}})})},Promise.resolve())]:[2];case 2:return r.sent(),[4,null===(t=this.keyManifest)||void 0===t?void 0:t.clear()];case 3:return r.sent(),[2]}})})},e.prototype.clearSync=function(e){var t=this,i=this.cache.allKeys();i&&i.filter(function(t){return!e||t.includes(e)}).forEach(function(e){t.cache.remove(e)})},e.prototype.wrapCacheEntry=function(e){return vr(this,void 0,void 0,function(){var t,i,n;return _r(this,function(r){switch(r.label){case 0:return[4,this.nowProvider()];case 1:return t=r.sent(),i=Math.floor(t/1e3)+e.expires_in,n=Math.min(i,e.decodedToken.claims.exp),[2,{body:e,expiresAt:n}]}})})},e.prototype.getCacheKeys=function(){var e;return vr(this,void 0,void 0,function(){var t;return _r(this,function(i){switch(i.label){case 0:return this.keyManifest?[4,this.keyManifest.get()]:[3,2];case 1:return t=null===(e=i.sent())||void 0===e?void 0:e.keys,[3,4];case 2:return[4,this.cache.allKeys()];case 3:t=i.sent(),i.label=4;case 4:return[2,t]}})})},e.prototype.matchExistingCacheKey=function(e,t){return t.filter(function(t){var i=gd.fromKey(t),n=new Set(i.scope&&i.scope.split(" ")),r=e.scope.split(" "),o=i.scope&&r.reduce(function(e,t){return e&&n.has(t)},!0);return"@@auth0spajs@@"===i.prefix&&i.client_id===e.client_id&&i.audience===e.audience&&o})[0]},e}(),Cd=function(){function e(e,t){this.storage=e,this.clientId=t,this.storageKey="".concat("a0.spajs.txs",".").concat(this.clientId),this.transaction=this.storage.get(this.storageKey)}return e.prototype.create=function(e){this.transaction=e,this.storage.save(this.storageKey,e,{daysUntilExpire:1})},e.prototype.get=function(){return this.transaction},e.prototype.remove=function(){delete this.transaction,this.storage.remove(this.storageKey)},e}(),Sd=function(e){return"number"==typeof e},kd=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],xd=function(e){if(!e.id_token)throw new Error("ID token is required but missing");var t=function(e){var t=e.split("."),i=mr(t,3),n=i[0],r=i[1],o=i[2];if(3!==t.length||!n||!r||!o)throw new Error("ID token could not be decoded");var s=JSON.parse(ld(r)),a={__raw:e},l={};return Object.keys(s).forEach(function(e){a[e]=s[e],kd.includes(e)||(l[e]=s[e])}),{encoded:{header:n,payload:r,signature:o},header:JSON.parse(ld(n)),claims:a,user:l}}(e.id_token);if(!t.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(t.claims.iss!==e.iss)throw new Error('Issuer (iss) claim mismatch in the ID token; expected "'.concat(e.iss,'", found "').concat(t.claims.iss,'"'));if(!t.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==t.header.alg)throw new Error('Signature algorithm of "'.concat(t.header.alg,'" is not supported. Expected the ID token to be signed with "RS256".'));if(!t.claims.aud||"string"!=typeof t.claims.aud&&!Array.isArray(t.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e.aud))throw new Error('Audience (aud) claim mismatch in the ID token; expected "'.concat(e.aud,'" but was not one of "').concat(t.claims.aud.join(", "),'"'));if(t.claims.aud.length>1){if(!t.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(t.claims.azp!==e.aud)throw new Error('Authorized Party (azp) claim mismatch in the ID token; expected "'.concat(e.aud,'", found "').concat(t.claims.azp,'"'))}}else if(t.claims.aud!==e.aud)throw new Error('Audience (aud) claim mismatch in the ID token; expected "'.concat(e.aud,'" but found "').concat(t.claims.aud,'"'));if(e.nonce){if(!t.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(t.claims.nonce!==e.nonce)throw new Error('Nonce (nonce) claim mismatch in the ID token; expected "'.concat(e.nonce,'", found "').concat(t.claims.nonce,'"'))}if(e.max_age&&!Sd(t.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(!Sd(t.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!Sd(t.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");var i=e.leeway||60,n=new Date(e.now||Date.now()),r=new Date(0),o=new Date(0),s=new Date(0);if(s.setUTCSeconds(parseInt(t.claims.auth_time)+e.max_age+i),r.setUTCSeconds(t.claims.exp+i),o.setUTCSeconds(t.claims.nbf-i),n>r)throw new Error("Expiration Time (exp) claim error in the ID token; current time (".concat(n,") is after expiration time (").concat(r,")"));if(Sd(t.claims.nbf)&&n<o)throw new Error("Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Currrent time (".concat(n,") is before ").concat(o));if(Sd(t.claims.auth_time)&&n>s)throw new Error("Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Currrent time (".concat(n,") is after last auth at ").concat(s));if(e.organizationId){if(!t.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(e.organizationId!==t.claims.org_id)throw new Error('Organization ID (org_id) claim mismatch in the ID token; expected "'.concat(e.organizationId,'", found "').concat(t.claims.org_id,'"'))}return t},Ed=wr(function(e,t){var i=yr&&yr.__assign||function(){return i=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};function n(e,t){if(!t)return"";var i="; "+e;return!0===t?i:i+"="+t}function r(e,t,i){return encodeURIComponent(e).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(t).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(e){if("number"==typeof e.expires){var t=new Date;t.setMilliseconds(t.getMilliseconds()+864e5*e.expires),e.expires=t}return n("Expires",e.expires?e.expires.toUTCString():"")+n("Domain",e.domain)+n("Path",e.path)+n("Secure",e.secure)+n("SameSite",e.sameSite)}(i)}function o(e){for(var t={},i=e?e.split("; "):[],n=/(%[\dA-F]{2})+/gi,r=0;r<i.length;r++){var o=i[r].split("="),s=o.slice(1).join("=");'"'===s.charAt(0)&&(s=s.slice(1,-1));try{t[o[0].replace(n,decodeURIComponent)]=s.replace(n,decodeURIComponent)}catch(e){}}return t}function s(){return o(document.cookie)}function a(e,t,n){document.cookie=r(e,t,i({path:"/"},n))}t.__esModule=!0,t.encode=r,t.parse=o,t.getAll=s,t.get=function(e){return s()[e]},t.set=a,t.remove=function(e,t){a(e,"",i(i({},t),{expires:-1}))}});br(Ed),Ed.encode,Ed.parse,Ed.getAll;var Ld=Ed.get,Md=Ed.set,Od=Ed.remove,Td={get:function(e){var t=Ld(e);if(void 0!==t)return JSON.parse(t)},save:function(e,t,i){var n={};"https:"===window.location.protocol&&(n={secure:!0,sameSite:"none"}),(null==i?void 0:i.daysUntilExpire)&&(n.expires=i.daysUntilExpire),(null==i?void 0:i.cookieDomain)&&(n.domain=i.cookieDomain),Md(e,JSON.stringify(t),n)},remove:function(e,t){var i={};(null==t?void 0:t.cookieDomain)&&(i.domain=t.cookieDomain),Od(e,i)}},Dd={get:function(e){return Td.get(e)||Td.get("".concat("_legacy_").concat(e))},save:function(e,t,i){var n={};"https:"===window.location.protocol&&(n={secure:!0}),(null==i?void 0:i.daysUntilExpire)&&(n.expires=i.daysUntilExpire),Md("".concat("_legacy_").concat(e),JSON.stringify(t),n),Td.save(e,t,i)},remove:function(e,t){var i={};(null==t?void 0:t.cookieDomain)&&(i.domain=t.cookieDomain),Od(e,i),Td.remove(e,t),Td.remove("".concat("_legacy_").concat(e),t)}},Rd={get:function(e){if("undefined"!=typeof sessionStorage){var t=sessionStorage.getItem(e);if(void 0!==t)return JSON.parse(t)}},save:function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},remove:function(e){sessionStorage.removeItem(e)}};var Ad,Pd=function(e){return Ad=Ad||function(e,t,i){var n=void 0===t?null:t,r=function(e,t){var i=atob(e);if(t){for(var n=new Uint8Array(i.length),r=0,o=i.length;r<o;++r)n[r]=i.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}(e,void 0!==i&&i),o=r.indexOf("\n",10)+1,s=r.substring(o)+(n?"//# sourceMappingURL="+n:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIHQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSl9LHQoZSxyKX07ZnVuY3Rpb24gZShlLHIpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByJiZudWxsIT09cil0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHIpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLHIpLGUucHJvdG90eXBlPW51bGw9PT1yP09iamVjdC5jcmVhdGUocik6KG4ucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyBuKX12YXIgcj1mdW5jdGlvbigpe3JldHVybiByPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPTEsbj1hcmd1bWVudHMubGVuZ3RoO3I8bjtyKyspZm9yKHZhciBvIGluIGU9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG8pJiYodFtvXT1lW29dKTtyZXR1cm4gdH0sci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIG4odCxlLHIsbil7cmV0dXJuIG5ldyhyfHwocj1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYyl7ZnVuY3Rpb24gaSh0KXt0cnl7cyhuLm5leHQodCkpfWNhdGNoKHQpe2ModCl9fWZ1bmN0aW9uIGEodCl7dHJ5e3Mobi50aHJvdyh0KSl9Y2F0Y2godCl7Yyh0KX19ZnVuY3Rpb24gcyh0KXt2YXIgZTt0LmRvbmU/byh0LnZhbHVlKTooZT10LnZhbHVlLGUgaW5zdGFuY2VvZiByP2U6bmV3IHIoKGZ1bmN0aW9uKHQpe3QoZSl9KSkpLnRoZW4oaSxhKX1zKChuPW4uYXBwbHkodCxlfHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gbyh0LGUpe3ZhciByLG4sbyxjLGk9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIGM9e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoY1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxjO2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO2k7KXRyeXtpZihyPTEsbiYmKG89MiZjWzBdP24ucmV0dXJuOmNbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixjWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihjPVsyJmNbMF0sby52YWx1ZV0pLGNbMF0pe2Nhc2UgMDpjYXNlIDE6bz1jO2JyZWFrO2Nhc2UgNDpyZXR1cm4gaS5sYWJlbCsrLHt2YWx1ZTpjWzFdLGRvbmU6ITF9O2Nhc2UgNTppLmxhYmVsKyssbj1jWzFdLGM9WzBdO2NvbnRpbnVlO2Nhc2UgNzpjPWkub3BzLnBvcCgpLGkudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1pLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1jWzBdJiYyIT09Y1swXSkpe2k9MDtjb250aW51ZX1pZigzPT09Y1swXSYmKCFvfHxjWzFdPm9bMF0mJmNbMV08b1szXSkpe2kubGFiZWw9Y1sxXTticmVha31pZig2PT09Y1swXSYmaS5sYWJlbDxvWzFdKXtpLmxhYmVsPW9bMV0sbz1jO2JyZWFrfWlmKG8mJmkubGFiZWw8b1syXSl7aS5sYWJlbD1vWzJdLGkub3BzLnB1c2goYyk7YnJlYWt9b1syXSYmaS5vcHMucG9wKCksaS50cnlzLnBvcCgpO2NvbnRpbnVlfWM9ZS5jYWxsKHQsaSl9Y2F0Y2godCl7Yz1bNix0XSxuPTB9ZmluYWxseXtyPW89MH1pZig1JmNbMF0pdGhyb3cgY1sxXTtyZXR1cm57dmFsdWU6Y1swXT9jWzFdOnZvaWQgMCxkb25lOiEwfX0oW2MsYV0pfX19ZnVuY3Rpb24gYyh0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT1bXSksdCYmIWUuaW5jbHVkZXModCk/dDoiIn12YXIgaT1mdW5jdGlvbih0KXtmdW5jdGlvbiByKGUsbil7dmFyIG89dC5jYWxsKHRoaXMsbil8fHRoaXM7cmV0dXJuIG8uZXJyb3I9ZSxvLmVycm9yX2Rlc2NyaXB0aW9uPW4sT2JqZWN0LnNldFByb3RvdHlwZU9mKG8sci5wcm90b3R5cGUpLG99cmV0dXJuIGUocix0KSxyLmZyb21QYXlsb2FkPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcih0LmVycm9yLHQuZXJyb3JfZGVzY3JpcHRpb24pfSxyfShFcnJvcik7IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSxuLG8sYyl7dm9pZCAwPT09YyYmKGM9bnVsbCk7dmFyIGk9dC5jYWxsKHRoaXMsZSxuKXx8dGhpcztyZXR1cm4gaS5zdGF0ZT1vLGkuYXBwU3RhdGU9YyxPYmplY3Quc2V0UHJvdG90eXBlT2YoaSxyLnByb3RvdHlwZSksaX1lKHIsdCl9KGkpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLnBvcHVwPWUsT2JqZWN0LnNldFByb3RvdHlwZU9mKG4sci5wcm90b3R5cGUpLG59ZShyLHQpfShmdW5jdGlvbih0KXtmdW5jdGlvbiByKCl7dmFyIGU9dC5jYWxsKHRoaXMsInRpbWVvdXQiLCJUaW1lb3V0Iil8fHRoaXM7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihlLHIucHJvdG90eXBlKSxlfXJldHVybiBlKHIsdCkscn0oaSkpLGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIoZSl7dmFyIG49dC5jYWxsKHRoaXMsImNhbmNlbGxlZCIsIlBvcHVwIGNsb3NlZCIpfHx0aGlzO3JldHVybiBuLnBvcHVwPWUsT2JqZWN0LnNldFByb3RvdHlwZU9mKG4sci5wcm90b3R5cGUpLG59ZShyLHQpfShpKSxmdW5jdGlvbih0KXtmdW5jdGlvbiByKGUsbixvKXt2YXIgYz10LmNhbGwodGhpcyxlLG4pfHx0aGlzO3JldHVybiBjLm1mYV90b2tlbj1vLE9iamVjdC5zZXRQcm90b3R5cGVPZihjLHIucHJvdG90eXBlKSxjfWUocix0KX0oaSk7dmFyIGE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcihlLG4pe3ZhciBvPXQuY2FsbCh0aGlzLCJtaXNzaW5nX3JlZnJlc2hfdG9rZW4iLCJNaXNzaW5nIFJlZnJlc2ggVG9rZW4gKGF1ZGllbmNlOiAnIi5jb25jYXQoYyhlLFsiZGVmYXVsdCJdKSwiJywgc2NvcGU6ICciKS5jb25jYXQoYyhuKSwiJykiKSl8fHRoaXM7cmV0dXJuIG8uYXVkaWVuY2U9ZSxvLnNjb3BlPW4sT2JqZWN0LnNldFByb3RvdHlwZU9mKG8sci5wcm90b3R5cGUpLG99cmV0dXJuIGUocix0KSxyfShpKSxzPXt9LHU9ZnVuY3Rpb24odCxlKXtyZXR1cm4iIi5jb25jYXQodCwifCIpLmNvbmNhdChlKX07YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGZ1bmN0aW9uKHQpe3ZhciBlPXQuZGF0YSxjPWUudGltZW91dCxpPWUuYXV0aCxmPWUuZmV0Y2hVcmwsbD1lLmZldGNoT3B0aW9ucyxwPWUudXNlRm9ybURhdGEsaD1mdW5jdGlvbih0LGUpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnRbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gdDt2YXIgbixvLGM9ci5jYWxsKHQpLGk9W107dHJ5e2Zvcig7KHZvaWQgMD09PWV8fGUtLSA+MCkmJiEobj1jLm5leHQoKSkuZG9uZTspaS5wdXNoKG4udmFsdWUpfWNhdGNoKHQpe289e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJihyPWMucmV0dXJuKSYmci5jYWxsKGMpfWZpbmFsbHl7aWYobyl0aHJvdyBvLmVycm9yfX1yZXR1cm4gaX0odC5wb3J0cywxKVswXTtyZXR1cm4gbih2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxlLG4seSx2LGIsZCx3LE8sXztyZXR1cm4gbyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOm49KGU9aXx8e30pLmF1ZGllbmNlLHk9ZS5zY29wZSxvLmxhYmVsPTE7Y2FzZSAxOmlmKG8udHJ5cy5wdXNoKFsxLDcsLDhdKSwhKHY9cD8obT1sLmJvZHksaz1uZXcgVVJMU2VhcmNoUGFyYW1zKG0pLFA9e30say5mb3JFYWNoKChmdW5jdGlvbih0LGUpe1BbZV09dH0pKSxQKTpKU09OLnBhcnNlKGwuYm9keSkpLnJlZnJlc2hfdG9rZW4mJiJyZWZyZXNoX3Rva2VuIj09PXYuZ3JhbnRfdHlwZSl7aWYoYj1mdW5jdGlvbih0LGUpe3JldHVybiBzW3UodCxlKV19KG4seSksIWIpdGhyb3cgbmV3IGEobix5KTtsLmJvZHk9cD9uZXcgVVJMU2VhcmNoUGFyYW1zKHIocih7fSx2KSx7cmVmcmVzaF90b2tlbjpifSkpLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkocihyKHt9LHYpLHtyZWZyZXNoX3Rva2VuOmJ9KSl9ZD12b2lkIDAsImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGQ9bmV3IEFib3J0Q29udHJvbGxlcixsLnNpZ25hbD1kLnNpZ25hbCksdz12b2lkIDAsby5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gby50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKGc9YyxuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7cmV0dXJuIHNldFRpbWVvdXQodCxnKX0pKSksZmV0Y2goZixyKHt9LGwpKV0pXTtjYXNlIDM6cmV0dXJuIHc9by5zZW50KCksWzMsNV07Y2FzZSA0OnJldHVybiBPPW8uc2VudCgpLGgucG9zdE1lc3NhZ2Uoe2Vycm9yOk8ubWVzc2FnZX0pLFsyXTtjYXNlIDU6cmV0dXJuIHc/WzQsdy5qc29uKCldOihkJiZkLmFib3J0KCksaC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KSxbMl0pO2Nhc2UgNjpyZXR1cm4odD1vLnNlbnQoKSkucmVmcmVzaF90b2tlbj8oZnVuY3Rpb24odCxlLHIpe3NbdShlLHIpXT10fSh0LnJlZnJlc2hfdG9rZW4sbix5KSxkZWxldGUgdC5yZWZyZXNoX3Rva2VuKTpmdW5jdGlvbih0LGUpe2RlbGV0ZSBzW3UodCxlKV19KG4seSksaC5wb3N0TWVzc2FnZSh7b2s6dy5vayxqc29uOnR9KSxbMyw4XTtjYXNlIDc6cmV0dXJuIF89by5zZW50KCksaC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3JfZGVzY3JpcHRpb246Xy5tZXNzYWdlfX0pLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19dmFyIGcsbSxrLFB9KSl9KSl9KSl9KCk7Cgo=",null,false),new Worker(Ad,e)},Bd={},Id=function(){function e(e,t){this.cache=e,this.clientId=t,this.manifestKey=this.createManifestKeyFrom(this.clientId)}return e.prototype.add=function(e){var t;return vr(this,void 0,void 0,function(){var i,n;return _r(this,function(r){switch(r.label){case 0:return n=Set.bind,[4,this.cache.get(this.manifestKey)];case 1:return(i=new(n.apply(Set,[void 0,(null===(t=r.sent())||void 0===t?void 0:t.keys)||[]]))).add(e),[4,this.cache.set(this.manifestKey,{keys:gr([],mr(i),!1)})];case 2:return r.sent(),[2]}})})},e.prototype.remove=function(e){return vr(this,void 0,void 0,function(){var t,i;return _r(this,function(n){switch(n.label){case 0:return[4,this.cache.get(this.manifestKey)];case 1:return(t=n.sent())?((i=new Set(t.keys)).delete(e),i.size>0?[4,this.cache.set(this.manifestKey,{keys:gr([],mr(i),!1)})]:[3,3]):[3,5];case 2:case 4:return[2,n.sent()];case 3:return[4,this.cache.remove(this.manifestKey)];case 5:return[2]}})})},e.prototype.get=function(){return this.cache.get(this.manifestKey)},e.prototype.clear=function(){return this.cache.remove(this.manifestKey)},e.prototype.createManifestKeyFrom=function(e){return"".concat("@@auth0spajs@@","::").concat(e)},e}(),Hd=new zh,jd={memory:function(){return(new bd).enclosedCache},localstorage:function(){return new yd}},Wd=function(e){return jd[e]},Fd=function(){function e(e){var t,i,n,r,o=this;if(this.options=e,this._releaseLockOnPageHide=function(){return vr(o,void 0,void 0,function(){return _r(this,function(e){switch(e.label){case 0:return[4,Hd.releaseLock("auth0.lock.getTokenSilently")];case 1:return e.sent(),window.removeEventListener("pagehide",this._releaseLockOnPageHide),[2]}})})},"undefined"!=typeof window&&function(){if(!id())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===nd())throw new Error("\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/master/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\n    ")}(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)n=e.cache;else{if(this.cacheLocation=e.cacheLocation||"memory",!Wd(this.cacheLocation))throw new Error('Invalid cache location "'.concat(this.cacheLocation,'"'));n=Wd(this.cacheLocation)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=!1===e.legacySameSiteCookie?Td:Dd,this.orgHintCookieName=(r=this.options.client_id,"auth0.".concat(r,".organization_hint")),this.isAuthenticatedCookieName=function(e){return"auth0.".concat(e,".is.authenticated")}(this.options.client_id),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;var s,a=e.useCookiesForTransactions?this.cookieStorage:Rd;this.scope=this.options.scope,this.transactionManager=new Cd(a,this.options.client_id),this.nowProvider=this.options.nowProvider||Vh,this.cacheManager=new wd(n,n.allKeys?null:new Id(n,this.options.client_id),this.nowProvider),this.domainUrl=(s=this.options.domain,/^https?:\/\//.test(s)?s:"https://".concat(s)),this.tokenIssuer=function(e,t){return e?e.startsWith("https://")?e:"https://".concat(e,"/"):"".concat(t,"/")}(this.options.issuer,this.domainUrl),this.defaultScope=md("openid",void 0!==(null===(i=null===(t=this.options)||void 0===t?void 0:t.advancedOptions)||void 0===i?void 0:i.defaultScope)?this.options.advancedOptions.defaultScope:"openid profile email"),this.options.useRefreshTokens&&(this.scope=md(this.scope,"offline_access")),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===this.cacheLocation&&!/Trident.*rv:11\.0/.test(navigator.userAgent)&&(this.worker=new Pd),this.customOptions=function(e){return e.advancedOptions,e.audience,e.auth0Client,e.authorizeTimeoutInSeconds,e.cacheLocation,e.cache,e.client_id,e.domain,e.issuer,e.leeway,e.max_age,e.nowProvider,e.redirect_uri,e.scope,e.useRefreshTokens,e.useRefreshTokensFallback,e.useCookiesForTransactions,e.useFormData,pr(e,["advancedOptions","audience","auth0Client","authorizeTimeoutInSeconds","cacheLocation","cache","client_id","domain","issuer","leeway","max_age","nowProvider","redirect_uri","scope","useRefreshTokens","useRefreshTokensFallback","useCookiesForTransactions","useFormData"])}(e),this.useRefreshTokensFallback=!1!==this.options.useRefreshTokensFallback}return e.prototype._url=function(e){var t=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||Yh)));return"".concat(this.domainUrl).concat(e,"&auth0Client=").concat(t)},e.prototype._getParams=function(e,t,i,n,r){var o=this.options;o.useRefreshTokens,o.useCookiesForTransactions,o.useFormData,o.auth0Client,o.cacheLocation,o.advancedOptions,o.detailedResponse,o.nowProvider,o.authorizeTimeoutInSeconds,o.legacySameSiteCookie,o.sessionCheckExpiryDays,o.domain,o.leeway,o.httpTimeoutInSeconds;var s=pr(o,["useRefreshTokens","useCookiesForTransactions","useFormData","auth0Client","cacheLocation","advancedOptions","detailedResponse","nowProvider","authorizeTimeoutInSeconds","legacySameSiteCookie","sessionCheckExpiryDays","domain","leeway","httpTimeoutInSeconds"]);return fr(fr(fr({},s),e),{scope:md(this.defaultScope,this.scope,e.scope),response_type:"code",response_mode:"query",state:t,nonce:i,redirect_uri:r||this.options.redirect_uri,code_challenge:n,code_challenge_method:"S256"})},e.prototype._authorizeUrl=function(e){return this._url("/authorize?".concat(sd(e)))},e.prototype._verifyIdToken=function(e,t,i){return vr(this,void 0,void 0,function(){var n;return _r(this,function(r){switch(r.label){case 0:return[4,this.nowProvider()];case 1:return n=r.sent(),[2,xd({iss:this.tokenIssuer,aud:this.options.client_id,id_token:e,nonce:t,organizationId:i,leeway:this.options.leeway,max_age:this._parseNumber(this.options.max_age),now:n})]}})})},e.prototype._parseNumber=function(e){return"string"!=typeof e?e:parseInt(e,10)||void 0},e.prototype._processOrgIdHint=function(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})},e.prototype.buildAuthorizeUrl=function(e){return void 0===e&&(e={}),vr(this,void 0,void 0,function(){var t,i,n,r,o,s,a,l,c,u,h,d;return _r(this,function(f){switch(f.label){case 0:return t=e.redirect_uri,i=e.appState,n=pr(e,["redirect_uri","appState"]),r=od(rd()),o=od(rd()),s=rd(),[4,ad(s)];case 1:return a=f.sent(),l=cd(a),c=e.fragment?"#".concat(e.fragment):"",u=this._getParams(n,r,o,l,t),h=this._authorizeUrl(u),d=e.organization||this.options.organization,this.transactionManager.create(fr({nonce:o,code_verifier:s,appState:i,scope:u.scope,audience:u.audience||"default",redirect_uri:u.redirect_uri,state:r},d&&{organizationId:d})),[2,h+c]}})})},e.prototype.loginWithPopup=function(e,t){return vr(this,void 0,void 0,function(){var i,n,r,o,s,a,l,c,u,h,d,f,p;return _r(this,function(v){switch(v.label){case 0:if(e=e||{},!(t=t||{}).popup&&(t.popup=function(){var e=window.screenX+(window.innerWidth-400)/2,t=window.screenY+(window.innerHeight-600)/2;return window.open("","auth0:authorize:popup","left=".concat(e,",top=").concat(t,",width=").concat(400,",height=").concat(600,",resizable,scrollbars=yes,status=1"))}(),!t.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");return i=pr(e,[]),n=od(rd()),r=od(rd()),o=rd(),[4,ad(o)];case 1:return s=v.sent(),a=cd(s),l=this._getParams(i,n,r,a,this.options.redirect_uri||window.location.origin),c=this._authorizeUrl(fr(fr({},l),{response_mode:"web_message"})),t.popup.location.href=c,[4,td(fr(fr({},t),{timeoutInSeconds:t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}))];case 2:if(u=v.sent(),n!==u.state)throw new Error("Invalid state");return[4,_d({audience:l.audience,scope:l.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:o,code:u.code,grant_type:"authorization_code",redirect_uri:l.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},this.worker)];case 3:return h=v.sent(),d=e.organization||this.options.organization,[4,this._verifyIdToken(h.id_token,r,d)];case 4:return f=v.sent(),p=fr(fr({},h),{decodedToken:f,scope:l.scope,audience:l.audience||"default",client_id:this.options.client_id}),[4,this.cacheManager.set(p)];case 5:return v.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgIdHint(f.claims.org_id),[2]}})})},e.prototype.getUser=function(e){return void 0===e&&(e={}),vr(this,void 0,void 0,function(){var t,i,n;return _r(this,function(r){switch(r.label){case 0:return t=e.audience||this.options.audience||"default",i=md(this.defaultScope,this.scope,e.scope),[4,this.cacheManager.get(new gd({client_id:this.options.client_id,audience:t,scope:i}))];case 1:return[2,(n=r.sent())&&n.decodedToken&&n.decodedToken.user]}})})},e.prototype.getIdTokenClaims=function(e){return void 0===e&&(e={}),vr(this,void 0,void 0,function(){var t,i,n;return _r(this,function(r){switch(r.label){case 0:return t=e.audience||this.options.audience||"default",i=md(this.defaultScope,this.scope,e.scope),[4,this.cacheManager.get(new gd({client_id:this.options.client_id,audience:t,scope:i}))];case 1:return[2,(n=r.sent())&&n.decodedToken&&n.decodedToken.claims]}})})},e.prototype.loginWithRedirect=function(e){return void 0===e&&(e={}),vr(this,void 0,void 0,function(){var t,i,n;return _r(this,function(r){switch(r.label){case 0:return t=e.redirectMethod,i=pr(e,["redirectMethod"]),[4,this.buildAuthorizeUrl(i)];case 1:return n=r.sent(),window.location[t||"assign"](n),[2]}})})},e.prototype.handleRedirectCallback=function(e){return void 0===e&&(e=window.location.href),vr(this,void 0,void 0,function(){var t,i,n,r,o,s,a,l,c,u;return _r(this,function(h){switch(h.label){case 0:if(0===(t=e.split("?").slice(1)).length)throw new Error("There are no query params available for parsing.");if(i=function(e){e.indexOf("#")>-1&&(e=e.substr(0,e.indexOf("#")));var t=e.split("&"),i={};return t.forEach(function(e){var t=mr(e.split("="),2),n=t[0],r=t[1];i[n]=decodeURIComponent(r)}),i.expires_in&&(i.expires_in=parseInt(i.expires_in)),i}(t.join("")),n=i.state,r=i.code,o=i.error,s=i.error_description,!(a=this.transactionManager.get()))throw new Error("Invalid state");if(this.transactionManager.remove(),o)throw new Gh(o,s,n,a.appState);if(!a.code_verifier||a.state&&a.state!==n)throw new Error("Invalid state");return l={audience:a.audience,scope:a.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:a.code_verifier,grant_type:"authorization_code",code:r,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},void 0!==a.redirect_uri&&(l.redirect_uri=a.redirect_uri),[4,_d(l,this.worker)];case 1:return c=h.sent(),[4,this._verifyIdToken(c.id_token,a.nonce,a.organizationId)];case 2:return u=h.sent(),[4,this.cacheManager.set(fr(fr(fr(fr({},c),{decodedToken:u,audience:a.audience,scope:a.scope}),c.scope?{oauthTokenScope:c.scope}:null),{client_id:this.options.client_id}))];case 3:return h.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgIdHint(u.claims.org_id),[2,{appState:a.appState}]}})})},e.prototype.checkSession=function(e){return vr(this,void 0,void 0,function(){var t;return _r(this,function(i){switch(i.label){case 0:if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return[2];this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.getTokenSilently(e)];case 2:return i.sent(),[3,4];case 3:if(t=i.sent(),!qh.includes(t.error))throw t;return[3,4];case 4:return[2]}})})},e.prototype.getTokenSilently=function(e){return void 0===e&&(e={}),vr(this,void 0,void 0,function(){var t,i,n,r,o=this;return _r(this,function(s){switch(s.label){case 0:return t=fr(fr({audience:this.options.audience,ignoreCache:!1},e),{scope:md(this.defaultScope,this.scope,e.scope)}),i=t.ignoreCache,n=pr(t,["ignoreCache"]),[4,(a=function(){return o._getTokenSilently(fr({ignoreCache:i},n))},l="".concat(this.options.client_id,"::").concat(n.audience,"::").concat(n.scope),c=Bd[l],c||(c=a().finally(function(){delete Bd[l],c=null}),Bd[l]=c),c)];case 1:return r=s.sent(),[2,e.detailedResponse?r:r.access_token]}var a,l,c})})},e.prototype._getTokenSilently=function(e){return void 0===e&&(e={}),vr(this,void 0,void 0,function(){var t,i,n,r,o,s,a,l,c;return _r(this,function(u){switch(u.label){case 0:return t=e.ignoreCache,i=pr(e,["ignoreCache"]),t?[3,2]:[4,this._getEntryFromCache({scope:i.scope,audience:i.audience||"default",client_id:this.options.client_id})];case 1:if(n=u.sent())return[2,n];u.label=2;case 2:return[4,(h=function(){return Hd.acquireLock("auth0.lock.getTokenSilently",5e3)},d=10,void 0===d&&(d=3),vr(void 0,void 0,void 0,function(){var e;return _r(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<d?[4,h()]:[3,4];case 2:if(t.sent())return[2,!0];t.label=3;case 3:return e++,[3,1];case 4:return[2,!1]}})}))];case 3:if(!u.sent())return[3,15];u.label=4;case 4:return u.trys.push([4,,12,14]),window.addEventListener("pagehide",this._releaseLockOnPageHide),t?[3,6]:[4,this._getEntryFromCache({scope:i.scope,audience:i.audience||"default",client_id:this.options.client_id})];case 5:if(n=u.sent())return[2,n];u.label=6;case 6:return this.options.useRefreshTokens?[4,this._getTokenUsingRefreshToken(i)]:[3,8];case 7:return o=u.sent(),[3,10];case 8:return[4,this._getTokenFromIFrame(i)];case 9:o=u.sent(),u.label=10;case 10:return r=o,[4,this.cacheManager.set(fr({client_id:this.options.client_id},r))];case 11:return u.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),s=r.id_token,a=r.access_token,l=r.oauthTokenScope,c=r.expires_in,[2,fr(fr({id_token:s,access_token:a},l?{scope:l}:null),{expires_in:c})];case 12:return[4,Hd.releaseLock("auth0.lock.getTokenSilently")];case 13:return u.sent(),window.removeEventListener("pagehide",this._releaseLockOnPageHide),[7];case 14:return[3,16];case 15:throw new Xh;case 16:return[2]}var h,d})})},e.prototype.getTokenWithPopup=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),vr(this,void 0,void 0,function(){return _r(this,function(i){switch(i.label){case 0:return e.audience=e.audience||this.options.audience,e.scope=md(this.defaultScope,this.scope,e.scope),t=fr(fr({},Uh),t),[4,this.loginWithPopup(e,t)];case 1:return i.sent(),[4,this.cacheManager.get(new gd({scope:e.scope,audience:e.audience||"default",client_id:this.options.client_id}))];case 2:return[2,i.sent().access_token]}})})},e.prototype.isAuthenticated=function(){return vr(this,void 0,void 0,function(){return _r(this,function(e){switch(e.label){case 0:return[4,this.getUser()];case 1:return[2,!!e.sent()]}})})},e.prototype.buildLogoutUrl=function(e){void 0===e&&(e={}),null!==e.client_id?e.client_id=e.client_id||this.options.client_id:delete e.client_id;var t=e.federated,i=pr(e,["federated"]),n=t?"&federated":"";return this._url("/v2/logout?".concat(sd(i)))+n},e.prototype.logout=function(e){var t=this;void 0===e&&(e={});var i=e.localOnly,n=pr(e,["localOnly"]);if(i&&n.federated)throw new Error("It is invalid to set both the `federated` and `localOnly` options to `true`");var r=function(){if(t.cookieStorage.remove(t.orgHintCookieName,{cookieDomain:t.options.cookieDomain}),t.cookieStorage.remove(t.isAuthenticatedCookieName,{cookieDomain:t.options.cookieDomain}),!i){var e=t.buildLogoutUrl(n);window.location.assign(e)}};if(this.options.cache)return this.cacheManager.clear().then(function(){return r()});this.cacheManager.clearSync(),r()},e.prototype._getTokenFromIFrame=function(e){return vr(this,void 0,void 0,function(){var t,i,n,r,o,s,a,l,c,u,h,d,f,p,v,_,m;return _r(this,function(g){switch(g.label){case 0:return t=od(rd()),i=od(rd()),n=rd(),[4,ad(n)];case 1:r=g.sent(),o=cd(r),s=pr(e,["detailedResponse"]),a=this._getParams(s,t,i,o,e.redirect_uri||this.options.redirect_uri||window.location.origin),(l=this.cookieStorage.get(this.orgHintCookieName))&&!a.organization&&(a.organization=l),c=this._authorizeUrl(fr(fr({},a),{prompt:"none",response_mode:"web_message"})),g.label=2;case 2:if(g.trys.push([2,6,,7]),window.crossOriginIsolated)throw new Kh("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");return u=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,[4,(y=c,b=this.domainUrl,w=u,void 0===w&&(w=60),new Promise(function(e,t){var i=window.document.createElement("iframe");i.setAttribute("width","0"),i.setAttribute("height","0"),i.style.display="none";var n,r=function(){window.document.body.contains(i)&&(window.document.body.removeChild(i),window.removeEventListener("message",n,!1))},o=setTimeout(function(){t(new Xh),r()},1e3*w);n=function(i){if(i.origin==b&&i.data&&"authorization_response"===i.data.type){var s=i.source;s&&s.close(),i.data.response.error?t(Kh.fromPayload(i.data.response)):e(i.data.response),clearTimeout(o),window.removeEventListener("message",n,!1),setTimeout(r,2e3)}},window.addEventListener("message",n,!1),window.document.body.appendChild(i),i.setAttribute("src",y)}))];case 3:if(h=g.sent(),t!==h.state)throw new Error("Invalid state");return d=e.scope,f=e.audience,p=pr(e,["scope","audience","redirect_uri","ignoreCache","timeoutInSeconds","detailedResponse"]),[4,_d(fr(fr(fr({},this.customOptions),p),{scope:d,audience:f,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:n,code:h.code,grant_type:"authorization_code",redirect_uri:a.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:p.timeout||this.httpTimeoutMs}),this.worker)];case 4:return v=g.sent(),[4,this._verifyIdToken(v.id_token,i)];case 5:return _=g.sent(),this._processOrgIdHint(_.claims.org_id),[2,fr(fr({},v),{decodedToken:_,scope:a.scope,oauthTokenScope:v.scope,audience:a.audience||"default"})];case 6:throw"login_required"===(m=g.sent()).error&&this.logout({localOnly:!0}),m;case 7:return[2]}var y,b,w})})},e.prototype._getTokenUsingRefreshToken=function(e){return vr(this,void 0,void 0,function(){var t,i,n,r,o,s,a,l,c;return _r(this,function(u){switch(u.label){case 0:return e.scope=md(this.defaultScope,this.options.scope,e.scope),[4,this.cacheManager.get(new gd({scope:e.scope,audience:e.audience||"default",client_id:this.options.client_id}))];case 1:return(t=u.sent())&&t.refresh_token||this.worker?[3,4]:this.useRefreshTokensFallback?[4,this._getTokenFromIFrame(e)]:[3,3];case 2:return[2,u.sent()];case 3:throw new ed(e.audience||"default",e.scope);case 4:i=e.redirect_uri||this.options.redirect_uri||window.location.origin,r=e.scope,o=e.audience,s=pr(e,["scope","audience","ignoreCache","timeoutInSeconds","detailedResponse"]),a="number"==typeof e.timeoutInSeconds?1e3*e.timeoutInSeconds:null,u.label=5;case 5:return u.trys.push([5,7,,10]),[4,_d(fr(fr(fr(fr(fr({},this.customOptions),s),{audience:o,scope:r,baseUrl:this.domainUrl,client_id:this.options.client_id,grant_type:"refresh_token",refresh_token:t&&t.refresh_token,redirect_uri:i}),a&&{timeout:a}),{auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs}),this.worker)];case 6:return n=u.sent(),[3,10];case 7:return((l=u.sent()).message.indexOf("Missing Refresh Token")>-1||l.message&&l.message.indexOf("invalid refresh token")>-1)&&this.useRefreshTokensFallback?[4,this._getTokenFromIFrame(e)]:[3,9];case 8:return[2,u.sent()];case 9:throw l;case 10:return[4,this._verifyIdToken(n.id_token)];case 11:return c=u.sent(),[2,fr(fr({},n),{decodedToken:c,scope:e.scope,oauthTokenScope:n.scope,audience:e.audience||"default"})]}})})},e.prototype._getEntryFromCache=function(e){var t=e.scope,i=e.audience,n=e.client_id;return vr(this,void 0,void 0,function(){var e,r,o,s,a;return _r(this,function(l){switch(l.label){case 0:return[4,this.cacheManager.get(new gd({scope:t,audience:i,client_id:n}),60)];case 1:return(e=l.sent())&&e.access_token?(r=e.id_token,o=e.access_token,s=e.oauthTokenScope,a=e.expires_in,[2,fr(fr({id_token:r,access_token:o},s?{scope:s}:null),{expires_in:a})]):[2]}})})},e}();const $d=Se(!0),Nd=Se(!1),zd=Se(""),Ud=Se({}),qd=Se(null),Yd={};function Vd(e){let t,i=null;U(async()=>{try{i=await function(e){return vr(this,void 0,void 0,function(){var t;return _r(this,function(i){switch(i.label){case 0:return[4,(t=new Fd(e)).checkSession()];case 1:return i.sent(),[2,t]}})})}({domain:e.domain,client_id:e.client_id,audience:e.audience,cacheLocation:"localstorage",useRefreshTokens:!0});const n=new URLSearchParams(window.location.search);if(n.has("error")&&qd.set(new Error(n.get("error_description"))),n.has("code"))try{await i.handleRedirectCallback(),window.history.replaceState({},document.title,window.location.pathname),qd.set(null)}catch(e){console.error("Error handling redirect callback:",e),qd.set(e)}const r=await i.isAuthenticated();if(Nd.set(r),r){Ud.set(await i.getUser());try{const n=await i.getTokenSilently({audience:e.audience});zd.set(n),t=setInterval(async()=>{try{const t=await i.getTokenSilently({audience:e.audience});zd.set(t),console.log("Token refreshed successfully")}catch(e){console.error("Token refresh failed:",e),"login_required"!==e.error&&"consent_required"!==e.error||(Nd.set(!1),zd.set(""),Ud.set({}),qd.set(e),clearInterval(t))}},18e5)}catch(e){console.error("Failed to get initial token:",e),"login_required"===e.error&&(Nd.set(!1),qd.set(e))}}}catch(e){console.error("Failed to initialize Auth0:",e),qd.set(e)}return $d.set(!1),()=>{t&&clearInterval(t)}});const n={isLoading:$d,isAuthenticated:Nd,authToken:zd,authError:qd,login:async e=>{i?await i.loginWithRedirect({redirect_uri:e||window.location.origin+"/play"}):console.error("Auth0 client not initialized")},logout:async()=>{i?(t&&clearInterval(t),zd.set(""),Nd.set(!1),Ud.set({}),qd.set(null),i.logout({returnTo:window.location.origin+"/play"})):console.error("Auth0 client not initialized")},userInfo:Ud,checkSession:async()=>{if(!i)return!1;try{const t=await i.getTokenSilently({audience:e.audience});return zd.set(t),Nd.set(!0),!0}catch(e){return console.error("Session check failed:",e),Nd.set(!1),zd.set(""),!1}}};var r,o;return r=Yd,o=n,z().$$.context.set(r,o),n}function Kd(){return e=Yd,z().$$.context.get(e);var e}var Gd,Xd={exports:{}},Zd=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}},Jd=Zd,Qd=Object.prototype.toString,ef=(Gd=Object.create(null),function(e){var t=Qd.call(e);return Gd[t]||(Gd[t]=t.slice(8,-1).toLowerCase())});function tf(e){return e=e.toLowerCase(),function(t){return ef(t)===e}}function nf(e){return Array.isArray(e)}function rf(e){return void 0===e}var of=tf("ArrayBuffer");function sf(e){return null!==e&&"object"==typeof e}function af(e){if("object"!==ef(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var lf=tf("Date"),cf=tf("File"),uf=tf("Blob"),hf=tf("FileList");function df(e){return"[object Function]"===Qd.call(e)}var ff=tf("URLSearchParams");function pf(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),nf(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var vf,_f=(vf="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return vf&&e instanceof vf}),mf={isArray:nf,isArrayBuffer:of,isBuffer:function(e){return null!==e&&!rf(e)&&null!==e.constructor&&!rf(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||Qd.call(e)===t||df(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&of(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:sf,isPlainObject:af,isUndefined:rf,isDate:lf,isFile:cf,isBlob:uf,isFunction:df,isStream:function(e){return sf(e)&&df(e.pipe)},isURLSearchParams:ff,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:pf,merge:function e(){var t={};function i(i,n){af(t[n])&&af(i)?t[n]=e(t[n],i):af(i)?t[n]=e({},i):nf(i)?t[n]=i.slice():t[n]=i}for(var n=0,r=arguments.length;n<r;n++)pf(arguments[n],i);return t},extend:function(e,t,i){return pf(t,function(t,n){e[n]=i&&"function"==typeof t?Jd(t,i):t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,i,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,i&&Object.assign(e.prototype,i)},toFlatObject:function(e,t,i){var n,r,o,s={};t=t||{};do{for(r=(n=Object.getOwnPropertyNames(e)).length;r-- >0;)s[o=n[r]]||(t[o]=e[o],s[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:ef,kindOfTest:tf,endsWith:function(e,t,i){e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;var n=e.indexOf(t,i);return-1!==n&&n===i},toArray:function(e){if(!e)return null;var t=e.length;if(rf(t))return null;for(var i=new Array(t);t-- >0;)i[t]=e[t];return i},isTypedArray:_f,isFileList:hf},gf=mf;function yf(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var bf=function(e,t,i){if(!t)return e;var n;if(i)n=i(t);else if(gf.isURLSearchParams(t))n=t.toString();else{var r=[];gf.forEach(t,function(e,t){null!=e&&(gf.isArray(e)?t+="[]":e=[e],gf.forEach(e,function(e){gf.isDate(e)?e=e.toISOString():gf.isObject(e)&&(e=JSON.stringify(e)),r.push(yf(t)+"="+yf(e))}))}),n=r.join("&")}if(n){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},wf=mf;function Cf(){this.handlers=[]}Cf.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},Cf.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Cf.prototype.forEach=function(e){wf.forEach(this.handlers,function(t){null!==t&&e(t)})};var Sf=Cf,kf=mf,xf=mf;function Ef(e,t,i,n,r){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r)}xf.inherits(Ef,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Lf=Ef.prototype,Mf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){Mf[e]={value:e}}),Object.defineProperties(Ef,Mf),Object.defineProperty(Lf,"isAxiosError",{value:!0}),Ef.from=function(e,t,i,n,r,o){var s=Object.create(Lf);return xf.toFlatObject(e,s,function(e){return e!==Error.prototype}),Ef.call(s,e.message,t,i,n,r),s.name=e.name,o&&Object.assign(s,o),s};var Of=Ef,Tf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Df=mf;var Rf=function(e,t){t=t||new FormData;var i=[];function n(e){return null===e?"":Df.isDate(e)?e.toISOString():Df.isArrayBuffer(e)||Df.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(r,o){if(Df.isPlainObject(r)||Df.isArray(r)){if(-1!==i.indexOf(r))throw Error("Circular reference detected in "+o);i.push(r),Df.forEach(r,function(i,r){if(!Df.isUndefined(i)){var s,a=o?o+"."+r:r;if(i&&!o&&"object"==typeof i)if(Df.endsWith(r,"{}"))i=JSON.stringify(i);else if(Df.endsWith(r,"[]")&&(s=Df.toArray(i)))return void s.forEach(function(e){!Df.isUndefined(e)&&t.append(a,n(e))});e(i,a)}}),i.pop()}else t.append(o,n(r))}(e),t},Af=Of,Pf=mf,Bf=Pf.isStandardBrowserEnv()?{write:function(e,t,i,n,r,o){var s=[];s.push(e+"="+encodeURIComponent(t)),Pf.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),Pf.isString(n)&&s.push("path="+n),Pf.isString(r)&&s.push("domain="+r),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},If=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Hf=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},jf=function(e,t){return e&&!If(t)?Hf(e,t):t},Wf=mf,Ff=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],$f=mf,Nf=$f.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=n(window.location.href),function(t){var i=$f.isString(t)?n(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0},zf=Of;function Uf(e){zf.call(this,null==e?"canceled":e,zf.ERR_CANCELED),this.name="CanceledError"}mf.inherits(Uf,zf,{__CANCEL__:!0});var qf=Uf,Yf=mf,Vf=function(e,t,i){var n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(new Af("Request failed with status code "+i.status,[Af.ERR_BAD_REQUEST,Af.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)},Kf=Bf,Gf=bf,Xf=jf,Zf=function(e){var t,i,n,r={};return e?(Wf.forEach(e.split("\n"),function(e){if(n=e.indexOf(":"),t=Wf.trim(e.substr(0,n)).toLowerCase(),i=Wf.trim(e.substr(n+1)),t){if(r[t]&&Ff.indexOf(t)>=0)return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([i]):r[t]?r[t]+", "+i:i}}),r):r},Jf=Nf,Qf=Tf,ep=Of,tp=qf,ip=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""},np=function(e){return new Promise(function(t,i){var n,r=e.data,o=e.headers,s=e.responseType;function a(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}Yf.isFormData(r)&&Yf.isStandardBrowserEnv()&&delete o["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(c+":"+u)}var h=Xf(e.baseURL,e.url);function d(){if(l){var n="getAllResponseHeaders"in l?Zf(l.getAllResponseHeaders()):null,r={data:s&&"text"!==s&&"json"!==s?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:n,config:e,request:l};Vf(function(e){t(e),a()},function(e){i(e),a()},r),l=null}}if(l.open(e.method.toUpperCase(),Gf(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(d)},l.onabort=function(){l&&(i(new ep("Request aborted",ep.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new ep("Network Error",ep.ERR_NETWORK,e,l,l)),l=null},l.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||Qf;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new ep(t,n.clarifyTimeoutError?ep.ETIMEDOUT:ep.ECONNABORTED,e,l)),l=null},Yf.isStandardBrowserEnv()){var f=(e.withCredentials||Jf(h))&&e.xsrfCookieName?Kf.read(e.xsrfCookieName):void 0;f&&(o[e.xsrfHeaderName]=f)}"setRequestHeader"in l&&Yf.forEach(o,function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete o[t]:l.setRequestHeader(t,e)}),Yf.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),s&&"json"!==s&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(n=function(e){l&&(i(!e||e&&e.type?new tp:e),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n))),r||(r=null);var p=ip(h);p&&-1===["http","https","file"].indexOf(p)?i(new ep("Unsupported protocol "+p+":",ep.ERR_BAD_REQUEST,e)):l.send(r)})},rp=mf,op=function(e,t){kf.forEach(e,function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])})},sp=Of,ap=Rf,lp={"Content-Type":"application/x-www-form-urlencoded"};function cp(e,t){!rp.isUndefined(e)&&rp.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var up,hp={transitional:Tf,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(up=np),up),transformRequest:[function(e,t){if(op(t,"Accept"),op(t,"Content-Type"),rp.isFormData(e)||rp.isArrayBuffer(e)||rp.isBuffer(e)||rp.isStream(e)||rp.isFile(e)||rp.isBlob(e))return e;if(rp.isArrayBufferView(e))return e.buffer;if(rp.isURLSearchParams(e))return cp(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var i,n=rp.isObject(e),r=t&&t["Content-Type"];if((i=rp.isFileList(e))||n&&"multipart/form-data"===r){var o=this.env&&this.env.FormData;return ap(i?{"files[]":e}:e,o&&new o)}return n||"application/json"===r?(cp(t,"application/json"),function(e,t,i){if(rp.isString(e))try{return(t||JSON.parse)(e),rp.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||hp.transitional,i=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,r=!i&&"json"===this.responseType;if(r||n&&rp.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw sp.from(e,sp.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};rp.forEach(["delete","get","head"],function(e){hp.headers[e]={}}),rp.forEach(["post","put","patch"],function(e){hp.headers[e]=rp.merge(lp)});var dp=hp,fp=mf,pp=dp,vp=function(e){return!(!e||!e.__CANCEL__)},_p=mf,mp=function(e,t,i){var n=this||pp;return fp.forEach(i,function(i){e=i.call(n,e,t)}),e},gp=vp,yp=dp,bp=qf;function wp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new bp}var Cp=mf,Sp=function(e,t){t=t||{};var i={};function n(e,t){return Cp.isPlainObject(e)&&Cp.isPlainObject(t)?Cp.merge(e,t):Cp.isPlainObject(t)?Cp.merge({},t):Cp.isArray(t)?t.slice():t}function r(i){return Cp.isUndefined(t[i])?Cp.isUndefined(e[i])?void 0:n(void 0,e[i]):n(e[i],t[i])}function o(e){if(!Cp.isUndefined(t[e]))return n(void 0,t[e])}function s(i){return Cp.isUndefined(t[i])?Cp.isUndefined(e[i])?void 0:n(void 0,e[i]):n(void 0,t[i])}function a(i){return i in t?n(e[i],t[i]):i in e?n(void 0,e[i]):void 0}var l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a};return Cp.forEach(Object.keys(e).concat(Object.keys(t)),function(e){var t=l[e]||r,n=t(e);Cp.isUndefined(n)&&t!==a||(i[e]=n)}),i},kp="0.27.2",xp=kp,Ep=Of,Lp={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Lp[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var Mp={};Lp.transitional=function(e,t,i){function n(e,t){return"[Axios v"+xp+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return function(i,r,o){if(!1===e)throw new Ep(n(r," has been removed"+(t?" in "+t:"")),Ep.ERR_DEPRECATED);return t&&!Mp[r]&&(Mp[r]=!0,console.warn(n(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,r,o)}};var Op={assertOptions:function(e,t,i){if("object"!=typeof e)throw new Ep("options must be an object",Ep.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),r=n.length;r-- >0;){var o=n[r],s=t[o];if(s){var a=e[o],l=void 0===a||s(a,o,e);if(!0!==l)throw new Ep("option "+o+" must be "+l,Ep.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new Ep("Unknown option "+o,Ep.ERR_BAD_OPTION)}},validators:Lp},Tp=mf,Dp=bf,Rp=Sf,Ap=function(e){return wp(e),e.headers=e.headers||{},e.data=mp.call(e,e.data,e.headers,e.transformRequest),e.headers=_p.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),_p.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||yp.adapter)(e).then(function(t){return wp(e),t.data=mp.call(e,t.data,t.headers,e.transformResponse),t},function(t){return gp(t)||(wp(e),t&&t.response&&(t.response.data=mp.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})},Pp=Sp,Bp=jf,Ip=Op,Hp=Ip.validators;function jp(e){this.defaults=e,this.interceptors={request:new Rp,response:new Rp}}jp.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=Pp(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;void 0!==i&&Ip.assertOptions(i,{silentJSONParsing:Hp.transitional(Hp.boolean),forcedJSONParsing:Hp.transitional(Hp.boolean),clarifyTimeoutError:Hp.transitional(Hp.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,n.unshift(e.fulfilled,e.rejected))});var o,s=[];if(this.interceptors.response.forEach(function(e){s.push(e.fulfilled,e.rejected)}),!r){var a=[Ap,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(t);a.length;)o=o.then(a.shift(),a.shift());return o}for(var l=t;n.length;){var c=n.shift(),u=n.shift();try{l=c(l)}catch(e){u(e);break}}try{o=Ap(l)}catch(e){return Promise.reject(e)}for(;s.length;)o=o.then(s.shift(),s.shift());return o},jp.prototype.getUri=function(e){e=Pp(this.defaults,e);var t=Bp(e.baseURL,e.url);return Dp(t,e.params,e.paramsSerializer)},Tp.forEach(["delete","get","head","options"],function(e){jp.prototype[e]=function(t,i){return this.request(Pp(i||{},{method:e,url:t,data:(i||{}).data}))}}),Tp.forEach(["post","put","patch"],function(e){function t(t){return function(i,n,r){return this.request(Pp(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}jp.prototype[e]=t(),jp.prototype[e+"Form"]=t(!0)});var Wp=jp,Fp=qf;function $p(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var i=this;this.promise.then(function(e){if(i._listeners){var t,n=i._listeners.length;for(t=0;t<n;t++)i._listeners[t](e);i._listeners=null}}),this.promise.then=function(e){var t,n=new Promise(function(e){i.subscribe(e),t=e}).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e(function(e){i.reason||(i.reason=new Fp(e),t(i.reason))})}$p.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},$p.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},$p.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},$p.source=function(){var e,t=new $p(function(t){e=t});return{token:t,cancel:e}};var Np=$p,zp=mf,Up=mf,qp=Zd,Yp=Wp,Vp=Sp;var Kp=function e(t){var i=new Yp(t),n=qp(Yp.prototype.request,i);return Up.extend(n,Yp.prototype,i),Up.extend(n,i),n.create=function(i){return e(Vp(t,i))},n}(dp);Kp.Axios=Yp,Kp.CanceledError=qf,Kp.CancelToken=Np,Kp.isCancel=vp,Kp.VERSION=kp,Kp.toFormData=Rf,Kp.AxiosError=Of,Kp.Cancel=Kp.CanceledError,Kp.all=function(e){return Promise.all(e)},Kp.spread=function(e){return function(t){return e.apply(null,t)}},Kp.isAxiosError=function(e){return zp.isObject(e)&&!0===e.isAxiosError},Xd.exports=Kp,Xd.exports.default=Kp;var Gp=Xd.exports;const Xp="undefined"!=typeof window?window.location.origin:"http://localhost:8010",Zp="undefined"!=typeof window?`${"https:"===window.location.protocol?"wss":"ws"}://${window.location.host}`:"ws://localhost:8010",Jp=`${Xp}/api`,Qp=`${Zp}/ws`;function ev(e,t,i){const n=e.slice();return n[23]=t[i],n}function tv(e){let t,i,n,r,o=e[2],s=[];for(let t=0;t<o.length;t+=1)s[t]=iv(ev(e,o,t));const a=e=>ue(s[e],1,1,()=>{s[e]=null});return{c(){t=E("p"),t.textContent="Select a template which fits you most, you can change starting\n        attributes as well",i=T(),n=E("div");for(let e=0;e<s.length;e+=1)s[e].c();P(n,"class","row")},m(e,o){S(e,t,o),S(e,i,o),S(e,n,o);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(n,null);r=!0},p(e,t){if(12&t){let i;for(o=e[2],i=0;i<o.length;i+=1){const r=ev(e,o,i);s[i]?(s[i].p(r,t),ce(s[i],1)):(s[i]=iv(r),s[i].c(),ce(s[i],1),s[i].m(n,null))}for(ae(),i=o.length;i<s.length;i+=1)a(i);le()}},i(e){if(!r){for(let e=0;e<o.length;e+=1)ce(s[e]);r=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ue(s[e]);r=!1},d(e){e&&k(t),e&&k(i),e&&k(n),x(s,e)}}}function iv(e){let t,i,n,r;function o(...t){return e[16](e[23],...t)}return i=new ur({props:{name:e[23].name,description:e[23].description,created:e[23].created,attributes:e[23].attributes,templateId:e[23].templateId,callback:o}}),{c(){t=E("div"),pe(i.$$.fragment),n=T(),P(t,"class","col s4")},m(e,o){S(e,t,o),ve(i,t,null),C(t,n),r=!0},p(t,n){e=t;const r={};4&n&&(r.name=e[23].name),4&n&&(r.description=e[23].description),4&n&&(r.created=e[23].created),4&n&&(r.attributes=e[23].attributes),4&n&&(r.templateId=e[23].templateId),4&n&&(r.callback=o),i.$set(r)},i(e){r||(ce(i.$$.fragment,e),r=!0)},o(e){ue(i.$$.fragment,e),r=!1},d(e){e&&k(t),_e(i)}}}function nv(e){let t,i,n;return i=new ur({props:{name:e[1].name,description:e[1].description,created:e[1].character.created,attributes:e[1].character.attributes}}),{c(){t=E("div"),pe(i.$$.fragment),P(t,"class","col s4")},m(e,r){S(e,t,r),ve(i,t,null),n=!0},p(e,t){const n={};2&t&&(n.name=e[1].name),2&t&&(n.description=e[1].description),2&t&&(n.created=e[1].character.created),2&t&&(n.attributes=e[1].character.attributes),i.$set(n)},i(e){n||(ce(i.$$.fragment,e),n=!0)},o(e){ue(i.$$.fragment,e),n=!1},d(e){e&&k(t),_e(i)}}}function rv(e){let t,i,n,r,o,s,a,c,u,h,d,f,p,v,_,m,g,y,b,w,x,L,M,O,D,A=!e[1].templateSelected&&tv(e),B=e[1].templateSelected&&nv(e);return{c(){t=E("div"),i=E("div"),n=E("h4"),n.textContent="Create new Character",r=T(),A&&A.c(),o=T(),s=E("div"),B&&B.c(),a=T(),c=E("div"),u=E("div"),h=E("input"),d=T(),f=E("label"),f.textContent="Name",p=T(),v=E("div"),_=E("input"),m=T(),g=E("label"),g.textContent="Description",y=T(),b=E("div"),w=E("button"),w.textContent="Cancel",x=T(),L=E("button"),L.textContent="Create",P(h,"id","name"),P(h,"type","text"),P(h,"class","validate svelte-zc7mv9"),P(f,"for","name"),P(f,"class","active"),P(u,"class","input-field"),P(_,"id","description"),P(_,"type","text"),P(_,"class","svelte-zc7mv9"),P(g,"for","description"),P(g,"class","active"),P(v,"class","input-field"),P(c,"class","col s8"),P(s,"class","row"),P(i,"class","modal-content"),P(w,"href","#!"),P(w,"class","modal-close waves-effect waves-red btn"),P(L,"href","#!"),P(L,"class","modal-close waves-effect waves-green btn"),P(b,"class","modal-footer"),P(t,"id","modal1"),P(t,"class","modal svelte-zc7mv9")},m(l,k){S(l,t,k),C(t,i),C(i,n),C(i,r),A&&A.m(i,null),C(i,o),C(i,s),B&&B.m(s,null),C(s,a),C(s,c),C(c,u),C(u,h),I(h,e[1].name),C(u,d),C(u,f),C(c,p),C(c,v),C(v,_),I(_,e[1].description),C(v,m),C(v,g),C(t,y),C(t,b),C(b,w),C(b,x),C(b,L),M=!0,O||(D=[R(h,"input",e[17]),R(_,"input",e[18]),R(L,"click",e[9])],O=!0)},p(e,[t]){e[1].templateSelected?A&&(ae(),ue(A,1,1,()=>{A=null}),le()):A?(A.p(e,t),2&t&&ce(A,1)):(A=tv(e),A.c(),ce(A,1),A.m(i,o)),e[1].templateSelected?B?(B.p(e,t),2&t&&ce(B,1)):(B=nv(e),B.c(),ce(B,1),B.m(s,a)):B&&(ae(),ue(B,1,1,()=>{B=null}),le()),2&t&&h.value!==e[1].name&&I(h,e[1].name),2&t&&_.value!==e[1].description&&I(_,e[1].description)},i(e){M||(ce(A),ce(B),M=!0)},o(e){ue(A),ue(B),M=!1},d(e){e&&k(t),A&&A.d(),B&&B.d(),O=!1,l(D)}}}function ov(e,t,i){let n,r,o,s,a,l,c,u;const h=Se({templateSelected:!1,selectedTemplate:0,character:{},name:"unnamed",description:"Describe your new character"});v(e,h,e=>i(1,o=e));const{isLoading:d,isAuthenticated:f,login:p,logout:_,authToken:m,authError:g,userInfo:y}=Kd();v(e,d,e=>i(15,c=e)),v(e,f,e=>i(14,l=e)),v(e,m,e=>i(11,r=e)),v(e,g,e=>i(13,a=e)),v(e,y,e=>i(12,s=e));U(async()=>{var e,t;document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".modal");M.Modal.init(e,{})}),e=e=>{b.set(e)},t=e=>{console.log(e)},Gp.get(`${Jp}/templates/characters`,{mode:"no-cors",credentials:"same-origin"}).then(t=>e(t.data)).catch(e=>t(e))});const b=Se([]);v(e,b,e=>i(2,u=e));return e.$$.update=()=>{63488&e.$$.dirty&&i(0,n={isLoading:c,isAuthenticated:l,authError:a,userInfo:s?s.name:null,authToken:r.slice(0,20)})},[n,o,u,h,d,f,m,g,y,()=>{const e={name:o.name,description:o.description,templateId:o.selectedTemplate};!function(e,t,i,n){Gp.post(`${Jp}/newcharacter`,t,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:`Bearer ${e}`}}).then(e=>i(e.data)).catch(e=>n(e))}(r,e,e=>console.log("Created character "+e.id),e=>console.log(e))},b,r,s,a,l,c,(e,t)=>{h.update(i=>(i.templateSelected=!0,i.selectedTemplate=t,i.character=e,i.name=e.name,i.description=e.description,i))},function(){o.name=this.value,h.set(o)},function(){o.description=this.value,h.set(o)}]}class sv extends ge{constructor(e){super(),me(this,e,ov,rv,u,{})}}const av=Se(null);function lv(e){let t,i;return t=new Xn({}),t.$on("openAddPanel",e[16]),{c(){pe(t.$$.fragment)},m(e,n){ve(t,e,n),i=!0},p:r,i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){_e(t,e)}}}function cv(e){let t,i;return t=new rr({}),t.$on("close",e[17]),{c(){pe(t.$$.fragment)},m(e,n){ve(t,e,n),i=!0},p:r,i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){_e(t,e)}}}function uv(e){let t,i,n,r,o,s,a,l;t=new sv({}),o=new Vn({props:{store:e[2],sendMessage:e[8],onTerminalReady:e[6],onTerminalInput:e[7]}});let c=e[1]&&lv(e),u=e[0]&&cv(e);return{c(){pe(t.$$.fragment),i=T(),n=E("div"),r=E("div"),pe(o.$$.fragment),s=T(),c&&c.c(),a=T(),u&&u.c(),P(r,"class","grid-container svelte-c8xcqp"),P(n,"class","gameContainer svelte-c8xcqp")},m(e,h){ve(t,e,h),S(e,i,h),S(e,n,h),C(n,r),ve(o,r,null),C(n,s),c&&c.m(n,null),C(n,a),u&&u.m(n,null),l=!0},p(e,[t]){e[1]?c?(c.p(e,t),2&t&&ce(c,1)):(c=lv(e),c.c(),ce(c,1),c.m(n,a)):c&&(ae(),ue(c,1,1,()=>{c=null}),le()),e[0]?u?(u.p(e,t),1&t&&ce(u,1)):(u=cv(e),u.c(),ce(u,1),u.m(n,null)):u&&(ae(),ue(u,1,1,()=>{u=null}),le())},i(e){l||(ce(t.$$.fragment,e),ce(o.$$.fragment,e),ce(c),ce(u),l=!0)},o(e){ue(t.$$.fragment,e),ue(o.$$.fragment,e),ue(c),ue(u),l=!1},d(e){_e(t,e),e&&k(i),e&&k(n),_e(o),c&&c.d(),u&&u.d()}}}function hv(e,t,i){let n,r,o,s,a,l,c,u;v(e,Te,e=>i(15,l=e));let h=[];function d(e){for(const t of h)t(e)}const f=function(){const{subscribe:e,set:t,update:i}=Se({exits:[],actions:[],npcs:[],background:"oldtown-griphon",roomName:"",roomDescription:"",dialogActive:!1,dialogNpcName:"",dialogNpcText:"",dialogOptions:[],dialogConversationID:"",inCombat:!1,hasItems:!1,hasMerchant:!1,inventory:[],equippedItems:{},gold:0}),n={subscribe:e,update:i,set:t,setBackground:e=>{i(t=>(t.background=e,t))},setExits:e=>{i(t=>(t.exits=e||[],t))},setActions:e=>{i(t=>(t.actions=e||[],t))},setNPCs:e=>{i(t=>(t.npcs=e||[],t.hasMerchant=(e||[]).some(e=>e.isMerchant),t))},setRoomInfo:(e,t)=>{i(i=>(i.roomName=e||"",i.roomDescription=t||"",i))},setDialog:(e,t,n,r)=>{i(i=>(i.dialogActive=!0,i.dialogNpcName=e||"",i.dialogNpcText=t||"",i.dialogOptions=n||[],i.dialogConversationID=r||"",i))},clearDialog:()=>{i(e=>(e.dialogActive=!1,e.dialogNpcName="",e.dialogNpcText="",e.dialogOptions=[],e.dialogConversationID="",e))},setInventory:(e,t,n)=>{i(i=>(i.inventory=e&&e.items||[],i.equippedItems=t||{},i.gold=n||0,i))},setGameContext:({inCombat:e,hasItems:t,hasMerchant:n}={})=>{i(i=>(void 0!==e&&(i.inCombat=e),void 0!==t&&(i.hasItems=t),void 0!==n&&(i.hasMerchant=n),i))}};return n}();v(e,f,e=>i(13,s=e));const p=Se({}),{isLoading:_,isAuthenticated:m,authToken:g}=Kd();v(e,_,e=>i(12,o=e)),v(e,m,e=>i(11,r=e)),v(e,g,e=>i(14,a=e));let y=!1;const b=()=>{console.log("CREATE CHARACTER");var e=document.querySelector(".modal");M.Modal.init(e).open()};U(async()=>{document.body.style.backgroundImage="url('/api/backgrounds/oldtown-griphon.png')",document.body.style.backdropFilter="blur(10px) saturate(30%) brightness(50%)";var e=document.querySelector("nav");e&&(e.style.backgroundColor="#00000000"),Te.loadFromStorage()}),q(async()=>{document.body.style.backgroundImage="",document.body.style.backdropFilter="";var e=document.querySelector("nav");e&&(e.style.backgroundColor="#00000055")});return e.$$.update=()=>{if(32768&e.$$.dirty&&i(1,n=l.editMode),32256&e.$$.dirty){if(c&&!u&&!o&&r&&a){console.log("Connecting to websocket with token:",a.slice(0,20)+"...");i(10,u=new WebSocket(Qp+"?access_token="+a)),c.setWSClient(u)}if(s.background){const e="/api/backgrounds/"+s.background+".png",t="/play/img/placeholder.png",i=new Image;i.onload=()=>{document.body.style.backgroundImage="url('"+e+"')"},i.onerror=()=>{document.body.style.backgroundImage="url('"+t+"')"},i.src=e}}},[y,n,f,_,m,g,function(e,t){h.push(t),c||(i(9,c=function(e,t,i){let n,r=new Map,o="",s=i,a={};r.enterRoom=t=>{if(a=t.room,e(t.message),console.log("=== enterRoom message received ==="),console.log("Full room object:",JSON.stringify(a,null,2)),console.log("Raw exits from server:",JSON.stringify(a.exits,null,2)),s){s.setExits(a.exits),s.setRoomInfo(a.name,a.description),null!=a.meta&&null!=a.meta.background&&s.setBackground(a.meta.background),null!=a.actions?s.setActions(a.actions):s.setActions([]),null!=t.npcs?s.setNPCs(t.npcs):s.setNPCs([]);const e=a.items&&a.items.length>0;s.setGameContext({hasItems:e}),s.clearDialog()}},r.createCharacter=i=>{e(i.message),t&&t()},r.characterSelected=t=>{t.character,e(t.message)},r.inventoryUpdate=e=>{s&&s.setInventory(e.inventory,e.equippedItems,e.gold)},r.dialog=t=>{let i="";if(i+=`[${t.npcName}] ${t.npcText}\n`,t.options&&t.options.length>0){i+="\n";for(const e of t.options)i+=`${e.index}. ${e.text}\n`;i+="\nEnter a number to respond:"}e(i),s&&s.setDialog(t.npcName,t.npcText,t.options||[],t.conversationID||"")},r.dialogEnd=t=>{let i="";t.username&&(i+=`[${t.username}] `),i+=t.message,i+="\n[The conversation has ended]",e(i),s&&s.clearDialog()},r.combatStart=t=>{e(t.message),s&&s.setGameContext({inCombat:!0})},r.combatTurn=t=>{e(t.message),s&&s.setGameContext({inCombat:!0})},r.combatAction=t=>{e(t.message)},r.combatStatus=t=>{e(t.message),s&&s.setGameContext({inCombat:!0})},r.combatEnd=t=>{e(t.message),s&&s.setGameContext({inCombat:!1})};const l=t=>{t.addEventListener("message",function(t){var i=JSON.parse(t.data);if(r[i.type])r[i.type](i);else{let t=i.message;if(""===t||"\n"===t)return void console.log("RECEIVED EMPTY MESSAGE");i.username&&(t=i.username+":  "+i.message),e(t)}}),t.addEventListener("close",function(t){e("Connection Closed.")})},c=t=>{n&&(n.readyState!=WebSocket.CLOSING&&n.readyState!=WebSocket.CLOSED||(n=new WebSocket(o),l(n),e("reconnecting ...\n")),n.send(JSON.stringify({message:t,type:"message"})))},u=async e=>`${e}`,h={onInput:async e=>{const t=await u(e);c(t)},setWSClient:async e=>{n=e,o=n.url,l(n)},sendMessage:c};return av.set(h),h}(d,b,f)),p.set(c)),o||r||t("Please log in to connect to the game.")},function(e){c&&c.onInput(e)},function(e){c&&c.sendMessage(e)},c,u,r,o,s,a,l,()=>i(0,y=!0),()=>i(0,y=!1)]}class dv extends ge{constructor(e){super(),me(this,e,hv,uv,u,{})}}const fv=function(){const{subscribe:e,set:t,update:i}=Se({name:"marcus",loggedIn:!1});return{subscribe:e,set:t,logIn:()=>i(e=>(e.loggedIn=!0,e)),logOut:()=>i(e=>(e.loggedIn=!1,e))}}();function pv(e){let t,i,n,o,s,a,c;return{c(){t=E("li"),i=E("p"),i.textContent="Signup",n=T(),o=E("li"),s=E("button"),s.textContent="Log in",P(i,"class","btn-small userbutton green svelte-180recv"),P(t,"class","right-align"),P(s,"class","btn-small userbutton green svelte-180recv"),P(o,"class","right-align")},m(r,l){S(r,t,l),C(t,i),S(r,n,l),S(r,o,l),C(o,s),a||(c=[R(i,"click",e[14]),R(s,"click",e[15])],a=!0)},p:r,d(e){e&&k(t),e&&k(n),e&&k(o),a=!1,l(c)}}}function vv(e){let t;return{c(){t=E("li"),t.textContent="...",P(t,"class","right-align")},m(e,i){S(e,t,i)},p:r,d(e){e&&k(t)}}}function _v(e){let t,i,n,r;return{c(){t=E("img"),n=T(),r=E("i"),r.textContent="arrow_drop_down",d(t.src,i=e[2].picture)||P(t,"src",i),P(t,"alt",""),P(t,"class","circle img  svelte-180recv"),P(r,"class","material-icons left")},m(e,i){S(e,t,i),S(e,n,i),S(e,r,i)},p(e,n){4&n&&!d(t.src,i=e[2].picture)&&P(t,"src",i)},d(e){e&&k(t),e&&k(n),e&&k(r)}}}function mv(e){let t,i,n,o,s,a,c,u,h,d,f,p,v,_,m,g,y,b;function w(e,t){return e[1]?vv:e[0]?void 0:pv}let x=w(e),L=x&&x(e),M=e[0]&&_v(e);return{c(){t=E("ul"),i=E("li"),n=E("a"),n.innerHTML='<i class="material-icons" style="font-size: 1.2em; vertical-align: middle; margin-right: 0.5em;">dashboard_customize</i>\n      Edit Layout',o=T(),s=E("li"),a=E("a"),a.innerHTML='<i class="material-icons" style="font-size: 1.2em; vertical-align: middle; margin-right: 0.5em;">settings</i>\n      Settings',c=T(),u=E("li"),h=T(),d=E("li"),f=E("a"),f.innerHTML='<i class="material-icons" style="font-size: 1.2em; vertical-align: middle; margin-right: 0.5em;">logout</i>\n      Logout',p=T(),L&&L.c(),v=T(),_=E("li"),m=E("a"),g=E("span"),M&&M.c(),P(n,"href","#!"),P(a,"href","#!"),P(u,"class","divider"),P(f,"href","#!"),P(t,"id","dropdown1"),P(t,"class","dropdown-content"),P(g,"class","valign-wrapper"),P(m,"class","dropdown-trigger"),P(m,"href","#"),P(m,"data-target","dropdown1")},m(r,l){S(r,t,l),C(t,i),C(i,n),C(t,o),C(t,s),C(s,a),C(t,c),C(t,u),C(t,h),C(t,d),C(d,f),S(r,p,l),L&&L.m(r,l),S(r,v,l),S(r,_,l),C(_,m),C(m,g),M&&M.m(g,null),y||(b=[R(n,"click",e[11]),R(a,"click",e[12]),R(f,"click",e[13])],y=!0)},p(e,[t]){x===(x=w(e))&&L?L.p(e,t):(L&&L.d(1),L=x&&x(e),L&&(L.c(),L.m(v.parentNode,v))),e[0]?M?M.p(e,t):(M=_v(e),M.c(),M.m(g,null)):M&&(M.d(1),M=null)},i:r,o:r,d(e){e&&k(t),e&&k(p),L&&L.d(e),e&&k(v),e&&k(_),M&&M.d(),y=!1,l(b)}}}function gv(e,t,i){let n,r,o,s;const{isLoading:a,isAuthenticated:l,login:c,logout:u,authToken:h,authError:d,userInfo:f}=Kd();async function p(){var e,t,i;n&&(e=n,t=e=>{fv.set(e)},i=e=>console.error("Failed to load user data:",e),Gp.get(`${Jp}/user`,{mode:"no-cors",credentials:"same-origin",headers:{Authorization:`Bearer ${e}`}}).then(e=>t(e.data)).catch(e=>i(e)))}async function _(){await c()}v(e,a,e=>i(1,o=e)),v(e,l,e=>i(0,r=e)),v(e,h,e=>i(10,n=e)),v(e,f,e=>i(2,s=e)),U(()=>{const e=document.querySelectorAll(".dropdown-trigger");e.length>0&&"undefined"!=typeof M&&M.Dropdown.init(e)});return e.$$.update=()=>{1025&e.$$.dirty&&r&&n&&p()},[r,o,s,a,l,c,u,h,f,_,n,()=>Te.enterEditMode(),()=>It.openModal(),()=>u(),()=>_(),()=>c()]}class yv extends ge{constructor(e){super(),me(this,e,gv,mv,u,{})}}function bv(e,t,i){const n=e.slice();return n[10]=t[i],n}function wv(e){let t,i,n,r,o,s,a,c,u,h,d,f,p,v,_=e[2],m=[];for(let t=0;t<_.length;t+=1)m[t]=Cv(bv(e,_,t));let g="general"===e[0]&&Sv(e),y="interface"===e[0]&&kv(e);return{c(){t=E("div"),i=E("div"),n=E("div"),r=E("div"),r.innerHTML='<i class="material-icons svelte-jwtd3l">settings</i>\n          Settings',o=T(),s=E("button"),s.innerHTML='<i class="material-icons">close</i>',a=T(),c=E("div"),u=E("div");for(let e=0;e<m.length;e+=1)m[e].c();h=T(),d=E("div"),g&&g.c(),f=T(),y&&y.c(),P(r,"class","modal-title svelte-jwtd3l"),P(s,"class","close-btn svelte-jwtd3l"),P(n,"class","modal-header svelte-jwtd3l"),P(u,"class","tabs-sidebar svelte-jwtd3l"),P(d,"class","tab-content svelte-jwtd3l"),P(c,"class","modal-body svelte-jwtd3l"),P(i,"class","modal-container svelte-jwtd3l"),P(t,"class","modal-backdrop svelte-jwtd3l")},m(l,_){S(l,t,_),C(t,i),C(i,n),C(n,r),C(n,o),C(n,s),C(i,a),C(i,c),C(c,u);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(u,null);C(c,h),C(c,d),g&&g.m(d,null),C(d,f),y&&y.m(d,null),p||(v=[R(s,"click",e[3]),R(t,"click",e[4])],p=!0)},p(e,t){if(5&t){let i;for(_=e[2],i=0;i<_.length;i+=1){const n=bv(e,_,i);m[i]?m[i].p(n,t):(m[i]=Cv(n),m[i].c(),m[i].m(u,null))}for(;i<m.length;i+=1)m[i].d(1);m.length=_.length}"general"===e[0]?g?g.p(e,t):(g=Sv(e),g.c(),g.m(d,f)):g&&(g.d(1),g=null),"interface"===e[0]?y?y.p(e,t):(y=kv(e),y.c(),y.m(d,null)):y&&(y.d(1),y=null)},d(e){e&&k(t),x(m,e),g&&g.d(),y&&y.d(),p=!1,l(v)}}}function Cv(e){let t,i,n,r,o,s,a,l,c,u=e[10].icon+"",h=e[10].label+"";function d(){return e[6](e[10])}return{c(){t=E("button"),i=E("i"),n=O(u),r=T(),o=E("span"),s=O(h),a=T(),P(i,"class","material-icons svelte-jwtd3l"),P(o,"class","svelte-jwtd3l"),P(t,"class","tab-btn svelte-jwtd3l"),j(t,"active",e[0]===e[10].id)},m(e,u){S(e,t,u),C(t,i),C(i,n),C(t,r),C(t,o),C(o,s),C(t,a),l||(c=R(t,"click",d),l=!0)},p(i,n){e=i,5&n&&j(t,"active",e[0]===e[10].id)},d(e){e&&k(t),l=!1,c()}}}function Sv(e){let t,i,n,r,o,s,a,l,c,u,h,d,f;return{c(){t=E("div"),i=E("div"),i.textContent="Audio",n=T(),r=E("div"),o=E("div"),o.innerHTML='<div class="setting-label svelte-jwtd3l">Sound Effects</div> \n                  <div class="setting-desc svelte-jwtd3l">Enable game sound effects</div>',s=T(),a=E("label"),l=E("input"),u=T(),h=E("span"),P(i,"class","section-title svelte-jwtd3l"),P(o,"class","setting-info svelte-jwtd3l"),P(l,"type","checkbox"),l.checked=c=e[1].general?.soundEnabled,P(l,"class","svelte-jwtd3l"),P(h,"class","toggle-slider svelte-jwtd3l"),P(a,"class","toggle-switch svelte-jwtd3l"),P(r,"class","setting-item svelte-jwtd3l"),P(t,"class","settings-section svelte-jwtd3l")},m(c,p){S(c,t,p),C(t,i),C(t,n),C(t,r),C(r,o),C(r,s),C(r,a),C(a,l),C(a,u),C(a,h),d||(f=R(l,"change",e[7]),d=!0)},p(e,t){2&t&&c!==(c=e[1].general?.soundEnabled)&&(l.checked=c)},d(e){e&&k(t),d=!1,f()}}}function kv(e){let t,i,n,r,o,s,a,c,u,h,d,f,p,v,_,m,g,y,b,w,x,L;return{c(){t=E("div"),i=E("div"),i.textContent="Room Display",n=T(),r=E("div"),o=E("div"),o.innerHTML='<div class="setting-label svelte-jwtd3l">Parchment Style</div> \n                  <div class="setting-desc svelte-jwtd3l">Use textured parchment background for room descriptions</div>',s=T(),a=E("label"),c=E("input"),h=T(),d=E("span"),f=T(),p=E("div"),v=E("div"),v.innerHTML='<div class="setting-label svelte-jwtd3l">Compact Mode</div> \n                  <div class="setting-desc svelte-jwtd3l">Reduce padding and spacing for smaller screens</div>',_=T(),m=E("label"),g=E("input"),b=T(),w=E("span"),P(i,"class","section-title svelte-jwtd3l"),P(o,"class","setting-info svelte-jwtd3l"),P(c,"type","checkbox"),c.checked=u=e[1].interface?.parchmentBackground,P(c,"class","svelte-jwtd3l"),P(d,"class","toggle-slider svelte-jwtd3l"),P(a,"class","toggle-switch svelte-jwtd3l"),P(r,"class","setting-item svelte-jwtd3l"),P(v,"class","setting-info svelte-jwtd3l"),P(g,"type","checkbox"),g.checked=y=e[1].interface?.compactMode,P(g,"class","svelte-jwtd3l"),P(w,"class","toggle-slider svelte-jwtd3l"),P(m,"class","toggle-switch svelte-jwtd3l"),P(p,"class","setting-item svelte-jwtd3l"),P(t,"class","settings-section svelte-jwtd3l")},m(l,u){S(l,t,u),C(t,i),C(t,n),C(t,r),C(r,o),C(r,s),C(r,a),C(a,c),C(a,h),C(a,d),C(t,f),C(t,p),C(p,v),C(p,_),C(p,m),C(m,g),C(m,b),C(m,w),x||(L=[R(c,"change",e[8]),R(g,"change",e[9])],x=!0)},p(e,t){2&t&&u!==(u=e[1].interface?.parchmentBackground)&&(c.checked=u),2&t&&y!==(y=e[1].interface?.compactMode)&&(g.checked=y)},d(e){e&&k(t),x=!1,l(L)}}}function xv(e){let t,i=e[1].modalOpen&&wv(e);return{c(){i&&i.c(),t=D()},m(e,n){i&&i.m(e,n),S(e,t,n)},p(e,[n]){e[1].modalOpen?i?i.p(e,n):(i=wv(e),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i:r,o:r,d(e){i&&i.d(e),e&&k(t)}}}function Ev(e,t,i){let n;v(e,It,e=>i(1,n=e));let r="general";function o(){It.closeModal()}function s(e,t){const i=n[e]?.[t];It.setSetting(e,t,!i)}return[r,n,[{id:"general",label:"General",icon:"settings"},{id:"interface",label:"Interface",icon:"palette"}],o,function(e){e.target===e.currentTarget&&o()},s,e=>i(0,r=e.id),()=>s("general","soundEnabled"),()=>s("interface","parchmentBackground"),()=>s("interface","compactMode")]}class Lv extends ge{constructor(e){super(),me(this,e,Ev,xv,u,{})}}function Mv(e){let t,i,n,r,o,s,a,l,c,u,h,f,p,v,_,m,g,y,b,w,x;return u=new we({props:{size:"24"}}),m=new yv({}),y=new dv({}),w=new Lv({}),{c(){t=E("link"),i=E("script"),r=E("link"),o=T(),s=E("div"),a=E("a"),l=E("span"),c=E("span"),pe(u.$$.fragment),h=T(),f=O(e[0]),p=T(),v=E("div"),_=E("ul"),pe(m.$$.fragment),g=T(),pe(y.$$.fragment),b=T(),pe(w.$$.fragment),P(t,"rel","stylesheet"),P(t,"href","https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"),d(i.src,n="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js")||P(i,"src","https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"),P(r,"rel","stylesheet"),P(r,"href","https://fonts.googleapis.com/icon?family=Material+Icons"),P(c,"class","iconspacing svelte-1my70aw"),P(l,"class","valign-wrapper italic"),P(a,"href","/"),P(a,"class","back-link svelte-1my70aw"),H(_,"display","flex"),H(_,"list-style","none"),H(_,"margin","0"),H(_,"padding","0"),H(v,"position","absolute"),H(v,"right","15px"),H(v,"top","15px"),H(v,"z-index","1000"),P(s,"class","root default")},m(e,n){C(document.head,t),C(document.head,i),C(document.head,r),S(e,o,n),S(e,s,n),C(s,a),C(a,l),C(l,c),ve(u,c,null),C(l,h),C(l,f),C(s,p),C(s,v),C(v,_),ve(m,_,null),C(s,g),ve(y,s,null),C(s,b),ve(w,s,null),x=!0},p(e,[t]){(!x||1&t)&&B(f,e[0])},i(e){x||(ce(u.$$.fragment,e),ce(m.$$.fragment,e),ce(y.$$.fragment,e),ce(w.$$.fragment,e),x=!0)},o(e){ue(u.$$.fragment,e),ue(m.$$.fragment,e),ue(y.$$.fragment,e),ue(w.$$.fragment,e),x=!1},d(e){k(t),k(i),k(r),e&&k(o),e&&k(s),_e(u),_e(m),_e(y),_e(w)}}}function Ov(e,t,i){let n,r;const{isLoading:o,isAuthenticated:s,authToken:a}=Vd({domain:"owndnd.eu.auth0.com",client_id:"mxcEqTuAUOzrL798mbVTpqFxpGGVp3gI",audience:"http://talesofapirate.com/dnd/api"});v(e,s,e=>i(4,r=e)),v(e,a,e=>i(3,n=e));let l="Tales";return String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},U(async()=>{var e,t;e=e=>{e.serverName&&i(0,l=e.serverName)},t=e=>console.warn("Could not load server info:",e),Gp.get(`${Jp}/server-info`,{mode:"no-cors",credentials:"same-origin"}).then(t=>e(t.data)).catch(e=>{t&&t(e)})}),e.$$.update=()=>{24&e.$$.dirty&&n.slice(0,20)},[l,s,a,n,r]}Object.defineProperty(String.prototype,"hashCode",{value:function(){var e,t=0;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t}});const Tv=new class extends ge{constructor(e){super(),me(this,e,Ov,Mv,u,{})}}({target:document.body,props:{}});return M.AutoInit(),Tv}();
//# sourceMappingURL=bundle.js.map
